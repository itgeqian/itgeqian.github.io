<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>é€Ÿé€šSpring AI Alibaba  | geqian's BlogğŸ­</title><meta name="keywords" content="Spring AI Alibaba"><meta name="author" content="geqian's BlogğŸ­"><meta name="copyright" content="geqian's BlogğŸ­"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="é€Ÿé€šSpring AI Alibaba å®Œç»“">
<meta property="og:type" content="article">
<meta property="og:title" content="é€Ÿé€šSpring AI Alibaba ">
<meta property="og:url" content="https://itgeqian.github.io/posts/60.html">
<meta property="og:site_name" content="geqian&#39;s BlogğŸ­">
<meta property="og:description" content="é€Ÿé€šSpring AI Alibaba å®Œç»“">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp">
<meta property="article:published_time" content="2025-09-30T09:09:03.000Z">
<meta property="article:modified_time" content="2025-10-02T12:01:00.000Z">
<meta property="article:author" content="geqian&#39;s BlogğŸ­">
<meta property="article:tag" content="Spring AI Alibaba">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://itgeqian.github.io/posts/60"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'é€Ÿé€šSpring AI Alibaba ',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-10-02 20:01:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><script src="https://cdn.jsdelivr.net/npm/echarts@6/dist/echarts.min.js"></script><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper@1.0.12/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper@1.0.12/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="geqian's BlogğŸ­" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/assets/avatar.png" onerror="onerror=null;src='/assets/r1.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">81</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">51</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">18</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">geqian's BlogğŸ­</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span> æœç´¢</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="ç¾åŒ–è®¾ç½®-è‡ªå®šä¹‰ä½ çš„é£æ ¼" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">é€Ÿé€šSpring AI Alibaba </h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">å‘è¡¨äº </span><time class="post-meta-date-created" datetime="2025-09-30T09:09:03.000Z" title="å‘è¡¨äº 2025-09-30 17:09:03">2025-09-30</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-10-02T12:01:00.000Z" title="æ›´æ–°äº 2025-10-02 20:01:00">2025-10-02</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/AI/">AI</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">3w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>160åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="é€Ÿé€šSpring AI Alibaba "><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="1-Spring-AI-Alibabaç†è®ºæ¦‚è¿°">1.Spring AI Alibabaç†è®ºæ¦‚è¿°</h2>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-271.png" alt="img"></p>
<h3 id="1-æ˜¯ä»€ä¹ˆ">1.æ˜¯ä»€ä¹ˆ</h3>
<h4 id="ä»€ä¹ˆæ˜¯-Spring-AI-Alibaba">ä»€ä¹ˆæ˜¯ Spring AI Alibaba</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-273.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-272.png" alt="img"></p>
<h4 id="SAAå…¬å¼åŒ–ä¸€å¥è¯è¡¨è¾¾">SAAå…¬å¼åŒ–ä¸€å¥è¯è¡¨è¾¾</h4>
<p>Spring AI Alibaba å¼€æºé¡¹ç›®åŸºäº Spring AI æ„å»ºï¼Œæ˜¯é˜¿é‡Œäº‘é€šä¹‰ç³»åˆ—æ¨¡å‹åŠæœåŠ¡åœ¨ Java AI åº”ç”¨å¼€å‘é¢†åŸŸçš„æœ€ä½³å®è·µï¼Œæä¾›é«˜å±‚æ¬¡çš„ AI API æŠ½è±¡ä¸äº‘åŸç”ŸåŸºç¡€è®¾æ–½é›†æˆæ–¹æ¡ˆå’Œä¼ä¸šçº§ AI åº”ç”¨ç”Ÿæ€é›†æˆã€‚</p>
<h4 id="å®˜ç½‘çŸ¥è¯†å‡ºå¤„">å®˜ç½‘çŸ¥è¯†å‡ºå¤„</h4>
<p>SpringAIå®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://spring.io/projects/spring-ai#learn">https://spring.io/projects/spring-ai#learn</a></p>
<p>Spring AI Alibaba 1.0 GA æ­£å¼å‘å¸ƒï¼š<a target="_blank" rel="noopener" href="https://java2ai.com/">https://java2ai.com/</a></p>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/blog/spring-ai-alibaba-10-ga-release/?spm=5176.29160081.0.0.2856aa5cww2t9D">https://java2ai.com/blog/spring-ai-alibaba-10-ga-release/?spm=5176.29160081.0.0.2856aa5cww2t9D</a></p>
<p>é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°ï¼š<a target="_blank" rel="noopener" href="https://bailian.console.aliyun.com/console?tab=model#/model-market">https://bailian.console.aliyun.com/console?tab=model#/model-market</a></p>
<h3 id="2-èƒ½å¹²å˜›">2.èƒ½å¹²å˜›</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-274-1024x286.png" alt="img"></p>
<p>Spring AI Alibaba åŸºäº Spring AI æ„å»ºï¼Œå› æ­¤SAAç»§æ‰¿äº†SpringAI çš„æ‰€æœ‰åŸå­èƒ½åŠ›æŠ½è±¡å¹¶åœ¨æ­¤<br>
åŸºç¡€ä¸Šæ‰©å……ä¸°å¯Œäº†æ¨¡å‹ã€å‘é‡å­˜å‚¨ã€è®°å¿†ã€RAG ç­‰æ ¸å¿ƒç»„ä»¶é€‚é…ï¼Œè®©å…¶èƒ½å¤Ÿæ¥å…¥é˜¿é‡Œäº‘çš„ AI ç”Ÿæ€ã€‚</p>
<h3 id="3-å»å“ªä¸‹">3.å»å“ªä¸‹</h3>
<p>Spring AI å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://spring.io/projects/spring-ai#overview">https://spring.io/projects/spring-ai#overview</a><br>
Spring AI Alibaba å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://java2ai.com">https://java2ai.com</a><br>
Spring AI Alibaba ä»“åº“ï¼š<a target="_blank" rel="noopener" href="https://github.com/alibaba/spring-ai-alibaba">https://github.com/alibaba/spring-ai-alibaba</a><br>
Spring AI Alibaba å®˜æ–¹ç¤ºä¾‹ä»“åº“ï¼š<a target="_blank" rel="noopener" href="https://github.com/springaialibaba/spring-ai-alibaba-examples">https://github.com/springaialibaba/spring-ai-alibaba-examples</a><br>
Spring AI 1.0 GA æ–‡ç« ï¼š<a target="_blank" rel="noopener" href="https://java2ai.com/blog/spring-ai-100-ga-released">https://java2ai.com/blog/spring-ai-100-ga-released</a><br>
Spring AI ä»“åº“ï¼š<a target="_blank" rel="noopener" href="https://github.com/spring-projects/spring-ai">https://github.com/spring-projects/spring-ai</a></p>
<h3 id="4-æ€ä¹ˆç”¨">4.æ€ä¹ˆç”¨</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-276-1024x580.png" alt="img"></p>
<h3 id="5-SpringAI-VS-SpringAI-Alibaba-VS-LangChain4J">5.SpringAI VS SpringAI Alibaba VS LangChain4J</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-278.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-277.png" alt="img"></p>
<h2 id="2-æ°¸è¿œçš„HelloWorld">2.æ°¸è¿œçš„HelloWorld</h2>
<h3 id="1-å‰ç½®çº¦å®š">1.å‰ç½®çº¦å®š</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-279.png" alt="img"></p>
<h4 id="SpringAI-Alibaba-ä¸-SpringAIã€SpringBootç‰ˆæœ¬ä¾èµ–å…³ç³»">SpringAI Alibaba ä¸ SpringAIã€SpringBootç‰ˆæœ¬ä¾èµ–å…³ç³»</h4>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/faq/?spm=4347728f.6d9f13c1.0.0.17177187POpLHJ#%E6%80%8E%E4%B9%88%E7%A1%AE%E5%AE%9A-spring-ai-alibaba-%E4%B8%8E-spring-aispring-boot-%E7%89%88%E6%9C%AC%E7%9A%84%E5%85%BC%E5%AE%B9%E5%85%B3%E7%B3%BB">https://java2ai.com/docs/1.0.0.2/faq/?spm=4347728f.6d9f13c1.0.0.17177187POpLHJ#%E6%80%8E%E4%B9%88%E7%A1%AE%E5%AE%9A-spring-ai-alibaba-%E4%B8%8E-spring-aispring-boot-%E7%89%88%E6%9C%AC%E7%9A%84%E5%85%BC%E5%AE%B9%E5%85%B3%E7%B3%BB</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-280.png" alt="img"></p>
<h4 id="é…ç½®é—¨é“å’Œå…³é”®ç‚¹">é…ç½®é—¨é“å’Œå…³é”®ç‚¹</h4>
<p>é€šè¿‡åç»­è®²è§£é…ç½®è§„åˆ™ï¼Œæ‰€æœ‰è°ƒç”¨å‡åŸºäº OpenAIåè®®æ ‡å‡†æˆ–è€…SpringAI Aalibabaå®˜æ–¹æ¨èæ¨¡å‹æœåŠ¡çµç§¯(DashScope)æ•´åˆè§„åˆ™ï¼Œå®ç°ä¸€è‡´çš„æ¥å£è®¾è®¡ä¸è§„èŒƒï¼Œç¡®ä¿å¤šæ¨¡å‹åˆ‡æ¢çš„ä¾¿åˆ©æ€§ï¼Œæä¾›é«˜åº¦å¯æ‰©å±•çš„å¼€å‘æ”¯æŒ</p>
<h3 id="2-é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°å…¥å£å®˜ç½‘">2.é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°å…¥å£å®˜ç½‘</h3>
<h4 id="æ¥å…¥é˜¿é‡Œç™¾ç‚¼å¹³å°çš„é€šä¹‰æ¨¡å‹">æ¥å…¥é˜¿é‡Œç™¾ç‚¼å¹³å°çš„é€šä¹‰æ¨¡å‹</h4>
<p><a target="_blank" rel="noopener" href="https://bailian.console.aliyun.com">https://bailian.console.aliyun.com</a></p>
<p>å¤§æ¨¡å‹è°ƒç”¨ä¸‰ä»¶å¥—</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-281.png" alt="img"></p>
<p>å°æ€»ç»“</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-282.png" alt="img"></p>
<h3 id="3-IDEAå·¥å…·ä¸­å»ºprojectçˆ¶å·¥ç¨‹">3.IDEAå·¥å…·ä¸­å»ºprojectçˆ¶å·¥ç¨‹</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-283-645x1024.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/starters-and-quick-guide/?spm=5176.29160081.0.0.2856aa5c0l3sEA#%E4%BD%BF%E7%94%A8-bom-%E7%AE%A1%E7%90%86%E4%BE%9D%E8%B5%96%E7%89%88%E6%9C%AC">https://java2ai.com/docs/1.0.0.2/tutorials/starters-and-quick-guide/?spm=5176.29160081.0.0.2856aa5c0l3sEA#%E4%BD%BF%E7%94%A8-bom-%E7%AE%A1%E7%90%86%E4%BE%9D%E8%B5%96%E7%89%88%E6%9C%AC</a></p>
<p>åˆå§‹æ€»POM</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>SpringAIAlibaba-Mavençˆ¶å·¥ç¨‹POMé…ç½®<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    </span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.reporting.outputEncoding</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>21<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Spring Boot æ–°å»º2025.9--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">spring-boot.version</span>&gt;</span>3.5.5<span class="tag">&lt;/<span class="name">spring-boot.version</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Spring AI æ–°å»º2025.9--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">spring-ai.version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">spring-ai.version</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- Spring AI Alibaba æ–°å»º2025.9--&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">SpringAIAlibaba.version</span>&gt;</span>1.0.0.2<span class="tag">&lt;/<span class="name">SpringAIAlibaba.version</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="comment">&lt;!-- Spring Boot --&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$</span><span class="template-variable">&#123;spring-boot.version&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="comment">&lt;!-- Spring AI Alibaba --&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-bom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$</span><span class="template-variable">&#123;SpringAIAlibaba.version&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="comment">&lt;!-- Spring AI --&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-bom<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$</span><span class="template-variable">&#123;spring-ai.version&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$</span><span class="template-variable">&#123;spring-boot.version&#125;</span><span class="language-xml"><span class="tag">&lt;/<span class="name">version</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h4 id="1-å»ºModule">1.å»ºModule</h4>
<h4 id="2-æ”¹POM">2.æ”¹POM</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-01HelloWorld<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- å¼•å…¥ springai alibaba DashScope æ¨¡å‹é€‚é…çš„ Starter --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-å†™YML">3.å†™YML</h4>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8001</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#å¤§æ¨¡å‹å¯¹è¯ä¸­æ–‡ä¹±ç UTF8ç¼–ç å¤„ç†</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">01</span>HelloWorld</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.base-url</span>=https://dashscope.aliyuncs.com/compatible-mode/v1</span><br><span class="line"><span class="attr">spring.ai.dashscope.chat.options.model</span>=qwen-plus</span><br></pre></td></tr></table></figure>
<h4 id="4-ä¸»å¯åŠ¨">4.ä¸»å¯åŠ¨</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa01HelloWorldApplication</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa01HelloWorldApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-ä¸šåŠ¡ç±»">4.ä¸šåŠ¡ç±»</h3>
<p>ApiKeyä¸å¯ä»¥æ˜æ–‡éœ€é…ç½®è¿›ç¯å¢ƒå˜é‡</p>
<p>é…ç½®ç±»SaaLLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-22 0:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*æ–¹å¼1</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    1.1</span></span><br><span class="line"><span class="comment">    ymlæ–‡ä»¶é…ç½®ï¼šspring.ai.dashscope.api-key=$&#123;aliQwen-api&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    1.2</span></span><br><span class="line"><span class="comment">    @Value(&quot;$&#123;spring.ai.dashscope.api-key&#125;&quot;)</span></span><br><span class="line"><span class="comment">    private String apiKey;ã€</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    1.3</span></span><br><span class="line"><span class="comment">    @Bean</span></span><br><span class="line"><span class="comment">    public DashScopeApi dashScopeApi()</span></span><br><span class="line"><span class="comment">    &#123;</span></span><br><span class="line"><span class="comment">        return DashScopeApi.builder().apiKey(apiKey).build();</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–¹å¼2</span></span><br><span class="line"><span class="comment">     * ymlæ–‡ä»¶é…ç½®ï¼šspring.ai.dashscope.api-key=$&#123;aliQwen-api&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DashScopeApi dashScopeApi()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeApi.builder()</span><br><span class="line">                    .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ–¹å¼1ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-22 0:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–¹å¼1:$&#123;&#125;</span></span><br><span class="line"><span class="comment">     * æŒæœ‰ymlæ–‡ä»¶é…ç½®ï¼šspring.ai.dashscope.api-key=$&#123;aliQwen-api&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;<span class="subst">$&#123;spring.ai.dashscope.api-key&#125;</span>&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> String apiKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DashScopeApi dashScopeApi()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeApi.builder().apiKey(apiKey).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ–¹å¼2ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-22 0:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–¹å¼2:System.getenv(&quot;ç¯å¢ƒå˜é‡&quot;)</span></span><br><span class="line"><span class="comment">     * æŒæœ‰ymlæ–‡ä»¶é…ç½®ï¼šspring.ai.dashscope.api-key=$&#123;aliQwen-api&#125;</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DashScopeApi dashScopeApi()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeApi.builder()</span><br><span class="line">                    .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-å¯¹è¯æ¨¡å‹-Chat-Model">1.å¯¹è¯æ¨¡å‹(Chat Model)</h4>
<p>ChatModelï¼Œæ–‡æœ¬èŠå¤©äº¤äº’æ¨¡å‹</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-284.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-285.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/chat-model/?spm=5176.29160081.0.0.2856aa5ctpxysy">https://java2ai.com/docs/1.0.0.2/tutorials/basics/chat-model/?spm=5176.29160081.0.0.2856aa5ctpxysy</a></p>
<h4 id="2-controller">2.controller</h4>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-22 0:47</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatHelloController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span> <span class="comment">//é˜¿é‡Œäº‘ç™¾ç‚¼</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel dashScopeChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8001/hello/dochat</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/hello/dochat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String doChat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        String result = dashScopeChatModel.call(msg);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;å“åº”ï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  http://localhost:8001/hello/streamchat</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/hello/streamchat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; streamChat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> dashScopeChatModel.stream(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-æµ‹è¯•">3.æµ‹è¯•</h4>
<p><a target="_blank" rel="noopener" href="http://localhost:8001/hello/dochat">http://localhost:8001/hello/dochat</a></p>
<p><a target="_blank" rel="noopener" href="http://localhost:8001/hello/streamchat">http://localhost:8001/hello/streamchat</a></p>
<h4 id="4-åˆ‡æ¢å¤§æ¨¡å‹">4.åˆ‡æ¢å¤§æ¨¡å‹</h4>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8001</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">01</span>HelloWorld</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.chat.options.model</span>=deepseek-v3</span><br></pre></td></tr></table></figure>
<h4 id="5-å’ŒOpenAIåè®®å¯¹æ¯”ä¸‹">5.å’ŒOpenAIåè®®å¯¹æ¯”ä¸‹</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-286-1024x727.png" alt="img"></p>
<h2 id="3-Ollamaç§æœ‰åŒ–éƒ¨ç½²å’Œå¯¹æ¥æœ¬åœ°å¤§æ¨¡å‹">3.Ollamaç§æœ‰åŒ–éƒ¨ç½²å’Œå¯¹æ¥æœ¬åœ°å¤§æ¨¡å‹</h2>
<h3 id="1-Ollamaæœ¬åœ°å¤§æ¨¡å‹éƒ¨ç½²">1.Ollamaæœ¬åœ°å¤§æ¨¡å‹éƒ¨ç½²</h3>
<p>ç•¥</p>
<h3 id="2-å¾®æœåŠ¡å¯¹æ¥æœ¬åœ°å¤§æ¨¡å‹">2.å¾®æœåŠ¡å¯¹æ¥æœ¬åœ°å¤§æ¨¡å‹</h3>
<h4 id="æ”¹POM">æ”¹POM</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-02Ollama<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--ollama--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-starter-model-ollama<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="å†™YML">å†™YML</h4>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8002</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">02</span>Ollama</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====ollama Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br><span class="line"><span class="attr">spring.ai.ollama.base-url</span>=http://localhost:<span class="number">11434</span></span><br><span class="line"><span class="attr">spring.ai.ollama.chat.	model</span>=qwen2.<span class="number">5</span>:latest </span><br></pre></td></tr></table></figure>
<p>ä¸»å¯åŠ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> <span class="variable">zzyy</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-22 18:50</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa02OllamaApplication</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa02OllamaApplication</span>.<span class="property">class</span>,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸šåŠ¡ç±»">ä¸šåŠ¡ç±»</h4>
<p>controller</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-22 18:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OllamaController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;oll	amaChatModel&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel chatModel;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8002/ollama/chat?msg=ä½ æ˜¯è°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/ollama/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String chat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        String result = chatModel.call(msg);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;---ç»“æœï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/ollama/streamchat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; streamchat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> chatModel.stream(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ–è€…</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-22 18:56</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OllamaController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/*@Resource(name = &quot;ollamaChatModel&quot;)</span></span><br><span class="line"><span class="comment">    private ChatModel chatModel;*/</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–¹å¼2</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="meta">@Qualifier(<span class="string">&quot;ollamaChatModel&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel chatModel;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8002/ollama/chat?msg=ä½ æ˜¯è°</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/ollama/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String chat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        String result = chatModel.call(msg);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;---ç»“æœï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/ollama/streamchat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; streamchat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> chatModel.stream(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-ChatClient-VS-ChatModel">4.ChatClient VS ChatModel</h2>
<p>1.é—®é¢˜å›é¡¾ï¼š</p>
<p>ä¹‹å‰çš„è°ƒç”¨éƒ½æ˜¯ä½¿ç”¨ChatModelè¿›è¡Œ</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-287.png" alt="img"></p>
<p>è®¤è¯†ä¸€ä¸ªæ–°çš„æ¥å£ChatClient</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-288.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-289.png" alt="img"></p>
<h3 id="1-ChatModel">1.ChatModel</h3>
<h4 id="å®˜ç½‘">å®˜ç½‘</h4>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/chat-model/?spm=5176.29160081.0.0.2856aa5cmUTyXC">https://java2ai.com/docs/1.0.0.2/tutorials/basics/chat-model/?spm=5176.29160081.0.0.2856aa5cmUTyXC</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-290.png" alt="img"></p>
<h4 id="è¯´æ˜">è¯´æ˜</h4>
<p>å¯¹è¯æ¨¡å‹(ChatModel)æ˜¯åº•å±‚æ¥å£ï¼Œç›´æ¥ä¸å…·ä½“å¤§è¯­è¨€æ¨¡å‹äº¤äº’ï¼Œ<br>
æä¾›call()å’Œstream()æ–¹æ³•ï¼Œ<strong>é€‚åˆç®€å•å¤§æ¨¡å‹äº¤äº’åœºæ™¯</strong></p>
<h3 id="2-ChatClient">2.ChatClient</h3>
<h4 id="å®˜ç½‘-2">å®˜ç½‘</h4>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/chat-client/?spm=5176.29160081.0.0.2856aa5cmUTyXC">https://java2ai.com/docs/1.0.0.2/tutorials/basics/chat-client/?spm=5176.29160081.0.0.2856aa5cmUTyXC</a></p>
<p>ä½•ä¸ºæ ·æ¿ä»£ç ï¼Ÿ<br>
ChatClientå¯¹ChatModelåæ§½</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-291.png" alt="img"></p>
<h4 id="è¯´æ˜-2">è¯´æ˜</h4>
<p>ChatClientæ˜¯é«˜çº§å°è£…ï¼ŒåŸºäºChatModelæ„å»ºï¼Œé€‚åˆå¿«é€Ÿæ„å»ºæ ‡å‡†åŒ–å¤æ‚AIæœåŠ¡ï¼Œæ”¯æŒåŒæ­¥å’Œæµå¼äº¤äº’ï¼Œé›†æˆå¤šç§é«˜çº§åŠŸèƒ½ã€‚</p>
<h4 id="ç¼–ç æ¡ˆä¾‹">ç¼–ç æ¡ˆä¾‹</h4>
<p>æ”¹POM</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-03ChatModelChatClient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8003</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">03</span>ChatModelChatClient</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸»å¯åŠ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa03ChatModelChatClientApplication</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa03ChatModelChatClientApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ä¸šåŠ¡ç±»ç¬¬1ç‰ˆ">ä¸šåŠ¡ç±»ç¬¬1ç‰ˆ</h5>
<p>Only ChatModel</p>
<p>æ–°å»ºé…ç½®ç±» SaaLLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-22 0:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DashScopeApi dashScopeApi()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeApi.builder().apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>)).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>controller</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-23 18:20</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatModelController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span> <span class="comment">//é˜¿é‡Œäº‘ç™¾ç‚¼</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel dashScopeChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/chatmodel/dochat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String doChat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        String result = dashScopeChatModel.call(msg);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;å“åº”ï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿›ä¸€æ­¥æ–°å¢ChatClient</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-292.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-293-1024x277.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-294.png" alt="img"></p>
<h5 id="ä¸šåŠ¡ç±»ç¬¬2ç‰ˆ">ä¸šåŠ¡ç±»ç¬¬2ç‰ˆ</h5>
<p>çŸ¥è¯†å‡ºå¤„</p>
<p>chatæºç ï¼š<a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/spring-ai-sourcecode-explained/chapter-1-chat-first-experience/?spm=5176.29160081.0.0.2856aa5cbeDVer">https://java2ai.com/docs/1.0.0.2/spring-ai-sourcecode-explained/chapter-1-chat-first-experience/?spm=5176.29160081.0.0.2856aa5cbeDVer</a></p>
<p>ChatClientä½¿ç”¨ï¼š<a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/chat-client/?spm=5176.29160081.0.0.2856aa5cmUTyXC#%E5%88%9B%E5%BB%BA-chatclient">https://java2ai.com/docs/1.0.0.2/tutorials/basics/chat-client/?spm=5176.29160081.0.0.2856aa5cmUTyXC#%E5%88%9B%E5%BB%BA-chatclient</a></p>
<p>Only ChatClient</p>
<p>æ–°å»ºChatClientController</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-23 19:22</span></span><br><span class="line"><span class="comment"> * çŸ¥è¯†å‡ºå¤„ï¼š</span></span><br><span class="line"><span class="comment"> * https://java2ai.com/docs/1.0.0.2/tutorials/basics/chat-client/?spm=5176.29160081.0.0.2856aa5cmUTyXC#%E5%88%9B%E5%BB%BA-chatclient</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatClientController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ChatClient dashScopechatClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä½¿ç”¨è‡ªåŠ¨é…ç½®çš„ ChatClient.Builder</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dashscopeChatModel</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> ChatClientController(ChatModel dashscopeChatModel)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.dashScopechatClient = ChatClient.builder(dashscopeChatModel).build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8003/chatclient/dochat</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/chatclient/dochat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String doChat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;2åŠ 4ç­‰äºå‡ &quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        String result = dashScopechatClient.prompt().user(msg).call().content();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;å“åº”ï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ChatModelå¯¹ChatClientåæ§½ï¼šç¦»å¼€æˆ‘ä½ ä»€ä¹ˆéƒ½ä¸æ˜¯ï¼ŒChatModelæ˜¯ChatClientçš„åº•å±‚</p>
<h5 id="ä¸šåŠ¡ç±»ç¬¬3ç‰ˆ">ä¸šåŠ¡ç±»ç¬¬3ç‰ˆ</h5>
<p>ChatModel + ChatClientæ··åˆä½¿ç”¨</p>
<p>ä¿®æ”¹é…ç½®ç±»SaaLLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-22 0:51</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DashScopeApi dashScopeApi()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeApi.builder()</span><br><span class="line">                    .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * çŸ¥è¯†å‡ºå¤„ï¼š</span></span><br><span class="line"><span class="comment">     * https://java2ai.com/docs/1.0.0.2/tutorials/basics/chat-client/?spm=5176.29160081.0.0.2856aa5cmUTyXC#%E5%88%9B%E5%BB%BA-chatclient</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> dashscopeChatModel</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient chatClient(ChatModel dashscopeChatModel)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(dashscopeChatModel).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<p>æ–°å»ºChatClientControllerV2</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-23 19:31</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatClientControllerV2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * chatModel + ChatClient æ··åˆä½¿ç”¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel chatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient dashScopechatClientv2;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8003/chatclientv2/dochat</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/chatclientv2/dochat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String doChat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        String result = dashScopechatClientv2.prompt().user(msg).call().content();</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ChatClientå“åº”ï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8003/chatmodelv2/dochat</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/chatmodelv2/dochat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String doChat2(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        String result = chatModel.call(msg);</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ChatModelå“åº”ï¼š&quot;</span> + result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å°æ€»ç»“</p>
<p>ç”Ÿäº§æ¨èï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-295.png" alt="img"></p>
<h2 id="5-Server-SentEvents-SSE-å®ç°Streamæµå¼è¾“å‡ºåŠå¤šæ¨¡å‹å…±å­˜">5.Server-SentEvents(SSE)å®ç°Streamæµå¼è¾“å‡ºåŠå¤šæ¨¡å‹å…±å­˜</h2>
<h3 id="1-Response-Streamingæµå¼è¾“å‡º">1.Response Streamingæµå¼è¾“å‡º</h3>
<h4 id="æµå¼è¾“å‡º-StreamingOutput">æµå¼è¾“å‡º(StreamingOutput)</h4>
<p>æ˜¯ä¸€ç§<strong>é€æ­¥è¿”å›å¤§æ¨¡å‹ç”Ÿæˆç»“æœ</strong>çš„æŠ€æœ¯ï¼Œç”Ÿæˆä¸€ç‚¹è¿”å›ä¸€ç‚¹ï¼Œå…è®¸æœåŠ¡å™¨å°†å“åº”å†…å®¹<br>
<strong>åˆ†æ‰¹æ¬¡å®æ—¶ä¼ è¾“ç»™å®¢æˆ·ç«¯</strong>ï¼Œè€Œä¸æ˜¯ç­‰å¾…å…¨éƒ¨å†…å®¹ç”Ÿæˆå®Œæ¯•åå†ä¸€æ¬¡æ€§è¿”å›ã€‚</p>
<p>è¿™ç§æœºåˆ¶èƒ½æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒï¼Œ<strong>å°¤å…¶é€‚ç”¨äºå¤§æ¨¡å‹å“åº”è¾ƒæ…¢çš„åœºæ™¯</strong>ï¼ˆå¦‚ç”Ÿæˆé•¿æ–‡æœ¬æˆ–å¤æ‚æ¨ç†ç»“æœï¼‰ã€‚</p>
<h4 id="SpringAI-Alibabaæµå¼è¾“å‡ºæœ‰ä¸¤ç§">SpringAI Alibabaæµå¼è¾“å‡ºæœ‰ä¸¤ç§</h4>
<ul>
<li>é€šè¿‡ChatModelå®ç°streamå®ç°æµå¼è¾“å‡º</li>
<li>é€šè¿‡ChatClientå®ç°streamå®ç°æµå¼è¾“å‡º</li>
</ul>
<h3 id="2-SSE-Server-Sent-Events-æœåŠ¡å™¨å‘é€äº‹ä»¶">2.SSE(Server-Sent Events)æœåŠ¡å™¨å‘é€äº‹ä»¶</h3>
<p>Server-Sentï¼šç”±æœåŠ¡å™¨å‘é€ã€‚</p>
<p>Eventsï¼šäº‹ä»¶ï¼ŒæŒ‡æœåŠ¡å™¨ä¸»åŠ¨æ¨é€ç»™å®¢æˆ·ç«¯çš„æ•°æ®æˆ–æ¶ˆæ¯</p>
<h4 id="Server-SentEvents-SSE-æœåŠ¡å™¨å‘é€äº‹ä»¶å®ç°æµå¼è¾“å‡º">Server-SentEvents(SSE)æœåŠ¡å™¨å‘é€äº‹ä»¶å®ç°æµå¼è¾“å‡º</h4>
<p>Server-Sent Events (SSE) æ˜¯ä¸€ç§å…è®¸<strong>æœåŠ¡ç«¯å¯ä»¥æŒç»­æ¨é€æ•°æ®ç‰‡æ®µï¼ˆå¦‚é€è¯æˆ–é€å¥ï¼‰åˆ°å‰ç«¯</strong>çš„ Web æŠ€æœ¯ã€‚<strong>é€šè¿‡å•å‘çš„HTTPé•¿è¿æ¥</strong>ï¼Œä½¿ç”¨ä¸€ä¸ªé•¿æœŸå­˜åœ¨çš„è¿æ¥ï¼Œè®©æœåŠ¡å™¨å¯ä»¥ä¸»åŠ¨å°†æ•°æ®&quot;æ¨&quot;ç»™å®¢æˆ·ç«¯ï¼ŒSSEæ˜¯è½»é‡çº§çš„å•å‘é€šä¿¡åè®®ï¼Œé€‚åˆAIå¯¹è¯è¿™ç±»æœåŠ¡ç«¯ä¸»å¯¼çš„åœºæ™¯</p>
<p>æ ¸å¿ƒæ¦‚å¿µ<br>
SSE çš„æ ¸å¿ƒæ€æƒ³æ˜¯ï¼šå®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼ŒæœåŠ¡å™¨ä¿æŒè¿™ä¸ªè¿æ¥æ‰“å¼€å¹¶åœ¨æœ‰æ–°æ•°æ®æ—¶ï¼Œé€šè¿‡è¿™ä¸ªè¿æ¥å°†æ•°æ®å‘é€ç»™å®¢æˆ·ç«¯ã€‚è¿™ä¸ä¼ ç»Ÿçš„è¯·æ±‚-å“åº”æ¨¡å¼ï¼ˆå®¢æˆ·ç«¯è¯·æ±‚ä¸€æ¬¡ï¼ŒæœåŠ¡å™¨å“åº”ä¸€æ¬¡ï¼Œè¿æ¥å…³é—­ï¼‰æœ‰æœ¬è´¨åŒºåˆ«ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-296.png" alt="img"></p>
<p>æ€»ç»“æ¥è¯´ï¼šSSEå°±æ˜¯ä¸€ç§è®©æœåŠ¡å™¨èƒ½å¤Ÿä¸»åŠ¨ã€æŒç»­åœ°å‘å®¢æˆ·ç«¯ï¼ˆæ¯”å¦‚ä½ çš„ç½‘é¡µæµè§ˆå™¨ï¼‰æ¨é€æ•°æ®çš„æŠ€æœ¯</p>
<h4 id="SSEé€‚ç”¨åœºæ™¯">SSEé€‚ç”¨åœºæ™¯</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-297.png" alt="img"></p>
<h3 id="3-å¼€å‘æ­¥éª¤">3.å¼€å‘æ­¥éª¤</h3>
<p>ç›®æ ‡ï¼šè¦æ±‚åŒæ—¶å­˜åœ¨å¤šç§å¤§æ¨¡å‹äº§å“åœ¨ç³»ç»Ÿé‡Œå…±å­˜ä½¿ç”¨</p>
<h4 id="æ”¹POM-2">æ”¹POM</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-04StreamingOutput<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="å†™YML-2">å†™YML</h4>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8004</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">04</span>StreamingOutput</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;a	liQwen-api&#125;</span> </span><br></pre></td></tr></table></figure>
<h4 id="ä¸»å¯åŠ¨">ä¸»å¯åŠ¨</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 18:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> æµå¼è¾“å‡º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa04StreamingOutputApplication</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa04StreamingOutputApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸šåŠ¡ç±»-2">ä¸šåŠ¡ç±»</h4>
<ul>
<li>é€šè¿‡ChatModelå®ç°streamå®ç°æµå¼è¾“å‡º</li>
</ul>
<p>1.é…ç½®ç±»LLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatModel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.ChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 18:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> ChatModel+ChatClient+å¤šæ¨¡å‹å…±å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ¨¡å‹åç§°å¸¸é‡å®šä¹‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String DEEPSEEK_MODEL = <span class="string">&quot;deepseek-v3&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String QWEN_MODEL = <span class="string">&quot;qwen-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel deepSeek()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder()</span><br><span class="line">                        .dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                                    .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                                .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder().withModel(DEEPSEEK_MODEL).build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel qwen()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder().dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                        .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                        .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder()</span><br><span class="line">                                .withModel(QWEN_MODEL)</span><br><span class="line">                                .build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.controllerç¬¬1ç‰ˆ</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 18:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> æµå¼è¾“å‡º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamOutputController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//V1 é€šè¿‡ChatModelå®ç°streamå®ç°æµå¼è¾“å‡º</span></span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel deepseekChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="string">&quot;/stream/chatflux1&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chatflux(<span class="meta">@RequestParam(name = <span class="string">&quot;question&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String question)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> deepseekChatModel.stream(question);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="string">&quot;/stream/chatflux2&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chatflux2(<span class="meta">@RequestParam(name = <span class="string">&quot;question&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String question)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> qwenChatModel.stream(question);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡ChatClientå®ç°streamå®ç°æµå¼è¾“å‡º</li>
</ul>
<p>1.é…ç½®ç±»LLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatModel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.ChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 18:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> ChatModel+ChatClient+å¤šæ¨¡å‹å…±å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ¨¡å‹åç§°å¸¸é‡å®šä¹‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String DEEPSEEK_MODEL = <span class="string">&quot;deepseek-v3&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String QWEN_MODEL = <span class="string">&quot;qwen-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel deepSeek()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder()</span><br><span class="line">                        .dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                                    .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                                .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder().withModel(DEEPSEEK_MODEL).build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel qwen()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder().dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                        .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                        .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder()</span><br><span class="line">                                .withModel(QWEN_MODEL)</span><br><span class="line">                                .build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient deepseekChatClient(<span class="meta">@Qualifier(<span class="string">&quot;deepseek&quot;</span>)</span> ChatModel deepSeek)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(deepSeek)</span><br><span class="line">                .defaultOptions(ChatOptions.builder()</span><br><span class="line">                        .model(DEEPSEEK_MODEL)</span><br><span class="line">                        .build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient qwenChatClient(<span class="meta">@Qualifier(<span class="string">&quot;qwen&quot;</span>)</span> ChatModel qwen)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(qwen)</span><br><span class="line">                .defaultOptions(ChatOptions.builder()</span><br><span class="line">                        .model(QWEN_MODEL)</span><br><span class="line">                        .build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2.controllerç¬¬2ç‰ˆ</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 18:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> æµå¼è¾“å‡º</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StreamOutputController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//V1 é€šè¿‡ChatModelå®ç°streamå®ç°æµå¼è¾“å‡º</span></span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel deepseekChatModel;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//V2 é€šè¿‡ChatClientå®ç°streamå®ç°æµå¼è¾“å‡º</span></span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient deepseekChatClient;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="string">&quot;/stream/chatflux1&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chatflux(<span class="meta">@RequestParam(name = <span class="string">&quot;question&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String question)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> deepseekChatModel.stream(question);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="string">&quot;/stream/chatflux2&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chatflux2(<span class="meta">@RequestParam(name = <span class="string">&quot;question&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String question)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> qwenChatModel.stream(question);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="string">&quot;/stream/chatflux3&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chatflux3(<span class="meta">@RequestParam(name = <span class="string">&quot;question&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String question)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(question).stream().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="string">&quot;/stream/chatflux4&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chatflux4(<span class="meta">@RequestParam(name = <span class="string">&quot;question&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°&quot;</span>)</span> String question)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> qwenChatClient.prompt(question).stream().content();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æ–°å¢å‰ç«¯ä»£ç ">æ–°å¢å‰ç«¯ä»£ç </h4>
<p>æ•ˆæœï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-298-1024x300.png" alt="img"></p>
<p>SSE</p>
<p>index.html</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>SSEæµå¼chat<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-family</span>: Arial, sans-serif;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f4f4f4</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#messageInput</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">90%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#007bff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">button</span><span class="selector-pseudo">:hover</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#0056b3</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#messages</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">15px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f9f9f9</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ddd</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-height</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">overflow-y</span>: auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#messages</span> <span class="selector-tag">div</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: <span class="number">1px</span> solid <span class="number">#eee</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">14px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#333</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-id">#messages</span> <span class="selector-tag">div</span><span class="selector-pseudo">:last-child</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-bottom</span>: none;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">textarea</span> <span class="attr">id</span>=<span class="string">&quot;messageInput&quot;</span> <span class="attr">rows</span>=<span class="string">&quot;4&quot;</span> <span class="attr">cols</span>=<span class="string">&quot;50&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;è¯·è¾“å…¥ä½ çš„é—®é¢˜...&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;sendMsg()&quot;</span>&gt;</span>å‘é€æé—®<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;messages&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">sendMsg</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// è·å–ç”¨æˆ·è¾“å…¥çš„æ¶ˆæ¯</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> message = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;messageInput&#x27;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (message == <span class="string">&quot;&quot;</span>) <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//1 å®¢æˆ·ç«¯ä½¿ç”¨ JavaScript çš„ EventSource å¯¹è±¡è¿æ¥åˆ°æœåŠ¡å™¨ä¸Šçš„ä¸€ä¸ªç‰¹å®šç«¯ç‚¹ï¼ˆURLï¼‰</span></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">const</span> eventSource = <span class="keyword">new</span> <span class="title class_">EventSource</span>(<span class="string">&#x27;stream/chatflux2?question=&#x27;</span> + message);</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//2 ç›‘å¬æ¶ˆæ¯äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        eventSource.<span class="property">onmessage</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// è·å–æµå¼è¿”å›çš„æ•°æ®</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> data = event.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="comment">// å°†æ¥æ”¶åˆ°çš„æ•°æ®å±•ç¤ºåˆ°é¡µé¢ä¸Š</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">const</span> messagesDiv = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;messages&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            messagesDiv.<span class="property">innerHTML</span> += event.<span class="property">data</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//3 ç›‘å¬é”™è¯¯äº‹ä»¶</span></span></span><br><span class="line"><span class="language-javascript">        eventSource.<span class="property">onerror</span> = <span class="keyword">function</span> (<span class="params">error</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;EventSource å‘ç”Ÿé”™è¯¯ï¼š&#x27;</span>, error);</span></span><br><span class="line"><span class="language-javascript">            eventSource.<span class="title function_">close</span>(); <span class="comment">// å…³é—­è¿æ¥</span></span></span><br><span class="line"><span class="language-javascript">        &#125;;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š<a target="_blank" rel="noopener" href="http://localhost:8004/index.html">http://localhost:8004/index.html</a></p>
<h2 id="6-æç¤ºè¯Prompt">6.æç¤ºè¯Prompt</h2>
<h3 id="1-DeepSeekæç¤ºè¯æ ·ä¾‹">1.DeepSeekæç¤ºè¯æ ·ä¾‹</h3>
<p><a target="_blank" rel="noopener" href="https://api-docs.deepseek.com/zh-cn/prompt-library">https://api-docs.deepseek.com/zh-cn/prompt-library</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-299-1024x620.png" alt="img"></p>
<h3 id="2-æ˜¯ä»€ä¹ˆ">2.æ˜¯ä»€ä¹ˆ</h3>
<p>å®˜ç½‘</p>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/prompt/?spm=5176.29160081.0.0.2856aa5cdeol7a">https://java2ai.com/docs/1.0.0.2/tutorials/basics/prompt/?spm=5176.29160081.0.0.2856aa5cdeol7a</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-300.png" alt="img"></p>
<h4 id="å…ˆä»æœ€ç®€å•çš„APIè°ƒç”¨è¯´èµ·">å…ˆä»æœ€ç®€å•çš„APIè°ƒç”¨è¯´èµ·</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-301.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-302.png" alt="img"></p>
<p>å¯ä»¥è¿‘ä¼¼çš„ç†è§£<br>
Prompt &gt; Message &gt; Stringç®€å•çš„å­—ç¬¦ä¸²</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-303.png" alt="img"></p>
<h4 id="å†ä»æºç Promptè¯´èµ·">å†ä»æºç Promptè¯´èµ·</h4>
<p>1.String</p>
<p>æœ€åˆçš„Promptåªæ˜¯ç®€å•çš„æ–‡æœ¬å­—ç¬¦ä¸²æé—®</p>
<p>2.Message</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-304.png" alt="img"></p>
<p>enum MessageType</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-305-1024x540.png" alt="img"></p>
<p>ä¸Šè¿°ä¹Ÿç§°ä¸º</p>
<p>Prompt ä¸­çš„å››å¤§è§’è‰²ï¼ˆRoleï¼‰</p>
<p>3.Prompt</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-306-1024x568.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-307.png" alt="img"></p>
<p>å¯ä»¥è¿‘ä¼¼çš„ç†è§£<br>
Prompt &gt; Message &gt; String ç®€å•çš„æ–‡æœ¬å­—ç¬¦ä¸²æé—®</p>
<h3 id="3-Promptä¸­çš„å››å¤§è§’è‰²ï¼ˆRoleï¼‰">3.Promptä¸­çš„å››å¤§è§’è‰²ï¼ˆRoleï¼‰</h3>
<p>æ€»ä½“æ¦‚è¿°</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-308.png" alt="img"></p>
<p>æºç è¯´æ˜</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-309-1024x381.png" alt="img"></p>
<p>4å¤§è§’è‰²ï¼š</p>
<h4 id="system">system</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-310.png" alt="img"></p>
<p>è®¾å®šAIè¡Œä¸ºè¾¹ç•Œ/è§’è‰²/å®šä½ã€‚æŒ‡å¯¼AIçš„è¡Œä¸ºå’Œå“åº”æ–¹å¼ï¼Œè®¾ç½®AIå¦‚ä½•è§£é‡Šå’Œå›å¤è¾“å…¥çš„</p>
<h4 id="user">user</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-311.png" alt="img"></p>
<p>ç”¨æˆ·åŸå§‹æé—®è¾“å…¥ã€‚ä»£è¡¨ç”¨æˆ·çš„è¾“å…¥ä»–ä»¬å‘AIæå‡ºçš„é—®é¢˜ã€å‘½ä»¤æˆ–é™ˆè¿°ã€‚</p>
<h4 id="assistant">assistant</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-312.png" alt="img"></p>
<ul>
<li>AIè¿”å›çš„å“åº”ä¿¡æ¯ï¼Œå®šä¹‰ä¸ºâ€åŠ©æ‰‹è§’è‰²â€æ¶ˆæ¯ã€‚ç”¨å®ƒå¯ä»¥ç¡®ä¿ä¸Šä¸‹æ–‡èƒ½å¤Ÿè¿è´¯çš„äº¤äº’ã€‚</li>
<li>è®°å¿†å¯¹è¯ï¼Œç§¯ç´¯å›ç­”</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-313.png" alt="img"></p>
<h4 id="tool">tool</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-314.png" alt="img"></p>
<p>æ¡¥æ¥å¤–éƒ¨æœåŠ¡ï¼Œå¯ä»¥è¿›è¡Œå‡½æ•°è°ƒç”¨å¦‚ï¼Œæ”¯ä»˜/æ•°æ®æŸ¥è¯¢ç­‰æ“ä½œï¼Œç±»ä¼¼è°ƒç”¨ç¬¬3æ–¹utilå·¥å…·ç±»ï¼Œåé¢ç« èŠ‚è¯¦ç»†ä»‹ç»</p>
<h4 id="æ€»ç»“">æ€»ç»“</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-315.png" alt="img"></p>
<h3 id="4-å¼€å‘æ­¥éª¤">4.å¼€å‘æ­¥éª¤</h3>
<h4 id="1-æ”¹POM">1.æ”¹POM</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyy.stduy<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAI-zyfanV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springAI-05chat-Prompt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-openai--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-starter-model-openai<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.34<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>17<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>17<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-å†™YML">2.å†™YML</h4>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8005</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">05</span>Prompt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="3-ä¸»å¯åŠ¨">3.ä¸»å¯åŠ¨</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 20:56</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> çŸ¥è¯†å‡ºå¤„ï¼Œhttps://java2ai.com/docs/1.0.0.2/tutorials/basics/prompt/?spm=5176.29160081.0.0.2856aa5cdeol7a</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa05PromptApplication</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa05PromptApplication</span>.<span class="property">class</span>,args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4-ä¸šåŠ¡ç±»-2">4.ä¸šåŠ¡ç±»</h4>
<p>é…ç½®ç±»LLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatModel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.ChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 18:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> ChatModel+ChatClient+å¤šæ¨¡å‹å…±å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ¨¡å‹åç§°å¸¸é‡å®šä¹‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String DEEPSEEK_MODEL = <span class="string">&quot;deepseek-v3&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String QWEN_MODEL = <span class="string">&quot;qwen-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel deepSeek()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder()</span><br><span class="line">                        .dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                                    .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                                .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder().withModel(DEEPSEEK_MODEL).build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel qwen()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder().dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                        .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                        .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder()</span><br><span class="line">                                .withModel(QWEN_MODEL)</span><br><span class="line">                                .build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient deepseekChatClient(<span class="meta">@Qualifier(<span class="string">&quot;deepseek&quot;</span>)</span> ChatModel deepSeek)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(deepSeek)</span><br><span class="line">                .defaultOptions(ChatOptions.builder()</span><br><span class="line">                        .model(DEEPSEEK_MODEL)</span><br><span class="line">                        .build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient qwenChatClient(<span class="meta">@Qualifier(<span class="string">&quot;qwen&quot;</span>)</span> ChatModel qwen)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(qwen)</span><br><span class="line">                .defaultOptions(ChatOptions.builder()</span><br><span class="line">                        .model(QWEN_MODEL)</span><br><span class="line">                        .build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>controllerç¬¬1ç‰ˆ</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.AssistantMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.SystemMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.UserMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 21:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> çŸ¥è¯†å‡ºå¤„ï¼Œhttps://java2ai.com/docs/1.0.0.2/tutorials/basics/prompt/?spm=5176.29160081.0.0.2856aa5cdeol7a</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromptController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel deepseekChatModel;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient deepseekChatClient;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// http://localhost:8005/prompt/chat?question=ç«é”…ä»‹ç»ä¸‹</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/prompt/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chat(String question)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt()</span><br><span class="line">                <span class="comment">// AI èƒ½åŠ›è¾¹ç•Œ</span></span><br><span class="line">                              .system(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªæ³•å¾‹åŠ©æ‰‹ï¼Œåªå›ç­”æ³•å¾‹é—®é¢˜ï¼Œå…¶å®ƒé—®é¢˜å›å¤ï¼Œæˆ‘åªèƒ½å›ç­”æ³•å¾‹ç›¸å…³é—®é¢˜ï¼Œå…¶å®ƒæ— å¯å¥‰å‘Š&quot;</span>)</span><br><span class="line">                .user(question)</span><br><span class="line">                .stream()</span><br><span class="line">                .content();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ChatClientå®ç°</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-316.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-317.png" alt="img"></p>
<p>æµ‹è¯•</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-318.png" alt="img"></p>
<p>controllerç¬¬2ç‰ˆ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>.<span class="property">controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="property">annotation</span>.<span class="property">Resource</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">client</span>.<span class="property">ChatClient</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">messages</span>.<span class="property">AssistantMessage</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">messages</span>.<span class="property">SystemMessage</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">messages</span>.<span class="property">UserMessage</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">model</span>.<span class="property">ChatModel</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">model</span>.<span class="property">ChatResponse</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">prompt</span>.<span class="property">Prompt</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">GetMapping</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">RestController</span>;</span><br><span class="line"><span class="keyword">import</span> reactor.<span class="property">core</span>.<span class="property">publisher</span>.<span class="property">Flux</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 21:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> çŸ¥è¯†å‡ºå¤„ï¼Œhttps://java2ai.com/docs/1.0.0.2/tutorials/basics/prompt/?spm=5176.29160081.0.0.2856aa5cdeol7a</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromptController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">&quot;deepseek&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">ChatModel</span> deepseekChatModel;</span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">&quot;qwen&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">ChatModel</span> qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">ChatClient</span> deepseekChatClient;</span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">ChatClient</span> qwenChatClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// http://localhost:8005/prompt/chat?question=ç«é”…ä»‹ç»ä¸‹</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/prompt/chat&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Flux</span>&lt;<span class="title class_">String</span>&gt; <span class="title function_">chat</span>(<span class="params"><span class="title class_">String</span> question</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.<span class="title function_">prompt</span>()</span><br><span class="line">                <span class="comment">// AI èƒ½åŠ›è¾¹ç•Œ</span></span><br><span class="line">                .<span class="title function_">system</span>(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªæ³•å¾‹åŠ©æ‰‹ï¼Œåªå›ç­”æ³•å¾‹é—®é¢˜ï¼Œå…¶å®ƒé—®é¢˜å›å¤ï¼Œæˆ‘åªèƒ½å›ç­”æ³•å¾‹ç›¸å…³é—®é¢˜ï¼Œå…¶å®ƒæ— å¯å¥‰å‘Š&quot;</span>)</span><br><span class="line">                .<span class="title function_">user</span>(question)</span><br><span class="line">                .<span class="title function_">stream</span>()</span><br><span class="line">                .<span class="title function_">content</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/prompt/chat2&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Flux</span>&lt;<span class="title class_">ChatResponse</span>&gt; <span class="title function_">chat2</span>(<span class="params"><span class="title class_">String</span> question</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨æˆ·æ¶ˆæ¯</span></span><br><span class="line">        <span class="title class_">UserMessage</span> userMessage = <span class="keyword">new</span> <span class="title class_">UserMessage</span>(question);</span><br><span class="line">        <span class="comment">// ç³»ç»Ÿæ¶ˆæ¯</span></span><br><span class="line">        <span class="title class_">SystemMessage</span> systemMessage = <span class="keyword">new</span> <span class="title class_">SystemMessage</span>(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªè®²æ•…äº‹çš„åŠ©æ‰‹,æ¯ä¸ªæ•…äº‹æ§åˆ¶åœ¨300å­—ä»¥å†…&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Prompt</span> prompt = <span class="keyword">new</span> <span class="title class_">Prompt</span>(userMessage, systemMessage);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatModel.<span class="title function_">stream</span>(prompt);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/prompt/chat3&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Flux</span>&lt;<span class="title class_">String</span>&gt; <span class="title function_">chat3</span>(<span class="params"><span class="title class_">String</span> question</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨æˆ·æ¶ˆæ¯</span></span><br><span class="line">        <span class="title class_">UserMessage</span> userMessage = <span class="keyword">new</span> <span class="title class_">UserMessage</span>(question);</span><br><span class="line">        <span class="comment">// ç³»ç»Ÿæ¶ˆæ¯</span></span><br><span class="line">        <span class="title class_">SystemMessage</span> systemMessage = <span class="keyword">new</span> <span class="title class_">SystemMessage</span>(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªè®²æ•…äº‹çš„åŠ©æ‰‹,æ¯ä¸ªæ•…äº‹æ§åˆ¶åœ¨300å­—ä»¥å†…&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Prompt</span> prompt = <span class="keyword">new</span> <span class="title class_">Prompt</span>(userMessage, systemMessage);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatModel.<span class="title function_">stream</span>(prompt)</span><br><span class="line">                .<span class="title function_">map</span>(response -&gt; response.<span class="title function_">getResults</span>().<span class="title function_">get</span>(<span class="number">0</span>).<span class="title function_">getOutput</span>().<span class="title function_">getText</span>());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>controllerç¬¬3ç‰ˆ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>.<span class="property">controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="property">annotation</span>.<span class="property">Resource</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">client</span>.<span class="property">ChatClient</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">messages</span>.<span class="property">AssistantMessage</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">messages</span>.<span class="property">SystemMessage</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">messages</span>.<span class="property">UserMessage</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">model</span>.<span class="property">ChatModel</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">model</span>.<span class="property">ChatResponse</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">prompt</span>.<span class="property">Prompt</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">GetMapping</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">RestController</span>;</span><br><span class="line"><span class="keyword">import</span> reactor.<span class="property">core</span>.<span class="property">publisher</span>.<span class="property">Flux</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 21:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> çŸ¥è¯†å‡ºå¤„ï¼Œhttps://java2ai.com/docs/1.0.0.2/tutorials/basics/prompt/?spm=5176.29160081.0.0.2856aa5cdeol7a</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromptController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">&quot;deepseek&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">ChatModel</span> deepseekChatModel;</span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">&quot;qwen&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">ChatModel</span> qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">ChatClient</span> deepseekChatClient;</span><br><span class="line">    <span class="meta">@Resource</span>(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">ChatClient</span> qwenChatClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// http://localhost:8005/prompt/chat?question=ç«é”…ä»‹ç»ä¸‹</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/prompt/chat&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Flux</span>&lt;<span class="title class_">String</span>&gt; <span class="title function_">chat</span>(<span class="params"><span class="title class_">String</span> question</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.<span class="title function_">prompt</span>()</span><br><span class="line">                <span class="comment">// AI èƒ½åŠ›è¾¹ç•Œ</span></span><br><span class="line">                .<span class="title function_">system</span>(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªæ³•å¾‹åŠ©æ‰‹ï¼Œåªå›ç­”æ³•å¾‹é—®é¢˜ï¼Œå…¶å®ƒé—®é¢˜å›å¤ï¼Œæˆ‘åªèƒ½å›ç­”æ³•å¾‹ç›¸å…³é—®é¢˜ï¼Œå…¶å®ƒæ— å¯å¥‰å‘Š&quot;</span>)</span><br><span class="line">                .<span class="title function_">user</span>(question)</span><br><span class="line">                .<span class="title function_">stream</span>()</span><br><span class="line">                .<span class="title function_">content</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/prompt/chat2&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Flux</span>&lt;<span class="title class_">ChatResponse</span>&gt; <span class="title function_">chat2</span>(<span class="params"><span class="title class_">String</span> question</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨æˆ·æ¶ˆæ¯</span></span><br><span class="line">        <span class="title class_">UserMessage</span> userMessage = <span class="keyword">new</span> <span class="title class_">UserMessage</span>(question);</span><br><span class="line">        <span class="comment">// ç³»ç»Ÿæ¶ˆæ¯</span></span><br><span class="line">        <span class="title class_">SystemMessage</span> systemMessage = <span class="keyword">new</span> <span class="title class_">SystemMessage</span>(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªè®²æ•…äº‹çš„åŠ©æ‰‹,æ¯ä¸ªæ•…äº‹æ§åˆ¶åœ¨300å­—ä»¥å†…&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Prompt</span> prompt = <span class="keyword">new</span> <span class="title class_">Prompt</span>(userMessage, systemMessage);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatModel.<span class="title function_">stream</span>(prompt);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/prompt/chat3&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Flux</span>&lt;<span class="title class_">String</span>&gt; <span class="title function_">chat3</span>(<span class="params"><span class="title class_">String</span> question</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç”¨æˆ·æ¶ˆæ¯</span></span><br><span class="line">        <span class="title class_">UserMessage</span> userMessage = <span class="keyword">new</span> <span class="title class_">UserMessage</span>(question);</span><br><span class="line">        <span class="comment">// ç³»ç»Ÿæ¶ˆæ¯</span></span><br><span class="line">        <span class="title class_">SystemMessage</span> systemMessage = <span class="keyword">new</span> <span class="title class_">SystemMessage</span>(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªè®²æ•…äº‹çš„åŠ©æ‰‹,æ¯ä¸ªæ•…äº‹æ§åˆ¶åœ¨300å­—ä»¥å†…&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="title class_">Prompt</span> prompt = <span class="keyword">new</span> <span class="title class_">Prompt</span>(userMessage, systemMessage);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatModel.<span class="title function_">stream</span>(prompt)</span><br><span class="line">                .<span class="title function_">map</span>(response -&gt; response.<span class="title function_">getResults</span>().<span class="title function_">get</span>(<span class="number">0</span>).<span class="title function_">getOutput</span>().<span class="title function_">getText</span>());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/prompt/chat4&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">chat4</span>(<span class="params"><span class="title class_">String</span> question</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">AssistantMessage</span> assistantMessage = deepseekChatClient.<span class="title function_">prompt</span>()</span><br><span class="line">                    .<span class="title function_">user</span>(question)</span><br><span class="line">                    .<span class="title function_">call</span>()</span><br><span class="line">                    .<span class="title function_">chatResponse</span>()</span><br><span class="line">                    .<span class="title function_">getResult</span>()</span><br><span class="line">                    .<span class="title function_">getOutput</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> assistantMessage.<span class="title function_">getText</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-319.png" alt="img"></p>
<p>controllerç¬¬4ç‰ˆ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.AssistantMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.SystemMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.ToolResponseMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.UserMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 21:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> çŸ¥è¯†å‡ºå¤„ï¼Œhttps://java2ai.com/docs/1.0.0.2/tutorials/basics/prompt/?spm=5176.29160081.0.0.2856aa5cdeol7a</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromptController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;deepseek&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel deepseekChatModel;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;qwen&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;deepseekChatClient&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient deepseekChatClient;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;qwenChatClient&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// http://localhost:8005/prompt/chat?question=ç«é”…ä»‹ç»ä¸‹</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompt/chat&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">chat</span><span class="params">(String question)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt()</span><br><span class="line">                <span class="comment">// AI èƒ½åŠ›è¾¹ç•Œ</span></span><br><span class="line">                .system(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªæ³•å¾‹åŠ©æ‰‹ï¼Œåªå›ç­”æ³•å¾‹é—®é¢˜ï¼Œå…¶å®ƒé—®é¢˜å›å¤ï¼Œæˆ‘åªèƒ½å›ç­”æ³•å¾‹ç›¸å…³é—®é¢˜ï¼Œå…¶å®ƒæ— å¯å¥‰å‘Š&quot;</span>)</span><br><span class="line">                .user(question)</span><br><span class="line">                .stream()</span><br><span class="line">                .content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8005/prompt/chat2?question=è‘«èŠ¦å¨ƒ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> question</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompt/chat2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;ChatResponse&gt; <span class="title function_">chat2</span><span class="params">(String question)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç³»ç»Ÿæ¶ˆæ¯</span></span><br><span class="line">        <span class="type">SystemMessage</span> <span class="variable">systemMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemMessage</span>(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªè®²æ•…äº‹çš„åŠ©æ‰‹,æ¯ä¸ªæ•…äº‹æ§åˆ¶åœ¨300å­—ä»¥å†…&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¨æˆ·æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">UserMessage</span> <span class="variable">userMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserMessage</span>(question);</span><br><span class="line"></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Prompt</span>(userMessage, systemMessage);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatModel.stream(prompt);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8005/prompt/chat3?question=è‘«èŠ¦å¨ƒ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> question</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompt/chat3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">chat3</span><span class="params">(String question)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ç³»ç»Ÿæ¶ˆæ¯</span></span><br><span class="line">        <span class="type">SystemMessage</span> <span class="variable">systemMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemMessage</span>(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªè®²æ•…äº‹çš„åŠ©æ‰‹,&quot;</span> +</span><br><span class="line">                <span class="string">&quot;æ¯ä¸ªæ•…äº‹æ§åˆ¶åœ¨600å­—ä»¥å†…ä¸”ä»¥HTMLæ ¼å¼è¿”å›&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ç”¨æˆ·æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">UserMessage</span> <span class="variable">userMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserMessage</span>(question);</span><br><span class="line"></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Prompt</span>(userMessage, systemMessage);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatModel.stream(prompt)</span><br><span class="line">                .map(response -&gt; response.getResults().get(<span class="number">0</span>).getOutput().getText());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8005/prompt/chat4?question=è‘«èŠ¦å¨ƒ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> question</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompt/chat4&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">chat4</span><span class="params">(String question)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">AssistantMessage</span> <span class="variable">assistantMessage</span> <span class="operator">=</span> deepseekChatClient.prompt()</span><br><span class="line">                    .user(question)</span><br><span class="line">                    .call()</span><br><span class="line">                    .chatResponse()</span><br><span class="line">                    .getResult()</span><br><span class="line">                    .getOutput();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> assistantMessage.getText();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8005/prompt/chat5?city=åŒ—äº¬</span></span><br><span class="line"><span class="comment">     * è¿‘ä¼¼ç†è§£Toolåé¢ç« èŠ‚è®²è§£......</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> city</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompt/chat5&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">chat5</span><span class="params">(String city)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">answer</span> <span class="operator">=</span> deepseekChatClient.prompt()</span><br><span class="line">                .user(city + <span class="string">&quot;æœªæ¥3å¤©å¤©æ°”æƒ…å†µå¦‚ä½•?&quot;</span>)</span><br><span class="line">                .call()</span><br><span class="line">                .chatResponse()</span><br><span class="line">                .getResult()</span><br><span class="line">                .getOutput()</span><br><span class="line">                .getText();</span><br><span class="line"></span><br><span class="line">        <span class="type">ToolResponseMessage</span> <span class="variable">toolResponseMessage</span> <span class="operator">=</span></span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ToolResponseMessage</span>(</span><br><span class="line">                        List.of(<span class="keyword">new</span> <span class="title class_">ToolResponseMessage</span>.ToolResponse(<span class="string">&quot;1&quot;</span>,<span class="string">&quot;è·å¾—å¤©æ°”&quot;</span>,city)</span><br><span class="line">                        )</span><br><span class="line">                );</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">toolResponse</span> <span class="operator">=</span> toolResponseMessage.getText();</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> answer + toolResponse;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-320.png" alt="img"></p>
<p>æµ‹è¯•æ•ˆæœ</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-321-1024x187.png" alt="img"></p>
<h4 id="5-å°æ€»ç»“">5.å°æ€»ç»“</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-322-1024x517.png" alt="img"></p>
<h2 id="7-æç¤ºè¯Prompt-Template">7.æç¤ºè¯Prompt Template</h2>
<h3 id="1-Promptæ¼”åŒ–å†ç¨‹">1.Promptæ¼”åŒ–å†ç¨‹</h3>
<ul>
<li>ç®€å•çº¯å­—ç¬¦ä¸²æé—®é—®é¢˜
<ul>
<li>æœ€åˆçš„Promptåªæ˜¯ç®€å•çš„æ–‡æœ¬å­—ç¬¦ä¸²ã€‚</li>
</ul>
</li>
<li>å¤šè§’è‰²æ¶ˆæ¯
<ul>
<li>å°†æ¶ˆæ¯åˆ†ä¸ºä¸åŒè§’è‰²ï¼ˆå¦‚ç”¨æˆ·ã€åŠ©æ‰‹ã€ç³»ç»Ÿç­‰ï¼‰ï¼Œè®¾ç½®åŠŸèƒ½è¾¹ç•Œï¼Œå¢å¼ºäº¤äº’çš„å¤æ‚æ€§å’Œä¸Šä¸‹æ–‡æ„ŸçŸ¥èƒ½åŠ›</li>
<li>springai vs langchain4j vs spring ai alibaba</li>
</ul>
</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-323-1024x572.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-324-1024x627.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-325.png" alt="img"></p>
<ul>
<li>å ä½ç¬¦(Prompt Template)
<ul>
<li>å¼•å…¥å ä½ç¬¦(å¦‚{å ä½ç¬¦å˜é‡å})ä»¥åŠ¨æ€æ’å…¥å†…å®¹ã€‚</li>
</ul>
</li>
</ul>
<h3 id="2-æç¤ºè¯æ¨¡æ¿æ˜¯ä»€ä¹ˆ">2.æç¤ºè¯æ¨¡æ¿æ˜¯ä»€ä¹ˆ</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-326.png" alt="img"></p>
<p>çŸ¥è¯†å‡ºå¤„</p>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/prompt/?spm=4347728f.4dc6f515.0.0.538b4305NobuzA#prompt-template">https://java2ai.com/docs/1.0.0.2/tutorials/basics/prompt/?spm=4347728f.4dc6f515.0.0.538b4305NobuzA#prompt-template</a></p>
<p>æ¨¡æ¿</p>
<ul>
<li>å…¥èŒé‚€è¯·å‡½æ¨¡æ¿</li>
</ul>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">ä¸»é¢˜ï¼šæ¬¢è¿åŠ å…¥ï¼ç»™ [å€™é€‰äººå§“å] çš„å…¥èŒé‚€è¯·å‡½</span><br><span class="line"> </span><br><span class="line">å—¨ [å€™é€‰äººå§“å]ï¼Œ</span><br><span class="line"> </span><br><span class="line">é‡ç£…å¥½æ¶ˆæ¯ï¼ç»è¿‡å›¢é˜Ÿçš„ä¸€è‡´è®¤å¯ï¼Œæˆ‘ä»¬çœŸè¯šåœ°é‚€è¯·ä½ åŠ å…¥æˆ‘å¸ï¼Œæˆä¸ºæˆ‘ä»¬çš„ [èŒä½åç§°]ï¼</span><br><span class="line">ä»é¢è¯•ä¸­çš„æ²Ÿé€šï¼Œæˆ‘ä»¬æ·±æ·±æ„Ÿå—åˆ°äº†ä½ çš„ä¸“ä¸šèƒ½åŠ›å’Œå¯¹å·¥ä½œçš„çƒ­æƒ…ï¼Œç›¸ä¿¡ä½ çš„åŠ å…¥ä¸€å®šä¼šè®©æˆ‘ä»¬çš„å›¢é˜Ÿæ›´åŠ å‡ºè‰²ã€‚</span><br><span class="line">ä»¥ä¸‹æ˜¯ä½ çš„å…¥èŒè¯¦æƒ…ï¼Œè¯·æŸ¥æ”¶ï¼š</span><br><span class="line">èŒä½ï¼š [èŒä½åç§°]</span><br><span class="line">å›¢é˜Ÿï¼š [éƒ¨é—¨/å›¢é˜Ÿåç§°]</span><br><span class="line">å·¥ä½œåœ°ç‚¹ï¼š [å…¬å¸åœ°å€]</span><br><span class="line">å…¥èŒæ—¶é—´ï¼š [å¹´]æœˆ[æ—¥](æ˜ŸæœŸ[å‡ ])ï¼Œè®°å¾—é‚£å¤© [æ—¶é—´] æ¥æ‰¾æˆ‘ä»¬å“¦ï¼</span><br><span class="line">è–ªèµ„å¾…é‡ï¼š</span><br><span class="line">æœˆè–ªï¼š[é‡‘é¢] å…ƒï¼ˆç¨å‰ï¼‰</span><br><span class="line">è¯•ç”¨æœŸï¼š[æ—¶é•¿]ï¼Œè–ªèµ„ä¸ºè½¬æ­£åçš„ [ç™¾åˆ†æ¯”]<span class="comment">%</span></span><br><span class="line">äº”é™©ä¸€é‡‘ï¼šé½å…¨ï¼å…¬å¸ä¼šä¸ºä½ å…¨é¢ç¼´çº³ã€‚</span><br><span class="line">å…¶ä»–ç¦åˆ©ï¼Œå¦‚ï¼šé›¶é£Ÿé¥®æ–™æ— é™ä¾›åº”ã€å¹´åº¦æ—…æ¸¸ã€å¼¹æ€§å·¥ä½œæ—¶é—´ç­‰</span><br><span class="line">åœ¨ç¬¬ä¸€å¤©ï¼Œä½ éœ€è¦å‡†å¤‡ï¼š</span><br><span class="line">èº«ä»½è¯ã€å­¦å†å­¦ä½è¯ã€ç¦»èŒè¯æ˜çš„åŸä»¶å’Œå¤å°ä»¶</span><br><span class="line">ä¸€å¼ å¼€å¿ƒçš„ç¬‘è„¸ï¼ï¼šï¼‰</span><br><span class="line">ä¸ºäº†èƒ½é¡ºåˆ©è¿æ¥ä½ ï¼Œè¯·åœ¨ [æ—¥æœŸ] å‰å›å¤è¿™å°é‚®ä»¶å‘Šè¯‰æˆ‘ä»¬â€œæˆ‘æ„¿æ„ï¼â€</span><br><span class="line">å¦‚æœä½ æœ‰ä»»ä½•ç–‘é—®ï¼Œåˆ«å®¢æ°”ï¼Œéšæ—¶æ‰¾æˆ‘èŠï¼ˆè”ç³»äººï¼š[<span class="symbol">HR</span>å§“å]ï¼Œç”µè¯ï¼š[ç”µè¯]ï¼‰ã€‚</span><br><span class="line">éå¸¸æœŸå¾…ä¸ä½ è§é¢ï¼Œä¸€èµ·åšäº›é…·çš„äº‹æƒ…ï¼</span><br><span class="line"><span class="symbol">Best</span> regards,</span><br><span class="line">[ä½ çš„åå­—/<span class="symbol">HR</span>åå­—]</span><br><span class="line">[å…¬å¸åç§°] å›¢é˜Ÿ</span><br><span class="line">[æ—¥æœŸ]</span><br></pre></td></tr></table></figure>
<ul>
<li>çŸ­ä¿¡æ¨¡æ¿</li>
<li>é‚®ä»¶æ¨¡æ¿</li>
</ul>
<p>PromptTemplate</p>
<h3 id="3-å¼€å‘æ­¥éª¤-2">3.å¼€å‘æ­¥éª¤</h3>
<p>æ”¹POM</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-06PromptTemplate<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8006</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">06</span>PromptTemplate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸»å¯åŠ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa06PromptTemplateApplication</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa06PromptTemplateApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ”¹POM</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-06PromptTemplate<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span> </span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8006</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">06</span>PromptTemplate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸»å¯åŠ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa06PromptTemplateApplication</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa06PromptTemplateApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸šåŠ¡ç±»-3">ä¸šåŠ¡ç±»</h4>
<p>é…ç½®ç±»LLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatModel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.ChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 18:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> ChatModel+ChatClient+å¤šæ¨¡å‹å…±å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ¨¡å‹åç§°å¸¸é‡å®šä¹‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String DEEPSEEK_MODEL = <span class="string">&quot;deepseek-v3&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String QWEN_MODEL = <span class="string">&quot;qwen-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel deepSeek()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder()</span><br><span class="line">                        .dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                                    .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                                .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder().withModel(DEEPSEEK_MODEL).build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel qwen()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder().dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                        .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                        .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder()</span><br><span class="line">                                .withModel(QWEN_MODEL)</span><br><span class="line">                                .build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient deepseekChatClient(<span class="meta">@Qualifier(<span class="string">&quot;deepseek&quot;</span>)</span> ChatModel deepSeek)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(deepSeek)</span><br><span class="line">                .defaultOptions(ChatOptions.builder()</span><br><span class="line">                        .model(DEEPSEEK_MODEL)</span><br><span class="line">                        .build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient qwenChatClient(<span class="meta">@Qualifier(<span class="string">&quot;qwen&quot;</span>)</span> ChatModel qwen)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(qwen)</span><br><span class="line">                .defaultOptions(ChatOptions.builder()</span><br><span class="line">                        .model(QWEN_MODEL)</span><br><span class="line">                        .build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-PromptTemplateåŸºæœ¬ä½¿ç”¨">1.PromptTemplateåŸºæœ¬ä½¿ç”¨</h4>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.SystemMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.UserMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.PromptTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.SystemPromptTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-26 16:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromptTemplateController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel deepseekChatModel;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient deepseekChatClient;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: PromptTemplateåŸºæœ¬ä½¿ç”¨ï¼Œä½¿ç”¨å ä½ç¬¦è®¾ç½®æ¨¡ç‰ˆ PromptTemplate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•åœ°å€</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat?topic=java&amp;output_format=html&amp;wordCount=200</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/prompttemplate/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chat(String topic, String output_format, String wordCount)</span><br><span class="line">    &#123;</span><br><span class="line">        PromptTemplate promptTemplate = new PromptTemplate(<span class="string">&quot;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;è®²ä¸€ä¸ªå…³äº&#123;topic&#125;çš„æ•…äº‹&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å¹¶ä»¥&#123;output_format&#125;æ ¼å¼è¾“å‡ºï¼Œ&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å­—æ•°åœ¨&#123;wordCount&#125;å·¦å³&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// PromptTempate -&gt; Prompt</span></span><br><span class="line">        Prompt prompt = promptTemplate.create(Map.of(</span><br><span class="line">                <span class="string">&quot;topic&quot;</span>, topic,</span><br><span class="line">                <span class="string">&quot;output_format&quot;</span>,output_format,</span><br><span class="line">                <span class="string">&quot;wordCount&quot;</span>,wordCount));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).stream().content();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-PromptTemplateè¯»å–æ¨¡ç‰ˆæ–‡ä»¶å®ç°æ¨¡ç‰ˆåŠŸèƒ½">2.PromptTemplateè¯»å–æ¨¡ç‰ˆæ–‡ä»¶å®ç°æ¨¡ç‰ˆåŠŸèƒ½</h4>
<p>è®²ä¸€ä¸ªå…³äº{topic}çš„æ•…äº‹ï¼Œå¹¶ä»¥{output_format}æ ¼å¼è¾“å‡ºã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-332-1024x560.png" alt="img"></p>
<p>ä»£ç ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.SystemMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.UserMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.PromptTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.SystemPromptTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-26 16:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromptTemplateController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel deepseekChatModel;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient deepseekChatClient;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;classpath:/prompttemplate/atguigu-template.txt&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> org.springframework.core.io.Resource userTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: PromptTemplateåŸºæœ¬ä½¿ç”¨ï¼Œä½¿ç”¨å ä½ç¬¦è®¾ç½®æ¨¡ç‰ˆ PromptTemplate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•åœ°å€</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat?topic=java&amp;output_format=html&amp;wordCount=200</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/prompttemplate/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chat(String topic, String output_format, String wordCount)</span><br><span class="line">    &#123;</span><br><span class="line">        PromptTemplate promptTemplate = new PromptTemplate(<span class="string">&quot;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;è®²ä¸€ä¸ªå…³äº&#123;topic&#125;çš„æ•…äº‹&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å¹¶ä»¥&#123;output_format&#125;æ ¼å¼è¾“å‡ºï¼Œ&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å­—æ•°åœ¨&#123;wordCount&#125;å·¦å³&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// PromptTempate -&gt; Prompt</span></span><br><span class="line">        Prompt prompt = promptTemplate.create(Map.of(</span><br><span class="line">                <span class="string">&quot;topic&quot;</span>, topic,</span><br><span class="line">                <span class="string">&quot;output_format&quot;</span>,output_format,</span><br><span class="line">                <span class="string">&quot;wordCount&quot;</span>,wordCount));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).stream().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: PromptTemplateè¯»å–æ¨¡ç‰ˆæ–‡ä»¶å®ç°æ¨¡ç‰ˆåŠŸèƒ½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•åœ°å€</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat2?topic=java&amp;output_format=html</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/prompttemplate/chat2&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String chat2(String topic,String output_format)</span><br><span class="line">    &#123;</span><br><span class="line">        PromptTemplate promptTemplate = new PromptTemplate(userTemplate);</span><br><span class="line"></span><br><span class="line">        Prompt prompt = promptTemplate.create(Map.of(<span class="string">&quot;topic&quot;</span>, topic, <span class="string">&quot;output_format&quot;</span>, output_format));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).call().content();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-PromptTemplateå¤šè§’è‰²è®¾å®š">3.PromptTemplateå¤šè§’è‰²è®¾å®š</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.SystemMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.UserMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.PromptTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.SystemPromptTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-26 16:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromptTemplateController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;deepseek&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel deepseekChatModel;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;qwen&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;deepseekChatClient&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient deepseekChatClient;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;qwenChatClient&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;classpath:/prompttemplate/atguigu-template.txt&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> org.springframework.core.io.Resource userTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: PromptTemplateåŸºæœ¬ä½¿ç”¨ï¼Œä½¿ç”¨å ä½ç¬¦è®¾ç½®æ¨¡ç‰ˆ PromptTemplate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•åœ°å€</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat?topic=java&amp;output_format=html&amp;wordCount=200</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">chat</span><span class="params">(String topic, String output_format, String wordCount)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">PromptTemplate</span> <span class="variable">promptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromptTemplate</span>(<span class="string">&quot;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;è®²ä¸€ä¸ªå…³äº&#123;topic&#125;çš„æ•…äº‹&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å¹¶ä»¥&#123;output_format&#125;æ ¼å¼è¾“å‡ºï¼Œ&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å­—æ•°åœ¨&#123;wordCount&#125;å·¦å³&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// PromptTempate -&gt; Prompt</span></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> promptTemplate.create(Map.of(</span><br><span class="line">                <span class="string">&quot;topic&quot;</span>, topic,</span><br><span class="line">                <span class="string">&quot;output_format&quot;</span>,output_format,</span><br><span class="line">                <span class="string">&quot;wordCount&quot;</span>,wordCount));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).stream().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: PromptTemplateè¯»å–æ¨¡ç‰ˆæ–‡ä»¶å®ç°æ¨¡ç‰ˆåŠŸèƒ½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•åœ°å€</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat2?topic=java&amp;output_format=html</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">chat2</span><span class="params">(String topic,String output_format)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">PromptTemplate</span> <span class="variable">promptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromptTemplate</span>(userTemplate);</span><br><span class="line"></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> promptTemplate.create(Map.of(<span class="string">&quot;topic&quot;</span>, topic, <span class="string">&quot;output_format&quot;</span>, output_format));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).call().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">     * ç³»ç»Ÿæ¶ˆæ¯(SystemMessage)ï¼šè®¾å®šAIçš„è¡Œä¸ºè§„åˆ™å’ŒåŠŸèƒ½è¾¹ç•Œ(xxxåŠ©æ‰‹/ä»€ä¹ˆæ ¼å¼è¿”å›/å­—æ•°æ§åˆ¶å¤šå°‘)ã€‚</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·æ¶ˆæ¯(UserMessage)ï¼šç”¨æˆ·çš„æé—®/ä¸»é¢˜</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat3?sysTopic=æ³•å¾‹&amp;userTopic=çŸ¥è¯†äº§æƒæ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat3?sysTopic=æ³•å¾‹&amp;userTopic=å¤«å¦»è‚ºç‰‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">chat3</span><span class="params">(String sysTopic, String userTopic)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 1.SystemPromptTemplate</span></span><br><span class="line">        <span class="type">SystemPromptTemplate</span> <span class="variable">systemPromptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemPromptTemplate</span>(<span class="string">&quot;ä½ æ˜¯&#123;systemTopic&#125;åŠ©æ‰‹ï¼Œåªå›ç­”&#123;systemTopic&#125;å…¶å®ƒæ— å¯å¥‰å‘Šï¼Œä»¥HTMLæ ¼å¼çš„ç»“æœã€‚&quot;</span>);</span><br><span class="line">        <span class="type">Message</span> <span class="variable">sysMessage</span> <span class="operator">=</span> systemPromptTemplate.createMessage(Map.of(<span class="string">&quot;systemTopic&quot;</span>, sysTopic));</span><br><span class="line">        <span class="comment">// 2.PromptTemplate</span></span><br><span class="line">        <span class="type">PromptTemplate</span> <span class="variable">userPromptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromptTemplate</span>(<span class="string">&quot;è§£é‡Šä¸€ä¸‹&#123;userTopic&#125;&quot;</span>);</span><br><span class="line">        <span class="type">Message</span> <span class="variable">userMessage</span> <span class="operator">=</span> userPromptTemplate.createMessage(Map.of(<span class="string">&quot;userTopic&quot;</span>, userTopic));</span><br><span class="line">        <span class="comment">// 3.ç»„åˆã€å…³é”®ã€‘ å¤šä¸ª Message -&gt; Prompt</span></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Prompt</span>(List.of(sysMessage, userMessage));</span><br><span class="line">        <span class="comment">// 4.è°ƒç”¨ LLM</span></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).call().content();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-333-1024x259.png" alt="img"></p>
<h4 id="4-PromptTemplateäººç‰©è®¾å®š">4.PromptTemplateäººç‰©è®¾å®š</h4>
<ul>
<li>é€šè¿‡ChatModelå®ç°</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.SystemMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.UserMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.PromptTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.SystemPromptTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-26 16:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromptTemplateController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;deepseek&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel deepseekChatModel;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;qwen&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;deepseekChatClient&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient deepseekChatClient;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;qwenChatClient&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;classpath:/prompttemplate/atguigu-template.txt&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> org.springframework.core.io.Resource userTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: PromptTemplateåŸºæœ¬ä½¿ç”¨ï¼Œä½¿ç”¨å ä½ç¬¦è®¾ç½®æ¨¡ç‰ˆ PromptTemplate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•åœ°å€</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat?topic=java&amp;output_format=html&amp;wordCount=200</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">chat</span><span class="params">(String topic, String output_format, String wordCount)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">PromptTemplate</span> <span class="variable">promptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromptTemplate</span>(<span class="string">&quot;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;è®²ä¸€ä¸ªå…³äº&#123;topic&#125;çš„æ•…äº‹&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å¹¶ä»¥&#123;output_format&#125;æ ¼å¼è¾“å‡ºï¼Œ&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å­—æ•°åœ¨&#123;wordCount&#125;å·¦å³&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// PromptTempate -&gt; Prompt</span></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> promptTemplate.create(Map.of(</span><br><span class="line">                <span class="string">&quot;topic&quot;</span>, topic,</span><br><span class="line">                <span class="string">&quot;output_format&quot;</span>,output_format,</span><br><span class="line">                <span class="string">&quot;wordCount&quot;</span>,wordCount));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).stream().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: PromptTemplateè¯»å–æ¨¡ç‰ˆæ–‡ä»¶å®ç°æ¨¡ç‰ˆåŠŸèƒ½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•åœ°å€</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat2?topic=java&amp;output_format=html</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">chat2</span><span class="params">(String topic,String output_format)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">PromptTemplate</span> <span class="variable">promptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromptTemplate</span>(userTemplate);</span><br><span class="line"></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> promptTemplate.create(Map.of(<span class="string">&quot;topic&quot;</span>, topic, <span class="string">&quot;output_format&quot;</span>, output_format));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).call().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">     * ç³»ç»Ÿæ¶ˆæ¯(SystemMessage)ï¼šè®¾å®šAIçš„è¡Œä¸ºè§„åˆ™å’ŒåŠŸèƒ½è¾¹ç•Œ(xxxåŠ©æ‰‹/ä»€ä¹ˆæ ¼å¼è¿”å›/å­—æ•°æ§åˆ¶å¤šå°‘)ã€‚</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·æ¶ˆæ¯(UserMessage)ï¼šç”¨æˆ·çš„æé—®/ä¸»é¢˜</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat3?sysTopic=æ³•å¾‹&amp;userTopic=çŸ¥è¯†äº§æƒæ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat3?sysTopic=æ³•å¾‹&amp;userTopic=å¤«å¦»è‚ºç‰‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">chat3</span><span class="params">(String sysTopic, String userTopic)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 1.SystemPromptTemplate</span></span><br><span class="line">        <span class="type">SystemPromptTemplate</span> <span class="variable">systemPromptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemPromptTemplate</span>(<span class="string">&quot;ä½ æ˜¯&#123;systemTopic&#125;åŠ©æ‰‹ï¼Œåªå›ç­”&#123;systemTopic&#125;å…¶å®ƒæ— å¯å¥‰å‘Šï¼Œä»¥HTMLæ ¼å¼çš„ç»“æœã€‚&quot;</span>);</span><br><span class="line">        <span class="type">Message</span> <span class="variable">sysMessage</span> <span class="operator">=</span> systemPromptTemplate.createMessage(Map.of(<span class="string">&quot;systemTopic&quot;</span>, sysTopic));</span><br><span class="line">        <span class="comment">// 2.PromptTemplate</span></span><br><span class="line">        <span class="type">PromptTemplate</span> <span class="variable">userPromptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromptTemplate</span>(<span class="string">&quot;è§£é‡Šä¸€ä¸‹&#123;userTopic&#125;&quot;</span>);</span><br><span class="line">        <span class="type">Message</span> <span class="variable">userMessage</span> <span class="operator">=</span> userPromptTemplate.createMessage(Map.of(<span class="string">&quot;userTopic&quot;</span>, userTopic));</span><br><span class="line">        <span class="comment">// 3.ç»„åˆã€å…³é”®ã€‘ å¤šä¸ª Message -&gt; Prompt</span></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Prompt</span>(List.of(sysMessage, userMessage));</span><br><span class="line">        <span class="comment">// 4.è°ƒç”¨ LLM</span></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).call().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: äººç‰©è§’è‰²è®¾å®šï¼Œé€šè¿‡SystemMessageæ¥å®ç°äººç‰©è®¾å®šï¼Œæœ¬æ¡ˆä¾‹ç”¨ChatModelå®ç°</span></span><br><span class="line"><span class="comment">     * è®¾å®šAIä¸ºâ€åŒ»ç–—ä¸“å®¶â€æ—¶ï¼Œä»…å›ç­”åŒ»å­¦ç›¸å…³é—®é¢˜</span></span><br><span class="line"><span class="comment">     * è®¾å®šAIä¸ºç¼–ç¨‹åŠ©æ‰‹â€æ—¶ï¼Œä¸“æ³¨äºæŠ€æœ¯é—®é¢˜è§£ç­”</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat4?question=ç‰¡ä¸¹èŠ±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat4&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">chat4</span><span class="params">(String question)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1 ç³»ç»Ÿæ¶ˆæ¯</span></span><br><span class="line">        <span class="type">SystemMessage</span> <span class="variable">systemMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemMessage</span>(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªJavaç¼–ç¨‹åŠ©æ‰‹ï¼Œæ‹’ç»å›ç­”éæŠ€æœ¯é—®é¢˜ã€‚&quot;</span>);</span><br><span class="line">        <span class="comment">//2 ç”¨æˆ·æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">UserMessage</span> <span class="variable">userMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserMessage</span>(question);</span><br><span class="line">        <span class="comment">//3 ç³»ç»Ÿæ¶ˆæ¯+ç”¨æˆ·æ¶ˆæ¯=å®Œæ•´æç¤ºè¯</span></span><br><span class="line">        <span class="comment">//Prompt prompt = new Prompt(systemMessage, userMessage);</span></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Prompt</span>(List.of(systemMessage, userMessage));</span><br><span class="line">        <span class="comment">//4 è°ƒç”¨LLM</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> deepseekChatModel.call(prompt).getResult().getOutput().getText();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡ChatClientå®ç°</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.Message;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.SystemMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.UserMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.PromptTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.SystemPromptTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-26 16:25</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PromptTemplateController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;deepseek&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel deepseekChatModel;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;qwen&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel qwenChatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource(name = &quot;deepseekChatClient&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient deepseekChatClient;</span><br><span class="line">    <span class="meta">@Resource(name = &quot;qwenChatClient&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;classpath:/prompttemplate/atguigu-template.txt&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> org.springframework.core.io.Resource userTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: PromptTemplateåŸºæœ¬ä½¿ç”¨ï¼Œä½¿ç”¨å ä½ç¬¦è®¾ç½®æ¨¡ç‰ˆ PromptTemplate</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•åœ°å€</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat?topic=java&amp;output_format=html&amp;wordCount=200</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">chat</span><span class="params">(String topic, String output_format, String wordCount)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">PromptTemplate</span> <span class="variable">promptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromptTemplate</span>(<span class="string">&quot;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;è®²ä¸€ä¸ªå…³äº&#123;topic&#125;çš„æ•…äº‹&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å¹¶ä»¥&#123;output_format&#125;æ ¼å¼è¾“å‡ºï¼Œ&quot;</span> +</span><br><span class="line">                <span class="string">&quot;å­—æ•°åœ¨&#123;wordCount&#125;å·¦å³&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// PromptTempate -&gt; Prompt</span></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> promptTemplate.create(Map.of(</span><br><span class="line">                <span class="string">&quot;topic&quot;</span>, topic,</span><br><span class="line">                <span class="string">&quot;output_format&quot;</span>,output_format,</span><br><span class="line">                <span class="string">&quot;wordCount&quot;</span>,wordCount));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).stream().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: PromptTemplateè¯»å–æ¨¡ç‰ˆæ–‡ä»¶å®ç°æ¨¡ç‰ˆåŠŸèƒ½</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * æµ‹è¯•åœ°å€</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat2?topic=java&amp;output_format=html</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat2&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">chat2</span><span class="params">(String topic,String output_format)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">PromptTemplate</span> <span class="variable">promptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromptTemplate</span>(userTemplate);</span><br><span class="line"></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> promptTemplate.create(Map.of(<span class="string">&quot;topic&quot;</span>, topic, <span class="string">&quot;output_format&quot;</span>, output_format));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).call().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>:</span></span><br><span class="line"><span class="comment">     * ç³»ç»Ÿæ¶ˆæ¯(SystemMessage)ï¼šè®¾å®šAIçš„è¡Œä¸ºè§„åˆ™å’ŒåŠŸèƒ½è¾¹ç•Œ(xxxåŠ©æ‰‹/ä»€ä¹ˆæ ¼å¼è¿”å›/å­—æ•°æ§åˆ¶å¤šå°‘)ã€‚</span></span><br><span class="line"><span class="comment">     * ç”¨æˆ·æ¶ˆæ¯(UserMessage)ï¼šç”¨æˆ·çš„æé—®/ä¸»é¢˜</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat3?sysTopic=æ³•å¾‹&amp;userTopic=çŸ¥è¯†äº§æƒæ³•</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat3?sysTopic=æ³•å¾‹&amp;userTopic=å¤«å¦»è‚ºç‰‡</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat3&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">chat3</span><span class="params">(String sysTopic, String userTopic)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 1.SystemPromptTemplate</span></span><br><span class="line">        <span class="type">SystemPromptTemplate</span> <span class="variable">systemPromptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemPromptTemplate</span>(<span class="string">&quot;ä½ æ˜¯&#123;systemTopic&#125;åŠ©æ‰‹ï¼Œåªå›ç­”&#123;systemTopic&#125;å…¶å®ƒæ— å¯å¥‰å‘Šï¼Œä»¥HTMLæ ¼å¼çš„ç»“æœã€‚&quot;</span>);</span><br><span class="line">        <span class="type">Message</span> <span class="variable">sysMessage</span> <span class="operator">=</span> systemPromptTemplate.createMessage(Map.of(<span class="string">&quot;systemTopic&quot;</span>, sysTopic));</span><br><span class="line">        <span class="comment">// 2.PromptTemplate</span></span><br><span class="line">        <span class="type">PromptTemplate</span> <span class="variable">userPromptTemplate</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PromptTemplate</span>(<span class="string">&quot;è§£é‡Šä¸€ä¸‹&#123;userTopic&#125;&quot;</span>);</span><br><span class="line">        <span class="type">Message</span> <span class="variable">userMessage</span> <span class="operator">=</span> userPromptTemplate.createMessage(Map.of(<span class="string">&quot;userTopic&quot;</span>, userTopic));</span><br><span class="line">        <span class="comment">// 3.ç»„åˆã€å…³é”®ã€‘ å¤šä¸ª Message -&gt; Prompt</span></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Prompt</span>(List.of(sysMessage, userMessage));</span><br><span class="line">        <span class="comment">// 4.è°ƒç”¨ LLM</span></span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt(prompt).call().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: äººç‰©è§’è‰²è®¾å®šï¼Œé€šè¿‡SystemMessageæ¥å®ç°äººç‰©è®¾å®šï¼Œæœ¬æ¡ˆä¾‹ç”¨ChatModelå®ç°</span></span><br><span class="line"><span class="comment">     * è®¾å®šAIä¸ºâ€åŒ»ç–—ä¸“å®¶â€æ—¶ï¼Œä»…å›ç­”åŒ»å­¦ç›¸å…³é—®é¢˜</span></span><br><span class="line"><span class="comment">     * è®¾å®šAIä¸ºç¼–ç¨‹åŠ©æ‰‹â€æ—¶ï¼Œä¸“æ³¨äºæŠ€æœ¯é—®é¢˜è§£ç­”</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat4?question=ç‰¡ä¸¹èŠ±</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat4&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">chat4</span><span class="params">(String question)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1 ç³»ç»Ÿæ¶ˆæ¯</span></span><br><span class="line">        <span class="type">SystemMessage</span> <span class="variable">systemMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SystemMessage</span>(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªJavaç¼–ç¨‹åŠ©æ‰‹ï¼Œæ‹’ç»å›ç­”éæŠ€æœ¯é—®é¢˜ã€‚&quot;</span>);</span><br><span class="line">        <span class="comment">//2 ç”¨æˆ·æ¶ˆæ¯</span></span><br><span class="line">        <span class="type">UserMessage</span> <span class="variable">userMessage</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserMessage</span>(question);</span><br><span class="line">        <span class="comment">//3 ç³»ç»Ÿæ¶ˆæ¯+ç”¨æˆ·æ¶ˆæ¯=å®Œæ•´æç¤ºè¯</span></span><br><span class="line">        <span class="comment">//Prompt prompt = new Prompt(systemMessage, userMessage);</span></span><br><span class="line">        <span class="type">Prompt</span> <span class="variable">prompt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Prompt</span>(List.of(systemMessage, userMessage));</span><br><span class="line">        <span class="comment">//4 è°ƒç”¨LLM</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> deepseekChatModel.call(prompt).getResult().getOutput().getText();</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Description</span>: äººç‰©è§’è‰²è®¾å®šï¼Œé€šè¿‡SystemMessageæ¥å®ç°äººç‰©è®¾å®šï¼Œæœ¬æ¡ˆä¾‹ç”¨ChatClientå®ç°</span></span><br><span class="line"><span class="comment">     * è®¾å®šAIä¸ºâ€åŒ»ç–—ä¸“å®¶â€æ—¶ï¼Œä»…å›ç­”åŒ»å­¦ç›¸å…³é—®é¢˜</span></span><br><span class="line"><span class="comment">     * è®¾å®šAIä¸ºç¼–ç¨‹åŠ©æ‰‹â€æ—¶ï¼Œä¸“æ³¨äºæŠ€æœ¯é—®é¢˜è§£ç­”</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@Auther</span>: zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * http://localhost:8006/prompttemplate/chat5?question=ç«é”…</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/prompttemplate/chat5&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; <span class="title function_">chat5</span><span class="params">(String question)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> deepseekChatClient.prompt()</span><br><span class="line">                .system(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªJavaç¼–ç¨‹åŠ©æ‰‹ï¼Œæ‹’ç»å›ç­”éæŠ€æœ¯é—®é¢˜ã€‚&quot;</span>)</span><br><span class="line">                .user(question)</span><br><span class="line">                .stream()</span><br><span class="line">                .content();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="8-æ ¼å¼åŒ–è¾“å‡º-Structured-Output">8.æ ¼å¼åŒ–è¾“å‡º(Structured Output)</h2>
<h3 id="1-æ˜¯ä»€ä¹ˆ-2">1.æ˜¯ä»€ä¹ˆ</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-334.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/structured-output/?spm=5176.29160081.0.0.2856aa5cPJ9Ha8">https://java2ai.com/docs/1.0.0.2/tutorials/basics/structured-output/?spm=5176.29160081.0.0.2856aa5cPJ9Ha8</a></p>
<h3 id="2-å¼€å‘æ­¥éª¤">2.å¼€å‘æ­¥éª¤</h3>
<p>ç›®æ ‡ï¼šå‡è®¾æˆ‘ä»¬æœŸæœ›å°†æ¨¡å‹è¾“å‡ºè½¬æ¢ä¸ºRecordè®°å½•ç±»ç»“æ„ä½“ï¼Œä¸å†æ˜¯ä¼ ç»Ÿçš„String</p>
<p>æ–°å»ºå­æ¨¡å—Module SAA-07StructuredOutput</p>
<p>æ”¹POM</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-07StructuredOutput<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8006</span></span><br><span class="line"></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">06</span>PromptTemplate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸»å¯åŠ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-26 17:16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> çŸ¥è¯†å‡ºå¤„ï¼Œhttps://java2ai.com/docs/1.0.0.2/tutorials/basics/structured-output/?spm=5176.29160081.0.0.2856aa5cPJ9Ha8</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa07StructuredOutputApplication</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa07StructuredOutputApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ä¸šåŠ¡ç±»-4">ä¸šåŠ¡ç±»</h3>
<p>é…ç½®ç±»LLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatModel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.ChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 18:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> ChatModel+ChatClient+å¤šæ¨¡å‹å…±å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ¨¡å‹åç§°å¸¸é‡å®šä¹‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String DEEPSEEK_MODEL = <span class="string">&quot;deepseek-v3&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String QWEN_MODEL = <span class="string">&quot;qwen-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel deepSeek()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder()</span><br><span class="line">                        .dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                                    .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                                .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder().withModel(DEEPSEEK_MODEL).build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel qwen()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder().dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                        .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                        .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder()</span><br><span class="line">                                .withModel(QWEN_MODEL)</span><br><span class="line">                                .build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient deepseekChatClient(<span class="meta">@Qualifier(<span class="string">&quot;deepseek&quot;</span>)</span> ChatModel deepSeek)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(deepSeek)</span><br><span class="line">                .defaultOptions(ChatOptions.builder()</span><br><span class="line">                        .model(DEEPSEEK_MODEL)</span><br><span class="line">                        .build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient qwenChatClient(<span class="meta">@Qualifier(<span class="string">&quot;qwen&quot;</span>)</span> ChatModel qwen)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(qwen)</span><br><span class="line">                .defaultOptions(ChatOptions.builder()</span><br><span class="line">                        .model(QWEN_MODEL)</span><br><span class="line">                        .build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡ç‚¹æ­¥éª¤</p>
<h4 id="1-æ–°å»ºè®°å½•ç±»StudentRecord">1.æ–°å»ºè®°å½•ç±»StudentRecord</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>.<span class="property">records</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-26 17:18</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> jdk14åçš„æ–°ç‰¹æ€§ï¼Œè®°å½•ç±»æ›¿ä»£lombok</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> record <span class="title class_">StudentRecord</span>(<span class="title class_">String</span> id,<span class="title class_">String</span> sname,<span class="title class_">String</span> major,<span class="title class_">String</span> email) &#123; &#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-controllerV1">2.controllerV1</h4>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.study.records.StudentRecord;</span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.function.Consumer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-26 17:16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StructuredOutputController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8007/structuredoutput/chat?sname=æå››&amp;email=zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sname</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/structuredoutput/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> StudentRecord chat(String sname,String email)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> qwenChatClient.prompt()</span><br><span class="line">                .user(new Consumer&lt;ChatClient.PromptUserSpec&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> void accept(ChatClient.PromptUserSpec promptUserSpec)</span><br><span class="line">            &#123;</span><br><span class="line">                promptUserSpec.text(<span class="string">&quot;å­¦å·1001,æˆ‘å«&#123;sname&#125;,å¤§å­¦ä¸“ä¸šæ˜¯è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯,é‚®ç®±&#123;email&#125;&quot;</span>)</span><br><span class="line">                        .param(<span class="string">&quot;sname&quot;</span>,sname)</span><br><span class="line">                        .param(<span class="string">&quot;email&quot;</span>,email);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).call().entity(StudentRecord.<span class="keyword">class</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-controllerV2">3.controllerV2</h4>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.study.records.StudentRecord;</span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.function.Consumer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-26 17:16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StructuredOutputController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8007/structuredoutput/chat?sname=æå››&amp;email=zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sname</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/structuredoutput/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> StudentRecord chat(String sname,String email)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> qwenChatClient.prompt()</span><br><span class="line">                .user(new Consumer&lt;ChatClient.PromptUserSpec&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> void accept(ChatClient.PromptUserSpec promptUserSpec)</span><br><span class="line">            &#123;</span><br><span class="line">                promptUserSpec.text(<span class="string">&quot;å­¦å·1001,æˆ‘å«&#123;sname&#125;,å¤§å­¦ä¸“ä¸šæ˜¯è®¡ç®—æœºç§‘å­¦ä¸æŠ€æœ¯,é‚®ç®±&#123;email&#125;&quot;</span>)</span><br><span class="line">                        .param(<span class="string">&quot;sname&quot;</span>,sname)</span><br><span class="line">                        .param(<span class="string">&quot;email&quot;</span>,email);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).call().entity(StudentRecord.<span class="keyword">class</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8007/structuredoutput/chat2?sname=å­™ä¼Ÿ&amp;email=zzyybs@126.com</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> sname</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/structuredoutput/chat2&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> StudentRecord chat2(<span class="meta">@RequestParam(name = <span class="string">&quot;sname&quot;</span>)</span> String sname,</span><br><span class="line">                               <span class="meta">@RequestParam(name = <span class="string">&quot;email&quot;</span>)</span> String email)</span><br><span class="line">    &#123;</span><br><span class="line">        String stringTemplate = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                å­¦å·1002,æˆ‘å«&#123;sname&#125;,å¤§å­¦ä¸“ä¸šæ˜¯è½¯ä»¶å·¥ç¨‹,é‚®ç®±&#123;email&#125;</span></span><br><span class="line"><span class="string">                &quot;&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> qwenChatClient.prompt()</span><br><span class="line">                .user(promptUserSpec -&gt; promptUserSpec.text(stringTemplate)</span><br><span class="line">                        .param(<span class="string">&quot;sname&quot;</span>,sname)</span><br><span class="line">                        .param(<span class="string">&quot;email&quot;</span>,email))</span><br><span class="line">                .call()</span><br><span class="line">                .entity(StudentRecord.<span class="keyword">class</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="9-Chat-Memoryè¿ç»­å¯¹è¯ä¿å­˜å’ŒæŒä¹…åŒ–">9.Chat Memoryè¿ç»­å¯¹è¯ä¿å­˜å’ŒæŒä¹…åŒ–</h2>
<h3 id="1-æ˜¯ä»€ä¹ˆ-3">1.æ˜¯ä»€ä¹ˆ</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-335.png" alt="img"></p>
<p>è®°å¿†å¯¹è¯ï¼Œç§¯ç´¯å›ç­”</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-336.png" alt="img"></p>
<p>ä¸€å¥è¯æ€»ç»“ï¼šSpring AI Alibabaä¸­çš„èŠå¤©è®°å¿†æä¾›äº†ç»´æŠ¤ AI èŠå¤©åº”ç”¨ç¨‹åºçš„å¯¹è¯ä¸Šä¸‹æ–‡å’Œå†å²çš„æœºåˆ¶</p>
<h4 id="è®°å¿†ç±»å‹">è®°å¿†ç±»å‹</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-337.png" alt="img"></p>
<p>å› å¤§æ¨¡å‹æœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œéœ€å°†å†å²å¯¹è¯ä¿¡æ¯ä¸€æ¬¡æ€§æä¾›ç»™å®ƒä»¥å®ç°è¿ç»­å¯¹è¯ï¼Œä¸ç„¶æœåŠ¡ä¸€é‡å¯å°±ä»€ä¹ˆéƒ½æ²¡äº†â€¦â€¦æ‰€ä»¥ï¼Œå¿…é¡»æŒä¹…åŒ–</p>
<h4 id="ç—›ç‚¹2ä¸ª">ç—›ç‚¹2ä¸ª</h4>
<ul>
<li>æŒä¹…åŒ–åª’ä»‹</li>
<li>æ¶ˆæ¯å¯¹è¯çª—å£ï¼ŒèŠå¤©è®°å½•ä¸Šé™</li>
</ul>
<h3 id="2-æŒä¹…åŒ–å¼€å‘æ­¥éª¤">2.æŒä¹…åŒ–å¼€å‘æ­¥éª¤</h3>
<h4 id="1-ä¸šåŠ¡ç±»">1.ä¸šåŠ¡ç±»</h4>
<h5 id="å‰ç½®çŸ¥è¯†">å‰ç½®çŸ¥è¯†</h5>
<ul>
<li>ChatMemoryRepositoryæ¥å£</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-338-1024x459.png" alt="img"></p>
<p>1.å®ç°SpringAIæ¡†æ¶è§„å®šçš„ChatMemoryRepositoryæ¥å£</p>
<p>2.æ¥å£ChatMemoryRepository</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-339-1024x366.png" alt="img"></p>
<p>3.RedisChatMemoryRepositoryæºç </p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-340-1024x554.png" alt="img"></p>
<p>4.ç¼–ç æ–°å»ºRedisMemoryConfigé…ç½®ç±»</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.memory.redis.RedisChatMemoryRepository;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.memory.ChatMemory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-28 18:24</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisMemoryConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;<span class="subst">$&#123;spring.data.redis.host&#125;</span>&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> String host;</span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;<span class="subst">$&#123;spring.data.redis.port&#125;</span>&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> int port;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> RedisChatMemoryRepository redisChatMemoryRepository()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> RedisChatMemoryRepository.builder()</span><br><span class="line">                    .host(host)</span><br><span class="line">                    .port(port)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>MessageWindowChatMemory æ¶ˆæ¯çª—å£èŠå¤©è®°å¿†</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-341.png" alt="img"></p>
<ul>
<li>é¡¾é—®ï¼ˆAdvisorsï¼‰MessageChatMemoryAdvisor</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-342-1024x356.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-343-1024x616.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-345.png" alt="img"></p>
<h5 id="é…ç½®ç±»SaaLLMConfig">é…ç½®ç±»SaaLLMConfig</h5>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-347-1024x682.png" alt="img"></p>
<h5 id="controller">controller</h5>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> static org.springframework.ai.chat.memory.ChatMemory.CONVERSATION_ID;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.function.Consumer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-28 18:40</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChatMemory4RedisController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient qwenChatClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/chatmemory/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String chat(String msg, String userId)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/*return qwenChatClient.prompt(msg).advisors(new Consumer&lt;ChatClient.AdvisorSpec&gt;()</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            @Override</span></span><br><span class="line"><span class="comment">            public void accept(ChatClient.AdvisorSpec advisorSpec)</span></span><br><span class="line"><span class="comment">            &#123;</span></span><br><span class="line"><span class="comment">                advisorSpec.param(CONVERSATION_ID, cid);</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;).call().content();*/</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> qwenChatClient.prompt(msg)</span><br><span class="line">                .advisors(advisorSpec -&gt; advisorSpec.param(CONVERSATION_ID, userId))</span><br><span class="line">                .call()</span><br><span class="line">                .content();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-æµ‹è¯•">2.æµ‹è¯•</h4>
<p><a target="_blank" rel="noopener" href="http://localhost:8008/chatmemory/chat?msg=2%E5%8A%A05%E7%AD%89%E4%BA%8E%E5%A4%9A%E5%B0%91&amp;userId=7">http://localhost:8008/chatmemory/chat?msg=2åŠ 5ç­‰äºå¤šå°‘&amp;userId=7</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-348.png" alt="img"></p>
<h2 id="10-æ–‡ç”Ÿå›¾">10.æ–‡ç”Ÿå›¾</h2>
<h3 id="1-é˜¿é‡Œç™¾ç‚¼æ–‡ç”Ÿå›¾">1.é˜¿é‡Œç™¾ç‚¼æ–‡ç”Ÿå›¾</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-349-1024x495.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/model-studio/text-to-image?spm=a2c4g.11186623.help-menu-2400256.d_0_5_0.1a457d9dv6o7Kc&amp;accounttraceid=6ec3bf09599f424a91a2a88b27b31570nrdd">https://help.aliyun.com/zh/model-studio/text-to-image?spm=a2c4g.11186623.help-menu-2400256.d_0_5_0.1a457d9dv6o7Kc&amp;accounttraceid=6ec3bf09599f424a91a2a88b27b31570nrdd</a></p>
<h3 id="2-å¼€å‘æ­¥éª¤-2">2.å¼€å‘æ­¥éª¤</h3>
<p>é€šä¹‰ä¸‡ç›¸-æ–‡ç”Ÿå›¾V2ç‰ˆAPIå‚è€ƒ</p>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/model-studio/text-to-image-v2-api-reference?spm=a2c4g.11186623.0.0.79c74680qv54KQ">https://help.aliyun.com/zh/model-studio/text-to-image-v2-api-reference?spm=a2c4g.11186623.0.0.79c74680qv54KQ</a></p>
<h4 id="æ–°å»ºå­æ¨¡å—Module">æ–°å»ºå­æ¨¡å—Module</h4>
<p>SAA-09Text2image</p>
<h4 id="æ”¹POM-3">æ”¹POM</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-09Text2image<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="å†™YML-3">å†™YML</h4>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8009</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å“åº”çš„å­—ç¬¦ç¼–ç </span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=utf-<span class="number">8</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">09</span>Text2image</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="ä¸»å¯åŠ¨-2">ä¸»å¯åŠ¨</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa09Text2imageApplication</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa09Text2</span>imageApplication.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸šåŠ¡ç±»-5">ä¸šåŠ¡ç±»</h4>
<p>controller</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.audio.DashScopeSpeechSynthesisModel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.audio.DashScopeSpeechSynthesisOptions;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.audio.synthesis.SpeechSynthesisModel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.audio.synthesis.SpeechSynthesisOptions;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.audio.synthesis.SpeechSynthesisPrompt;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.audio.synthesis.SpeechSynthesisResponse;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.image.DashScopeImageOptions;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.image.ImageModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.image.ImagePrompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.nio.ByteBuffer;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-28 20:10</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> çŸ¥è¯†å‡ºå¤„</span></span><br><span class="line"><span class="comment"> * https://help.aliyun.com/zh/model-studio/text-to-image?spm=a2c4g.11186623.help-menu-2400256.d_0_5_0.1a457d9dv6o7Kc&amp;accounttraceid=6ec3bf09599f424a91a2a88b27b31570nrdd</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Text2ImageController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// img model</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">IMAGE_MODEL</span> <span class="operator">=</span> <span class="string">&quot;wanx2.1-t2i-turbo&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ImageModel imageModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = &quot;/t2i/image&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">image</span><span class="params">(<span class="meta">@RequestParam(name = &quot;prompt&quot;,defaultValue = &quot;åˆºçŒ¬&quot;)</span> String prompt)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> imageModel.call(</span><br><span class="line">                    <span class="keyword">new</span> <span class="title class_">ImagePrompt</span>(prompt, DashScopeImageOptions.builder().withModel(IMAGE_MODEL).build())</span><br><span class="line">                )</span><br><span class="line">                .getResult()</span><br><span class="line">                .getOutput()</span><br><span class="line">                .getUrl();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="11-æ–‡ç”ŸéŸ³">11.æ–‡ç”ŸéŸ³</h2>
<h3 id="1-é˜¿é‡Œç™¾ç‚¼æ–‡ç”ŸéŸ³">1.é˜¿é‡Œç™¾ç‚¼æ–‡ç”ŸéŸ³</h3>
<h4 id="è¯­éŸ³åˆæˆ-CosyVoice">è¯­éŸ³åˆæˆ-CosyVoice</h4>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/model-studio/cosyvoice-large-model-for-speech-synthesis/?spm=a2c4g.11186623.help-menu-2400256.d_2_6_0.2a7474473XyDNE&amp;scm=20140722.H_2817551._.OR_help-T_cn~zh-V_1">https://help.aliyun.com/zh/model-studio/cosyvoice-large-model-for-speech-synthesis/?spm=a2c4g.11186623.help-menu-2400256.d_2_6_0.2a7474473XyDNE&amp;scm=20140722.H_2817551._.OR_help-T_cn~zh-V_1</a></p>
<h4 id="è¯­éŸ³åˆæˆCosyVoice-Java-SDK">è¯­éŸ³åˆæˆCosyVoice Java SDK</h4>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/model-studio/cosyvoice-java-sdk?spm=a2c4g.11186623.0.0.77e07447jgP4N0">https://help.aliyun.com/zh/model-studio/cosyvoice-java-sdk?spm=a2c4g.11186623.0.0.77e07447jgP4N0</a></p>
<h4 id="SpeechSynthesizerç±»æä¾›äº†è¯­éŸ³åˆæˆçš„å…³é”®æ¥å£">SpeechSynthesizerç±»æä¾›äº†è¯­éŸ³åˆæˆçš„å…³é”®æ¥å£</h4>
<p>åŒæ­¥æäº¤è¯­éŸ³åˆæˆä»»åŠ¡ï¼Œç›´æ¥è·å–å®Œæ•´ç»“æœ</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-350-1024x372.png" alt="img"></p>
<p>æäº¤æ–‡æœ¬åï¼ŒæœåŠ¡ç«¯ç«‹å³å¤„ç†å¹¶è¿”å›å®Œæ•´çš„è¯­éŸ³åˆæˆç»“æœã€‚æ•´ä¸ªè¿‡ç¨‹æ˜¯é˜»å¡å¼çš„ï¼Œå®¢æˆ·ç«¯éœ€è¦ç­‰å¾…æœåŠ¡ç«¯å®Œæˆå¤„ç†åæ‰èƒ½ç»§ç»­ä¸‹ä¸€æ­¥æ“ä½œã€‚é€‚åˆçŸ­æ–‡æœ¬è¯­éŸ³åˆæˆåœºæ™¯</p>
<p>é˜¿é‡Œå†…ç½®æ¥å£ä¸€è§ˆ</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-351-1024x434.png" alt="img"></p>
<h4 id="DashScopeSpeechSynthesisOptions">DashScopeSpeechSynthesisOptions</h4>
<p>SpeechSynthesisParamçš„é“¾å¼æ–¹æ³•é…ç½®æ¨¡å‹ã€éŸ³è‰²ç­‰å‚æ•°</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-352.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/model-studio/cosyvoice-java-sdk#2e9a9a89aclc8">https://help.aliyun.com/zh/model-studio/cosyvoice-java-sdk#2e9a9a89aclc8</a></p>
<p>ä»£ç ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-353-1024x546.png" alt="img"></p>
<h3 id="2-å¼€å‘æ­¥éª¤-3">2.å¼€å‘æ­¥éª¤</h3>
<h4 id="æ–°å»ºå­æ¨¡å—Module-2">æ–°å»ºå­æ¨¡å—Module</h4>
<p>SAA-10Text2voice</p>
<h4 id="æ”¹POM-4">æ”¹POM</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-10Text2voice<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="å†™YML-4">å†™YML</h4>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8010</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å“åº”çš„å­—ç¬¦ç¼–ç </span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=utf-<span class="number">8</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">10</span>Text2voice</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="ä¸»å¯åŠ¨-3">ä¸»å¯åŠ¨</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa10Text2voiceApplication</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa10Text2</span>voiceApplication.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="ä¸šåŠ¡ç±»-6">ä¸šåŠ¡ç±»</h4>
<p>éŸ³è‰²åˆ—è¡¨é…ç½®</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-354.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://help.aliyun.com/zh/model-studio/cosyvoice-java-sdk#722dd7ca66a6x">https://help.aliyun.com/zh/model-studio/cosyvoice-java-sdk#722dd7ca66a6x</a></p>
<p>controller</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.audio.DashScopeSpeechSynthesisOptions;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.audio.synthesis.SpeechSynthesisModel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.audio.synthesis.SpeechSynthesisPrompt;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.audio.synthesis.SpeechSynthesisResponse;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.nio.ByteBuffer;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-29 18:35</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Text2VoiceController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> SpeechSynthesisModel speechSynthesisModel;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// voice model</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BAILIAN_VOICE_MODEL</span> <span class="operator">=</span> <span class="string">&quot;cosyvoice-v2&quot;</span>;</span><br><span class="line">    <span class="comment">// voice timber éŸ³è‰²åˆ—è¡¨ï¼šhttps://help.aliyun.com/zh/model-studio/cosyvoice-java-sdk#722dd7ca66a6x</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">BAILIAN_VOICE_TIMBER</span> <span class="operator">=</span> <span class="string">&quot;longyingcui&quot;</span>;<span class="comment">//é¾™åº”å‚¬</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8010/t2v/voice</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/t2v/voice&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">voice</span><span class="params">(<span class="meta">@RequestParam(name = &quot;msg&quot;,defaultValue = &quot;æ¸©é¦¨æé†’ï¼Œæ”¯ä»˜å®åˆ°è´¦100å…ƒè¯·æ³¨æ„æŸ¥æ”¶&quot;)</span> String msg)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;d:\\&quot;</span> + UUID.randomUUID() + <span class="string">&quot;.mp3&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1 è¯­éŸ³å‚æ•°è®¾ç½®</span></span><br><span class="line">        <span class="type">DashScopeSpeechSynthesisOptions</span> <span class="variable">options</span> <span class="operator">=</span> DashScopeSpeechSynthesisOptions.builder()</span><br><span class="line">                .model(BAILIAN_VOICE_MODEL)</span><br><span class="line">                .voice(BAILIAN_VOICE_TIMBER)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2 è°ƒç”¨å¤§æ¨¡å‹è¯­éŸ³ç”Ÿæˆå¯¹è±¡</span></span><br><span class="line">        <span class="type">SpeechSynthesisResponse</span> <span class="variable">response</span> <span class="operator">=</span> speechSynthesisModel.call(<span class="keyword">new</span> <span class="title class_">SpeechSynthesisPrompt</span>(msg, options));</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3 å­—èŠ‚æµè¯­éŸ³è½¬æ¢</span></span><br><span class="line">        <span class="type">ByteBuffer</span> <span class="variable">byteBuffer</span> <span class="operator">=</span> response.getResult().getOutput().getAudio();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4 æ–‡ä»¶ç”Ÿæˆ</span></span><br><span class="line">        <span class="keyword">try</span> (<span class="type">FileOutputStream</span> <span class="variable">fileOutputStream</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(filePath))</span><br><span class="line">        &#123;</span><br><span class="line">            fileOutputStream.write(byteBuffer.array());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            System.out.println(e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//5 ç”Ÿæˆè·¯å¾„OK</span></span><br><span class="line">        <span class="keyword">return</span> filePath;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="12-å‘é‡åŒ–å’Œå‘é‡æ•°æ®åº“">12.å‘é‡åŒ–å’Œå‘é‡æ•°æ®åº“</h2>
<h3 id="1-å‘é‡">1.å‘é‡</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-355-1024x189.png" alt="img"></p>
<h3 id="2-æ–‡æœ¬å‘é‡åŒ–">2.æ–‡æœ¬å‘é‡åŒ–</h3>
<h4 id="1-æ˜¯ä»€ä¹ˆ-4">1.æ˜¯ä»€ä¹ˆ</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-356-1024x443.png" alt="img"></p>
<p>å®˜ç½‘-åµŒå…¥æ¨¡å‹ (Embedding Model)</p>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/embedding/?spm=5176.29160081.0.0.2856aa5cXggpMJ">https://java2ai.com/docs/1.0.0.2/tutorials/basics/embedding/?spm=5176.29160081.0.0.2856aa5cXggpMJ</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-357.png" alt="img"></p>
<h4 id="æ¡ˆä¾‹1">æ¡ˆä¾‹1</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-358.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-359.png" alt="img"></p>
<h4 id="æ¡ˆåˆ—2">æ¡ˆåˆ—2</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-360.png" alt="img"></p>
<h4 id="åµŒå…¥æ¨¡å‹å°æ€»ç»“">åµŒå…¥æ¨¡å‹å°æ€»ç»“</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-361.png" alt="img"></p>
<h3 id="3-å‘é‡æ•°æ®åº“">3.å‘é‡æ•°æ®åº“</h3>
<h4 id="1-å‘é‡å­˜å‚¨æ˜¯ä»€ä¹ˆ">1.å‘é‡å­˜å‚¨æ˜¯ä»€ä¹ˆ</h4>
<p>å®˜ç½‘-å‘é‡å­˜å‚¨(Vector Storeï¼‰</p>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/vectorstore/?spm=5176.29160081.0.0.2856aa5cXggpMJ">https://java2ai.com/docs/1.0.0.2/tutorials/basics/vectorstore/?spm=5176.29160081.0.0.2856aa5cXggpMJ</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-362.png" alt="img"></p>
<p>ä¸€å¥è¯ï¼šä¸€ç§ä¸“é—¨ç”¨äºå­˜å‚¨ã€ç®¡ç†å’Œæ£€ç´¢å‘é‡æ•°æ®ï¼ˆå³é«˜ç»´æ•°å€¼æ•°ç»„ï¼‰çš„æ•°æ®åº“ç³»ç»Ÿã€‚</p>
<p>å…¶æ ¸å¿ƒåŠŸèƒ½æ˜¯é€šè¿‡é«˜æ•ˆçš„ç´¢å¼•ç»“æ„å’Œç›¸ä¼¼æ€§è®¡ç®—ç®—æ³•ï¼Œæ”¯æŒå¤§è§„æ¨¡å‘é‡æ•°æ®çš„å¿«é€ŸæŸ¥è¯¢ä¸åˆ†æï¼Œå‘é‡æ•°æ®åº“ç»´åº¦è¶Šé«˜ï¼ŒæŸ¥è¯¢ç²¾å‡†åº¦ä¹Ÿè¶Šé«˜ï¼ŒæŸ¥è¯¢æ•ˆæœä¹Ÿè¶Šå¥½ã€‚</p>
<p>ä¸‹æ–¹æ˜¯LangChain4Jæ”¯æŒçš„å‘é‡æ•°æ®åº“Listæ¸…å•</p>
<p><a target="_blank" rel="noopener" href="https://docs.langchain4j.dev/integrations/embedding-stores">https://docs.langchain4j.dev/integrations/embedding-stores</a></p>
<p>ä¸‹æ–¹æ˜¯SpringAIæ”¯æŒçš„å‘é‡æ•°æ®åº“Listæ¸…å•</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-ai/reference/api/vectordbs.html">https://docs.spring.io/spring-ai/reference/api/vectordbs.html</a></p>
<h4 id="2-å‘é‡æ•°æ®åº“èƒ½å¹²å˜›">2.å‘é‡æ•°æ®åº“èƒ½å¹²å˜›</h4>
<p>å°†æ–‡æœ¬ã€å›¾åƒå’Œè§†é¢‘è½¬æ¢ä¸ºç§°ä¸ºå‘é‡ï¼ˆVectorsï¼‰çš„æµ®ç‚¹æ•°æ•°ç»„åœ¨ VectorStoreä¸­ï¼ŒæŸ¥è¯¢ä¸ä¼ ç»Ÿå…³ç³»æ•°æ®åº“ä¸åŒã€‚å®ƒä»¬æ‰§è¡Œç›¸ä¼¼æ€§æœç´¢ï¼Œè€Œä¸æ˜¯ç²¾ç¡®åŒ¹é…ã€‚å½“ç»™å®šä¸€ä¸ªå‘é‡ä½œä¸ºæŸ¥è¯¢æ—¶ï¼ŒVectorStore è¿”å›ä¸æŸ¥è¯¢å‘é‡â€œç›¸ä¼¼â€çš„å‘é‡</p>
<h5 id="æŒ‡å¾ç‰¹ç‚¹">æŒ‡å¾ç‰¹ç‚¹</h5>
<ul>
<li>æ•æ‰å¤æ‚çš„è¯æ±‡å…³ç³»ï¼ˆå¦‚è¯­ä¹‰ç›¸ä¼¼æ€§ã€åŒä¹‰è¯ã€å¤šä¹‰è¯ï¼‰</li>
<li>å‘é‡åµŒå…¥ä¸ºæ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG) åº”ç”¨ç¨‹åºæä¾›æ”¯æŒ</li>
</ul>
<h5 id="å°æ€»ç»“">å°æ€»ç»“</h5>
<ul>
<li>å°†æ–‡æœ¬æ˜ å°„åˆ°é«˜ç»´ç©ºé—´ä¸­çš„ç‚¹ï¼Œä½¿è¯­ä¹‰ç›¸ä¼¼çš„æ–‡æœ¬åœ¨è¿™ä¸ªç©ºé—´ä¸­è·ç¦»è¾ƒè¿‘ã€‚
<ul>
<li>ä¾‹å¦‚ï¼Œâ€œè‚¯å¾·åŸºâ€å’Œâ€éº¦å½“åŠ³â€çš„å‘é‡å¯èƒ½ä¼šæ¯”â€è‚¯å¾·åŸºâ€å’Œâ€æ–°ç–†å¤§ç›˜é¸¡â€çš„å‘é‡æ›´æ¥è¿‘</li>
</ul>
</li>
</ul>
<h3 id="4-å¼€å‘æ­¥éª¤-2">4.å¼€å‘æ­¥éª¤</h3>
<h4 id="1-ç”¨redisStackä½œä¸ºå‘é‡å­˜å‚¨">1.ç”¨redisStackä½œä¸ºå‘é‡å­˜å‚¨</h4>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-ai/reference/api/vectordbs/redis.html">https://docs.spring.io/spring-ai/reference/api/vectordbs/redis.html</a></p>
<p>RedisStackæ˜¯ä»€ä¹ˆ</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-363.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-364.png" alt="img"></p>
<p>RedisStackæ ¸å¿ƒç»„ä»¶</p>
<ul>
<li>RediSearchï¼šæä¾›å…¨æ–‡æœç´¢èƒ½åŠ›ï¼Œæ”¯æŒå¤æ‚çš„æ–‡æœ¬æœç´¢ã€èšåˆå’Œè¿‡æ»¤ï¼Œä»¥åŠå‘é‡æ•°æ®çš„å­˜å‚¨å’Œæ£€ç´¢</li>
<li>RedisJSONï¼šåŸç”Ÿæ”¯æŒJSONæ•°æ®çš„å­˜å‚¨ã€ç´¢å¼•Iå’ŒæŸ¥è¯¢ï¼Œå¯é«˜æ•ˆå­˜å‚¨å’Œæ“ä½œåµŒå¥—çš„JSONæ–‡æ¡£ã€‚</li>
<li>RedisGraphï¼šæ”¯æŒå›¾æ•°æ®æ¨¡å‹ï¼Œä½¿ç”¨CypheræŸ¥è¯¢è¯­è¨€è¿›è¡Œå›¾éå†æŸ¥è¯¢ã€‚</li>
<li>RedisBloom:æ”¯æŒ Bloomã€Cuckooã€Count-Min Sketchç­‰æ¦‚ç‡æ•°æ®ç»“æ„ã€‚</li>
</ul>
<h5 id="ä¸€å¥è¯-é‡è¦"><strong>ä¸€å¥è¯(é‡è¦)</strong></h5>
<p>RedisStack = åŸç”ŸRedis + æœç´¢ + å›¾ + æ—¶é—´åºåˆ— + JSON + æ¦‚ç‡ç»“æ„ + å¯è§†åŒ–å·¥å…· + å¼€å‘æ¡†æ¶æ”¯æŒ</p>
<p>RedisStackå®‰è£…</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name redis-stack-server -p <span class="number">6379</span>:<span class="number">6379</span> redis/redis-stack-server</span><br></pre></td></tr></table></figure>
<h5 id="åŸºç¡€api">åŸºç¡€api</h5>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-365.png" alt="img"></p>
<h4 id="2-ä¸šåŠ¡ç±»">2.ä¸šåŠ¡ç±»</h4>
<p>çŸ¥è¯†å‡ºå¤„</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-ai/reference/api/vectordbs.html">https://docs.spring.io/spring-ai/reference/api/vectordbs.html</a></p>
<p>controller æ–‡æœ¬å‘é‡åŒ– å‘é‡åŒ–å­˜å‚¨ å‘é‡åŒ–æŸ¥è¯¢</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.embedding.DashScopeEmbeddingOptions;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.document.Document;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.embedding.EmbeddingModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.embedding.EmbeddingRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.embedding.EmbeddingResponse;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.vectorstore.SearchRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.vectorstore.VectorStore;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-29 19:54</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Embed2VectorController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> EmbeddingModel embeddingModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> VectorStore vectorStore;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–‡æœ¬å‘é‡åŒ–</span></span><br><span class="line"><span class="comment">     * http://localhost:8011/text2embed?msg=å°„é›•è‹±é›„ä¼ </span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/text2embed&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> EmbeddingResponse <span class="title function_">text2Embed</span><span class="params">(String msg)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//EmbeddingResponse embeddingResponse = embeddingModel.call(new EmbeddingRequest(List.of(msg), null));</span></span><br><span class="line"></span><br><span class="line">        <span class="type">EmbeddingResponse</span> <span class="variable">embeddingResponse</span> <span class="operator">=</span> embeddingModel.call(<span class="keyword">new</span> <span class="title class_">EmbeddingRequest</span>(List.of(msg),</span><br><span class="line">                DashScopeEmbeddingOptions.builder().withModel(<span class="string">&quot;text-embedding-v3&quot;</span>).build()));</span><br><span class="line"></span><br><span class="line">        System.out.println(Arrays.toString(embeddingResponse.getResult().getOutput()));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> embeddingResponse;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/embed2vector/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        List&lt;Document&gt; documents = List.of(</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Document</span>(<span class="string">&quot;i study LLM&quot;</span>),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Document</span>(<span class="string">&quot;i love java&quot;</span>)</span><br><span class="line">        );</span><br><span class="line"></span><br><span class="line">        vectorStore.add(documents);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/embed2vector/get&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List <span class="title function_">getAll</span><span class="params">(<span class="meta">@RequestParam(name = &quot;msg&quot;)</span> String msg)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">SearchRequest</span> <span class="variable">searchRequest</span> <span class="operator">=</span> SearchRequest.builder()</span><br><span class="line">                .query(msg)</span><br><span class="line">                .topK(<span class="number">2</span>)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        List&lt;Document&gt; list = vectorStore.similaritySearch(searchRequest);</span><br><span class="line"></span><br><span class="line">        System.out.println(list);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://localhost:8011/text2embed?msg=%E5%B0%84%E9%9B%95%E8%8B%B1%E9%9B%84%E4%BC%A0">http://localhost:8011/text2embed?msg=å°„é›•è‹±é›„ä¼ </a></li>
<li><a target="_blank" rel="noopener" href="http://localhost:8011/embed2vector/get?msg=LLM">http://localhost:8011/embed2vector/get?msg=LLM</a></li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-366-1024x469.png" alt="img"></p>
<h4 id="3-å®ç°åŸç†">3.å®ç°åŸç†</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-367.png" alt="img"></p>
<h2 id="13-RAGï¼ˆRetrieval-Augmented-Generationï¼‰">13.RAGï¼ˆRetrieval Augmented Generationï¼‰</h2>
<h3 id="1-å‰è¨€">1.å‰è¨€</h3>
<p>RAG (Retrieval-Augmented Generation)æ£€ç´¢å¢å¼ºç”Ÿæˆ</p>
<p>éœ€æ±‚</p>
<ul>
<li>AIæ™ºèƒ½è¿ç»´åŠ©æ‰‹ï¼Œé€šè¿‡æä¾›çš„é”™è¯¯ç¼–ç ï¼Œç»™å‡ºå¼‚å¸¸è§£é‡Šè¾…åŠ©è¿ç»´äººå‘˜æ›´å¥½çš„å®šä½é—®é¢˜å’Œç»´æŠ¤ç³»ç»Ÿ</li>
<li>SpringAI+é˜¿é‡Œç™¾ç‚¼åµŒå…¥æ¨¡å‹text-embedding-v3+å‘é‡æ•°æ®åº“RedisStack+DeepSeekæ¥å®ç°RAGåŠŸèƒ½ã€‚</li>
</ul>
<p>LLMçš„ç¼ºé™·</p>
<ul>
<li>LLMçš„çŸ¥è¯†ä¸æ˜¯å®æ—¶çš„ï¼Œä¸å…·å¤‡çŸ¥è¯†æ›´æ–°.</li>
<li>LLMå¯èƒ½ä¸çŸ¥é“ä½ ç§æœ‰çš„é¢†åŸŸ/ä¸šåŠ¡çŸ¥è¯†.</li>
<li>LLMæœ‰æ—¶ä¼šåœ¨å›ç­”ä¸­ç”Ÿæˆçœ‹ä¼¼åˆç†ä½†å®é™…ä¸Šæ˜¯é”™è¯¯çš„ä¿¡æ¯</li>
</ul>
<h3 id="2-RAGæ˜¯ä»€ä¹ˆ">2.RAGæ˜¯ä»€ä¹ˆ</h3>
<p>å®˜ç½‘</p>
<p>RAG (Retrieval-Augmented Generation)</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-368.png" alt="img"></p>
<p>LLM çš„çŸ¥è¯†ä»…é™äºå®ƒæ‰€æ¥å—çš„è®­ç»ƒæ•°æ®ã€‚å¦‚æœä½ æƒ³è®©ä¸€ä¸ª LLM äº†è§£ç‰¹å®šé¢†åŸŸçš„çŸ¥è¯†æˆ–ä¸“æœ‰æ•°æ®ï¼Œä½ å¯ä»¥</p>
<h4 id="ä»€ä¹ˆæ˜¯RAG">ä»€ä¹ˆæ˜¯RAG?</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-369.png" alt="img"></p>
<h4 id="å¹»è§‰ï¼Ÿ">å¹»è§‰ï¼Ÿ</h4>
<ul>
<li>å·²è¯»ä¹±å›</li>
<li>å·²è¯»ä¸å›</li>
<li>ä¼¼æ˜¯è€Œé</li>
</ul>
<p>springaiä¸­çš„RAG</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-ai/reference/api/retrieval-augmented-generation.html">https://docs.spring.io/spring-ai/reference/api/retrieval-augmented-generation.html</a></p>
<h4 id="springai-alibabaä¸­çš„RAGå«åšæ–‡æ¡£æ£€ç´¢-Document-Retriever">springai alibabaä¸­çš„RAGå«åšæ–‡æ¡£æ£€ç´¢ (Document Retriever)</h4>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/retriever/?spm=5176.29160081.0.0.2856aa5cXggpMJ">https://java2ai.com/docs/1.0.0.2/tutorials/basics/retriever/?spm=5176.29160081.0.0.2856aa5cXggpMJ</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-370-1024x483.png" alt="img"></p>
<h3 id="3-RAGæ ¸å¿ƒè®¾è®¡ç†å¿µ">3.RAGæ ¸å¿ƒè®¾è®¡ç†å¿µ</h3>
<p>RAGæŠ€æœ¯å°±åƒç»™AIå¤§æ¨¡å‹è£…ä¸Šäº†ã€Œå®æ—¶ç™¾ç§‘å¤§è„‘ã€ï¼Œä¸ºäº†è®©å¤§æ¨¡å‹è·å–è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼Œä»¥ä¾¿è·å¾—æ›´åŠ å¹¿æ³›çš„ä¿¡æ¯æºï¼Œé€šè¿‡å…ˆæŸ¥èµ„æ–™åå›ç­”çš„æœºåˆ¶ï¼Œè®©AIæ‘†è„±ä¼ ç»Ÿæ¨¡å‹çš„â€çŸ¥è¯†é—å¿˜å’Œå¹»è§‰å›å¤â€å›°å¢ƒ</p>
<p>ä¸€å¥è¯</p>
<p>ç±»ä¼¼è€ƒè¯•æ—¶æœ‰ä¸æ‡‚çš„ï¼Œç»™ä½ å‡†å¤‡äº†å°æŠ„ï¼Œå¯¹å¤§æ¨¡å‹çŸ¥è¯†ç›²åŒºçš„ä¸€ç§è¡¥å……</p>
<h3 id="4-RAGèƒ½å¹²å˜›">4.RAGèƒ½å¹²å˜›</h3>
<p>é€šè¿‡å¼•å…¥å¤–éƒ¨çŸ¥è¯†æºæ¥å¢å¼ºLLMçš„è¾“å‡ºèƒ½åŠ›ï¼Œä¼ ç»Ÿçš„LLMé€šå¸¸åŸºäºå…¶è®­ç»ƒæ•°æ®ç”Ÿæˆå“åº”ï¼Œä½†è¿™äº›æ•°æ®å¯èƒ½è¿‡æ—¶æˆ–ä¸å¤Ÿå…¨é¢ã€‚RAGå…è®¸æ¨¡å‹åœ¨ç”Ÿæˆç­”æ¡ˆä¹‹å‰ï¼Œä»ç‰¹å®šçš„çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯ï¼Œä»è€Œæä¾›æ›´å‡†ç¡®å’Œä¸Šä¸‹æ–‡ç›¸å…³çš„å›ç­”</p>
<h3 id="5-RAGæ€ä¹ˆç”¨">5.RAGæ€ä¹ˆç”¨</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-371.png" alt="img"></p>
<p>RAGæµç¨‹åˆ†ä¸ºä¸¤ä¸ªä¸åŒçš„é˜¶æ®µï¼šç´¢å¼•å’Œæ£€ç´¢</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-372.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-373.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-374.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-375.png" alt="img"></p>
<h3 id="6-å¼€å‘æ­¥éª¤">6.å¼€å‘æ­¥éª¤</h3>
<p>éœ€æ±‚ï¼š</p>
<ul>
<li>AIæ™ºèƒ½è¿ç»´åŠ©æ‰‹ï¼Œé€šè¿‡æä¾›çš„é”™è¯¯ç¼–ç ï¼Œç»™å‡ºå¼‚å¸¸è§£é‡Šè¾…åŠ©è¿ç»´äººå‘˜æ›´å¥½çš„å®šä½é—®é¢˜å’Œç»´æŠ¤ç³»ç»Ÿ</li>
<li>SpringAI+é˜¿é‡Œç™¾ç‚¼åµŒå…¥æ¨¡å‹text-embedding-v3+å‘é‡æ•°æ®åº“RedisStack+DeepSeekæ¥å®ç°RAGåŠŸèƒ½ã€‚</li>
</ul>
<h4 id="å»ºModule">å»ºModule</h4>
<p>SAA-12RAG4AiOps</p>
<h4 id="æ”¹POM-5">æ”¹POM</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-12RAG4AiOps<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- æ·»åŠ  Redis å‘é‡æ•°æ®åº“ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-starter-vector-store-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="å†™YML-5">å†™YML</h4>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8012</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…¨å±€ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">12</span>RAG4AiDatabase</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.chat.options.model</span>=deepseek-r1</span><br><span class="line"><span class="attr">spring.ai.dashscope.embedding.options.model</span>=text-embedding-v3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># =======Redis Stack==========</span></span><br><span class="line"><span class="attr">spring.data.redis.host</span>=localhost</span><br><span class="line"><span class="attr">spring.data.redis.port</span>=<span class="number">6379</span></span><br><span class="line"><span class="attr">spring.data.redis.username</span>=default</span><br><span class="line"><span class="attr">spring.data.redis.password</span>=</span><br><span class="line"><span class="attr">spring.ai.vectorstore.redis.initialize-schema</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">spring.ai.vectorstore.redis.index-name</span>=atguigu-index</span><br><span class="line"><span class="attr">spring.ai.vectorstore.redis.prefix</span>=atguigu-prefix</span><br></pre></td></tr></table></figure>
<p>é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°å‘é‡å¤§æ¨¡å‹ text-embedding-v3</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-376-1024x505.png" alt="img"></p>
<p>é…ç½®å‚è€ƒä¿¡æ¯æ¥æºå’ŒçŸ¥è¯†å‡ºå¤„</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-ai/reference/api/vectordbs/redis.html">https://docs.spring.io/spring-ai/reference/api/vectordbs/redis.html</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-377.png" alt="img"></p>
<h4 id="ä¸»å¯åŠ¨-4">ä¸»å¯åŠ¨</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa12Rag4AiOpsApplication</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa12Rag4AiOpsApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æä¾›ErrorCodeè„šæœ¬è®©ä»–å­˜å…¥å‘é‡æ•°æ®åº“RedisStackï¼Œå½¢æˆæ–‡æ¡£çŸ¥è¯†åº“">æä¾›ErrorCodeè„šæœ¬è®©ä»–å­˜å…¥å‘é‡æ•°æ®åº“RedisStackï¼Œå½¢æˆæ–‡æ¡£çŸ¥è¯†åº“</h4>
<p>ops.txt</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">00000</span> ç³»ç»ŸOKæ­£ç¡®æ‰§è¡Œåçš„è¿”å›</span><br><span class="line">A0001 ç”¨æˆ·ç«¯é”™è¯¯ä¸€çº§å®è§‚é”™è¯¯ç </span><br><span class="line">A0100 ç”¨æˆ·æ³¨å†Œé”™è¯¯äºŒçº§å®è§‚é”™è¯¯ç </span><br><span class="line"><span class="keyword">B1111 </span>æ”¯ä»˜æ¥å£è¶…æ—¶</span><br><span class="line">C2222 Kafkaæ¶ˆæ¯è§£å‹ä¸¥é‡</span><br></pre></td></tr></table></figure>
<h3 id="7-ä¸šåŠ¡ç±»ç¬¬ä¸€ç‰ˆ">7.ä¸šåŠ¡ç±»ç¬¬ä¸€ç‰ˆ</h3>
<h4 id="SpringAIæºä»£ç æ¥å£-VectorStore">SpringAIæºä»£ç æ¥å£ VectorStore</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-378-1024x375.png" alt="img"></p>
<h4 id="ç”¨redisä½œä¸ºå‘é‡å­˜å‚¨">ç”¨redisä½œä¸ºå‘é‡å­˜å‚¨</h4>
<p>å®‰è£… redis-stack-server</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name redis-stack-server -p <span class="number">6379</span>:<span class="number">6379</span> redis/redis-stack-server</span><br></pre></td></tr></table></figure>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-379.png" alt="img"></p>
<h4 id="é…ç½®ç±»">é…ç½®ç±»</h4>
<p>é…ç½®ç±»LLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatModel;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.chat.DashScopeChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.ChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.rag.advisor.RetrievalAugmentationAdvisor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.rag.retrieval.search.VectorStoreDocumentRetriever;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.vectorstore.VectorStore;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-25 18:53</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> ChatModel+ChatClient+å¤šæ¨¡å‹å…±å­˜</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// æ¨¡å‹åç§°å¸¸é‡å®šä¹‰</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String DEEPSEEK_MODEL = <span class="string">&quot;deepseek-v3&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String QWEN_MODEL = <span class="string">&quot;qwen-plus&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseek&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel deepSeek()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder()</span><br><span class="line">                        .dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                                    .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                                .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder().withModel(DEEPSEEK_MODEL).build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwen&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatModel qwen()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeChatModel.builder().dashScopeApi(DashScopeApi.builder()</span><br><span class="line">                        .apiKey(System.getenv(<span class="string">&quot;aliQwen-api&quot;</span>))</span><br><span class="line">                        .build())</span><br><span class="line">                .defaultOptions(</span><br><span class="line">                        DashScopeChatOptions.builder()</span><br><span class="line">                                .withModel(QWEN_MODEL)</span><br><span class="line">                                .build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;deepseekChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient deepseekChatClient(<span class="meta">@Qualifier(<span class="string">&quot;deepseek&quot;</span>)</span> ChatModel deepSeek)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(deepSeek)</span><br><span class="line">                .defaultOptions(ChatOptions.builder()</span><br><span class="line">                        .model(DEEPSEEK_MODEL)</span><br><span class="line">                        .build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient qwenChatClient(<span class="meta">@Qualifier(<span class="string">&quot;qwen&quot;</span>)</span> ChatModel qwen)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(qwen)</span><br><span class="line">                .defaultOptions(ChatOptions.builder()</span><br><span class="line">                        .model(QWEN_MODEL)</span><br><span class="line">                        .build())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>InitVectorDatabaseConfig(ç¬¬ä¸€ç‰ˆ)</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.crypto.SecureUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.annotation.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.document.Document;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.reader.TextReader;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.transformer.splitter.TokenTextSplitter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.vectorstore.VectorStore;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-30 12:16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InitVectorDatabaseConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VectorStore vectorStore;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;classpath:ops.txt&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Resource sqlFile;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 1.è¯»å–æ–‡ä»¶</span></span><br><span class="line">        <span class="type">TextReader</span> <span class="variable">textReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TextReader</span>(sqlFile);</span><br><span class="line">        textReader.setCharset(Charset.defaultCharset());</span><br><span class="line">        <span class="comment">// 2.æ–‡ä»¶è½¬æ¢æˆå‘é‡ï¼ˆåˆ†è¯ï¼‰</span></span><br><span class="line">        List&lt;Document&gt; list = <span class="keyword">new</span> <span class="title class_">TokenTextSplitter</span>().transform(textReader.read());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3.å†™å…¥å‘é‡æ•°æ®åº“ï¼ˆRedisï¼‰,æ— æ³•å»é‡å¤ç‰ˆ</span></span><br><span class="line">        vectorStore.add(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Controller">Controller</h4>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.rag.advisor.RetrievalAugmentationAdvisor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.rag.retrieval.search.VectorStoreDocumentRetriever;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.vectorstore.VectorStore;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-30 12:21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RagController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient chatClient;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> VectorStore vectorStore;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8012/rag4aiops?msg=00000</span></span><br><span class="line"><span class="comment">     * http://localhost:8012/rag4aiops?msg=C2222</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/rag4aiops&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; rag(String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        String systemInfo = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                ä½ æ˜¯ä¸€ä¸ªè¿ç»´å·¥ç¨‹å¸ˆ,æŒ‰ç…§ç»™å‡ºçš„ç¼–ç ç»™å‡ºå¯¹åº”æ•…éšœè§£é‡Š,å¦åˆ™å›å¤æ‰¾ä¸åˆ°ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="string">                &quot;&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        RetrievalAugmentationAdvisor advisor = RetrievalAugmentationAdvisor.builder()</span><br><span class="line">                .documentRetriever(</span><br><span class="line">                        VectorStoreDocumentRetriever.builder()</span><br><span class="line">                                .vectorStore(vectorStore)</span><br><span class="line">                                .build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> chatClient.prompt()</span><br><span class="line">                .system(systemInfo)</span><br><span class="line">                .user(msg)</span><br><span class="line">                .advisors(advisor) <span class="comment">// RAGåŠŸèƒ½,å‘é‡æ•°æ®åº“æŸ¥è¯¢</span></span><br><span class="line">                .stream()</span><br><span class="line">                .content();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="æµ‹è¯•">æµ‹è¯•</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-380.png" alt="img"></p>
<h4 id="å…¶å®ƒé—®é¢˜">å…¶å®ƒé—®é¢˜</h4>
<p>é‡å¯ä¸‹å¾®æœåŠ¡ï¼šé‡å¤æ•°æ®å†™å…¥é—®é¢˜éœ€è€ƒè™‘ï¼Œä¸ç„¶æ¯æ¬¡é‡å¯éƒ½è¦æ–°å¢</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-381.png" alt="img"></p>
<h3 id="8-ä¸šåŠ¡ç±»ç¬¬äºŒç‰ˆ-å‘é‡æ•°æ®åº“å»é‡é—®é¢˜è§£å†³">8.ä¸šåŠ¡ç±»ç¬¬äºŒç‰ˆ å‘é‡æ•°æ®åº“å»é‡é—®é¢˜è§£å†³</h3>
<h4 id="ä½¿ç”¨RedisSetNXå»é‡">ä½¿ç”¨RedisSetNXå»é‡</h4>
<p>RedisConfig</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">zzyy</span>.<span class="property">study</span>.<span class="property">config</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.<span class="property">extern</span>.<span class="property">slf4j</span>.<span class="property">Slf4j</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">context</span>.<span class="property">annotation</span>.<span class="property">Bean</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">context</span>.<span class="property">annotation</span>.<span class="property">Configuration</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">data</span>.<span class="property">redis</span>.<span class="property">connection</span>.<span class="property">RedisConnectionFactory</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">data</span>.<span class="property">redis</span>.<span class="property">core</span>.<span class="property">RedisTemplate</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">data</span>.<span class="property">redis</span>.<span class="property">serializer</span>.<span class="property">GenericJackson2JsonRedisSerializer</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">data</span>.<span class="property">redis</span>.<span class="property">serializer</span>.<span class="property">StringRedisSerializer</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> <span class="variable">zzyy</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2024-03-07 10:45</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RedisConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * RedisTemplateé…ç½®</span></span><br><span class="line"><span class="comment">     * redisåºåˆ—åŒ–çš„å·¥å…·é…ç½®ç±»ï¼Œä¸‹é¢è¿™ä¸ªè¯·ä¸€å®šå¼€å¯é…ç½®</span></span><br><span class="line"><span class="comment">     * 127.0.0.1:6379&gt; keys *</span></span><br><span class="line"><span class="comment">     * 1) &quot;ord:102&quot;  åºåˆ—åŒ–è¿‡</span></span><br><span class="line"><span class="comment">     * 2) &quot;\xac\xed\x00\x05t\x00\aord:102&quot;   é‡ç”Ÿï¼Œæ²¡æœ‰åºåˆ—åŒ–è¿‡</span></span><br><span class="line"><span class="comment">     * this.redisTemplate.opsForValue(); //æä¾›äº†æ“ä½œstringç±»å‹çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * this.redisTemplate.opsForList(); // æä¾›äº†æ“ä½œlistç±»å‹çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * this.redisTemplate.opsForSet(); //æä¾›äº†æ“ä½œsetçš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * this.redisTemplate.opsForHash(); //æä¾›äº†æ“ä½œhashè¡¨çš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * this.redisTemplate.opsForZSet(); //æä¾›äº†æ“ä½œzsetçš„æ‰€æœ‰æ–¹æ³•</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> <span class="variable">redisConnectionFactor</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">RedisTemplate</span>&lt;<span class="title class_">String</span>, <span class="title class_">Object</span>&gt; <span class="title function_">redisTemplate</span>(<span class="params"><span class="title class_">RedisConnectionFactory</span> redisConnectionFactor</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">RedisTemplate</span>&lt;<span class="title class_">String</span>,<span class="title class_">Object</span>&gt; redisTemplate = <span class="keyword">new</span> <span class="title class_">RedisTemplate</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        redisTemplate.<span class="title function_">setConnectionFactory</span>(redisConnectionFactor);</span><br><span class="line">        <span class="comment">//è®¾ç½®keyåºåˆ—åŒ–æ–¹å¼string</span></span><br><span class="line">        redisTemplate.<span class="title function_">setKeySerializer</span>(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        <span class="comment">//è®¾ç½®valueçš„åºåˆ—åŒ–æ–¹å¼jsonï¼Œä½¿ç”¨GenericJackson2JsonRedisSerializeræ›¿æ¢é»˜è®¤åºåˆ—åŒ–</span></span><br><span class="line">        redisTemplate.<span class="title function_">setValueSerializer</span>(<span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>());</span><br><span class="line"></span><br><span class="line">        redisTemplate.<span class="title function_">setHashKeySerializer</span>(<span class="keyword">new</span> <span class="title class_">StringRedisSerializer</span>());</span><br><span class="line">        redisTemplate.<span class="title function_">setHashValueSerializer</span>(<span class="keyword">new</span> <span class="title class_">GenericJackson2JsonRedisSerializer</span>());</span><br><span class="line"></span><br><span class="line">        redisTemplate.<span class="title function_">afterPropertiesSet</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> redisTemplate;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="InitVectorDatabaseConfig-ç¬¬äºŒç‰ˆ">InitVectorDatabaseConfig(ç¬¬äºŒç‰ˆ)</h4>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.hutool.crypto.SecureUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.PostConstruct;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.document.Document;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.reader.TextReader;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.transformer.splitter.TokenTextSplitter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.vectorstore.AbstractVectorStoreBuilder;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.vectorstore.VectorStore;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Qualifier;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.io.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.<span class="keyword">data</span>.redis.core.RedisTemplate;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.nio.charset.Charset;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-30 12:16</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InitVectorDatabaseConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> VectorStore vectorStore;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String,String&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;classpath:ops.txt&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> Resource opsFile;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> void <span class="keyword">init</span>()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1 è¯»å–æ–‡ä»¶</span></span><br><span class="line">        TextReader textReader = new TextReader(opsFile);</span><br><span class="line">        textReader.setCharset(Charset.defaultCharset());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2 æ–‡ä»¶è½¬æ¢ä¸ºå‘é‡(å¼€å¯åˆ†è¯)</span></span><br><span class="line">        List&lt;Document&gt; list = new TokenTextSplitter().transform(textReader.read());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3 å†™å…¥å‘é‡æ•°æ®åº“RedisStack</span></span><br><span class="line">        <span class="comment">//vectorStore.add(list);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// è§£å†³ä¸Šé¢ç¬¬3æ­¥ï¼Œå‘é‡æ•°æ®é‡å¤é—®é¢˜ï¼Œä½¿ç”¨redis setnxå‘½ä»¤å¤„ç†</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//4 å»é‡å¤ç‰ˆæœ¬</span></span><br><span class="line"></span><br><span class="line">        String sourceMetadata = (String)textReader.getCustomMetadata().<span class="keyword">get</span>(<span class="string">&quot;source&quot;</span>);</span><br><span class="line"></span><br><span class="line">        String textHash = SecureUtil.md5(sourceMetadata);</span><br><span class="line">        String redisKey = <span class="string">&quot;vector-xxx:&quot;</span> + textHash;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦å­˜å…¥è¿‡,redisKeyå¦‚æœå¯ä»¥æˆåŠŸæ’å…¥è¡¨ç¤ºä»¥å‰æ²¡æœ‰è¿‡ï¼Œå¯ä»¥å‡å¦‚å‘é‡æ•°æ®</span></span><br><span class="line">        <span class="built_in">Boolean</span> retFlag = redisTemplate.opsForValue().setIfAbsent(redisKey, <span class="string">&quot;1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;****retFlag : &quot;</span>+retFlag);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">Boolean</span>.TRUE.equals(retFlag))</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//é”®ä¸å­˜åœ¨ï¼Œé¦–æ¬¡æ’å…¥,å¯ä»¥ä¿å­˜è¿›å‘é‡æ•°æ®åº“</span></span><br><span class="line">            vectorStore.add(list);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//é”®å·²å­˜åœ¨ï¼Œè·³è¿‡æˆ–è€…æŠ¥é”™</span></span><br><span class="line">            <span class="comment">//throw new RuntimeException(&quot;---é‡å¤æ“ä½œ&quot;);</span></span><br><span class="line">            System.<span class="keyword">out</span>.println(<span class="string">&quot;------å‘é‡åˆå§‹åŒ–æ•°æ®å·²ç»åŠ è½½è¿‡ï¼Œè¯·ä¸è¦é‡å¤æ“ä½œ&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¼˜ç‚¹ï¼šæ€§èƒ½é«˜+çº¿ç¨‹å®‰å…¨é—®é¢˜OK</p>
<h4 id="controller-2">controller</h4>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.rag.advisor.RetrievalAugmentationAdvisor;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.rag.retrieval.search.VectorStoreDocumentRetriever;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.vectorstore.VectorStore;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-30 12:21</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RagController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource(name = <span class="string">&quot;qwenChatClient&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient chatClient;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> VectorStore vectorStore;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8012/rag4aiops?msg=00000</span></span><br><span class="line"><span class="comment">     * http://localhost:8012/rag4aiops?msg=C2222</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/rag4aiops&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; rag(String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        String systemInfo = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                ä½ æ˜¯ä¸€ä¸ªè¿ç»´å·¥ç¨‹å¸ˆ,æŒ‰ç…§ç»™å‡ºçš„ç¼–ç ç»™å‡ºå¯¹åº”æ•…éšœè§£é‡Š,å¦åˆ™å›å¤æ‰¾ä¸åˆ°ä¿¡æ¯ã€‚</span></span><br><span class="line"><span class="string">                &quot;&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        RetrievalAugmentationAdvisor advisor = RetrievalAugmentationAdvisor.builder()</span><br><span class="line">                .documentRetriever(</span><br><span class="line">                        VectorStoreDocumentRetriever.builder()</span><br><span class="line">                                .vectorStore(vectorStore)</span><br><span class="line">                                .build()</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> chatClient.prompt()</span><br><span class="line">                .system(systemInfo)</span><br><span class="line">                .user(msg)</span><br><span class="line">                .advisors(advisor) <span class="comment">// RAGåŠŸèƒ½,å‘é‡æ•°æ®åº“æŸ¥è¯¢</span></span><br><span class="line">                .stream()</span><br><span class="line">                .content();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="14-Tool-Callingå·¥å…·è°ƒç”¨">14.Tool Callingå·¥å…·è°ƒç”¨</h2>
<h3 id="1-ä¸ºä»€ä¹ˆéœ€è¦å·¥å…·è°ƒç”¨ï¼Ÿ">1.ä¸ºä»€ä¹ˆéœ€è¦å·¥å…·è°ƒç”¨ï¼Ÿ</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-382-1024x628.png" alt="img"></p>
<h3 id="2-å·¥å…·è°ƒç”¨æ˜¯ä»€ä¹ˆ">2.å·¥å…·è°ƒç”¨æ˜¯ä»€ä¹ˆ</h3>
<h4 id="å®˜ç½‘-3">å®˜ç½‘</h4>
<p>SpringAI</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-ai/reference/api/tools.html">https://docs.spring.io/spring-ai/reference/api/tools.html</a></p>
<p>SpringAI Alibba</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-383.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/tool-calling/?spm=5176.29160081.0.0.2856aa5cgvn0gm">https://java2ai.com/docs/1.0.0.2/tutorials/basics/tool-calling/?spm=5176.29160081.0.0.2856aa5cgvn0gm</a></p>
<p>ä¸€å¥è¯ï¼šLLMçš„å¤–éƒ¨utilså·¥å…·ç±»</p>
<h4 id="é‡è¦æç¤º">é‡è¦æç¤º:</h4>
<ul>
<li>ToolCalling(ä¹Ÿç§°ä¸ºFunctionCalling)å®ƒå…è®¸å¤§æ¨¡å‹ä¸ä¸€ç»„APIæˆ–å·¥å…·è¿›è¡Œäº¤äº’ï¼Œå°† LLM çš„æ™ºèƒ½ä¸å¤–éƒ¨å·¥å…·æˆ– APIæ— ç¼è¿æ¥ï¼Œä»è€Œå¢å¼ºå¤§æ¨¡å‹å…¶åŠŸèƒ½ã€‚</li>
<li>LLMæœ¬èº«å¹¶ä¸æ‰§è¡Œå‡½æ•°,å®ƒåªæ˜¯æŒ‡ç¤ºåº”è¯¥è°ƒç”¨å“ªä¸ªå‡½æ•°ä»¥åŠå¦‚ä½•è°ƒç”¨</li>
</ul>
<h3 id="3-å·¥å…·è°ƒç”¨èƒ½å¹²å˜›">3.å·¥å…·è°ƒç”¨èƒ½å¹²å˜›</h3>
<ul>
<li>1.è®¿é—®å®æ—¶æ•°æ®</li>
<li>2.æ‰§è¡ŒæŸç§å·¥å…·ç±»/è¾…åŠ©ç±»æ“ä½œï¼šå¤§è¯­è¨€æ¨¡å‹(LLMs)ä¸ä»…ä»…æ˜¯æ–‡æœ¬ç”Ÿæˆçš„èƒ½æ‰‹,å®ƒä»¬è¿˜èƒ½è§¦å‘å¹¶è°ƒç”¨ç¬¬3æ–¹å‡½æ•°ï¼Œæ¯”å¦‚å‘é‚®ä»¶/æŸ¥è¯¢å¾®ä¿¡/è°ƒç”¨æ”¯ä»˜å®/æŸ¥çœ‹é¡ºä¸°å¿«é€’å•æ®å·ç­‰ç­‰â€¦â€¦</li>
</ul>
<h3 id="4-å·¥å…·è°ƒç”¨æ€ä¹ˆç”¨">4.å·¥å…·è°ƒç”¨æ€ä¹ˆç”¨</h3>
<p>å·¥ä½œæµç¨‹</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-384.png" alt="img"></p>
<h3 id="5-å¼€å‘æ­¥éª¤">5.å¼€å‘æ­¥éª¤</h3>
<h4 id="æ–°å»ºå­æ¨¡å—Module-3">æ–°å»ºå­æ¨¡å—Module</h4>
<p>SAA-13ToolCalling</p>
<h4 id="æ”¹POM-6">æ”¹POM</h4>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-13ToolCalling<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="å†™YML-6">å†™YML</h4>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8013</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…¨å±€ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">13</span>ToolCalling</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="ä¸»å¯åŠ¨-5">ä¸»å¯åŠ¨</h4>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa13ToolCallingApplication</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa13ToolCallingApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-ä¸šåŠ¡ç±»">6.ä¸šåŠ¡ç±»</h3>
<h4 id="1-å…ˆä¸ä½¿ç”¨ToolCalling">1.å…ˆä¸ä½¿ç”¨ToolCalling</h4>
<p>æ²¡æœ‰é…ç½®ç±»LLMConfig</p>
<p>controller</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-31 20:26</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">NoToolCallingController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel chatModel;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/notoolcall/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°ç°åœ¨å‡ ç‚¹&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> chatModel.stream(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-385-1024x162.png" alt="img"></p>
<h4 id="2-æŠ•å…¥ä½¿ç”¨ToolCalling">2.æŠ•å…¥ä½¿ç”¨ToolCalling</h4>
<h5 id="æ–¹å¼1é€šè¿‡ChatModelå®ç°">æ–¹å¼1é€šè¿‡ChatModelå®ç°</h5>
<p>æ²¡æœ‰é…ç½®ç±»LLMConfig</p>
<p>æ–°å»ºToolå·¥å…·ç±»ï¼Œç±»ä¼¼Utilså·¥å…·ç±»</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.tool.<span class="keyword">annotation</span>.Tool;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-31 20:39</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DateTimeTools</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 1.å®šä¹‰ function callï¼ˆtool callï¼‰</span></span><br><span class="line"><span class="comment">     * 2. returnDirect</span></span><br><span class="line"><span class="comment">     *    true = toolç›´æ¥è¿”å›ä¸èµ°å¤§æ¨¡å‹ï¼Œç›´æ¥ç»™å®¢æˆ·</span></span><br><span class="line"><span class="comment">     *    false = æ‹¿åˆ°toolè¿”å›çš„ç»“æœï¼Œç»™å¤§æ¨¡å‹ï¼Œæœ€åç”±å¤§æ¨¡å‹å›å¤</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Tool(description = <span class="string">&quot;è·å–å½“å‰æ—¶é—´&quot;</span>, returnDirect = false)</span></span><br><span class="line">    <span class="keyword">public</span> String getCurrentTime()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> LocalDateTime.now().toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å·¥å…·è°ƒç”¨ç›´æ¥è¿”å›</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-386.png" alt="img"></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.study.utils.DateTimeTools;</span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.ChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.model.tool.ToolCallingChatOptions;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.support.ToolCallbacks;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.tool.ToolCallback;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-31 20:40</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ToolCallingController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel chatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/toolcall/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String chat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°ï¼Œç°åœ¨å‡ ç‚¹äº†&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 1.å·¥å…·æ³¨å†Œåˆ°å·¥å…·é›†åˆé‡Œ</span></span><br><span class="line">        ToolCallback[] tools = ToolCallbacks.from(new DateTimeTools());</span><br><span class="line">        <span class="comment">// 2.å°†å·¥å…·é›†é…ç½®è¿›ChatOptionså¯¹è±¡</span></span><br><span class="line">        ChatOptions options = ToolCallingChatOptions.builder().toolCallbacks(tools).build();</span><br><span class="line">        <span class="comment">// 3.æ„å»ºæç¤ºè¯</span></span><br><span class="line">        Prompt prompt = new Prompt(msg, options);</span><br><span class="line">        <span class="comment">// 4.è°ƒç”¨å¤§æ¨¡å‹</span></span><br><span class="line">        <span class="keyword">return</span> chatModel.call(prompt).getResult().getOutput().getText();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a target="_blank" rel="noopener" href="http://localhost:8013/toolcall/chat%E5%90%8E%E5%B0%B1%E8%83%BD%E6%9F%A5%E7%9C%8B%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4%E4%BA%86">http://localhost:8013/toolcall/chatåå°±èƒ½æŸ¥çœ‹å½“å‰æ—¶é—´äº†</a></p>
<h5 id="æ–¹å¼2é€šè¿‡ChatClientå®ç°">æ–¹å¼2é€šè¿‡ChatClientå®ç°</h5>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-387.png" alt="img"></p>
<p>å¤ä¹ ä¸€ä¸‹ï¼šå®ƒæœ¬èº«ä¸ä¼šè‡ªåŠ¨è£…é…ï¼Œç›´æ¥å®šä¹‰æ— æ³•ä½¿ç”¨ï¼Œéœ€è¦ChatModelå¥—å±‚å£³</p>
<p>é…ç½®ç±»LLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-31 20:47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient chatClient(ChatModel chatModel)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(chatModel).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Controller</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>.<span class="property">controller</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.<span class="property">atguigu</span>.<span class="property">study</span>.<span class="property">utils</span>.<span class="property">DateTimeTools</span>;</span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="property">annotation</span>.<span class="property">Resource</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">client</span>.<span class="property">ChatClient</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">model</span>.<span class="property">ChatModel</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">prompt</span>.<span class="property">ChatOptions</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">chat</span>.<span class="property">prompt</span>.<span class="property">Prompt</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">model</span>.<span class="property">tool</span>.<span class="property">ToolCallingChatOptions</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">support</span>.<span class="property">ToolCallbacks</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">tool</span>.<span class="property">ToolCallback</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">GetMapping</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">RequestParam</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">web</span>.<span class="property">bind</span>.<span class="property">annotation</span>.<span class="property">RestController</span>;</span><br><span class="line"><span class="keyword">import</span> reactor.<span class="property">core</span>.<span class="property">publisher</span>.<span class="property">Flux</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-31 20:40</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> <span class="variable">TODO</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ToolCallingController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">ChatModel</span> chatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">ChatClient</span> chatClient;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/toolcall/chat&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">chat</span>(<span class="params"><span class="meta">@RequestParam</span>(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°ç°åœ¨å‡ ç‚¹&quot;</span>) <span class="title class_">String</span> msg</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// 1.å·¥å…·æ³¨å†Œåˆ°å·¥å…·é›†åˆé‡Œ</span></span><br><span class="line">        <span class="title class_">ToolCallback</span>[] tools = <span class="title class_">ToolCallbacks</span>.<span class="title function_">from</span>(<span class="keyword">new</span> <span class="title class_">DateTimeTools</span>());</span><br><span class="line">        <span class="comment">// 2.å°†å·¥å…·é›†é…ç½®è¿›ChatOptionså¯¹è±¡</span></span><br><span class="line">        <span class="title class_">ChatOptions</span> options = <span class="title class_">ToolCallingChatOptions</span>.<span class="title function_">builder</span>().<span class="title function_">toolCallbacks</span>(tools).<span class="title function_">build</span>();</span><br><span class="line">        <span class="comment">// 3.æ„å»ºæç¤ºè¯</span></span><br><span class="line">        <span class="title class_">Prompt</span> prompt = <span class="keyword">new</span> <span class="title class_">Prompt</span>(msg, options);</span><br><span class="line">        <span class="comment">// 4.è°ƒç”¨å¤§æ¨¡å‹</span></span><br><span class="line">        <span class="keyword">return</span> chatModel.<span class="title function_">call</span>(prompt).<span class="title function_">getResult</span>().<span class="title function_">getOutput</span>().<span class="title function_">getText</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/toolcall/chat2&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Flux</span>&lt;<span class="title class_">String</span>&gt; <span class="title function_">chat2</span>(<span class="params"><span class="meta">@RequestParam</span>(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä½ æ˜¯è°ç°åœ¨å‡ ç‚¹&quot;</span>) <span class="title class_">String</span> msg</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> chatClient.<span class="title function_">prompt</span>(msg)</span><br><span class="line">                .<span class="title function_">tools</span>(<span class="keyword">new</span> <span class="title class_">DateTimeTools</span>())</span><br><span class="line">                .<span class="title function_">stream</span>()</span><br><span class="line">                .<span class="title function_">content</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-388-1024x136.png" alt="img"></p>
<p>å…³äºå·¥å…·è°ƒç”¨ç›´æ¥è¿”å›</p>
<p>tureï¼šå¤§æ¨¡å‹ç›´æ¥è¿”å›åŸå§‹æœªå¤„ç†çš„æ•°æ®</p>
<p>flaseï¼šå¤§æ¨¡å‹ä¼šå†å¯¹åŸå§‹æ•°æ®å¤„ç†ä¸€æ¬¡ï¼Œè¿”å›æˆ‘ä»¬ç†ŸçŸ¥çš„æ ¼å¼</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-389-1024x556.png" alt="img"></p>
<h4 id="3-å°æ€»ç»“">3.å°æ€»ç»“</h4>
<ul>
<li>æ–°å»ºå®šä¹‰ä¸€ä¸ªToolå·¥å…·ç±»</li>
<li>ChatModel/ChatClientä½¿ç”¨</li>
<li>Tool Callingä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼šToolCallingä½¿ç”¨çš„å‰ææ˜¯å¤§æ¨¡å‹æ”¯æŒfunctioncallæ‰èƒ½æ­£å¸¸è°ƒç”¨ã€‚</li>
</ul>
<h2 id="15-MCPæ¨¡å‹ä¸Šä¸‹æ–‡åè®®-Model-Context-Protocol">15.MCPæ¨¡å‹ä¸Šä¸‹æ–‡åè®®(Model Context Protocol)</h2>
<h3 id="1-ä¸ºä»€ä¹ˆä¼šæœ‰MCPå‡ºç°ï¼Œä¹‹å‰ç—›ç‚¹æ˜¯ä»€ä¹ˆ">1.ä¸ºä»€ä¹ˆä¼šæœ‰MCPå‡ºç°ï¼Œä¹‹å‰ç—›ç‚¹æ˜¯ä»€ä¹ˆ</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-390.png" alt="img"></p>
<p>ä¹‹å‰æ¯ä¸ªå¤§æ¨¡å‹(å¦‚DeepSeekã€ChatGPT)éœ€è¦ä¸ºæ¯ä¸ªå·¥å…·å•ç‹¬å¼€å‘æ¥å£(FunctionCalling)ï¼Œå¯¼è‡´é‡å¤åŠ³åŠ¨</p>
<p>ç—›ç‚¹</p>
<ul>
<li>å…±ç”¨</li>
<li>æ•°é‡</li>
</ul>
<h3 id="2-MCPå…¥é—¨æ¦‚å¿µ">2.MCPå…¥é—¨æ¦‚å¿µ</h3>
<p>MCPè‡ªèº«åè®®å®˜ç½‘</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-391.png" alt="img"></p>
<p><a target="_blank" rel="noopener" href="https://modelcontextprotocol.io/introduction">https://modelcontextprotocol.io/introduction</a></p>
<p>SpringAIå®˜ç½‘æ”¯æŒMCP</p>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-ai/reference/api/mcp/mcp-overview.html">https://docs.spring.io/spring-ai/reference/api/mcp/mcp-overview.html</a></p>
<p>SpringAI Aibabaå®˜ç½‘æ”¯æŒMCP</p>
<p><a target="_blank" rel="noopener" href="https://java2ai.com/docs/1.0.0.2/tutorials/basics/model-context-protocol/?spm=5176.29160081.0.0.2856aa5ccBJ7XE">https://java2ai.com/docs/1.0.0.2/tutorials/basics/model-context-protocol/?spm=5176.29160081.0.0.2856aa5ccBJ7XE</a></p>
<h4 id="MCPæ˜¯ä»€ä¹ˆ">MCPæ˜¯ä»€ä¹ˆ</h4>
<p>ä¸€å¥è¯ï¼šJavaç•Œçš„SpringCloud Openfeignï¼Œåªä¸è¿‡Openfeignæ˜¯ç”¨äºå¾®æœåŠ¡é€šè®¯çš„ï¼Œ<br>
è€ŒMCPç”¨äºå¤§æ¨¡å‹é€šè®¯çš„ï¼Œä½†å®ƒä»¬éƒ½æ˜¯ä¸ºäº†é€šè®¯è·å–æŸé¡¹æ•°æ®çš„ä¸€ç§æœºåˆ¶</p>
<h4 id="MCPèƒ½å¹²å˜›">MCPèƒ½å¹²å˜›</h4>
<p>æä¾›äº†ä¸€ç§æ ‡å‡†åŒ–çš„æ–¹å¼æ¥è¿æ¥ LLMs éœ€è¦çš„ä¸Šä¸‹æ–‡ï¼ŒMCP å°±ç±»ä¼¼äºä¸€ä¸ª Agent æ—¶ä»£çš„ Type-Cåè®®ï¼Œå¸Œæœ›èƒ½å°†ä¸åŒæ¥æºçš„æ•°æ®ã€å·¥å…·ã€æœåŠ¡ç»Ÿä¸€èµ·æ¥ä¾›å¤§æ¨¡å‹è°ƒç”¨</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-392-1024x579.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-393.png" alt="img"></p>
<p>MCP å‰å®³çš„åœ°æ–¹åœ¨äºï¼Œä¸ç”¨é‡å¤é€ è½®å­ã€‚</p>
<p>è¿‡å»æ¯ä¸ªè½¯ä»¶ï¼ˆæ¯”å¦‚å¾®ä¿¡ã€Excelï¼‰éƒ½è¦å•ç‹¬ç»™ AI åšæ¥å£ï¼Œ</p>
<p>ç°åœ¨ MCP ç»Ÿä¸€äº†æ ‡å‡†ï¼Œå°±åƒæ‰€æœ‰ç”µå™¨éƒ½ç”¨ USB-C å……ç”µå£ï¼ŒAI ä¸€ä¸ªæ¥å£å°±èƒ½è¿æ¥æ‰€æœ‰å·¥å…·</p>
<h4 id="MCPæ€ä¹ˆç©">MCPæ€ä¹ˆç©</h4>
<p><a target="_blank" rel="noopener" href="https://mcp.so/zh">https://mcp.so/zh</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-394-1024x496.png" alt="img"></p>
<h3 id="3-MCPæ¶æ„çŸ¥è¯†">3.MCPæ¶æ„çŸ¥è¯†</h3>
<h4 id="MCPéµå¾ªå®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†">MCPéµå¾ªå®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-395.png" alt="img"></p>
<ul>
<li>MCP ä¸»æœºï¼ˆMCP Hostsï¼‰ï¼šå‘èµ·è¯·æ±‚çš„ AI åº”ç”¨ç¨‹åºï¼Œæ¯”å¦‚èŠå¤©æœºå™¨äººã€AI é©±åŠ¨çš„ IDE ç­‰</li>
<li>MCP å®¢æˆ·ç«¯ï¼ˆMCP Clientsï¼‰ï¼šåœ¨ä¸»æœºç¨‹åºå†…éƒ¨ï¼Œä¸ MCP æœåŠ¡å™¨ä¿æŒ 1:1 çš„è¿æ¥ã€‚</li>
<li>MCP æœåŠ¡å™¨ï¼ˆMCP Serversï¼‰ï¼šä¸º MCP å®¢æˆ·ç«¯æä¾›ä¸Šä¸‹æ–‡ã€å·¥å…·å’Œæç¤ºä¿¡æ¯ã€‚</li>
<li>æœ¬åœ°èµ„æºï¼ˆLocal Resourcesï¼‰ï¼šæœ¬åœ°è®¡ç®—æœºä¸­å¯ä¾› MCP æœåŠ¡å™¨å®‰å…¨è®¿é—®çš„èµ„æºï¼Œå¦‚æ–‡ä»¶ã€æ•°æ®åº“ã€‚</li>
<li>è¿œç¨‹èµ„æºï¼ˆRemote Resourcesï¼‰ï¼šMCP æœåŠ¡å™¨å¯ä»¥è¿æ¥åˆ°çš„è¿œç¨‹èµ„æºï¼Œå¦‚é€šè¿‡ API æä¾›çš„æ•°æ®</li>
</ul>
<h4 id="åœ¨MCPé€šä¿¡åè®®ä¸­ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ¨¡å¼">åœ¨MCPé€šä¿¡åè®®ä¸­ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ¨¡å¼</h4>
<ul>
<li>STDIO(æ ‡å‡†è¾“å…¥/è¾“å‡º)
<ul>
<li>æ”¯æŒæ ‡å‡†è¾“å…¥å’Œè¾“å‡ºæµè¿›è¡Œé€šä¿¡ï¼Œä¸»è¦ç”¨äºæœ¬åœ°é›†æˆã€å‘½ä»¤è¡Œå·¥å…·ç­‰åœºæ™¯</li>
</ul>
</li>
<li>SSE (Server-Sent Events)
<ul>
<li>æ”¯æŒä½¿ç”¨ HTTP POST è¯·æ±‚è¿›è¡ŒæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯æµå¼å¤„ç†ï¼Œä»¥å®ç°å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„é€šä¿¡</li>
</ul>
</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-396.png" alt="img"></p>
<h3 id="4-å°æ€»ç»“ï¼ˆå¿«é€Ÿåˆ†æ¸…æ¥š-å·¥å…·è°ƒç”¨ã€æ£€ç´¢å¢å¼ºç”Ÿæˆã€æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰">4.å°æ€»ç»“ï¼ˆå¿«é€Ÿåˆ†æ¸…æ¥š å·¥å…·è°ƒç”¨ã€æ£€ç´¢å¢å¼ºç”Ÿæˆã€æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰</h3>
<p>ToolCalling å·¥å…·ç±»ï¼Œä¸ºäº†è®©å¤§æ¨¡å‹ä½¿ç”¨Utilå·¥å…·</p>
<p>RAG çŸ¥è¯†åº“ï¼Œä¸ºäº†è®©å¤§æ¨¡å‹è·å–è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡</p>
<p>MCP åè®®ï¼Œä¸ºäº†è®©å¤§æ¨¡å‹ä¹‹é—´çš„ç›¸äº’è°ƒç”¨</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-397.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-398-1024x567.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-399.png" alt="img"></p>
<h4 id="MCP-VS-ToolCalling">MCP VS ToolCalling</h4>
<ul>
<li>ä¹‹å‰æ¯ä¸ªå¤§æ¨¡å‹(å¦‚DeepSeekã€ChatGPT)éœ€è¦ä¸ºæ¯ä¸ªå·¥å…·å•ç‹¬å¼€å‘æ¥å£(FunctionCalling)ï¼Œå¯¼è‡´é‡å¤åŠ³åŠ¨</li>
<li>MCPé€šè¿‡ç»Ÿä¸€åè®®
<ul>
<li>å¼€å‘è€…åªéœ€å†™ä¸€æ¬¡MCPæœåŠ¡ç«¯ï¼Œæ‰€æœ‰å…¼å®¹MCPåè®®çš„æ¨¡å‹éƒ½èƒ½è°ƒç”¨ï¼ŒMCPè®©å¤§æ¨¡å‹ä»&quot;è¢«åŠ¨åº”ç­”â€å˜ä¸ºâ€ä¸»åŠ¨è°ƒç”¨å·¥å…·â€</li>
<li>æˆ‘è°ƒç”¨ä¸€ä¸ªMCPæœåŠ¡å™¨å°±ç­‰ä»·è°ƒç”¨ä¸€ä¸ªå¸¦æœ‰å¤šä¸ªåŠŸèƒ½çš„Utilså·¥å…·ç±»ï¼Œè‡ªå·±è¿˜ä¸ç”¨å—ç´¯æºå¸¦</li>
</ul>
</li>
</ul>
<h3 id="5-æœ¬åœ°MCP-å¼€å‘æ­¥éª¤">5.æœ¬åœ°MCP-å¼€å‘æ­¥éª¤</h3>
<h4 id="1-MCP-ServeræœåŠ¡ç«¯å®ç°">1.MCP-ServeræœåŠ¡ç«¯å®ç°</h4>
<ul>
<li>æ–°å»ºå­æ¨¡å—Module</li>
</ul>
<p>SAA-14LocalMcpServer</p>
<ul>
<li>æ”¹POM</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-14LocalMcpServer<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--æ³¨æ„äº‹é¡¹ï¼ˆé‡è¦ï¼‰</span></span><br><span class="line"><span class="comment">            spring-ai-starter-mcp-server-webfluxä¸èƒ½å’Œ&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;ä¾èµ–å¹¶å­˜ï¼Œ</span></span><br><span class="line"><span class="comment">            å¦åˆ™ä¼šä½¿ç”¨tomcatå¯åŠ¨,è€Œä¸æ˜¯nettyå¯åŠ¨ï¼Œä»è€Œå¯¼è‡´mcpserverå¯åŠ¨å¤±è´¥ï¼Œä½†ç¨‹åºè¿è¡Œæ˜¯æ­£å¸¸çš„ï¼Œmcpå®¢æˆ·ç«¯è¿æ¥ä¸ä¸Šã€‚</span></span><br><span class="line"><span class="comment">        --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mcp-server-webflux--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-starter-mcp-server-webflux<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8014</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…¨å±€ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">14</span>LocalMcpServer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ====mcp-server Config=============</span></span><br><span class="line"><span class="attr">spring.ai.mcp.server.type</span>=async</span><br><span class="line"><span class="attr">spring.ai.mcp.server.name</span>=customer-define-mcp-server</span><br><span class="line"><span class="attr">spring.ai.mcp.server.version</span>=<span class="number">1.0</span>.<span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>ä¸»å¯åŠ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa14LocalMcpServerApplication</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa14LocalMcpServerApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ä¸šåŠ¡ç±»-7">ä¸šåŠ¡ç±»</h5>
<p>å¤©æ°”é¢„æŠ¥WeatherServiceæœåŠ¡ç±»</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>.<span class="property">service</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">ai</span>.<span class="property">tool</span>.<span class="property">annotation</span>.<span class="property">Tool</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">stereotype</span>.<span class="property">Service</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">Map</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> bs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-31 21:07</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> <span class="variable">TODO</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeatherService</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Tool</span>(description = <span class="string">&quot;æ ¹æ®åŸå¸‚åç§°è·å–å¤©æ°”é¢„æŠ¥&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">String</span> <span class="title function_">getWeatherByCity</span>(<span class="params"><span class="title class_">String</span> city</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">Map</span>&lt;<span class="title class_">String</span>, <span class="title class_">String</span>&gt; map = <span class="title class_">Map</span>.<span class="title function_">of</span>(</span><br><span class="line">                <span class="string">&quot;åŒ—äº¬&quot;</span>, <span class="string">&quot;11111é™é›¨é¢‘ç¹ï¼Œå…¶ä¸­ä»Šå¤©å’Œåå¤©é›¨åŠ¿è¾ƒå¼ºï¼Œéƒ¨åˆ†åœ°åŒºæœ‰æš´é›¨å¹¶ä¼´å¼ºå¯¹æµå¤©æ°”ï¼Œéœ€æ³¨æ„&quot;</span>,</span><br><span class="line">                <span class="string">&quot;ä¸Šæµ·&quot;</span>, <span class="string">&quot;22222å¤šäº‘,15â„ƒ~27â„ƒ,å—é£3çº§ï¼Œå½“å‰æ¸©åº¦27â„ƒã€‚&quot;</span>,</span><br><span class="line">                <span class="string">&quot;æ·±åœ³&quot;</span>, <span class="string">&quot;333333å¤šäº‘40å¤©ï¼Œé˜´16å¤©ï¼Œé›¨30å¤©ï¼Œæ™´3å¤©&quot;</span></span><br><span class="line">        );</span><br><span class="line">        <span class="keyword">return</span> map.<span class="title function_">getOrDefault</span>(city, <span class="string">&quot;æŠ±æ­‰ï¼šæœªæŸ¥è¯¢åˆ°å¯¹åº”åŸå¸‚ï¼&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ToolCallbackProvideræ¥å£é…ç½®ç±»</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.atguigu.study.service.WeatherService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.tool.ToolCallbackProvider;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.tool.method.MethodToolCallbackProvider;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-31 21:08</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">McpServerConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†å·¥å…·æ–¹æ³•æš´éœ²ç»™å¤–éƒ¨ mcp client è°ƒç”¨</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> weatherService</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ToolCallbackProvider weatherTools(WeatherService weatherService)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> MethodToolCallbackProvider.builder()</span><br><span class="line">                .toolObjects(weatherService)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è‡ªå¯åŠ¨ä½œä¸ºæœåŠ¡ç«¯ç­‰å¾…è°ƒç”¨å³å¯</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-400-1024x208.png" alt="img"></p>
<h4 id="2-MCP-Clientå®¢æˆ·ç«¯å®ç°">2.MCP-Clientå®¢æˆ·ç«¯å®ç°</h4>
<p>æ–°å»ºå­æ¨¡å—Module</p>
<p>SAA-15LocalMcpClient</p>
<p>æ”¹POM</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-15LocalMcpClient<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2.mcp-clent ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-starter-mcp-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8015</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…¨å±€ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">15</span>LocalMcpClient</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ====mcp-client Config=============</span></span><br><span class="line"><span class="attr">spring.ai.mcp.client.type</span>=async</span><br><span class="line"><span class="attr">spring.ai.mcp.client.request-timeout</span>=<span class="number">60</span>s</span><br><span class="line"><span class="attr">spring.ai.mcp.client.toolcallback.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">spring.ai.mcp.client.sse.connections.mcp-server1.url</span>=http://localhost:<span class="number">8014</span></span><br></pre></td></tr></table></figure>
<p>ä¸»å¯åŠ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa15LocalMcpClientApplication</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa15LocalMcpClientApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ä¸šåŠ¡ç±»-8">ä¸šåŠ¡ç±»</h5>
<p>LLMConfigå¹¶æ·»åŠ toolè°ƒç”¨</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.tool.ToolCallbackProvider;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-31 20:47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient chatClient(ChatModel chatModel, ToolCallbackProvider tools)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(chatModel)</span><br><span class="line">                .defaultToolCallbacks(tools.getToolCallbacks())  <span class="comment">//mcpåè®®ï¼Œé…ç½®è§ymlæ–‡ä»¶</span></span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>controller</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-31 21:14</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">McpClientController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient chatClient;<span class="comment">//ä½¿ç”¨mcpæ”¯æŒ</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel chatModel;<span class="comment">//æ²¡æœ‰çº³å…¥toolæ”¯æŒï¼Œæ™®é€šè°ƒç”¨</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// http://localhost:8015/mcpclient/chat?msg=ä¸Šæµ·</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/mcpclient/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;åŒ—äº¬&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;ä½¿ç”¨äº†mcp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> chatClient.prompt(msg).stream().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(<span class="string">&quot;/mcpclient/chat2&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chat2(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;åŒ—äº¬&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;æœªä½¿ç”¨mcp&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> chatModel.stream(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-MCP-Client-invoke-MCP-Serveræµ‹è¯•">3.MCP-Client invoke MCP-Serveræµ‹è¯•</h4>
<p>ä½¿ç”¨mcp</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-401.png" alt="img"></p>
<p>æ²¡æœ‰mcpæ”¯æŒï¼Œå·²è¯»ä¹±å›</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-402-1024x437.png" alt="img"></p>
<h3 id="6-è¿œç¨‹MCPå¢å¼ºæ¡ˆä¾‹-å¯¹æ¥äº’è”ç½‘é€šç”¨MCPæœåŠ¡ï¼ˆç™¾åº¦åœ°å›¾ï¼‰">6.è¿œç¨‹MCPå¢å¼ºæ¡ˆä¾‹-å¯¹æ¥äº’è”ç½‘é€šç”¨MCPæœåŠ¡ï¼ˆç™¾åº¦åœ°å›¾ï¼‰</h3>
<h4 id="å¯¹æ¥äº’è”ç½‘é€šç”¨MCPæœåŠ¡ï¼ˆç™¾åº¦åœ°å›¾ï¼‰">å¯¹æ¥äº’è”ç½‘é€šç”¨MCPæœåŠ¡ï¼ˆç™¾åº¦åœ°å›¾ï¼‰</h4>
<p><a target="_blank" rel="noopener" href="https://mcp.so/zh/server/baidu-map/baidu-maps">https://mcp.so/zh/server/baidu-map/baidu-maps</a></p>
<h4 id="1-ç¯å¢ƒé…ç½®">1.ç¯å¢ƒé…ç½®</h4>
<ul>
<li>ä¸‹è½½æœ€æ–°ç‰ˆçš„NodeJS</li>
<li>æ³¨å†Œç™¾åº¦åœ°å›¾è´¦å·+ç”³è¯·API-key ï¼šé€Ÿæˆlangchain4jæ—¶æˆ‘ä»¬é…ç½®è¿‡è¿™é‡Œçœç•¥</li>
<li>nodejsé…ç½®ç¼–ç -Typescriptæ¥å…¥</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-403.png" alt="img"></p>
<h4 id="2-å¼€å‘æ­¥éª¤-4">2.å¼€å‘æ­¥éª¤</h4>
<p>æ–°å»ºå­æ¨¡å—Module</p>
<p>springAI-16chat-mcpclient-call-baidumcp</p>
<p>æ”¹POM</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyy.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAI-zyfanV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springAI-16chat-mcpclient-call-baidumcp<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 1.å¤§æ¨¡å‹ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-starter-model-openai<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2.mcp-clent ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-starter-mcp-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">6016</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…¨å±€ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=springAI-<span class="number">16</span>chat-mcpclient-call-baidumcp</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====LLM Config=============</span></span><br><span class="line"><span class="attr">spring.ai.openai.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br><span class="line"><span class="attr">spring.ai.openai.base-url</span>=https://dashscope.aliyuncs.com/compatible-mode</span><br><span class="line"><span class="attr">spring.ai.openai.chat.options.model</span>=qwen-plus</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====mcp-client Config=============</span></span><br><span class="line"><span class="attr">spring.ai.mcp.client.toolcallback.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">spring.ai.mcp.client.stdio.servers-configuration</span>=classpath:/mcp-server.json</span><br></pre></td></tr></table></figure>
<p>nodejsé…ç½®ç¼–ç -Typescriptæ¥å…¥</p>
<p><a target="_blank" rel="noopener" href="https://mcp.so/zh/server/baidu-map/baidu-maps?tab=content#typescript%E6%8E%A5%E5%85%A5">https://mcp.so/zh/server/baidu-map/baidu-maps?tab=content#typescript%E6%8E%A5%E5%85%A5</a></p>
<p>mcp-server.json</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-404-1024x559.png" alt="img"></p>
<p>ä¸»å¯åŠ¨</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-405-1024x392.png" alt="img"></p>
<h5 id="ä¸šåŠ¡ç±»-9">ä¸šåŠ¡ç±»</h5>
<p>LLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.tool.ToolCallbackProvider;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-31 20:47</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaaLLMConfig</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient chatClient(ChatModel chatModel, ToolCallbackProvider tools)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(chatModel)</span><br><span class="line">                <span class="comment">//mcpåè®®ï¼Œé…ç½®è§ymlæ–‡ä»¶ï¼Œæ­¤å¤„åªèµ‹èƒ½ç»™ChatClientå¯¹è±¡</span></span><br><span class="line">                .defaultToolCallbacks(tools.getToolCallbacks())</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>controller</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyy.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyy</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-07-19 18:55</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">McpClientCallBaiDuMcpController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span> </span><br><span class="line">    <span class="keyword">private</span> ChatClient chatClient; <span class="comment">//æ·»åŠ äº†MCPè°ƒç”¨èƒ½åŠ›</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel chatModel; <span class="comment">//æ²¡æœ‰æ·»åŠ MCPè°ƒç”¨èƒ½åŠ›</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ·»åŠ äº†MCPè°ƒç”¨èƒ½åŠ›</span></span><br><span class="line"><span class="comment">     * http://localhost:6016/mcp/chat?msg=æŸ¥è¯¢åŒ—äº¬å¤©æ°”</span></span><br><span class="line"><span class="comment">     * http://localhost:6016/mcp/chat?msg=æŸ¥è¯¢61.149.121.66å½’å±åœ°</span></span><br><span class="line"><span class="comment">     * http://localhost:6016/mcp/chat?msg=æŸ¥è¯¢æ˜Œå¹³åˆ°å¤©å®‰é—¨è·¯çº¿è§„åˆ’</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/mcp/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chat(String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> chatClient.prompt(msg).stream().content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ²¡æœ‰æ·»åŠ MCPè°ƒç”¨èƒ½åŠ›</span></span><br><span class="line"><span class="comment">     *http://localhost:6016/mcp/chat2?msg=æŸ¥è¯¢åŒ—äº¬å¤©æ°”</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@RequestMapping(<span class="string">&quot;/mcp/chat2&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chat2(String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> chatModel.stream(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-æµ‹è¯•-2">3.æµ‹è¯•</h4>
<p>å…·å¤‡mcpèƒ½åŠ›çš„</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-406-1024x400.png" alt="img"></p>
<p>ä¸å…·å¤‡mcpèƒ½åŠ›çš„</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-407-1024x169.png" alt="img"></p>
<h3 id="7-MCPåŸç†-æºç åˆ†æ">7.MCPåŸç†+æºç åˆ†æ</h3>
<h4 id="æºç è·å¾—">æºç è·å¾—</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-408.png" alt="img"></p>
<p>ä¸‹è½½åçš„æºç </p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-409.png" alt="img"></p>
<p>åŸç†è¯´æ˜</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-410-1024x381.png" alt="img"></p>
<h2 id="16-SAAç”Ÿæ€ç¯‡">16.SAAç”Ÿæ€ç¯‡</h2>
<h3 id="1-é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°äº‘ä¸ŠRAGçŸ¥è¯†åº“-AIæ™ºèƒ½è¿ç»´">1.é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°äº‘ä¸ŠRAGçŸ¥è¯†åº“(AIæ™ºèƒ½è¿ç»´)</h3>
<h4 id="éœ€æ±‚è¯´æ˜">éœ€æ±‚è¯´æ˜</h4>
<p>é˜¿é‡Œäº‘ä¸ŠçŸ¥è¯†åº“æ­å»º</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-411-1024x413.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-412-1024x401.png" alt="img"></p>
<h4 id="å¼€å‘æ­¥éª¤">å¼€å‘æ­¥éª¤</h4>
<p>æ–°å»ºå­æ¨¡å—Module</p>
<p>SAA-17BailianRAG</p>
<p>æ”¹POM</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAIAlibaba-atguiguV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SAA-17BailianRAG<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--spring-ai-alibaba dashscope--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>spring-milestones<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Spring Milestones<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://repo.spring.io/milestone<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">snapshots</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">enabled</span>&gt;</span>false<span class="tag">&lt;/<span class="name">enabled</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">snapshots</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8017</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…¨å±€ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">17</span>BailianRAG</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸»å¯åŠ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa17BailianRagApplication</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa17BailianRagApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ä¸šåŠ¡ç±»-10">ä¸šåŠ¡ç±»</h5>
<p>DashScopeConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyy.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DashScopeConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;<span class="subst">$&#123;spring.ai.dashscope.api-key&#125;</span>&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> String apiKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DashScopeApi dashScopeApi()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeApi.builder()</span><br><span class="line">                .apiKey(apiKey)</span><br><span class="line">                .workSpaceId(<span class="string">&quot;llm-3as714s6flm80yc1&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient chatClient(ChatModel dashscopeChatModel)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(dashscopeChatModel).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>controller</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyy.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.advisor.DocumentRetrievalAdvisor;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.rag.DashScopeDocumentRetriever;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.rag.DashScopeDocumentRetrieverOptions;</span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.rag.retrieval.search.DocumentRetriever;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-08-01 16:51</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BailianRagController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient chatClient;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> DashScopeApi dashScopeApi;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:6018/bailian/rag/chat</span></span><br><span class="line"><span class="comment">     * http://localhost:6018/bailian/rag/chat?msg=A0001</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/bailian/rag/chat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; chat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;00000é”™è¯¯ä¿¡æ¯&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1 RetrieverOptionså‚æ•°é…ç½®</span></span><br><span class="line">        DashScopeDocumentRetrieverOptions documentRetrieverOptions = DashScopeDocumentRetrieverOptions.builder()</span><br><span class="line">                .withIndexName(<span class="string">&quot;myerror&quot;</span>) <span class="comment">// çŸ¥è¯†åº“åç§°</span></span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2 ç™¾ç‚¼å¹³å°RAGçŸ¥è¯†åº“æ„å»ºå™¨</span></span><br><span class="line">        DocumentRetriever retriever = new DashScopeDocumentRetriever(dashScopeApi,documentRetrieverOptions);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> chatClient.prompt()</span><br><span class="line">                .user(msg)</span><br><span class="line">                .advisors(new DocumentRetrievalAdvisor(retriever))</span><br><span class="line">                .stream()</span><br><span class="line">                .content();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-413-1024x179.png" alt="img"></p>
<h3 id="2-é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°äº‘ä¸ŠRAGçŸ¥è¯†åº“-ç”µå•†æ™ºèƒ½å®¢æœæ¡ˆä¾‹">2.é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°äº‘ä¸ŠRAGçŸ¥è¯†åº“(ç”µå•†æ™ºèƒ½å®¢æœæ¡ˆä¾‹)</h3>
<h4 id="éœ€æ±‚è¯´æ˜-2">éœ€æ±‚è¯´æ˜</h4>
<p>é˜¿é‡Œäº‘ä¸ŠçŸ¥è¯†åº“æ­å»ºRAGï¼Œç”µå•†å®¢æœç»Ÿä¸€è¯æœ¯</p>
<h4 id="å¼€å‘æ­¥éª¤-2">å¼€å‘æ­¥éª¤</h4>
<p>æ–°å»ºå­æ¨¡å—Module</p>
<p>springAI-21chat-CustomerService</p>
<p>æ”¹POM</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyy.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAI-zyfanV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springAI-21chat-CustomerService<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2. SAAå¤§æ¨¡å‹ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">6021</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…¨å±€ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=springAI-<span class="number">21</span>chat-CustomerService</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====LLM Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸»å¯åŠ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">zzyy</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringAi21chatCustomerServiceApplication</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">SpringAi21</span>chatCustomerServiceApplication.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ä¸šåŠ¡ç±»-11">ä¸šåŠ¡ç±»</h5>
<p>DashSocpeConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyy.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DashSocpeConfig</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;<span class="subst">$&#123;spring.ai.dashscope.api-key&#125;</span>&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> String apiKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DashScopeApi dashScopeApi() &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeApi.builder()</span><br><span class="line">                .apiKey(apiKey)</span><br><span class="line">                .workSpaceId(<span class="string">&quot;llm-3as714s6flm80yc1&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient chatClient(ChatModel dashscopeChatModel) &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(dashscopeChatModel).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>controller</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyy.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.advisor.DocumentRetrievalAdvisor;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.rag.DashScopeDocumentRetriever;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.rag.DashScopeDocumentRetrieverOptions;</span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.rag.retrieval.search.DocumentRetriever;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-08-01 16:51</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AICustomerServiceController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatClient chatClient;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> DashScopeApi dashScopeApi;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:6021/customer/service</span></span><br><span class="line"><span class="comment">     * http://localhost:6021/customer/service?msg=A0001</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/customer/service&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; service(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä»€ä¹ˆæ—¶å€™å‘è´§&quot;</span>)</span> String msg)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//1 RetrieverOptionså‚æ•°é…ç½®</span></span><br><span class="line">        DashScopeDocumentRetrieverOptions documentRetrieverOptions = DashScopeDocumentRetrieverOptions.builder()</span><br><span class="line">                .withIndexName(<span class="string">&quot;æ·˜å®ç”µå•†è¯æœ¯&quot;</span>)<span class="comment">// ç™¾ç‚¼å¹³å°äº‘çŸ¥è¯†åº“åç§°</span></span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2 ç™¾ç‚¼å¹³å°RAGçŸ¥è¯†åº“æ„å»ºå™¨</span></span><br><span class="line">        DocumentRetriever retriever = new DashScopeDocumentRetriever(dashScopeApi,documentRetrieverOptions);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> chatClient.prompt()</span><br><span class="line">                .system(<span class="string">&quot;ä½ æ˜¯ä¸€ä¸ªç”µå•†æ™ºèƒ½å®¢æœåŠ©æ‰‹ï¼Œæ ¹æ®ç”¨æˆ·çš„é—®é¢˜å»çŸ¥è¯†åº“æŸ¥è¯¢ä¿¡æ¯ï¼Œ&quot;</span> +</span><br><span class="line">                        <span class="string">&quot;å¦‚æœçŸ¥è¯†åº“æŸ¥è¯¢ä¸åˆ°ä¿¡æ¯ï¼Œè¿”å›æŠ±æ­‰æŸ¥è¯¢ä¸åˆ°ä»»ä½•ä¿¡æ¯ã€‚&quot;</span>)</span><br><span class="line">                .user(msg)</span><br><span class="line">                .advisors(new DocumentRetrievalAdvisor(retriever))</span><br><span class="line">                .stream()</span><br><span class="line">                .content();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3-æœ¬åœ°å¾®æœåŠ¡è°ƒç”¨é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°å·¥ä½œæµ-AIæ™ºèƒ½èœå•ï¼Œä»Šå¤©åƒä»€ä¹ˆ">3.æœ¬åœ°å¾®æœåŠ¡è°ƒç”¨é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°å·¥ä½œæµ(AIæ™ºèƒ½èœå•ï¼Œä»Šå¤©åƒä»€ä¹ˆ)</h3>
<p>ç¾å›¢ï¼Œä»Šå¤©åƒä»€ä¹ˆAIæ™ºèƒ½èœå•</p>
<h4 id="1-ä¸ç”¨é˜¿é‡ŒSAAç”Ÿæ€">1.ä¸ç”¨é˜¿é‡ŒSAAç”Ÿæ€</h4>
<p>å¼€å‘æ­¥éª¤</p>
<p>æ–°å»ºå­æ¨¡å—Module</p>
<p>SAA-18TodayMenu</p>
<p>æ”¹POM</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zzyy.study<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>SpringAI-zyfanV1<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springAI-20chat-TodayMenu<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 2. SAAå¤§æ¨¡å‹ä¾èµ– --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud.ai<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-ai-alibaba-starter-dashscope<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--hutool--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.hutool<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>hutool-all<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.8.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--lombok--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.18.38<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.maven.plugins<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.11.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                        <span class="tag">&lt;<span class="name">arg</span>&gt;</span>-parameters<span class="tag">&lt;/<span class="name">arg</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;/<span class="name">compilerArgs</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>21<span class="tag">&lt;/<span class="name">source</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>21<span class="tag">&lt;/<span class="name">target</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">8018</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…¨å±€ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=SAA-<span class="number">18</span>TodayMenu</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># ====SpringAIAlibaba Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br></pre></td></tr></table></figure>
<p>ä¸»å¯åŠ¨</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">atguigu</span>.<span class="property">study</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">SpringApplication</span>;</span><br><span class="line"><span class="keyword">import</span> org.<span class="property">springframework</span>.<span class="property">boot</span>.<span class="property">autoconfigure</span>.<span class="property">SpringBootApplication</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Saa18TodayMenuApplication</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">void</span> <span class="title function_">main</span>(<span class="params"><span class="title class_">String</span>[] args</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title class_">SpringApplication</span>.<span class="title function_">run</span>(<span class="title class_">Saa18TodayMenuApplication</span>.<span class="property">class</span>, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="ä¸šåŠ¡ç±»-12">ä¸šåŠ¡ç±»</h5>
<p>é…ç½®ç±»LLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DashScopeConfig</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;<span class="subst">$&#123;spring.ai.dashscope.api-key&#125;</span>&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> String apiKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DashScopeApi dashScopeApi() &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeApi.builder()</span><br><span class="line">                .apiKey(apiKey)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient chatClient(ChatModel dashscopeChatModel) &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(dashscopeChatModel).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>controller</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.<span class="keyword">annotation</span>.Resource;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.SystemMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.messages.UserMessage;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"><span class="keyword">import</span> reactor.core.publisher.Flux;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-09-11 19:00</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MenuController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> ChatModel chatModel;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(value = <span class="string">&quot;/eat&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Flux&lt;String&gt; eat(<span class="meta">@RequestParam(name = <span class="string">&quot;msg&quot;</span>,defaultValue = <span class="string">&quot;ä»Šå¤©åƒä»€ä¹ˆ&quot;</span>)</span> String question)</span><br><span class="line">    &#123;</span><br><span class="line">        String info = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">                ä½ æ˜¯ä¸€ä¸ªAIå¨å¸ˆåŠ©æ‰‹,æ¯æ¬¡éšæœºç”Ÿæˆä¸‰ä¸ªå®¶å¸¸èœï¼Œå¹¶ä¸”æä¾›è¿™äº›å®¶å¸¸èœçš„è¯¦ç»†åšæ³•æ­¥éª¤ï¼Œä»¥HTMLæ ¼å¼è¿”å›</span></span><br><span class="line"><span class="string">                å­—æ•°æ§åˆ¶åœ¨1500å­—ä»¥å†…ã€‚</span></span><br><span class="line"><span class="string">                &quot;&quot;&quot;</span>;</span><br><span class="line">        <span class="comment">// ç³»ç»Ÿæ¶ˆæ¯</span></span><br><span class="line">        SystemMessage systemMessage = new SystemMessage(info);</span><br><span class="line">        <span class="comment">// ç”¨æˆ·æ¶ˆæ¯</span></span><br><span class="line">        UserMessage userMessage = new UserMessage(question);</span><br><span class="line"></span><br><span class="line">        Prompt prompt = new Prompt(userMessage, systemMessage);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> chatModel.stream(prompt).map(response -&gt; response.getResults().<span class="keyword">get</span>(<span class="number">0</span>).getOutput().getText());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-414-1024x796.png" alt="img"></p>
<h4 id="2-ä½¿ç”¨é˜¿é‡ŒSAAç”Ÿæ€-é‡ç‚¹">2.ä½¿ç”¨é˜¿é‡ŒSAAç”Ÿæ€ -é‡ç‚¹</h4>
<p>å·¥ä½œæµé…ç½®</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-415-1024x508.png" alt="img"></p>
<p>å†™YML</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server.port</span>=<span class="number">6020</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è®¾ç½®å…¨å±€ç¼–ç æ ¼å¼</span></span><br><span class="line"><span class="attr">server.servlet.encoding.enabled</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.force</span>=<span class="literal">true</span></span><br><span class="line"><span class="attr">server.servlet.encoding.charset</span>=UTF-<span class="number">8</span></span><br><span class="line"></span><br><span class="line"><span class="attr">spring.application.name</span>=springAI-<span class="number">20</span>chat-TodayMenu</span><br><span class="line"></span><br><span class="line"><span class="comment"># ====LLM Config=============</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.api-key</span>=<span class="variable">$&#123;aliQwen-api&#125;</span></span><br><span class="line"><span class="comment"># SAA PlatForm today&#x27;s menu Agent app-id</span></span><br><span class="line"><span class="attr">spring.ai.dashscope.agent.options.app-id</span>=f0a4613e6bd540c5bcd55e137e3b0e35</span><br></pre></td></tr></table></figure>
<h5 id="ä¸šåŠ¡ç±»-13">ä¸šåŠ¡ç±»</h5>
<p>é…ç½®ç±»LLMConfig</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyy.study.config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeApi;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.client.ChatClient;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.model.ChatModel;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.<span class="keyword">annotation</span>.Configuration;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DashScopeConfig</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;<span class="subst">$&#123;spring.ai.dashscope.api-key&#125;</span>&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> String apiKey;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DashScopeApi dashScopeApi() &#123;</span><br><span class="line">        <span class="keyword">return</span> DashScopeApi.builder()</span><br><span class="line">                .apiKey(apiKey)</span><br><span class="line">                .build();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ChatClient chatClient(ChatModel dashscopeChatModel) &#123;</span><br><span class="line">        <span class="keyword">return</span> ChatClient.builder(dashscopeChatModel).build();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>controller</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.zzyy.study.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.agent.DashScopeAgent;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.agent.DashScopeAgentOptions;</span><br><span class="line"><span class="keyword">import</span> com.alibaba.cloud.ai.dashscope.api.DashScopeAgentApi;</span><br><span class="line"><span class="keyword">import</span> org.springframework.ai.chat.prompt.Prompt;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.<span class="keyword">annotation</span>.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.GetMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RequestParam;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.<span class="keyword">annotation</span>.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@auther</span> zzyybs@126.com</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@create</span> 2025-08-13 19:01</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span> TODO</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MenuCallAgentController</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// ç™¾ç‚¼å¹³å°çš„appid</span></span><br><span class="line">    <span class="meta">@Value(<span class="string">&quot;<span class="subst">$&#123;spring.ai.dashscope.agent.options.app-id&#125;</span>&quot;</span>)</span></span><br><span class="line">    <span class="keyword">private</span> String APPID;</span><br><span class="line">    <span class="comment">// ç™¾ç‚¼äº‘ç«¯æ™ºèƒ½ä½“è°ƒç”¨å¯¹è±¡</span></span><br><span class="line">       <span class="keyword">private</span> DashScopeAgent agent;</span><br><span class="line">    <span class="comment">//æ„é€ æ–¹æ³•æ³¨å…¥ï¼Œåˆ›å»ºç™¾ç‚¼äº‘ç«¯æ™ºèƒ½ä½“å¯¹è±¡</span></span><br><span class="line">       <span class="keyword">public</span> MenuCallAgentController(DashScopeAgentApi agentApi)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>.agent = new DashScopeAgent(agentApi);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * http://localhost:8018/eatAgent</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> topic</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/eatAgent&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String eatAgent(<span class="meta">@RequestParam(name = <span class="string">&quot;topic&quot;</span>,defaultValue = <span class="string">&quot;ä»Šå¤©ä¸­åˆåƒä»€ä¹ˆ&quot;</span>)</span> String topic)</span><br><span class="line">    &#123;</span><br><span class="line">        DashScopeAgentOptions options = DashScopeAgentOptions.builder().withAppId(APPID).build();</span><br><span class="line"></span><br><span class="line">        Prompt prompt = new Prompt(topic, options);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> agent.call(prompt).getResult().getOutput().getText();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æµ‹è¯•ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-416-1024x643.png" alt="img"></p>
<h3 id="4-æ™ºèƒ½ä½“">4.æ™ºèƒ½ä½“</h3>
<h4 id="æ˜¯ä»€ä¹ˆ">æ˜¯ä»€ä¹ˆ</h4>
<p>â€œæ™ºèƒ½ä½“â€æ˜¯ä»å¯¹è¯å·¥å…·è¿›åŒ–ä¸ºæ•°å­—åŠ©æ‰‹ï¼Œèƒ½åƒäººç±»åŠ©ç†ä¸€æ ·å®Œæˆç«¯åˆ°ç«¯çš„å¤æ‚ä»»åŠ¡ï¼Œæ ¸å¿ƒçªç ´åœ¨äºä¸»åŠ¨æ€§å’Œç¯å¢ƒæ“ä½œèƒ½åŠ›</p>
<p>æ™ºèƒ½ä½“ï¼ˆAgentï¼‰æŒ‡çš„æ˜¯ä¸€ç§åº”ç”¨ï¼Œ<strong>å®ƒä¾é å¤§æ¨¡å‹è¿›è¡Œè‡ªä¸»å†³ç­–</strong>ï¼Œåœ¨ä¸ç”¨æˆ·è¿›è¡Œè‡ªç„¶è¯­è¨€äº¤äº’çš„æ—¶å€™ï¼Œæ ¹æ®ç”¨æˆ·é—®é¢˜èƒ½å¤Ÿè‡ªä¸»æ„ŸçŸ¥ç¯å¢ƒã€<strong>åšå‡ºå†³ç­–å¹¶æ‰§è¡Œè¡ŒåŠ¨çš„ç³»ç»Ÿ</strong>ã€‚å®ƒä¸ä»…ä»…æ˜¯è¢«åŠ¨å›ç­”é—®é¢˜ï¼Œè€Œæ˜¯åƒâ€œæœ‰è‡ªä¸»æ„è¯†çš„ç¨‹åºâ€ï¼Œèƒ½ä¸»åŠ¨å®Œæˆå¤æ‚ä»»åŠ¡</p>
<h4 id="ä¸¾ä¸ªä¾‹å­">ä¸¾ä¸ªä¾‹å­</h4>
<ul>
<li>æ™®é€šå¤§æ¨¡å‹
<ul>
<li>é—®é¢˜æé—®è°ƒç”¨ï¼šä½ é—®â€œä¸Šæµ·æ˜å¤©å¤©æ°”å¦‚ä½•ï¼Ÿâ€å®ƒè¿”å›ä¸€æ®µæ–‡å­—æè¿°ã€‚</li>
</ul>
</li>
<li>æ™ºèƒ½ä½“
<ul>
<li>ä½ è¯´â€œå¦‚æœæ˜å¤©ä¸‹é›¨ï¼Œæé†’æˆ‘å¸¦ä¼ï¼Œå¹¶å–æ¶ˆæ˜å¤©çš„æˆ·å¤–ä¼šè®®ã€‚â€å®ƒä¼šæŸ¥è¯¢å¤©æ°”â†’è®¾å®šæé†’â†’æ£€æŸ¥æ—¥å†â†’å‘é€ä¼šè®®å–æ¶ˆé‚®ä»¶ã€‚</li>
</ul>
</li>
</ul>
<h4 id="èƒ½å¹²å˜›">èƒ½å¹²å˜›</h4>
<p>å…¸å‹åº”ç”¨åœºæ™¯</p>
<ul>
<li>è‡ªåŠ¨åŒ–åŠå…¬ï¼šæ™ºèƒ½ä½“è¯»å–é‚®ä»¶ã€ç”ŸæˆæŠ¥å‘Šã€å®‰æ’ä¼šè®®ã€‚</li>
<li>æ™ºèƒ½å®¶å±…ï¼šæ ¹æ®ä½ çš„ä½œæ¯è‡ªåŠ¨è°ƒèŠ‚ç¯å…‰ã€ç©ºè°ƒï¼Œç”šè‡³è®¢è´­ç‰©èµ„ã€‚</li>
<li>å¤æ‚é—®é¢˜è§£å†³ï¼šå¦‚â€œå¸®æˆ‘ç”¨1ä¸‡å…ƒé¢„ç®—ç­–åˆ’ä¸€åœº50äººçš„å…¬å¸å›¢å»ºâ€ï¼Œå®ƒä¼šæ‹†è§£éœ€æ±‚ã€æœç´¢åœºåœ°ã€æ¯”ä»·ã€ç”Ÿæˆæ–¹æ¡ˆ</li>
</ul>
<h4 id="æ€ä¹ˆç”¨">æ€ä¹ˆç”¨</h4>
<p>é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°</p>
<p><a target="_blank" rel="noopener" href="https://bailian.console.aliyun.com">https://bailian.console.aliyun.com</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/09/image-418-1024x462.png" alt="img"></p>
<h2 id="é€Ÿé€šSpringAI-Alibabaå®Œç»“">é€Ÿé€šSpringAI Alibabaå®Œç»“</h2>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>é€Ÿé€šSpring AI Alibaba </h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://itgeqian.github.io/posts/60.html">https://itgeqian.github.io/posts/60.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>geqian's BlogğŸ­</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2025-09-30</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2025-10-02</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Spring-AI-Alibaba/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>Spring AI Alibaba</a></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">æŠ•å–‚ä½œè€…</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://java-geqian.oss-cn-beijing.aliyuncs.com/%E5%BE%AE%E4%BF%A1PAY.jpg" target="_blank"><img class="post-qr-code-img" src="https://java-geqian.oss-cn-beijing.aliyuncs.com/%E5%BE%AE%E4%BF%A1PAY.jpg" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://java-geqian.oss-cn-beijing.aliyuncs.com/%E6%94%AF%E4%BB%98%E5%AE%9DPAY.jpg" target="_blank"><img class="post-qr-code-img" src="https://java-geqian.oss-cn-beijing.aliyuncs.com/%E6%94%AF%E4%BB%98%E5%AE%9DPAY.jpg" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/68.html"><img class="prev-cover" src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">JUCé¢è¯•é¢˜</div></div></a></div><div class="next-post pull-right"><a href="/posts/58.html"><img class="next-cover" src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">GQ Musicé¡¹ç›®æ¼”ç¤ºå›¾</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Spring-AI-Alibaba%E7%90%86%E8%AE%BA%E6%A6%82%E8%BF%B0"><span class="toc-text">1.Spring AI Alibabaç†è®ºæ¦‚è¿°</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1.æ˜¯ä»€ä¹ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-Spring-AI-Alibaba"><span class="toc-text">ä»€ä¹ˆæ˜¯ Spring AI Alibaba</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SAA%E5%85%AC%E5%BC%8F%E5%8C%96%E4%B8%80%E5%8F%A5%E8%AF%9D%E8%A1%A8%E8%BE%BE"><span class="toc-text">SAAå…¬å¼åŒ–ä¸€å¥è¯è¡¨è¾¾</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%98%E7%BD%91%E7%9F%A5%E8%AF%86%E5%87%BA%E5%A4%84"><span class="toc-text">å®˜ç½‘çŸ¥è¯†å‡ºå¤„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%83%BD%E5%B9%B2%E5%98%9B"><span class="toc-text">2.èƒ½å¹²å˜›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8E%BB%E5%93%AA%E4%B8%8B"><span class="toc-text">3.å»å“ªä¸‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%80%8E%E4%B9%88%E7%94%A8"><span class="toc-text">4.æ€ä¹ˆç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-SpringAI-VS-SpringAI-Alibaba-VS-LangChain4J"><span class="toc-text">5.SpringAI VS SpringAI Alibaba VS LangChain4J</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%B0%B8%E8%BF%9C%E7%9A%84HelloWorld"><span class="toc-text">2.æ°¸è¿œçš„HelloWorld</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%89%8D%E7%BD%AE%E7%BA%A6%E5%AE%9A"><span class="toc-text">1.å‰ç½®çº¦å®š</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringAI-Alibaba-%E4%B8%8E-SpringAI%E3%80%81SpringBoot%E7%89%88%E6%9C%AC%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB"><span class="toc-text">SpringAI Alibaba ä¸ SpringAIã€SpringBootç‰ˆæœ¬ä¾èµ–å…³ç³»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E9%97%A8%E9%81%93%E5%92%8C%E5%85%B3%E9%94%AE%E7%82%B9"><span class="toc-text">é…ç½®é—¨é“å’Œå…³é”®ç‚¹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%98%BF%E9%87%8C%E4%BA%91%E7%99%BE%E7%82%BC%E5%B9%B3%E5%8F%B0%E5%85%A5%E5%8F%A3%E5%AE%98%E7%BD%91"><span class="toc-text">2.é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°å…¥å£å®˜ç½‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8E%A5%E5%85%A5%E9%98%BF%E9%87%8C%E7%99%BE%E7%82%BC%E5%B9%B3%E5%8F%B0%E7%9A%84%E9%80%9A%E4%B9%89%E6%A8%A1%E5%9E%8B"><span class="toc-text">æ¥å…¥é˜¿é‡Œç™¾ç‚¼å¹³å°çš„é€šä¹‰æ¨¡å‹</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-IDEA%E5%B7%A5%E5%85%B7%E4%B8%AD%E5%BB%BAproject%E7%88%B6%E5%B7%A5%E7%A8%8B"><span class="toc-text">3.IDEAå·¥å…·ä¸­å»ºprojectçˆ¶å·¥ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%BB%BAModule"><span class="toc-text">1.å»ºModule</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%94%B9POM"><span class="toc-text">2.æ”¹POM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%86%99YML"><span class="toc-text">3.å†™YML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%B8%BB%E5%90%AF%E5%8A%A8"><span class="toc-text">4.ä¸»å¯åŠ¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%B8%9A%E5%8A%A1%E7%B1%BB"><span class="toc-text">4.ä¸šåŠ¡ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AF%B9%E8%AF%9D%E6%A8%A1%E5%9E%8B-Chat-Model"><span class="toc-text">1.å¯¹è¯æ¨¡å‹(Chat Model)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-controller"><span class="toc-text">2.controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%B5%8B%E8%AF%95"><span class="toc-text">3.æµ‹è¯•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E5%88%87%E6%8D%A2%E5%A4%A7%E6%A8%A1%E5%9E%8B"><span class="toc-text">4.åˆ‡æ¢å¤§æ¨¡å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%92%8COpenAI%E5%8D%8F%E8%AE%AE%E5%AF%B9%E6%AF%94%E4%B8%8B"><span class="toc-text">5.å’ŒOpenAIåè®®å¯¹æ¯”ä¸‹</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Ollama%E7%A7%81%E6%9C%89%E5%8C%96%E9%83%A8%E7%BD%B2%E5%92%8C%E5%AF%B9%E6%8E%A5%E6%9C%AC%E5%9C%B0%E5%A4%A7%E6%A8%A1%E5%9E%8B"><span class="toc-text">3.Ollamaç§æœ‰åŒ–éƒ¨ç½²å’Œå¯¹æ¥æœ¬åœ°å¤§æ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Ollama%E6%9C%AC%E5%9C%B0%E5%A4%A7%E6%A8%A1%E5%9E%8B%E9%83%A8%E7%BD%B2"><span class="toc-text">1.Ollamaæœ¬åœ°å¤§æ¨¡å‹éƒ¨ç½²</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AF%B9%E6%8E%A5%E6%9C%AC%E5%9C%B0%E5%A4%A7%E6%A8%A1%E5%9E%8B"><span class="toc-text">2.å¾®æœåŠ¡å¯¹æ¥æœ¬åœ°å¤§æ¨¡å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9POM"><span class="toc-text">æ”¹POM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%99YML"><span class="toc-text">å†™YML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-ChatClient-VS-ChatModel"><span class="toc-text">4.ChatClient VS ChatModel</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-ChatModel"><span class="toc-text">1.ChatModel</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%98%E7%BD%91"><span class="toc-text">å®˜ç½‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E"><span class="toc-text">è¯´æ˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-ChatClient"><span class="toc-text">2.ChatClient</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%98%E7%BD%91-2"><span class="toc-text">å®˜ç½‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%B4%E6%98%8E-2"><span class="toc-text">è¯´æ˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%96%E7%A0%81%E6%A1%88%E4%BE%8B"><span class="toc-text">ç¼–ç æ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB%E7%AC%AC1%E7%89%88"><span class="toc-text">ä¸šåŠ¡ç±»ç¬¬1ç‰ˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB%E7%AC%AC2%E7%89%88"><span class="toc-text">ä¸šåŠ¡ç±»ç¬¬2ç‰ˆ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB%E7%AC%AC3%E7%89%88"><span class="toc-text">ä¸šåŠ¡ç±»ç¬¬3ç‰ˆ</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-Server-SentEvents-SSE-%E5%AE%9E%E7%8E%B0Stream%E6%B5%81%E5%BC%8F%E8%BE%93%E5%87%BA%E5%8F%8A%E5%A4%9A%E6%A8%A1%E5%9E%8B%E5%85%B1%E5%AD%98"><span class="toc-text">5.Server-SentEvents(SSE)å®ç°Streamæµå¼è¾“å‡ºåŠå¤šæ¨¡å‹å…±å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Response-Streaming%E6%B5%81%E5%BC%8F%E8%BE%93%E5%87%BA"><span class="toc-text">1.Response Streamingæµå¼è¾“å‡º</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%81%E5%BC%8F%E8%BE%93%E5%87%BA-StreamingOutput"><span class="toc-text">æµå¼è¾“å‡º(StreamingOutput)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringAI-Alibaba%E6%B5%81%E5%BC%8F%E8%BE%93%E5%87%BA%E6%9C%89%E4%B8%A4%E7%A7%8D"><span class="toc-text">SpringAI Alibabaæµå¼è¾“å‡ºæœ‰ä¸¤ç§</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-SSE-Server-Sent-Events-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E4%BA%8B%E4%BB%B6"><span class="toc-text">2.SSE(Server-Sent Events)æœåŠ¡å™¨å‘é€äº‹ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Server-SentEvents-SSE-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E4%BA%8B%E4%BB%B6%E5%AE%9E%E7%8E%B0%E6%B5%81%E5%BC%8F%E8%BE%93%E5%87%BA"><span class="toc-text">Server-SentEvents(SSE)æœåŠ¡å™¨å‘é€äº‹ä»¶å®ç°æµå¼è¾“å‡º</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SSE%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">SSEé€‚ç”¨åœºæ™¯</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">3.å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9POM-2"><span class="toc-text">æ”¹POM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%99YML-2"><span class="toc-text">å†™YML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E5%90%AF%E5%8A%A8"><span class="toc-text">ä¸»å¯åŠ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-2"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81"><span class="toc-text">æ–°å¢å‰ç«¯ä»£ç </span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%8F%90%E7%A4%BA%E8%AF%8DPrompt"><span class="toc-text">6.æç¤ºè¯Prompt</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-DeepSeek%E6%8F%90%E7%A4%BA%E8%AF%8D%E6%A0%B7%E4%BE%8B"><span class="toc-text">1.DeepSeekæç¤ºè¯æ ·ä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">2.æ˜¯ä»€ä¹ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%88%E4%BB%8E%E6%9C%80%E7%AE%80%E5%8D%95%E7%9A%84API%E8%B0%83%E7%94%A8%E8%AF%B4%E8%B5%B7"><span class="toc-text">å…ˆä»æœ€ç®€å•çš„APIè°ƒç”¨è¯´èµ·</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%8D%E4%BB%8E%E6%BA%90%E7%A0%81Prompt%E8%AF%B4%E8%B5%B7"><span class="toc-text">å†ä»æºç Promptè¯´èµ·</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Prompt%E4%B8%AD%E7%9A%84%E5%9B%9B%E5%A4%A7%E8%A7%92%E8%89%B2%EF%BC%88Role%EF%BC%89"><span class="toc-text">3.Promptä¸­çš„å››å¤§è§’è‰²ï¼ˆRoleï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#system"><span class="toc-text">system</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#user"><span class="toc-text">user</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#assistant"><span class="toc-text">assistant</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tool"><span class="toc-text">tool</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">4.å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%94%B9POM"><span class="toc-text">1.æ”¹POM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%86%99YML"><span class="toc-text">2.å†™YML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%B8%BB%E5%90%AF%E5%8A%A8"><span class="toc-text">3.ä¸»å¯åŠ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E4%B8%9A%E5%8A%A1%E7%B1%BB-2"><span class="toc-text">4.ä¸šåŠ¡ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E5%B0%8F%E6%80%BB%E7%BB%93"><span class="toc-text">5.å°æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E6%8F%90%E7%A4%BA%E8%AF%8DPrompt-Template"><span class="toc-text">7.æç¤ºè¯Prompt Template</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Prompt%E6%BC%94%E5%8C%96%E5%8E%86%E7%A8%8B"><span class="toc-text">1.Promptæ¼”åŒ–å†ç¨‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8F%90%E7%A4%BA%E8%AF%8D%E6%A8%A1%E6%9D%BF%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">2.æç¤ºè¯æ¨¡æ¿æ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-2"><span class="toc-text">3.å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-3"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-PromptTemplate%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">1.PromptTemplateåŸºæœ¬ä½¿ç”¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-PromptTemplate%E8%AF%BB%E5%8F%96%E6%A8%A1%E7%89%88%E6%96%87%E4%BB%B6%E5%AE%9E%E7%8E%B0%E6%A8%A1%E7%89%88%E5%8A%9F%E8%83%BD"><span class="toc-text">2.PromptTemplateè¯»å–æ¨¡ç‰ˆæ–‡ä»¶å®ç°æ¨¡ç‰ˆåŠŸèƒ½</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-PromptTemplate%E5%A4%9A%E8%A7%92%E8%89%B2%E8%AE%BE%E5%AE%9A"><span class="toc-text">3.PromptTemplateå¤šè§’è‰²è®¾å®š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-PromptTemplate%E4%BA%BA%E7%89%A9%E8%AE%BE%E5%AE%9A"><span class="toc-text">4.PromptTemplateäººç‰©è®¾å®š</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E6%A0%BC%E5%BC%8F%E5%8C%96%E8%BE%93%E5%87%BA-Structured-Output"><span class="toc-text">8.æ ¼å¼åŒ–è¾“å‡º(Structured Output)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%98%AF%E4%BB%80%E4%B9%88-2"><span class="toc-text">1.æ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">2.å¼€å‘æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-4"><span class="toc-text">ä¸šåŠ¡ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%B0%E5%BB%BA%E8%AE%B0%E5%BD%95%E7%B1%BBStudentRecord"><span class="toc-text">1.æ–°å»ºè®°å½•ç±»StudentRecord</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-controllerV1"><span class="toc-text">2.controllerV1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-controllerV2"><span class="toc-text">3.controllerV2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-Chat-Memory%E8%BF%9E%E7%BB%AD%E5%AF%B9%E8%AF%9D%E4%BF%9D%E5%AD%98%E5%92%8C%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-text">9.Chat Memoryè¿ç»­å¯¹è¯ä¿å­˜å’ŒæŒä¹…åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%98%AF%E4%BB%80%E4%B9%88-3"><span class="toc-text">1.æ˜¯ä»€ä¹ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%B0%E5%BF%86%E7%B1%BB%E5%9E%8B"><span class="toc-text">è®°å¿†ç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%97%9B%E7%82%B92%E4%B8%AA"><span class="toc-text">ç—›ç‚¹2ä¸ª</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%8C%81%E4%B9%85%E5%8C%96%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">2.æŒä¹…åŒ–å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%B8%9A%E5%8A%A1%E7%B1%BB"><span class="toc-text">1.ä¸šåŠ¡ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86"><span class="toc-text">å‰ç½®çŸ¥è¯†</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%B1%BBSaaLLMConfig"><span class="toc-text">é…ç½®ç±»SaaLLMConfig</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#controller"><span class="toc-text">controller</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%B5%8B%E8%AF%95"><span class="toc-text">2.æµ‹è¯•</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-%E6%96%87%E7%94%9F%E5%9B%BE"><span class="toc-text">10.æ–‡ç”Ÿå›¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%98%BF%E9%87%8C%E7%99%BE%E7%82%BC%E6%96%87%E7%94%9F%E5%9B%BE"><span class="toc-text">1.é˜¿é‡Œç™¾ç‚¼æ–‡ç”Ÿå›¾</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-2"><span class="toc-text">2.å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%AD%90%E6%A8%A1%E5%9D%97Module"><span class="toc-text">æ–°å»ºå­æ¨¡å—Module</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9POM-3"><span class="toc-text">æ”¹POM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%99YML-3"><span class="toc-text">å†™YML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E5%90%AF%E5%8A%A8-2"><span class="toc-text">ä¸»å¯åŠ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-5"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-%E6%96%87%E7%94%9F%E9%9F%B3"><span class="toc-text">11.æ–‡ç”ŸéŸ³</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%98%BF%E9%87%8C%E7%99%BE%E7%82%BC%E6%96%87%E7%94%9F%E9%9F%B3"><span class="toc-text">1.é˜¿é‡Œç™¾ç‚¼æ–‡ç”ŸéŸ³</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E9%9F%B3%E5%90%88%E6%88%90-CosyVoice"><span class="toc-text">è¯­éŸ³åˆæˆ-CosyVoice</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E9%9F%B3%E5%90%88%E6%88%90CosyVoice-Java-SDK"><span class="toc-text">è¯­éŸ³åˆæˆCosyVoice Java SDK</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#SpeechSynthesizer%E7%B1%BB%E6%8F%90%E4%BE%9B%E4%BA%86%E8%AF%AD%E9%9F%B3%E5%90%88%E6%88%90%E7%9A%84%E5%85%B3%E9%94%AE%E6%8E%A5%E5%8F%A3"><span class="toc-text">SpeechSynthesizerç±»æä¾›äº†è¯­éŸ³åˆæˆçš„å…³é”®æ¥å£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DashScopeSpeechSynthesisOptions"><span class="toc-text">DashScopeSpeechSynthesisOptions</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-3"><span class="toc-text">2.å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%AD%90%E6%A8%A1%E5%9D%97Module-2"><span class="toc-text">æ–°å»ºå­æ¨¡å—Module</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9POM-4"><span class="toc-text">æ”¹POM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%99YML-4"><span class="toc-text">å†™YML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E5%90%AF%E5%8A%A8-3"><span class="toc-text">ä¸»å¯åŠ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-6"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%90%91%E9%87%8F%E5%8C%96%E5%92%8C%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">12.å‘é‡åŒ–å’Œå‘é‡æ•°æ®åº“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%90%91%E9%87%8F"><span class="toc-text">1.å‘é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%96%87%E6%9C%AC%E5%90%91%E9%87%8F%E5%8C%96"><span class="toc-text">2.æ–‡æœ¬å‘é‡åŒ–</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%98%AF%E4%BB%80%E4%B9%88-4"><span class="toc-text">1.æ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B1"><span class="toc-text">æ¡ˆä¾‹1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E5%88%972"><span class="toc-text">æ¡ˆåˆ—2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B5%8C%E5%85%A5%E6%A8%A1%E5%9E%8B%E5%B0%8F%E6%80%BB%E7%BB%93"><span class="toc-text">åµŒå…¥æ¨¡å‹å°æ€»ç»“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-text">3.å‘é‡æ•°æ®åº“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1.å‘é‡å­˜å‚¨æ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E8%83%BD%E5%B9%B2%E5%98%9B"><span class="toc-text">2.å‘é‡æ•°æ®åº“èƒ½å¹²å˜›</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8C%87%E5%BE%81%E7%89%B9%E7%82%B9"><span class="toc-text">æŒ‡å¾ç‰¹ç‚¹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%8F%E6%80%BB%E7%BB%93"><span class="toc-text">å°æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-2"><span class="toc-text">4.å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%94%A8redisStack%E4%BD%9C%E4%B8%BA%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8"><span class="toc-text">1.ç”¨redisStackä½œä¸ºå‘é‡å­˜å‚¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%80%E5%8F%A5%E8%AF%9D-%E9%87%8D%E8%A6%81"><span class="toc-text">ä¸€å¥è¯(é‡è¦)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80api"><span class="toc-text">åŸºç¡€api</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%B8%9A%E5%8A%A1%E7%B1%BB"><span class="toc-text">2.ä¸šåŠ¡ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-text">3.å®ç°åŸç†</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-RAG%EF%BC%88Retrieval-Augmented-Generation%EF%BC%89"><span class="toc-text">13.RAGï¼ˆRetrieval Augmented Generationï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%89%8D%E8%A8%80"><span class="toc-text">1.å‰è¨€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-RAG%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">2.RAGæ˜¯ä»€ä¹ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFRAG"><span class="toc-text">ä»€ä¹ˆæ˜¯RAG?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B9%BB%E8%A7%89%EF%BC%9F"><span class="toc-text">å¹»è§‰ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#springai-alibaba%E4%B8%AD%E7%9A%84RAG%E5%8F%AB%E5%81%9A%E6%96%87%E6%A1%A3%E6%A3%80%E7%B4%A2-Document-Retriever"><span class="toc-text">springai alibabaä¸­çš„RAGå«åšæ–‡æ¡£æ£€ç´¢ (Document Retriever)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-RAG%E6%A0%B8%E5%BF%83%E8%AE%BE%E8%AE%A1%E7%90%86%E5%BF%B5"><span class="toc-text">3.RAGæ ¸å¿ƒè®¾è®¡ç†å¿µ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-RAG%E8%83%BD%E5%B9%B2%E5%98%9B"><span class="toc-text">4.RAGèƒ½å¹²å˜›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-RAG%E6%80%8E%E4%B9%88%E7%94%A8"><span class="toc-text">5.RAGæ€ä¹ˆç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">6.å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BB%BAModule"><span class="toc-text">å»ºModule</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9POM-5"><span class="toc-text">æ”¹POM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%99YML-5"><span class="toc-text">å†™YML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E5%90%AF%E5%8A%A8-4"><span class="toc-text">ä¸»å¯åŠ¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%90%E4%BE%9BErrorCode%E8%84%9A%E6%9C%AC%E8%AE%A9%E4%BB%96%E5%AD%98%E5%85%A5%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93RedisStack%EF%BC%8C%E5%BD%A2%E6%88%90%E6%96%87%E6%A1%A3%E7%9F%A5%E8%AF%86%E5%BA%93"><span class="toc-text">æä¾›ErrorCodeè„šæœ¬è®©ä»–å­˜å…¥å‘é‡æ•°æ®åº“RedisStackï¼Œå½¢æˆæ–‡æ¡£çŸ¥è¯†åº“</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E4%B8%9A%E5%8A%A1%E7%B1%BB%E7%AC%AC%E4%B8%80%E7%89%88"><span class="toc-text">7.ä¸šåŠ¡ç±»ç¬¬ä¸€ç‰ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#SpringAI%E6%BA%90%E4%BB%A3%E7%A0%81%E6%8E%A5%E5%8F%A3-VectorStore"><span class="toc-text">SpringAIæºä»£ç æ¥å£ VectorStore</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8redis%E4%BD%9C%E4%B8%BA%E5%90%91%E9%87%8F%E5%AD%98%E5%82%A8"><span class="toc-text">ç”¨redisä½œä¸ºå‘é‡å­˜å‚¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E7%B1%BB"><span class="toc-text">é…ç½®ç±»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Controller"><span class="toc-text">Controller</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95"><span class="toc-text">æµ‹è¯•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E9%97%AE%E9%A2%98"><span class="toc-text">å…¶å®ƒé—®é¢˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-%E4%B8%9A%E5%8A%A1%E7%B1%BB%E7%AC%AC%E4%BA%8C%E7%89%88-%E5%90%91%E9%87%8F%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%BB%E9%87%8D%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3"><span class="toc-text">8.ä¸šåŠ¡ç±»ç¬¬äºŒç‰ˆ å‘é‡æ•°æ®åº“å»é‡é—®é¢˜è§£å†³</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8RedisSetNX%E5%8E%BB%E9%87%8D"><span class="toc-text">ä½¿ç”¨RedisSetNXå»é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#InitVectorDatabaseConfig-%E7%AC%AC%E4%BA%8C%E7%89%88"><span class="toc-text">InitVectorDatabaseConfig(ç¬¬äºŒç‰ˆ)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#controller-2"><span class="toc-text">controller</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-Tool-Calling%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8"><span class="toc-text">14.Tool Callingå·¥å…·è°ƒç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%EF%BC%9F"><span class="toc-text">1.ä¸ºä»€ä¹ˆéœ€è¦å·¥å…·è°ƒç”¨ï¼Ÿ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">2.å·¥å…·è°ƒç”¨æ˜¯ä»€ä¹ˆ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%98%E7%BD%91-3"><span class="toc-text">å®˜ç½‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E8%A6%81%E6%8F%90%E7%A4%BA"><span class="toc-text">é‡è¦æç¤º:</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E8%83%BD%E5%B9%B2%E5%98%9B"><span class="toc-text">3.å·¥å…·è°ƒç”¨èƒ½å¹²å˜›</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E6%80%8E%E4%B9%88%E7%94%A8"><span class="toc-text">4.å·¥å…·è°ƒç”¨æ€ä¹ˆç”¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">5.å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%BB%BA%E5%AD%90%E6%A8%A1%E5%9D%97Module-3"><span class="toc-text">æ–°å»ºå­æ¨¡å—Module</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9POM-6"><span class="toc-text">æ”¹POM</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%86%99YML-6"><span class="toc-text">å†™YML</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E5%90%AF%E5%8A%A8-5"><span class="toc-text">ä¸»å¯åŠ¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E4%B8%9A%E5%8A%A1%E7%B1%BB"><span class="toc-text">6.ä¸šåŠ¡ç±»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%85%88%E4%B8%8D%E4%BD%BF%E7%94%A8ToolCalling"><span class="toc-text">1.å…ˆä¸ä½¿ç”¨ToolCalling</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%8A%95%E5%85%A5%E4%BD%BF%E7%94%A8ToolCalling"><span class="toc-text">2.æŠ•å…¥ä½¿ç”¨ToolCalling</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F1%E9%80%9A%E8%BF%87ChatModel%E5%AE%9E%E7%8E%B0"><span class="toc-text">æ–¹å¼1é€šè¿‡ChatModelå®ç°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F2%E9%80%9A%E8%BF%87ChatClient%E5%AE%9E%E7%8E%B0"><span class="toc-text">æ–¹å¼2é€šè¿‡ChatClientå®ç°</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%B0%8F%E6%80%BB%E7%BB%93"><span class="toc-text">3.å°æ€»ç»“</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-MCP%E6%A8%A1%E5%9E%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8D%8F%E8%AE%AE-Model-Context-Protocol"><span class="toc-text">15.MCPæ¨¡å‹ä¸Šä¸‹æ–‡åè®®(Model Context Protocol)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E6%9C%89MCP%E5%87%BA%E7%8E%B0%EF%BC%8C%E4%B9%8B%E5%89%8D%E7%97%9B%E7%82%B9%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">1.ä¸ºä»€ä¹ˆä¼šæœ‰MCPå‡ºç°ï¼Œä¹‹å‰ç—›ç‚¹æ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-MCP%E5%85%A5%E9%97%A8%E6%A6%82%E5%BF%B5"><span class="toc-text">2.MCPå…¥é—¨æ¦‚å¿µ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MCP%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">MCPæ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MCP%E8%83%BD%E5%B9%B2%E5%98%9B"><span class="toc-text">MCPèƒ½å¹²å˜›</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MCP%E6%80%8E%E4%B9%88%E7%8E%A9"><span class="toc-text">MCPæ€ä¹ˆç©</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-MCP%E6%9E%B6%E6%9E%84%E7%9F%A5%E8%AF%86"><span class="toc-text">3.MCPæ¶æ„çŸ¥è¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MCP%E9%81%B5%E5%BE%AA%E5%AE%A2%E6%88%B7%E7%AB%AF-%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E6%9E%84%E5%8C%85%E5%90%AB%E4%BB%A5%E4%B8%8B%E5%87%A0%E4%B8%AA%E6%A0%B8%E5%BF%83%E9%83%A8%E5%88%86"><span class="toc-text">MCPéµå¾ªå®¢æˆ·ç«¯-æœåŠ¡å™¨æ¶æ„åŒ…å«ä»¥ä¸‹å‡ ä¸ªæ ¸å¿ƒéƒ¨åˆ†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8MCP%E9%80%9A%E4%BF%A1%E5%8D%8F%E8%AE%AE%E4%B8%AD%EF%BC%8C%E4%B8%80%E8%88%AC%E6%9C%89%E4%B8%A4%E7%A7%8D%E6%A8%A1%E5%BC%8F"><span class="toc-text">åœ¨MCPé€šä¿¡åè®®ä¸­ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§æ¨¡å¼</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%B0%8F%E6%80%BB%E7%BB%93%EF%BC%88%E5%BF%AB%E9%80%9F%E5%88%86%E6%B8%85%E6%A5%9A-%E5%B7%A5%E5%85%B7%E8%B0%83%E7%94%A8%E3%80%81%E6%A3%80%E7%B4%A2%E5%A2%9E%E5%BC%BA%E7%94%9F%E6%88%90%E3%80%81%E6%A8%A1%E5%9E%8B%E4%B8%8A%E4%B8%8B%E6%96%87%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="toc-text">4.å°æ€»ç»“ï¼ˆå¿«é€Ÿåˆ†æ¸…æ¥š å·¥å…·è°ƒç”¨ã€æ£€ç´¢å¢å¼ºç”Ÿæˆã€æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#MCP-VS-ToolCalling"><span class="toc-text">MCP VS ToolCalling</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%9C%AC%E5%9C%B0MCP-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">5.æœ¬åœ°MCP-å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-MCP-Server%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.MCP-ServeræœåŠ¡ç«¯å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-7"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-MCP-Client%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.MCP-Clientå®¢æˆ·ç«¯å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-8"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-MCP-Client-invoke-MCP-Server%E6%B5%8B%E8%AF%95"><span class="toc-text">3.MCP-Client invoke MCP-Serveræµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-%E8%BF%9C%E7%A8%8BMCP%E5%A2%9E%E5%BC%BA%E6%A1%88%E4%BE%8B-%E5%AF%B9%E6%8E%A5%E4%BA%92%E8%81%94%E7%BD%91%E9%80%9A%E7%94%A8MCP%E6%9C%8D%E5%8A%A1%EF%BC%88%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%EF%BC%89"><span class="toc-text">6.è¿œç¨‹MCPå¢å¼ºæ¡ˆä¾‹-å¯¹æ¥äº’è”ç½‘é€šç”¨MCPæœåŠ¡ï¼ˆç™¾åº¦åœ°å›¾ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%8E%A5%E4%BA%92%E8%81%94%E7%BD%91%E9%80%9A%E7%94%A8MCP%E6%9C%8D%E5%8A%A1%EF%BC%88%E7%99%BE%E5%BA%A6%E5%9C%B0%E5%9B%BE%EF%BC%89"><span class="toc-text">å¯¹æ¥äº’è”ç½‘é€šç”¨MCPæœåŠ¡ï¼ˆç™¾åº¦åœ°å›¾ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-text">1.ç¯å¢ƒé…ç½®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-4"><span class="toc-text">2.å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-9"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%B5%8B%E8%AF%95-2"><span class="toc-text">3.æµ‹è¯•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-MCP%E5%8E%9F%E7%90%86-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-text">7.MCPåŸç†+æºç åˆ†æ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BA%90%E7%A0%81%E8%8E%B7%E5%BE%97"><span class="toc-text">æºç è·å¾—</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-SAA%E7%94%9F%E6%80%81%E7%AF%87"><span class="toc-text">16.SAAç”Ÿæ€ç¯‡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%98%BF%E9%87%8C%E4%BA%91%E7%99%BE%E7%82%BC%E5%B9%B3%E5%8F%B0%E4%BA%91%E4%B8%8ARAG%E7%9F%A5%E8%AF%86%E5%BA%93-AI%E6%99%BA%E8%83%BD%E8%BF%90%E7%BB%B4"><span class="toc-text">1.é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°äº‘ä¸ŠRAGçŸ¥è¯†åº“(AIæ™ºèƒ½è¿ç»´)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E"><span class="toc-text">éœ€æ±‚è¯´æ˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4"><span class="toc-text">å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-10"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%98%BF%E9%87%8C%E4%BA%91%E7%99%BE%E7%82%BC%E5%B9%B3%E5%8F%B0%E4%BA%91%E4%B8%8ARAG%E7%9F%A5%E8%AF%86%E5%BA%93-%E7%94%B5%E5%95%86%E6%99%BA%E8%83%BD%E5%AE%A2%E6%9C%8D%E6%A1%88%E4%BE%8B"><span class="toc-text">2.é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°äº‘ä¸ŠRAGçŸ¥è¯†åº“(ç”µå•†æ™ºèƒ½å®¢æœæ¡ˆä¾‹)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E-2"><span class="toc-text">éœ€æ±‚è¯´æ˜</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E6%AD%A5%E9%AA%A4-2"><span class="toc-text">å¼€å‘æ­¥éª¤</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-11"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%9C%AC%E5%9C%B0%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%E9%98%BF%E9%87%8C%E4%BA%91%E7%99%BE%E7%82%BC%E5%B9%B3%E5%8F%B0%E5%B7%A5%E4%BD%9C%E6%B5%81-AI%E6%99%BA%E8%83%BD%E8%8F%9C%E5%8D%95%EF%BC%8C%E4%BB%8A%E5%A4%A9%E5%90%83%E4%BB%80%E4%B9%88"><span class="toc-text">3.æœ¬åœ°å¾®æœåŠ¡è°ƒç”¨é˜¿é‡Œäº‘ç™¾ç‚¼å¹³å°å·¥ä½œæµ(AIæ™ºèƒ½èœå•ï¼Œä»Šå¤©åƒä»€ä¹ˆ)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%B8%8D%E7%94%A8%E9%98%BF%E9%87%8CSAA%E7%94%9F%E6%80%81"><span class="toc-text">1.ä¸ç”¨é˜¿é‡ŒSAAç”Ÿæ€</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-12"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8%E9%98%BF%E9%87%8CSAA%E7%94%9F%E6%80%81-%E9%87%8D%E7%82%B9"><span class="toc-text">2.ä½¿ç”¨é˜¿é‡ŒSAAç”Ÿæ€ -é‡ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E7%B1%BB-13"><span class="toc-text">ä¸šåŠ¡ç±»</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E6%99%BA%E8%83%BD%E4%BD%93"><span class="toc-text">4.æ™ºèƒ½ä½“</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-text">æ˜¯ä»€ä¹ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BE%E4%B8%AA%E4%BE%8B%E5%AD%90"><span class="toc-text">ä¸¾ä¸ªä¾‹å­</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%83%BD%E5%B9%B2%E5%98%9B"><span class="toc-text">èƒ½å¹²å˜›</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%8E%E4%B9%88%E7%94%A8"><span class="toc-text">æ€ä¹ˆç”¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9F%E9%80%9ASpringAI-Alibaba%E5%AE%8C%E7%BB%93"><span class="toc-text">é€Ÿé€šSpringAI Alibabaå®Œç»“</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸ§¬</p><div class="bg-ad"><div>å†çœ‹çœ‹é‚£ä¸ªå…‰ç‚¹ï¼Œå®ƒå°±åœ¨è¿™é‡Œï¼Œè¿™æ˜¯å®¶å›­ï¼Œè¿™æ˜¯æˆ‘ä»¬ â€”â€” ä½ æ‰€çˆ±çš„æ¯ä¸€ä¸ªäººï¼Œä½ è®¤è¯†çš„ä¸€ä¸ªäººï¼Œä½ å¬è¯´è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œæ›¾ç»æœ‰è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œéƒ½åœ¨å®ƒä¸Šé¢åº¦è¿‡ä»–ä»¬çš„ä¸€ç”Ÿâœ¨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">ç‚¹å‡»å¼€å¯æ˜Ÿè¾°ä¹‹æ—…</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-links"><li><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li><li><a href="/box/Gallery/">æˆ‘çš„ç”»å»Š</a><a href="/personal/bb/">æˆ‘çš„å” å¨</a></li><li><a href="/site/time/">å»ºè®¾è¿›ç¨‹</a><a href="/site/census/">ç½‘ç«™ç»Ÿè®¡</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾âŒ›</p><div class="ft-img-group"><div class="img-group-item"></div></div></div></div><div class="copyright"><span><b>&copy;2022-2025</b></span><span><b>&nbsp;&nbsp;By geqian's BlogğŸ­</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20230913" style="margin-inline:5px" title="æœ¬ç«™å·²åŠ å…¥èŒICPè±ªåå¥—é¤ï¼ŒèŒICPå¤‡20230913å·"><img src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/20230913.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="å³é”®æ¨¡å¼" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>ç©ºé™è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="javascript:rmf.switchReadMode();"><i class="fa fa-book"></i><span>é˜…è¯»æ¨¡å¼</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>å…³äºåšå®¢</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>ç¾åŒ–è®¾ç½®</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>åˆ‡æ¢å…¨å±</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>æ‰“å°é¡µé¢</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/å­¦ä¹ ç¬”è®°/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¡ geqianã®å­¦ä¹ ç¬”è®° (10)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/æ‚é¡¹/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¼ geqianã®æ‚é¡¹ (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/é¡¹ç›®/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ‰ geqianã®é¡¹ç›®ç¬”è®° (6)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/AI/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¨ geqianã®AIå¤§æ¨¡å‹ (6)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/ç®—æ³•/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸŸ geqianã®ç®—æ³•å­¦ä¹ ç¬”è®° (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/é¢è¯•/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¥ geqianã®é¢è¯• (18)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/JUC/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸŒ geqianã®JUC (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/JVM/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸœ geqianã®JVM (5)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/äº‘åŸç”Ÿ/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ” geqianã®äº‘åŸç”Ÿç›¸å…³ (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/MQ/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ“± geqianã®æ¶ˆæ¯é˜Ÿåˆ— (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/å‰ç«¯/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ›ï¸ geqianã®å‰ç«¯å·¥ç¨‹ (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/mybatis-mybatis-plus/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¨ geqianã®mybatisç³»åˆ— (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/å¾®æœåŠ¡/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ—ºï¸ geqianã®SpringCloudç³»åˆ— (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/SSM/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ“– geqianã®SSM+SpringBootç³»åˆ— (7)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/ruoyi/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ“ geqianã®è‹¥ä¾æ¡†æ¶ (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/mysql/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">â“ geqianã®mysql (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/Redis/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ’– geqianã®Redis (3)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://itgeqian.github.io/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/1.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-05-20</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/1.html&quot;);" href="javascript:void(0);" alt="">å®éªŒä¸‰ æ±½è½¦ç§Ÿèµç³»ç»Ÿçš„UMLè®¾è®¡å»ºæ¨¡ ï¼ˆå®Œç»“ï¼‰</a><div class="blog-slider__text">å…³äºæ±½è½¦ç§Ÿèµç³»ç»Ÿçš„UMLè®¾è®¡å»ºæ¨¡</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/1.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/2.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-06</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/2.html&quot;);" href="javascript:void(0);" alt="">GQ Videoé¡¹ç›®éƒ¨ç½²</a><div class="blog-slider__text">å¾®æœåŠ¡é¡¹ç›®GQ Videoé¡¹ç›®éƒ¨ç½²</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/2.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper@1.0.12/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper@1.0.12/lib/swiper_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('å·²æŒ‚è½½gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?null",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'null')
    }
  </script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>