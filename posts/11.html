<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><div id="myscoll"></div><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>JavaWeb+AIï¼ˆå®æˆ˜ç¯‡  tliasæ•™åŠ¡ç³»ç»Ÿï¼‰ | geqian's BlogğŸ­</title><meta name="keywords" content="JavaWeb"><meta name="author" content="geqian's BlogğŸ­"><meta name="copyright" content="geqian's BlogğŸ­"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="é»‘é©¬ç¨‹åºå‘˜JavaWeb+AI-å®æˆ˜ç¯‡ï¼ˆtliasæ•™åŠ¡ç³»ç»Ÿï¼‰">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaWeb+AIï¼ˆå®æˆ˜ç¯‡  tliasæ•™åŠ¡ç³»ç»Ÿï¼‰">
<meta property="og:url" content="https://itgeqian.github.io/posts/11.html">
<meta property="og:site_name" content="geqian&#39;s BlogğŸ­">
<meta property="og:description" content="é»‘é©¬ç¨‹åºå‘˜JavaWeb+AI-å®æˆ˜ç¯‡ï¼ˆtliasæ•™åŠ¡ç³»ç»Ÿï¼‰">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp">
<meta property="article:published_time" content="2025-06-23T01:19:03.000Z">
<meta property="article:modified_time" content="2025-06-26T09:12:00.000Z">
<meta property="article:author" content="geqian&#39;s BlogğŸ­">
<meta property="article:tag" content="JavaWeb">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp"><link rel="shortcut icon" href="/"><link rel="canonical" href="https://itgeqian.github.io/posts/11"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.js',
      css: 'https://cdnjs.cloudflare.com/ajax/libs/flickr-justified-gallery/2.1.2/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'JavaWeb+AIï¼ˆå®æˆ˜ç¯‡  tliasæ•™åŠ¡ç³»ç»Ÿï¼‰',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-06-26 17:12:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const now = new Date()
          const hour = now.getHours()
          const isNight = hour <= 6 || hour >= 18
          if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
          else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/element-ui@2.15.6/packages/theme-chalk/lib/index.css"><style id="themeColor"></style><style id="rightSide"></style><style id="transPercent"></style><style id="blurNum"></style><style id="settingStyle"></style><span id="fps"></span><style id="defineBg"></style><style id="menu_shadow"></style><script src="https://cdn.jsdelivr.net/npm/echarts@6/dist/echarts.min.js"></script><svg aria-hidden="true" style="position:absolute; overflow:hidden; width:0; height:0"><symbol id="icon-sun" viewBox="0 0 1024 1024"><path d="M960 512l-128 128v192h-192l-128 128-128-128H192v-192l-128-128 128-128V192h192l128-128 128 128h192v192z" fill="#FFD878" p-id="8420"></path><path d="M736 512a224 224 0 1 0-448 0 224 224 0 1 0 448 0z" fill="#FFE4A9" p-id="8421"></path><path d="M512 109.248L626.752 224H800v173.248L914.752 512 800 626.752V800h-173.248L512 914.752 397.248 800H224v-173.248L109.248 512 224 397.248V224h173.248L512 109.248M512 64l-128 128H192v192l-128 128 128 128v192h192l128 128 128-128h192v-192l128-128-128-128V192h-192l-128-128z" fill="#4D5152" p-id="8422"></path><path d="M512 320c105.888 0 192 86.112 192 192s-86.112 192-192 192-192-86.112-192-192 86.112-192 192-192m0-32a224 224 0 1 0 0 448 224 224 0 0 0 0-448z" fill="#4D5152" p-id="8423"></path></symbol><symbol id="icon-moon" viewBox="0 0 1024 1024"><path d="M611.370667 167.082667a445.013333 445.013333 0 0 1-38.4 161.834666 477.824 477.824 0 0 1-244.736 244.394667 445.141333 445.141333 0 0 1-161.109334 38.058667 85.077333 85.077333 0 0 0-65.066666 135.722666A462.08 462.08 0 1 0 747.093333 102.058667a85.077333 85.077333 0 0 0-135.722666 65.024z" fill="#FFB531" p-id="11345"></path><path d="M329.728 274.133333l35.157333-35.157333a21.333333 21.333333 0 1 0-30.165333-30.165333l-35.157333 35.157333-35.114667-35.157333a21.333333 21.333333 0 0 0-30.165333 30.165333l35.114666 35.157333-35.114666 35.157334a21.333333 21.333333 0 1 0 30.165333 30.165333l35.114667-35.157333 35.157333 35.157333a21.333333 21.333333 0 1 0 30.165333-30.165333z" fill="#030835" p-id="11346"></path></symbol></svg><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper@1.0.12/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper@1.0.12/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="geqian's BlogğŸ­" type="application/atom+xml">
</head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/assets/avatar.png" onerror="onerror=null;src='/assets/r1.jpg'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">9</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">geqian's BlogğŸ­</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page faa-parent animated-hover" href="/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-home"></use></svg><span class="menu_word" style="font-size:17px"> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--article"></use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« </span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-guidang1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½’æ¡£</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-sekuaibiaoqian">                   </use></svg><span class="menu_word" style="font-size:17px"> æ ‡ç­¾</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-fenlei">                   </use></svg><span class="menu_word" style="font-size:17px"> åˆ†ç±»</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pinweishenghuo"></use></svg><span class="menu_word" style="font-size:17px"> ä¼‘é—²</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/life/music/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-yinle">                   </use></svg><span class="menu_word" style="font-size:17px"> å…«éŸ³ç›’</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/movies/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-dianying1">                   </use></svg><span class="menu_word" style="font-size:17px"> å½±é™¢</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/life/games/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-youxishoubing">                   </use></svg><span class="menu_word" style="font-size:17px"> æ¸¸æˆ</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xiangzi"></use></svg><span class="menu_word" style="font-size:17px"> å…«å®ç®±</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/box/gallery/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-tubiaozhizuomoban">                   </use></svg><span class="menu_word" style="font-size:17px"> ç”»å»Š</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/animation/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-nvwumao">                   </use></svg><span class="menu_word" style="font-size:17px"> åŠ¨ç”»</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/box/nav/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-zhifengche">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘å€å¯¼èˆª</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shejiaoxinxi"></use></svg><span class="menu_word" style="font-size:17px"> ç¤¾äº¤</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/social/fcircle/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-pengyouquan">                   </use></svg><span class="menu_word" style="font-size:17px"> æœ‹å‹åœˆ</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-liuyan">                   </use></svg><span class="menu_word" style="font-size:17px"> ç•™è¨€æ¿</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/social/link/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-lianjie">                   </use></svg><span class="menu_word" style="font-size:17px"> å‹äººå¸</span></a></li></ul></div><div class="menus_item"><a class="site-page group faa-parent animated-hover hide" href="javascript:void(0);"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-wangye"></use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/site/census/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon--tongjibiao">                   </use></svg><span class="menu_word" style="font-size:17px"> ç½‘ç«™ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/echarts/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-shujutongji1">                   </use></svg><span class="menu_word" style="font-size:17px"> æ–‡ç« ç»Ÿè®¡</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/site/time/"><svg class="menu_icon faa-tada" aria-hidden="true" style="width:1.30em;height:1.30em;vertical-align:-0.15em;fill:currentColor;overflow:hidden;"><use xlink:href="#icon-xianxingshalou">                   </use></svg><span class="menu_word" style="font-size:17px"> æ—§æ—¶å…‰</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="search faa-parent animated-hover" title="æ£€ç´¢ç«™å†…ä»»ä½•ä½ æƒ³è¦çš„ä¿¡æ¯"><svg class="faa-tada icon" style="height:24px;width:24px;fill:currentColor;position:relative;top:6px" aria-hidden="true"><use xlink:href="#icon-valentine_-search-love-find-heart"></use></svg><span> æœç´¢</span></a></div><a class="meihua faa-parent animated-hover" onclick="toggleWinbox()" title="ç¾åŒ–è®¾ç½®-è‡ªå®šä¹‰ä½ çš„é£æ ¼" id="meihua-button"><svg class="faa-tada icon" style="height:26px;width:26px;fill:currentColor;position:relative;top:8px" aria-hidden="true"><use xlink:href="#icon-tupian1"></use></svg></a><a class="sun_moon faa-parent animated-hover" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢" id="nightmode-button"><svg class="faa-tada" style="height:25px;width:25px;fill:currentColor;position:relative;top:7px" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon">       </use></svg></a><div id="toggle-menu"><a><i class="fas fa-bars fa-fw"></i></a></div></div></div></nav><div id="post-info"><h1 class="post-title">JavaWeb+AIï¼ˆå®æˆ˜ç¯‡  tliasæ•™åŠ¡ç³»ç»Ÿï¼‰</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><svg class="meta_icon post-meta-icon" style="width:30px;height:30px;position:relative;top:10px"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">å‘è¡¨äº </span><time class="post-meta-date-created" datetime="2025-06-23T01:19:03.000Z" title="å‘è¡¨äº 2025-06-23 09:19:03">2025-06-23</time><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-gengxin1"></use></svg><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2025-06-26T09:12:00.000Z" title="æ›´æ–°äº 2025-06-26 17:12:00">2025-06-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:18px;height:18px;position:relative;top:5px"><use xlink:href="#icon-biaoqian"></use></svg><a class="post-meta-categories" href="/categories/SSM/">SSM</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:8px"><use xlink:href="#icon-charuword"></use></svg><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">5.1w</span><span class="post-meta-separator">|</span><svg class="meta_icon post-meta-icon" style="width:20px;height:20px;position:relative;top:5px"><use xlink:href="#icon-shizhong"></use></svg><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>203åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="JavaWeb+AIï¼ˆå®æˆ˜ç¯‡  tliasæ•™åŠ¡ç³»ç»Ÿï¼‰"><svg class="meta_icon post-meta-icon" style="width:25px;height:25px;position:relative;top:5px"><use xlink:href="#icon-eye"></use></svg><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="4-é¡¹ç›®å®æˆ˜-tliasæ•™åŠ¡ç³»ç»Ÿ">4.é¡¹ç›®å®æˆ˜ <code>tlias</code>æ•™åŠ¡ç³»ç»Ÿ</h1>
<p><strong>åœ¨æ•´ä¸ªå®æˆ˜ç¯‡ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®Œæˆå¦‚ä¸‹åŠŸèƒ½ï¼š</strong></p>
<ul>
<li>éƒ¨é—¨ç®¡ç†ï¼šæŸ¥è¯¢ã€æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤</li>
<li>å‘˜å·¥ç®¡ç†ï¼š
<ul>
<li>æŸ¥è¯¢ã€æ–°å¢ã€ä¿®æ”¹ã€åˆ é™¤</li>
<li>æ–‡ä»¶ä¸Šä¼ </li>
</ul>
</li>
<li>æŠ¥è¡¨ç»Ÿè®¡</li>
<li>ç™»å½•è®¤è¯</li>
<li>æ—¥å¿—ç®¡ç†</li>
<li>ç­çº§ç®¡ç†ï¼ˆè‡ªå·±å®æˆ˜å†…å®¹ï¼‰</li>
<li>å­¦å‘˜ç®¡ç†ï¼ˆè‡ªå·±å®æˆ˜å†…å®¹ï¼‰</li>
</ul>
<h1 id="â€“éƒ¨é—¨ç®¡ç†æ¨¡å—">â€“éƒ¨é—¨ç®¡ç†æ¨¡å—</h1>
<h2 id="1-éƒ¨é—¨ç®¡ç†">1.éƒ¨é—¨ç®¡ç†</h2>
<h3 id="1-1åŸºç¡€çŸ¥è¯†">1.1åŸºç¡€çŸ¥è¯†</h3>
<h4 id="1-1-1å‰åç«¯åˆ†ç¦»å¼€å‘">1.1.1å‰åç«¯åˆ†ç¦»å¼€å‘</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-247-1024x454.png" alt="img"></p>
<p>æˆ‘ä»¬å°†åŸå…ˆçš„å·¥ç¨‹åˆ†ä¸ºå‰ç«¯å·¥ç¨‹å’Œåç«¯å·¥ç¨‹è¿™2ä¸ªå·¥ç¨‹ï¼Œç„¶åå‰ç«¯å·¥ç¨‹äº¤ç»™ä¸“ä¸šçš„å‰ç«¯äººå‘˜å¼€å‘ï¼Œåç«¯å·¥ç¨‹äº¤ç»™ä¸“ä¸šçš„åç«¯äººå‘˜å¼€å‘ã€‚</p>
<p>å‰ç«¯é¡µé¢éœ€è¦æ•°æ®ï¼Œå¯ä»¥é€šè¿‡å‘é€å¼‚æ­¥è¯·æ±‚ï¼Œä»åå°å·¥ç¨‹è·å–ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å‰åå°æ˜¯åˆ†å¼€æ¥å¼€å‘çš„ï¼Œé‚£ä¹ˆå‰ç«¯äººå‘˜æ€ä¹ˆçŸ¥é“åå°è¿”å›æ•°æ®çš„æ ¼å¼å‘¢ï¼Ÿåç«¯äººå‘˜å¼€å‘ï¼Œæ€ä¹ˆçŸ¥é“å‰ç«¯äººå‘˜éœ€è¦çš„æ•°æ®æ ¼å¼å‘¢ï¼Ÿ</p>
<p>æ‰€ä»¥é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å‰åå°ç»Ÿä¸€åˆ¶å®šä¸€å¥—è§„èŒƒï¼æˆ‘ä»¬å‰åå°å¼€å‘äººå‘˜éƒ½éœ€è¦éµå¾ªè¿™å¥—è§„èŒƒå¼€å‘ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„<strong>æ¥å£****æ–‡æ¡£</strong>ã€‚</p>
<p>é‚£ä¹ˆæ¥å£æ–‡æ¡£çš„å†…å®¹æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿæ˜¯æˆ‘ä»¬åå°å¼€å‘è€…æ ¹æ®äº§å“ç»ç†æä¾›çš„äº§å“åŸå‹å’Œéœ€æ±‚æ–‡æ¡£æ‰€æ’°å†™å‡ºæ¥çš„</p>
<p>é‚£ä¹ˆåŸºäºå‰åå°åˆ†ç¦»å¼€å‘çš„æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬åå°å¼€å‘è€…å¼€å‘ä¸€ä¸ªåŠŸèƒ½çš„å…·ä½“æµç¨‹å¦‚ä½•å‘¢ï¼Ÿå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-276-1024x113.png" alt="img"></p>
<ol>
<li>éœ€æ±‚åˆ†æï¼šé¦–å…ˆæˆ‘ä»¬éœ€è¦é˜…è¯»éœ€æ±‚æ–‡æ¡£ï¼Œåˆ†æéœ€æ±‚ï¼Œç†è§£éœ€æ±‚ã€‚</li>
<li>æ¥å£å®šä¹‰ï¼šæŸ¥è¯¢æ¥å£æ–‡æ¡£ä¸­å…³äºéœ€æ±‚çš„æ¥å£çš„å®šä¹‰ï¼ŒåŒ…æ‹¬åœ°å€ï¼Œå‚æ•°ï¼Œå“åº”æ•°æ®ç±»å‹ç­‰ç­‰</li>
<li>å‰åå°å¹¶è¡Œå¼€å‘ï¼šå„è‡ªæŒ‰ç…§æ¥å£æ–‡æ¡£è¿›è¡Œå¼€å‘ï¼Œå®ç°éœ€æ±‚</li>
<li>æµ‹è¯•ï¼šå‰åå°å¼€å‘å®Œäº†ï¼Œå„è‡ªæŒ‰ç…§æ¥å£æ–‡æ¡£è¿›è¡Œæµ‹è¯•</li>
<li>å‰åæ®µè”è°ƒæµ‹è¯•ï¼šå‰æ®µå·¥ç¨‹è¯·æ±‚åç«¯å·¥ç¨‹ï¼Œæµ‹è¯•åŠŸèƒ½</li>
</ol>
<h4 id="1-1-2Restfulé£æ ¼">1.1.2Restfulé£æ ¼</h4>
<p>è€Œåœ¨å‰åç«¯è¿›è¡Œäº¤äº’çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åŸºäºå½“å‰ä¸»æµçš„RESTé£æ ¼çš„APIæ¥å£è¿›è¡Œäº¤äº’ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯RESTé£æ ¼å‘¢?</strong></p>
<ul>
<li>RESTï¼ˆRepresentational State Transferï¼‰ï¼Œè¡¨è¿°æ€§çŠ¶æ€è½¬æ¢ï¼Œå®ƒæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€‚</li>
</ul>
<p><strong>ä¼ ç»ŸURLé£æ ¼å¦‚ä¸‹ï¼š</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/user/getById?id=1">http://localhost:8080/user/getById?id=1</a> GETï¼šæŸ¥è¯¢idä¸º1çš„ç”¨æˆ·</li>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/user/saveUser">http://localhost:8080/user/saveUser</a> POSTï¼šæ–°å¢ç”¨æˆ·</li>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/user/updateUser">http://localhost:8080/user/updateUser</a> POSTï¼šä¿®æ”¹ç”¨æˆ·</li>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/user/deleteUser?id=1">http://localhost:8080/user/deleteUser?id=1</a> GETï¼šåˆ é™¤idä¸º1çš„ç”¨æˆ·</li>
</ul>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼ŒåŸå§‹çš„ä¼ ç»ŸURLå‘¢ï¼Œå®šä¹‰æ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”å°†èµ„æºçš„è®¿é—®è¡Œä¸ºå¯¹å¤–æš´éœ²å‡ºæ¥äº†ã€‚è€Œä¸”ï¼Œå¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œæ¯ä¸€ä¸ªå¼€å‘äººå‘˜éƒ½æœ‰è‡ªå·±çš„å‘½åä¹ æƒ¯ï¼Œå°±æ‹¿æ ¹æ®idæŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯æ¥è¯´çš„ï¼Œä¸åŒçš„å¼€å‘äººå‘˜å®šä¹‰çš„è·¯å¾„å¯èƒ½æ˜¯è¿™æ ·çš„ï¼š<code>getById</code>ï¼Œ<code>selectById</code>ï¼Œ<code>queryById</code>ï¼Œ<code>loadById</code>â€¦ ã€‚ æ¯ä¸€ä¸ªäººéƒ½æœ‰è‡ªå·±çš„å‘½åä¹ æƒ¯ï¼Œå¦‚æœéƒ½æŒ‰ç…§å„è‡ªçš„ä¹ æƒ¯æ¥ï¼Œä¸€ä¸ªé¡¹ç›®ç»„ï¼Œå‡ åå·æˆ–ä¸Šç™¾å·äººï¼Œé‚£æœ€ç»ˆå¼€å‘å‡ºæ¥çš„é¡¹ç›®ï¼Œå°†ä¼šå˜å¾—éš¾ä»¥ç»´æŠ¤ï¼Œæ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€çš„æ ‡å‡†ã€‚</p>
<p><strong>åŸºäºRESTé£æ ¼URLå¦‚ä¸‹ï¼š</strong></p>
<ul>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/users/1">http://localhost:8080/users/1</a> GETï¼šæŸ¥è¯¢idä¸º1çš„ç”¨æˆ·</li>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/users">http://localhost:8080/users</a> POSTï¼šæ–°å¢ç”¨æˆ·</li>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/users">http://localhost:8080/users</a> PUTï¼šä¿®æ”¹ç”¨æˆ·</li>
<li><a target="_blank" rel="noopener" href="http://localhost:8080/users/1">http://localhost:8080/users/1</a> DELETEï¼šåˆ é™¤idä¸º1çš„ç”¨æˆ·</li>
</ul>
<p>å…¶ä¸­æ€»ç»“èµ·æ¥ï¼Œå°±ä¸€å¥è¯ï¼š<strong>é€šè¿‡URLå®šä½è¦æ“ä½œçš„èµ„æºï¼Œé€šè¿‡HTTPåŠ¨è¯(è¯·æ±‚æ–¹å¼)æ¥æè¿°å…·ä½“çš„æ“ä½œã€‚</strong></p>
<p>åœ¨RESTé£æ ¼çš„URLä¸­ï¼Œé€šè¿‡å››ç§è¯·æ±‚æ–¹å¼ï¼Œæ¥æ“ä½œæ•°æ®çš„å¢åˆ æ”¹æŸ¥ã€‚</p>
<ul>
<li>GET ï¼š æŸ¥è¯¢</li>
<li>POST ï¼šæ–°å¢</li>
<li>PUT ï¼š ä¿®æ”¹</li>
<li>DELETE ï¼šåˆ é™¤</li>
</ul>
<p>æ³¨ï¼š</p>
<ul>
<li>RESTæ˜¯é£æ ¼ï¼Œæ˜¯çº¦å®šæ–¹å¼ï¼Œçº¦å®šä¸æ˜¯è§„å®šï¼Œå¯ä»¥æ‰“ç ´</li>
<li>æè¿°æ¨¡å—çš„åŠŸèƒ½é€šå¸¸ä½¿ç”¨å¤æ•°ï¼Œä¹Ÿå°±æ˜¯åŠ sçš„æ ¼å¼æ¥æè¿°ï¼Œè¡¨ç¤ºæ­¤ç±»èµ„æºï¼Œè€Œéå•ä¸ªèµ„æºã€‚å¦‚ï¼šusersã€empsã€booksâ€¦</li>
</ul>
<h4 id="1-1-3Apifoxçš„ä½¿ç”¨">1.1.3Apifoxçš„ä½¿ç”¨</h4>
<ul>
<li>å‰åç«¯éƒ½åœ¨å¹¶è¡Œå¼€å‘ï¼Œåç«¯å¼€å‘å®Œå¯¹åº”çš„æ¥å£ä¹‹åï¼Œå¦‚ä½•å¯¹æ¥å£è¿›è¡Œè¯·æ±‚æµ‹è¯•å‘¢ï¼Ÿ</li>
<li>å‰åç«¯éƒ½åœ¨å¹¶è¡Œå¼€å‘ï¼Œå‰ç«¯å¼€å‘è¿‡ç¨‹ä¸­ï¼Œå¦‚ä½•è·å–åˆ°æ•°æ®ï¼Œæµ‹è¯•é¡µé¢çš„æ¸²æŸ“å±•ç¤ºå‘¢ï¼Ÿ</li>
</ul>
<p>é‚£è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ©ä¸€äº›æ¥å£æµ‹è¯•å·¥å…·ï¼Œæ¯”å¦‚é¡¹ï¼šPostmanã€Apipostã€Apifoxç­‰ã€‚</p>
<p>è¯¦ç»†ä½¿ç”¨å¯ä»¥åœ¨bç«™å®˜æ–¹è´¦å·è‡ªè¡Œå­¦ä¹ </p>
<h3 id="1-2å·¥ç¨‹æ­å»º">1.2å·¥ç¨‹æ­å»º</h3>
<p><strong>1).</strong> <strong>åˆ›å»ºSpringBootå·¥ç¨‹ï¼Œå¹¶å¼•å…¥<strong><strong>webå¼€å‘èµ·æ­¥ä¾èµ–ã€mybatisã€mysqlé©±åŠ¨ã€lombok</strong></strong>ã€‚</strong></p>
<p><em><strong>*2). åˆ›å»ºæ•°æ®åº“åŠå¯¹åº”çš„è¡¨ç»“æ„ï¼Œå¹¶åœ¨application.ymlä¸­é…ç½®æ•°æ®åº“çš„åŸºæœ¬ä¿¡æ¯ã€‚*</strong></em></p>
<p>åˆ›å»º<code>tlias</code>æ•°æ®åº“ï¼Œå¹¶å‡†å¤‡<code>dept</code>éƒ¨é—¨è¡¨ã€‚</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> dept (</span><br><span class="line">  id <span class="type">int</span> unsigned <span class="keyword">PRIMARY KEY</span> AUTO_INCREMENT <span class="keyword">COMMENT</span> <span class="string">&#x27;ID, ä¸»é”®&#x27;</span>,</span><br><span class="line">  <span class="type">name</span> <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;éƒ¨é—¨åç§°&#x27;</span>,</span><br><span class="line">  create_time datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;åˆ›å»ºæ—¶é—´&#x27;</span>,</span><br><span class="line">  update_time datetime <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> <span class="keyword">COMMENT</span> <span class="string">&#x27;ä¿®æ”¹æ—¶é—´&#x27;</span></span><br><span class="line">) <span class="keyword">COMMENT</span> <span class="string">&#x27;éƒ¨é—¨è¡¨&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> dept <span class="keyword">VALUES</span> (<span class="number">1</span>,<span class="string">&#x27;å­¦å·¥éƒ¨&#x27;</span>,<span class="string">&#x27;2023-09-25 09:47:40&#x27;</span>,<span class="string">&#x27;2024-07-25 09:47:40&#x27;</span>),</span><br><span class="line">                      (<span class="number">2</span>,<span class="string">&#x27;æ•™ç ”éƒ¨&#x27;</span>,<span class="string">&#x27;2023-09-25 09:47:40&#x27;</span>,<span class="string">&#x27;2024-08-09 15:17:04&#x27;</span>),</span><br><span class="line">                      (<span class="number">3</span>,<span class="string">&#x27;å’¨è¯¢éƒ¨&#x27;</span>,<span class="string">&#x27;2023-09-25 09:47:40&#x27;</span>,<span class="string">&#x27;2024-07-30 21:26:24&#x27;</span>),</span><br><span class="line">                      (<span class="number">4</span>,<span class="string">&#x27;å°±ä¸šéƒ¨&#x27;</span>,<span class="string">&#x27;2023-09-25 09:47:40&#x27;</span>,<span class="string">&#x27;2024-07-25 09:47:40&#x27;</span>),</span><br><span class="line">                      (<span class="number">5</span>,<span class="string">&#x27;äººäº‹éƒ¨&#x27;</span>,<span class="string">&#x27;2023-09-25 09:47:40&#x27;</span>,<span class="string">&#x27;2024-07-25 09:47:40&#x27;</span>),</span><br><span class="line">                      (<span class="number">6</span>,<span class="string">&#x27;è¡Œæ”¿éƒ¨&#x27;</span>,<span class="string">&#x27;2023-11-30 20:56:37&#x27;</span>,<span class="string">&#x27;2024-07-30 20:56:37&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>application.yml</code> é…ç½®æ–‡ä»¶ä¸­é…ç½®æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ã€‚</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">spring:</span></span><br><span class="line">  <span class="params">application:</span></span><br><span class="line">    <span class="params">name:</span> tlias-web-management</span><br><span class="line">  <span class="comment">#mysqlè¿æ¥é…ç½®</span></span><br><span class="line">  <span class="params">datasource:</span></span><br><span class="line">    <span class="params">driver-class-name:</span> com.mysql.cj.jdbc.Driver</span><br><span class="line">    <span class="params">url:</span> jdbc:mysql:<span class="operator">//</span>localhost:<span class="number">3306</span><span class="symbol">/tlias</span></span><br><span class="line">    <span class="params">username:</span> root</span><br><span class="line">    <span class="params">password:</span> <span class="number">1234</span></span><br><span class="line"><span class="params">mybatis:</span></span><br><span class="line">  <span class="params">configuration:</span></span><br><span class="line">    <span class="params">log-impl:</span> org.apache.ibatis.logging.stdout.StdOutImpl</span><br></pre></td></tr></table></figure>
<p><strong>3). å‡†å¤‡åŸºç¡€åŒ…ç»“æ„ï¼Œå¹¶å¼•å…¥å®ä½“ç±»DeptåŠç»Ÿä¸€çš„å“åº”ç»“æœå°è£…ç±»Result</strong></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-248.png" alt="img"></p>
<p>å®ä½“ç±»Dept</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">class</span> <span class="title">Dept</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> name;</span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç»Ÿä¸€å“åº”ç»“æœResult</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">itheima</span>.<span class="property">pojo</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.<span class="property">Data</span>;</span><br><span class="line"><span class="keyword">import</span> java.<span class="property">io</span>.<span class="property">Serializable</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åç«¯ç»Ÿä¸€è¿”å›ç»“æœ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Integer</span> code; <span class="comment">//ç¼–ç ï¼š1æˆåŠŸï¼Œ0ä¸ºå¤±è´¥</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">String</span> msg; <span class="comment">//é”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">Object</span> data; <span class="comment">//æ•°æ®</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title class_">Result</span> <span class="title function_">success</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">Result</span> result = <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">        result.<span class="property">code</span> = <span class="number">1</span>;</span><br><span class="line">        result.<span class="property">msg</span> = <span class="string">&quot;success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title class_">Result</span> <span class="title function_">success</span>(<span class="params"><span class="title class_">Object</span> <span class="built_in">object</span></span>) &#123;</span><br><span class="line">        <span class="title class_">Result</span> result = <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">        result.<span class="property">data</span> = <span class="built_in">object</span>;</span><br><span class="line">        result.<span class="property">code</span> = <span class="number">1</span>;</span><br><span class="line">        result.<span class="property">msg</span> = <span class="string">&quot;success&quot;</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title class_">Result</span> <span class="title function_">error</span>(<span class="params"><span class="title class_">String</span> msg</span>) &#123;</span><br><span class="line">        <span class="title class_">Result</span> result = <span class="keyword">new</span> <span class="title class_">Result</span>();</span><br><span class="line">        result.<span class="property">msg</span> = msg;</span><br><span class="line">        result.<span class="property">code</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>åŸºç¡€ä»£ç ç»“æ„
<ul>
<li>DeptMapper</li>
<li>DeptService</li>
<li>DeptServiceImpl</li>
<li>DeptController</li>
</ul>
</li>
</ul>
<h2 id="2-æŸ¥è¯¢éƒ¨é—¨">2.æŸ¥è¯¢éƒ¨é—¨</h2>
<h3 id="2-1åŸºæœ¬å®ç°">2.1åŸºæœ¬å®ç°</h3>
<h4 id="2-1-1éœ€æ±‚">2.1.1éœ€æ±‚</h4>
<p>æŸ¥è¯¢æ‰€æœ‰çš„éƒ¨é—¨æ•°æ®ï¼ŒæŸ¥è¯¢å‡ºæ¥å±•ç¤ºåœ¨éƒ¨é—¨ç®¡ç†çš„é¡µé¢ä¸­ã€‚é¡µé¢åŸå‹æ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-277-1024x472.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-285.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-286.png" alt="img"></p>
<h4 id="2-1-2å®ç°æ€è·¯">2.1.2å®ç°æ€è·¯</h4>
<ul>
<li>Controllerå±‚ï¼Œè´Ÿè´£æ¥æ”¶å‰ç«¯å‘èµ·çš„è¯·æ±‚ï¼Œå¹¶è°ƒç”¨serviceæŸ¥è¯¢éƒ¨é—¨æ•°æ®ï¼Œç„¶åå“åº”ç»“æœã€‚</li>
<li>Serviceå±‚ï¼Œè´Ÿè´£è°ƒç”¨Mapperæ¥å£æ–¹æ³•ï¼ŒæŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®ã€‚</li>
<li>Mapperå±‚ï¼Œæ‰§è¡ŒæŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®çš„æ“ä½œã€‚</li>
</ul>
<h4 id="2-1-3ä»£ç å®ç°">2.1.3ä»£ç å®ç°</h4>
<p><strong>1). Controllerå±‚</strong></p>
<p>åœ¨ <code>DeptController</code> ä¸­ï¼Œå¢åŠ  <code>list</code> æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * éƒ¨é—¨ç®¡ç†æ§åˆ¶å™¨ */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">class</span> <span class="title">DeptController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptService deptService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**     * æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨     */</span><span class="meta">@RequestMapping</span>(<span class="string">&quot;/depts&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> Result list()&#123;</span><br><span class="line">        List&lt;Dept&gt; deptList = deptService.findAll();</span><br><span class="line">        <span class="keyword">return</span> Result.success(deptList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). Serviceå±‚</strong></p>
<p>åœ¨ <code>DeptService</code> ä¸­ï¼Œå¢åŠ  <code>findAll</code>æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">DeptService</span> &#123;</span><br><span class="line">    <span class="comment">/**     * æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨     */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Dept&gt; <span class="title">findAll</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>DeptServiceImpl</code> ä¸­ï¼Œå¢åŠ  <code>findAll</code>æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">class</span> <span class="title">DeptServiceImpl</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">DeptService</span></span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptMapper deptMapper;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; findAll() &#123;</span><br><span class="line">        <span class="keyword">return</span> deptMapper.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3). Mapperå±‚</strong></p>
<p>åœ¨ <code>DeptMapper</code> ä¸­ï¼Œå¢åŠ  <code>findAll</code>æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">interface</span> <span class="title">DeptMapper</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**     * æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨     */</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">&quot;select * from dept&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; findAll();</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-1-4æ¥å£æµ‹è¯•">2.1.4æ¥å£æµ‹è¯•</h4>
<p>æ‰“å¼€Apifoxè¿›è¡Œæµ‹è¯•</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-278-1024x647.png" alt="img"></p>
<p>æˆ‘ä»¬å‘ç°ï¼Œå·²ç»æŸ¥è¯¢å‡ºäº†æ‰€æœ‰çš„éƒ¨é—¨æ•°æ®ï¼Œå¹¶ä¸”å“åº”å›æ¥çš„å°±æ˜¯jsonæ ¼å¼çš„æ•°æ®ï¼Œä¸æ¥å£æ–‡æ¡£ä¸€è‡´ã€‚ é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å†æ¥æµ‹è¯•ä¸€ä¸‹ï¼Œè¿™ä¸ªæŸ¥è¯¢æ“ä½œï¼Œæˆ‘ä»¬ä½¿ç”¨postã€putã€deleteæ–¹å¼æ¥è¯·æ±‚ï¼Œæ˜¯å¦å¯ä»¥è·å–åˆ°æ•°æ®ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-279-1024x633.png" alt="img"></p>
<p>ç»è¿‡æµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç°ï¼Œç°åœ¨æˆ‘ä»¬å…¶å®æ˜¯å¯ä»¥é€šè¿‡ä»»ä½•æ–¹å¼çš„è¯·æ±‚æ¥è®¿é—®æŸ¥è¯¢éƒ¨é—¨çš„è¿™ä¸ªæ¥å£çš„ã€‚ è€Œåœ¨æ¥å£æ–‡æ¡£ä¸­ï¼Œæ˜ç¡®è¦æ±‚è¯¥æ¥å£çš„è¯·æ±‚æ–¹å¼ä¸ºGETï¼Œé‚£ä¹ˆå¦‚ä½•é™åˆ¶è¯·æ±‚æ–¹å¼å‘¢ï¼Ÿ</p>
<p>æ–¹å¼ä¸€ï¼šåœ¨controlleræ–¹æ³•çš„@RequestMappingæ³¨è§£ä¸­é€šè¿‡methodå±æ€§æ¥é™å®šã€‚</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@RestController</span></span><br><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">DeptController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable">@Autowired</span></span><br><span class="line">    private DeptService deptService;</span><br><span class="line"></span><br><span class="line">    <span class="regexp">/**     </span></span><br><span class="line"><span class="regexp">     * æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨     </span></span><br><span class="line"><span class="regexp">     */</span></span><br><span class="line"><span class="variable">@RequestMapping</span>(value = <span class="string">&quot;/depts&quot;</span>, <span class="function"><span class="keyword">method</span> = <span class="title">RequestMethod</span>.<span class="title">GET</span>)</span></span><br><span class="line"><span class="function">    <span class="title">public</span> <span class="title">Result</span> <span class="title">list</span></span>()&#123;</span><br><span class="line">        List&lt;Dept&gt; deptList = deptService.findAll();</span><br><span class="line">        <span class="keyword">return</span> Result.success(deptList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ–¹å¼äºŒï¼šåœ¨controlleræ–¹æ³•ä¸Šä½¿ç”¨ï¼Œ@RequestMappingçš„è¡ç”Ÿæ³¨è§£ @GetMappingã€‚ è¯¥æ³¨è§£å°±æ˜¯æ ‡è¯†å½“å‰æ–¹æ³•ï¼Œå¿…é¡»ä»¥GETæ–¹å¼è¯·æ±‚ã€‚</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptService deptService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/depts&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Result list()&#123;</span><br><span class="line">        List&lt;Dept&gt; deptList = deptService.findAll();</span><br><span class="line">        <span class="keyword">return</span> Result.success(deptList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¨èä½¿ç”¨ç¬¬äºŒç§æ–¹å¼</p>
<ul>
<li>GETæ–¹å¼ï¼š@GetMapping</li>
<li>POSTæ–¹å¼ï¼š@PostMapping</li>
<li>PUTæ–¹å¼ï¼š@PutMapping</li>
<li>DELETEæ–¹å¼ï¼š@DeleteMapping</li>
</ul>
<h4 id="2-1-5æ•°æ®å°è£…">2.1.5æ•°æ®å°è£…</h4>
<p>åœ¨æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å‘ç°éƒ¨é—¨çš„æ•°æ®ä¸­ï¼Œidã€nameä¸¤ä¸ªå±æ€§æ˜¯æœ‰å€¼çš„ï¼Œä½†æ˜¯createTimeã€updateTimeä¸¤ä¸ªå­—æ®µå€¼å¹¶æœªæˆåŠŸå°è£…ï¼Œè€Œæ•°æ®åº“ä¸­æ˜¯æœ‰å¯¹åº”çš„å­—æ®µå€¼çš„ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-280-1024x242.png" alt="img"></p>
<p>åŸå› å¦‚ä¸‹ï¼š</p>
<ul>
<li>å®ä½“ç±»å±æ€§åå’Œæ•°æ®åº“è¡¨æŸ¥è¯¢è¿”å›çš„å­—æ®µåä¸€è‡´ï¼Œmybatisä¼šè‡ªåŠ¨å°è£…ã€‚</li>
<li>å¦‚æœå®ä½“ç±»å±æ€§åå’Œæ•°æ®åº“è¡¨æŸ¥è¯¢è¿”å›çš„å­—æ®µåä¸ä¸€è‡´ï¼Œä¸èƒ½è‡ªåŠ¨å°è£…ã€‚</li>
</ul>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>æ‰‹åŠ¨ç»“æœæ˜ å°„</li>
<li>èµ·åˆ«å</li>
<li>å¼€å¯é©¼å³°å‘½å</li>
</ul>
<p><strong>1).</strong> <strong>æ‰‹åŠ¨ç»“æœæ˜ å°„</strong></p>
<p>åœ¨DeptMapperæ¥å£æ–¹æ³•ä¸Šï¼Œé€šè¿‡ @ResultsåŠ@Result è¿›è¡Œæ‰‹åŠ¨ç»“æœæ˜ å°„ã€‚</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Results</span>(&#123;<span class="variable">@Result</span>(column = <span class="string">&quot;create_time&quot;</span>, property = <span class="string">&quot;createTime&quot;</span>),</span><br><span class="line">          <span class="variable">@Result</span>(column = <span class="string">&quot;update_time&quot;</span>, property = <span class="string">&quot;updateTime&quot;</span>)&#125;)</span><br><span class="line"><span class="variable">@Select</span>(<span class="string">&quot;select id, name, create_time, update_time from dept&quot;</span>)</span><br><span class="line">public List&lt;Dept&gt; <span class="built_in">findAll</span>();</span><br></pre></td></tr></table></figure>
<p><strong>2). èµ·åˆ«å</strong></p>
<p>åœ¨SQLè¯­å¥ä¸­ï¼Œå¯¹ä¸ä¸€æ ·çš„åˆ—åèµ·åˆ«åï¼Œåˆ«åå’Œå®ä½“ç±»å±æ€§åä¸€æ ·ã€‚</p>
<p><strong>3). å¼€å¯é©¼å³°å‘½å</strong>**(æ¨è)**</p>
<p>å¦‚æœå­—æ®µåä¸å±æ€§åç¬¦åˆé©¼å³°å‘½åè§„åˆ™ï¼Œmybatisä¼šè‡ªåŠ¨é€šè¿‡é©¼å³°å‘½åè§„åˆ™æ˜ å°„ã€‚é©¼å³°å‘½åè§„åˆ™ï¼š abc_xyz =&gt; abcXyz</p>
<ul>
<li>è¡¨ä¸­å­—æ®µåï¼šabc_xyz</li>
<li>ç±»ä¸­å±æ€§åï¼šabcXyz</li>
</ul>
<p>åœ¨application.ymlä¸­åšå¦‚ä¸‹é…ç½®ï¼Œå¼€å¯å¼€å…³ã€‚</p>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mybatis:</span><br><span class="line">  <span class="keyword">configuration</span>:</span><br><span class="line">    <span class="keyword">map</span>-underscore-<span class="keyword">to</span>-camel-<span class="keyword">case</span>: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="2-2äº†è§£å‰åç«¯è”è°ƒæ—¶çš„è¯·æ±‚è®¿é—®è¿‡ç¨‹ï¼ˆåå‘ä»£ç†ï¼‰">2.2äº†è§£å‰åç«¯è”è°ƒæ—¶çš„è¯·æ±‚è®¿é—®è¿‡ç¨‹ï¼ˆåå‘ä»£ç†ï¼‰</h3>
<p>å‰ç«¯å·¥ç¨‹è¯·æ±‚æœåŠ¡å™¨çš„åœ°å€ä¸º <code>http://localhost:90/api/depts</code>ï¼Œæ˜¯å¦‚ä½•è®¿é—®åˆ°åç«¯çš„tomcatæœåŠ¡å™¨çš„ï¼Ÿ</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-281.png" alt="img"></p>
<p>å…¶å®è¿™é‡Œï¼Œæ˜¯é€šè¿‡å‰ç«¯æœåŠ¡Nginxä¸­æä¾›çš„åå‘ä»£ç†åŠŸèƒ½å®ç°çš„ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-283.png" alt="img"></p>
<p>1). æµè§ˆå™¨å‘èµ·è¯·æ±‚ï¼Œè¯·æ±‚çš„æ˜¯localhost:90 ï¼Œé‚£å…¶å®è¯·æ±‚çš„æ˜¯nginxæœåŠ¡å™¨ã€‚</p>
<p>2). åœ¨nginxæœåŠ¡å™¨ä¸­å‘¢ï¼Œå¹¶æ²¡æœ‰å¯¹è¯·æ±‚ç›´æ¥è¿›è¡Œå¤„ç†ï¼Œè€Œæ˜¯å°†è¯·æ±‚è½¬å‘ç»™äº†åç«¯çš„tomcatæœåŠ¡å™¨ï¼Œæœ€ç»ˆç”±tomcatæœåŠ¡å™¨æ¥å¤„ç†è¯¥è¯·æ±‚ã€‚</p>
<p>è¿™ä¸ªè¿‡ç¨‹å°±æ˜¯é€šè¿‡nginxçš„åå‘ä»£ç†å®ç°çš„ã€‚</p>
<p><strong>é—®ï¼šé‚£ä¸ºä»€ä¹ˆæµè§ˆå™¨ä¸ç›´æ¥è¯·æ±‚åç«¯çš„tomcatæœåŠ¡å™¨ï¼Œè€Œæ˜¯ç›´æ¥è¯·æ±‚nginxæœåŠ¡å™¨å‘¢ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç‚¹åŸå› ï¼š</strong></p>
<p>1). å®‰å…¨ï¼šç”±äºåç«¯çš„tomcatæœåŠ¡å™¨ä¸€èˆ¬éƒ½ä¼šæ­å»ºé›†ç¾¤ï¼Œä¼šæœ‰å¾ˆå¤šçš„æœåŠ¡å™¨ï¼ŒæŠŠæ‰€æœ‰çš„tomcatæš´éœ²ç»™å‰ç«¯ï¼Œè®©å‰ç«¯ç›´æ¥è¯·æ±‚tomcatï¼Œå¯¹äºåç«¯æœåŠ¡å™¨æ˜¯æ¯”è¾ƒå±é™©çš„ã€‚</p>
<p>2). çµæ´»ï¼šåŸºäºnginxçš„åå‘ä»£ç†å®ç°ï¼Œæ›´åŠ çµæ´»ï¼Œåç«¯æƒ³å¢åŠ ã€å‡å°‘æœåŠ¡å™¨ï¼Œå¯¹äºå‰ç«¯æ¥è¯´æ˜¯æ— æ„ŸçŸ¥çš„ï¼Œåªéœ€è¦åœ¨nginxä¸­é…ç½®å³å¯ã€‚</p>
<p>3). è´Ÿè½½å‡è¡¡ï¼šåŸºäºnginxçš„åå‘ä»£ç†ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„å®ç°åç«¯tomcatçš„è´Ÿè½½å‡è¡¡æ“ä½œã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-328-1024x251.png" alt="img"></p>
<p>å…·ä½“çš„è¯·æ±‚è®¿é—®æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-284-1024x321.png" alt="img"></p>
<ol>
<li>locationï¼šç”¨äºå®šä¹‰åŒ¹é…ç‰¹å®šuriè¯·æ±‚çš„è§„åˆ™ã€‚</li>
<li>^~ /api/ï¼šè¡¨ç¤ºç²¾ç¡®åŒ¹é…ï¼Œå³åªåŒ¹é…ä»¥/api/å¼€å¤´çš„è·¯å¾„ã€‚</li>
<li>rewriteï¼šè¯¥æŒ‡ä»¤ç”¨äºé‡å†™åŒ¹é…åˆ°çš„uriè·¯å¾„ã€‚</li>
<li>proxy_passï¼šè¯¥æŒ‡ä»¤ç”¨äºä»£ç†è½¬å‘ï¼Œå®ƒå°†åŒ¹é…åˆ°çš„è¯·æ±‚è½¬å‘ç»™ä½äºåç«¯çš„æŒ‡ä»¤æœåŠ¡å™¨ã€‚</li>
</ol>
<h2 id="3-åˆ é™¤éƒ¨é—¨">3.åˆ é™¤éƒ¨é—¨</h2>
<h3 id="3-1åŸºæœ¬å®ç°">3.1åŸºæœ¬å®ç°</h3>
<h4 id="3-1-1éœ€æ±‚">3.1.1éœ€æ±‚</h4>
<p>åˆ é™¤éƒ¨é—¨æ•°æ®ã€‚åœ¨ç‚¹å‡» â€œåˆ é™¤â€ æŒ‰é’®ï¼Œä¼šæ ¹æ®IDåˆ é™¤éƒ¨é—¨æ•°æ®ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-287-1024x419.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-289-707x1024.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-290.png" alt="img"></p>
<h4 id="3-1-2å®ç°æ€è·¯">3.1.2å®ç°æ€è·¯</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-291-1024x263.png" alt="img"></p>
<h4 id="3-1-3ç®€å•å‚æ•°æ¥æ”¶">3.1.3ç®€å•å‚æ•°æ¥æ”¶</h4>
<p>åœ¨controllerä¸­ï¼Œéœ€è¦æ¥æ”¶å‰ç«¯ä¼ é€’çš„è¯·æ±‚å‚æ•°ã€‚ é‚£æ¥ä¸‹æ¥ï¼Œå°±å…ˆæ¥çœ‹çœ‹åœ¨æœåŠ¡å™¨ç«¯çš„Controllerç¨‹åºä¸­ï¼Œå¦‚ä½•è·å–è¿™ç±»ç®€å•å‚æ•°ã€‚ å…·ä½“çš„æ–¹æ¡ˆæœ‰å¦‚ä¸‹ä¸‰ç§ï¼š</p>
<p><strong>æ–¹æ¡ˆä¸€ï¼šé€šè¿‡åŸå§‹çš„ <code>HttpServletRequest</code> å¯¹è±¡è·å–è¯·æ±‚å‚æ•°</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®IDåˆ é™¤éƒ¨é—¨ - ç®€å•å‚æ•°æ¥æ”¶: æ–¹å¼ä¸€ (HttpServletRequest)</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">@DeleteMapping(&quot;/depts&quot;)</span><br><span class="line"><span class="built_in">public</span> Result <span class="keyword">delete</span>(HttpServletRequest request)&#123;</span><br><span class="line">    String idStr = request.getParameter(&quot;id&quot;);</span><br><span class="line">    <span class="type">int</span> id = <span class="type">Integer</span>.parseInt(idStr);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;æ ¹æ®IDåˆ é™¤éƒ¨é—¨: &quot; + id);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™ç§æ–¹æ¡ˆå®ç°è¾ƒä¸ºç¹çï¼Œè€Œä¸”è¿˜éœ€è¦è¿›è¡Œæ‰‹åŠ¨ç±»å‹è½¬æ¢ã€‚<strong>ã€é¡¹ç›®å¼€å‘å¾ˆå°‘ç”¨ã€‘</strong></p>
<p><strong>æ–¹æ¡ˆäºŒï¼šé€šè¿‡Springæä¾›çš„ <code>@RequestParam</code> æ³¨è§£ï¼Œå°†è¯·æ±‚å‚æ•°ç»‘å®šç»™æ–¹æ³•å½¢å‚</strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@DeleteMapping</span>(<span class="string">&quot;/depts&quot;</span>)</span><br><span class="line">public Result <span class="built_in">delete</span>(<span class="variable">@RequestParam</span>(<span class="string">&quot;id&quot;</span>) Integer deptId)&#123;</span><br><span class="line">    <span class="selector-tag">System</span><span class="selector-class">.out</span><span class="selector-class">.println</span>(<span class="string">&quot;æ ¹æ®IDåˆ é™¤éƒ¨é—¨: &quot;</span> + deptId);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>@RequestParam</code> æ³¨è§£çš„valueå±æ€§ï¼Œéœ€è¦ä¸å‰ç«¯ä¼ é€’çš„å‚æ•°åä¿æŒä¸€è‡´ ã€‚</p>
<p>@RequestParamæ³¨è§£requiredå±æ€§é»˜è®¤ä¸ºtrueï¼Œä»£è¡¨è¯¥å‚æ•°å¿…é¡»ä¼ é€’ï¼Œå¦‚æœä¸ä¼ é€’å°†æŠ¥é”™ã€‚ å¦‚æœå‚æ•°å¯é€‰ï¼Œå¯ä»¥å°†å±æ€§è®¾ç½®ä¸ºfalseã€‚</p>
<p><strong>æ–¹æ¡ˆä¸‰ï¼šå¦‚æœè¯·æ±‚å‚æ•°åä¸å½¢å‚å˜é‡åç›¸åŒï¼Œç›´æ¥å®šä¹‰æ–¹æ³•å½¢å‚å³å¯æ¥æ”¶ã€‚ï¼ˆçœç•¥@RequestParamï¼‰</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@DeleteMapping(<span class="string">&quot;/depts&quot;</span>)</span></span><br><span class="line"><span class="keyword">public</span> Result delete(Integer id)&#123;</span><br><span class="line">    System.<span class="keyword">out</span>.println(<span class="string">&quot;æ ¹æ®IDåˆ é™¤éƒ¨é—¨: &quot;</span> + deptId);</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹äºä»¥ä¸Šçš„è¿™ä¸‰ç§æ–¹æ¡ˆï¼Œ<strong>æ¨èç¬¬ä¸‰ç§æ–¹æ¡ˆ</strong>ã€‚</p>
<h4 id="3-1-4ä»£ç å®ç°">3.1.4ä»£ç å®ç°</h4>
<p><strong>1). Controllerå±‚</strong></p>
<p>åœ¨ <code>DeptMapper</code> ä¸­ï¼Œå¢åŠ  <code>delete</code> æ–¹æ³•ï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ ¹æ®<span class="built_in">id</span>åˆ é™¤éƒ¨é—¨ - delete http://localhost:8080/depts?<span class="built_in">id</span>=1</span><br><span class="line"> */</span><br><span class="line">@DeleteMapping(<span class="string">&quot;/depts&quot;</span>)</span><br><span class="line">public Result delete(Integer <span class="built_in">id</span>)&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;æ ¹æ®idåˆ é™¤éƒ¨é—¨, id=&quot;</span> + <span class="built_in">id</span>);</span><br><span class="line">    deptService.deleteById(<span class="built_in">id</span>);</span><br><span class="line">    <span class="built_in">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). Serviceå±‚</strong></p>
<p>åœ¨ <code>DeptService</code> ä¸­ï¼Œå¢åŠ  <code>deleteById</code> æ–¹æ³•ï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * æ ¹æ®idåˆ é™¤éƒ¨é—¨ */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteById</span><span class="params">(Integer id)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>DeptServiceImpl</code> ä¸­ï¼Œå¢åŠ  <code>deleteById</code> æ–¹æ³•ï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> deleteById(Integer <span class="built_in">id</span>) &#123;</span><br><span class="line">    deptMapper.deleteById(<span class="built_in">id</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3). Mapperå±‚</strong></p>
<p>åœ¨ <code>DeptMapper</code> ä¸­ï¼Œå¢åŠ  <code>deleteById</code> æ–¹æ³•ï¼Œä»£ç å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * æ ¹æ®idåˆ é™¤éƒ¨é—¨ */</span></span><br><span class="line"><span class="variable">@Delete</span>(<span class="string">&quot;delete from dept where id = #&#123;id&#125;&quot;</span>)</span><br><span class="line">void <span class="built_in">deleteById</span>(Integer id);</span><br></pre></td></tr></table></figure>
<p>å¯¹äº DML è¯­å¥æ¥è¯´ï¼Œæ‰§è¡Œå®Œæ¯•ï¼Œä¹Ÿæ˜¯æœ‰è¿”å›å€¼çš„ï¼Œè¿”å›å€¼ä»£è¡¨çš„æ˜¯å¢åˆ æ”¹æ“ä½œï¼Œå½±å“çš„è®°å½•æ•°ï¼Œæ‰€ä»¥å¯ä»¥å°†æ‰§è¡Œ DML è¯­å¥çš„æ–¹æ³•è¿”å›å€¼è®¾ç½®ä¸º Integerã€‚ ä½†æ˜¯ä¸€èˆ¬å¼€å‘æ—¶ï¼Œæ˜¯ä¸éœ€è¦è¿™ä¸ªè¿”å›å€¼çš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºvoidã€‚</p>
<h2 id="4-æ–°å¢éƒ¨é—¨">4.æ–°å¢éƒ¨é—¨</h2>
<h3 id="4-1åŸºæœ¬å®ç°">4.1åŸºæœ¬å®ç°</h3>
<h4 id="4-1-1éœ€æ±‚">4.1.1éœ€æ±‚</h4>
<p>ç‚¹å‡» â€œæ–°å¢éƒ¨é—¨â€ çš„æŒ‰é’®ä¹‹åï¼Œå¼¹å‡ºæ–°å¢éƒ¨é—¨è¡¨å•ï¼Œå¡«å†™éƒ¨é—¨åç§°ä¹‹åï¼Œç‚¹å‡»ç¡®å®šä¹‹åï¼Œä¿å­˜éƒ¨é—¨æ•°æ®ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-292-1024x404.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-293-1024x602.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-295-1024x533.png" alt="img"></p>
<h4 id="4-1-2å®ç°æ€è·¯">4.1.2å®ç°æ€è·¯</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-294-1024x266.png" alt="img"></p>
<h4 id="4-1-3jsonå‚æ•°æ¥æ”¶">4.1.3jsonå‚æ•°æ¥æ”¶</h4>
<p>åœ¨controllerä¸­ï¼Œéœ€è¦æ¥æ”¶å‰ç«¯ä¼ é€’çš„è¯·æ±‚å‚æ•°ã€‚ é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å…ˆæ¥çœ‹çœ‹åœ¨æœåŠ¡å™¨ç«¯çš„Controllerç¨‹åºä¸­ï¼Œå¦‚ä½•è·å–jsonæ ¼å¼çš„å‚æ•°ã€‚</p>
<ul>
<li>JSONæ ¼å¼çš„å‚æ•°ï¼Œé€šå¸¸ä¼šä½¿ç”¨ä¸€ä¸ªå®ä½“å¯¹è±¡è¿›è¡Œæ¥æ”¶ ã€‚</li>
<li>è§„åˆ™ï¼šJSONæ•°æ®çš„é”®åä¸æ–¹æ³•å½¢å‚å¯¹è±¡çš„å±æ€§åç›¸åŒï¼Œå¹¶éœ€è¦ä½¿ç”¨<code>@RequestBody</code>æ³¨è§£æ ‡è¯†ã€‚</li>
</ul>
<p>å‰ç«¯ä¼ é€’çš„è¯·æ±‚å‚æ•°æ ¼å¼ä¸ºjsonï¼Œå†…å®¹å¦‚ä¸‹ï¼š<code>&#123;&quot;name&quot;:&quot;ç ”å‘éƒ¨&quot;&#125;</code>ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªå¯¹è±¡æ¥æ¥æ”¶ï¼Œåªéœ€è¦ä¿è¯å¯¹è±¡ä¸­æœ‰nameå±æ€§å³å¯ã€‚</p>
<h4 id="4-1-4ä»£ç å®ç°">4.1.4ä»£ç å®ç°</h4>
<p><strong>1). Controllerå±‚</strong></p>
<p>åœ¨<code>DeptController</code>ä¸­å¢åŠ æ–¹æ³•saveï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * æ–°å¢éƒ¨é—¨ - POST http://localhost:8080/depts   è¯·æ±‚å‚æ•°ï¼š&#123;&quot;name&quot;:&quot;ç ”å‘éƒ¨&quot;&#125; */</span></span><br><span class="line"><span class="variable">@PostMapping</span>(<span class="string">&quot;/depts&quot;</span>)</span><br><span class="line">public Result <span class="built_in">save</span>(<span class="variable">@RequestBody</span> Dept dept)&#123;</span><br><span class="line">    <span class="selector-tag">System</span><span class="selector-class">.out</span><span class="selector-class">.println</span>(<span class="string">&quot;æ–°å¢éƒ¨é—¨, dept=&quot;</span> + dept);</span><br><span class="line">    <span class="selector-tag">deptService</span><span class="selector-class">.save</span>(dept);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). Serviceå±‚</strong></p>
<p>åœ¨<code>DeptService</code>ä¸­å¢åŠ æ¥å£æ–¹æ³•saveï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * æ–°å¢éƒ¨é—¨ */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">save</span><span class="params">(Dept dept)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>DeptServiceImpl</code>ä¸­å¢åŠ saveæ–¹æ³•ï¼Œå®Œæˆæ·»åŠ éƒ¨é—¨çš„æ“ä½œï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public void <span class="built_in">save</span>(Dept dept) &#123;</span><br><span class="line">    <span class="comment">//è¡¥å…¨åŸºç¡€å±æ€§</span></span><br><span class="line">    dept<span class="selector-class">.setCreateTime</span>(LocalDateTime.now());</span><br><span class="line">    dept<span class="selector-class">.setUpdateTime</span>(LocalDateTime.now());</span><br><span class="line">    <span class="comment">//ä¿å­˜éƒ¨é—¨</span></span><br><span class="line">    deptMapper<span class="selector-class">.insert</span>(dept);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3). Mapperå±‚</strong></p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * ä¿å­˜éƒ¨é—¨ */</span></span><br><span class="line">@Insert(<span class="string">&quot;insert into dept(name,create_time,update_time) values(<span class="subst">#&#123;name&#125;</span>,<span class="subst">#&#123;createTime&#125;</span>,<span class="subst">#&#123;updateTime&#125;</span>)&quot;</span>)</span><br><span class="line"><span class="literal">void</span> insert(Dept dept);</span><br></pre></td></tr></table></figure>
<p>å¦‚æœåœ¨mapperæ¥å£ä¸­ï¼Œéœ€è¦ä¼ é€’å¤šä¸ªå‚æ•°ï¼Œå¯ä»¥æŠŠå¤šä¸ªå‚æ•°å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚ åœ¨SQLè¯­å¥ä¸­è·å–å‚æ•°çš„æ—¶å€™ï¼Œ<code>#&#123;...&#125;</code> é‡Œé¢å†™çš„æ˜¯<strong>å¯¹è±¡çš„å±æ€§å</strong>ã€æ³¨æ„æ˜¯å±æ€§åï¼Œä¸æ˜¯è¡¨çš„å­—æ®µåã€‘ã€‚</p>
<h2 id="5-ä¿®æ”¹éƒ¨é—¨">5.ä¿®æ”¹éƒ¨é—¨</h2>
<p>å¯¹äºä»»ä½•ä¸šåŠ¡çš„ä¿®æ”¹åŠŸèƒ½æ¥è¯´ï¼Œä¸€èˆ¬éƒ½ä¼šåˆ†ä¸ºä¸¤æ­¥è¿›è¡Œï¼šæŸ¥è¯¢å›æ˜¾ã€ä¿®æ”¹æ•°æ®ã€‚</p>
<h3 id="5-1æŸ¥è¯¢å›æ˜¾">5.1æŸ¥è¯¢å›æ˜¾</h3>
<h4 id="5-1-1éœ€æ±‚">5.1.1éœ€æ±‚</h4>
<p>å½“æˆ‘ä»¬ç‚¹å‡» â€œç¼–è¾‘â€ çš„æ—¶å€™ï¼Œéœ€è¦æ ¹æ®IDæŸ¥è¯¢éƒ¨é—¨æ•°æ®ï¼Œç„¶åç”¨äºé¡µé¢å›æ˜¾å±•ç¤ºã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-324-1024x220.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-296-1024x556.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-297-1024x811.png" alt="img"></p>
<h4 id="5-1-2å®ç°æ€è·¯">5.1.2å®ç°æ€è·¯</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-326-1024x259.png" alt="img"></p>
<h4 id="5-1-3è·¯å¾„å‚æ•°æ¥æ”¶">5.1.3è·¯å¾„å‚æ•°æ¥æ”¶</h4>
<p><code>/depts/1</code>ï¼Œ<code>/depts/2</code> è¿™ç§åœ¨urlä¸­ä¼ é€’çš„å‚æ•°ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>è·¯å¾„å‚æ•°</strong>ã€‚ é‚£ä¹ˆå¦‚ä½•æ¥æ”¶è¿™æ ·çš„è·¯å¾„å‚æ•°å‘¢ ï¼Ÿ</p>
<p>è·¯å¾„å‚æ•°ï¼šé€šè¿‡è¯·æ±‚URLç›´æ¥ä¼ é€’å‚æ•°ï¼Œä½¿ç”¨{â€¦}æ¥æ ‡è¯†è¯¥è·¯å¾„å‚æ•°ï¼Œéœ€è¦ä½¿ç”¨ **<code>@PathVariable</code>**è·å–è·¯å¾„å‚æ•°ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-325-1024x210.png" alt="img"></p>
<p>å¦‚æœè·¯å¾„å‚æ•°åä¸controlleræ–¹æ³•å½¢å‚åç§°ä¸€è‡´ï¼Œ<code>@PathVariable</code>æ³¨è§£çš„valueå±æ€§æ˜¯å¯ä»¥çœç•¥çš„</p>
<h4 id="5-1-4ä»£ç å®ç°">5.1.4ä»£ç å®ç°</h4>
<p><strong>1). Controllerå±‚</strong></p>
<p>åœ¨ <code>DeptController</code> ä¸­å¢åŠ  <code>getById</code>æ–¹æ³•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * æ ¹æ®IDæŸ¥è¯¢ - GET http://localhost:8080/depts/1 */</span></span><br><span class="line"><span class="meta">@GetMapping(<span class="string">&quot;/depts/&#123;id&#125;&quot;</span>)</span></span><br><span class="line"><span class="keyword">public</span> Result getById(<span class="meta">@PathVariable</span> Integer id)&#123;</span><br><span class="line">    System.<span class="keyword">out</span>.println(<span class="string">&quot;æ ¹æ®IDæŸ¥è¯¢, id=&quot;</span> + id);</span><br><span class="line">    Dept dept = deptService.getById(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success(dept);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). Serviceå±‚</strong></p>
<p>åœ¨ <code>DeptService</code> ä¸­å¢åŠ  <code>getById</code>æ–¹æ³•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * æ ¹æ®idæŸ¥è¯¢éƒ¨é—¨ */</span></span><br><span class="line">Dept <span class="built_in">getById</span>(Integer id);</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>DeptServiceImpl</code> ä¸­å¢åŠ  <code>getById</code>æ–¹æ³•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function">Dept <span class="title">getById</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">return</span> deptMapper.<span class="title">getById</span><span class="params">(id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3). Mapperå±‚</strong></p>
<p>åœ¨ <code>DeptMapper</code> ä¸­å¢åŠ  <code>getById</code> æ–¹æ³•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<p>/** * æ ¹æ®IDæŸ¥è¯¢éƒ¨é—¨æ•°æ® */ @Select(â€œselect id, name, create_time, update_time from dept where id = #{id}â€) Dept getById(Integer id);</p>
<h3 id="5-2ä¿®æ”¹æ•°æ®">5.2ä¿®æ”¹æ•°æ®</h3>
<h4 id="5-2-1éœ€æ±‚">5.2.1éœ€æ±‚</h4>
<p>æŸ¥è¯¢å›æ˜¾å›æ¥ä¹‹åï¼Œå°±å¯ä»¥å¯¹éƒ¨é—¨çš„ä¿¡æ¯è¿›è¡Œä¿®æ”¹äº†ï¼Œä¿®æ”¹å®Œæ¯•ä¹‹åï¼Œç‚¹å‡»ç¡®å®šï¼Œæ­¤æ—¶ï¼Œå°±éœ€è¦æ ¹æ®IDä¿®æ”¹éƒ¨é—¨çš„æ•°æ®ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-298-1024x597.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-299-1024x654.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-300-1024x537.png" alt="img"></p>
<h4 id="5-2-2å®ç°æ€è·¯">5.2.2å®ç°æ€è·¯</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-301-1024x269.png" alt="img"></p>
<p>é€šè¿‡æ¥å£æ–‡æ¡£ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‰ç«¯ä¼ é€’çš„è¯·æ±‚å‚æ•°æ˜¯jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°ï¼Œåœ¨Controllerçš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>@RequestBody</code> æ³¨è§£æ¥æ¥æ”¶ï¼Œå¹¶å°†å…¶å°è£…åˆ°ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚</p>
<h4 id="5-2-3ä»£ç å®ç°">5.2.3ä»£ç å®ç°</h4>
<ol>
<li></li>
</ol>
<p><strong>1). Controllerå±‚</strong></p>
<p>åœ¨ <code>DeptController</code> ä¸­å¢åŠ  <code>update</code> æ–¹æ³•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * ä¿®æ”¹éƒ¨é—¨ - PUT http://localhost:8080/depts  è¯·æ±‚å‚æ•°ï¼š&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;ç ”å‘éƒ¨&quot;&#125; */</span></span><br><span class="line"><span class="variable">@PutMapping</span>(<span class="string">&quot;/depts&quot;</span>)</span><br><span class="line">public Result <span class="built_in">update</span>(<span class="variable">@RequestBody</span> Dept dept)&#123;</span><br><span class="line">    <span class="selector-tag">System</span><span class="selector-class">.out</span><span class="selector-class">.println</span>(<span class="string">&quot;ä¿®æ”¹éƒ¨é—¨, dept=&quot;</span> + dept);</span><br><span class="line">    <span class="selector-tag">deptService</span><span class="selector-class">.update</span>(dept);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). Serviceå±‚</strong></p>
<p>åœ¨ <code>DeptService</code> ä¸­å¢åŠ  <code>update</code> æ–¹æ³•ã€‚</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * ä¿®æ”¹éƒ¨é—¨ */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(Dept dept)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>DeptServiceImpl</code> ä¸­å¢åŠ  <code>update</code> æ–¹æ³•ã€‚ ç”±äºæ˜¯ä¿®æ”¹æ“ä½œï¼Œæ¯ä¸€æ¬¡ä¿®æ”¹æ•°æ®ï¼Œéƒ½éœ€è¦æ›´æ–°updateTimeã€‚æ‰€ä»¥ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public void <span class="built_in">update</span>(Dept dept) &#123;</span><br><span class="line">    <span class="comment">//è¡¥å…¨åŸºç¡€å±æ€§</span></span><br><span class="line">    dept<span class="selector-class">.setUpdateTime</span>(LocalDateTime.now());</span><br><span class="line">    <span class="comment">//ä¿å­˜éƒ¨é—¨</span></span><br><span class="line">    deptMapper<span class="selector-class">.update</span>(dept);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3). Mapperå±‚</strong></p>
<p>åœ¨ <code>DeptMapper</code> ä¸­å¢åŠ  <code>update</code> æ–¹æ³•ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** * æ›´æ–°éƒ¨é—¨ */</span></span><br><span class="line">@Update(<span class="string">&quot;update dept set name = <span class="subst">#&#123;name&#125;</span>,update_time = <span class="subst">#&#123;updateTime&#125;</span> where id = <span class="subst">#&#123;id&#125;</span>&quot;</span>)</span><br><span class="line"><span class="literal">void</span> update(Dept dept);</span><br></pre></td></tr></table></figure>
<h3 id="5-3-RequestMapping">5.3@RequestMapping</h3>
<p>åˆ°æ­¤ï¼Œå…³äºåŸºæœ¬çš„éƒ¨é—¨çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ï¼Œå·²ç»å®ç°äº†ã€‚ æˆ‘ä»¬ä¼šå‘ç°ï¼Œæˆ‘ä»¬åœ¨ <code>DeptController</code> ä¸­æ‰€å®šä¹‰çš„æ–¹æ³•ï¼Œæ‰€æœ‰çš„è¯·æ±‚è·¯å¾„ï¼Œéƒ½æ˜¯ <code>/depts</code> å¼€å¤´çš„ï¼Œåªè¦æ“ä½œçš„æ˜¯éƒ¨é—¨æ•°æ®ï¼Œè¯·æ±‚è·¯å¾„éƒ½æ˜¯ <code>/depts</code> å¼€å¤´ã€‚</p>
<p>é‚£ä¹ˆè¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬å…¶å®æ˜¯å¯ä»¥æŠŠè¿™ä¸ªå…¬å…±çš„è·¯å¾„ <code>/depts</code> æŠ½å–åˆ°ç±»ä¸Šçš„ï¼Œé‚£åœ¨å„ä¸ªæ–¹æ³•ä¸Šï¼Œå°±å¯ä»¥çœç•¥äº†è¿™ä¸ª <code>/depts</code> è·¯å¾„ã€‚ ä»£ç å¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-327-1024x579.png" alt="img"></p>
<p>ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚è·¯å¾„ï¼Œåº”è¯¥æ˜¯ç±»ä¸Šçš„ @RequestMapping çš„valueå±æ€§ + æ–¹æ³•ä¸Šçš„ @RequestMappingçš„valueå±æ€§ã€‚</p>
<h2 id="6-æ—¥å¿—æŠ€æœ¯ï¼ˆLogbackï¼‰">6.æ—¥å¿—æŠ€æœ¯ï¼ˆLogbackï¼‰</h2>
<h3 id="6-1æ—¥å¿—æ¡†æ¶">6.1æ—¥å¿—æ¡†æ¶</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-302-1024x296.png" alt="img"></p>
<ul>
<li><strong>JUL</strong>**ï¼š**è¿™æ˜¯JavaSEå¹³å°æä¾›çš„å®˜æ–¹æ—¥å¿—æ¡†æ¶ï¼Œä¹Ÿè¢«ç§°ä¸ºJULã€‚é…ç½®ç›¸å¯¹ç®€å•ï¼Œä½†ä¸å¤Ÿçµæ´»ï¼Œæ€§èƒ½è¾ƒå·®ã€‚</li>
<li><strong>Log4j</strong>**ï¼š**ä¸€ä¸ªæµè¡Œçš„æ—¥å¿—æ¡†æ¶ï¼Œæä¾›äº†çµæ´»çš„é…ç½®é€‰é¡¹ï¼Œæ”¯æŒå¤šç§è¾“å‡ºç›®æ ‡ã€‚</li>
<li>**Logbackï¼š**åŸºäºLog4jå‡çº§è€Œæ¥ï¼Œæä¾›äº†æ›´å¤šçš„åŠŸèƒ½å’Œé…ç½®é€‰é¡¹ï¼Œæ€§èƒ½ç”±äºLog4jã€‚</li>
<li><strong>Slf4j</strong>**ï¼š**ï¼ˆSimple Logging Facade for Javaï¼‰ç®€å•æ—¥å¿—é—¨é¢ï¼Œæä¾›äº†ä¸€å¥—æ—¥å¿—æ“ä½œçš„æ ‡å‡†æ¥å£åŠæŠ½è±¡ç±»ï¼Œå…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨ä¸åŒçš„åº•å±‚æ—¥å¿—æ¡†æ¶ã€‚</li>
</ul>
<h3 id="6-2Logbackå…¥é—¨">6.2Logbackå…¥é—¨</h3>
<p><strong>1). å‡†å¤‡å·¥ä½œï¼šå¼•å…¥logbackçš„ä¾èµ–ï¼ˆspringbootä¸­æ— éœ€å¼•å…¥ï¼Œåœ¨springbootä¸­å·²ç»ä¼ é€’äº†æ­¤ä¾èµ–ï¼‰</strong></p>
<p><strong>2). å¼•å…¥é…ç½®æ–‡ä»¶ <code>logback.xml</code> ï¼ˆç›´æ¥AIç”Ÿæˆï¼‰</strong></p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦  %msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦ --&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d</span><span class="template-variable">&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;</span><span class="language-xml"> [%thread] %-5level %logger</span><span class="template-variable">&#123;50&#125;</span><span class="language-xml">-%msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!-- æ—¥å¿—è¾“å‡ºçº§åˆ« --&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;ALL&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><strong>3). è®°å½•æ—¥å¿—ï¼šå®šä¹‰æ—¥å¿—è®°å½•å¯¹è±¡Loggerï¼Œè®°å½•æ—¥å¿—</strong></p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogTest</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å®šä¹‰æ—¥å¿—è®°å½•å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(LogTest.<span class="keyword">class</span>);</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> testLog()&#123;</span><br><span class="line">        log.debug(<span class="string">&quot;å¼€å§‹è®¡ç®—...&quot;</span>);</span><br><span class="line">        <span class="built_in">int</span> <span class="keyword">sum</span> = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">int</span>[] nums = &#123;<span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">34</span>, <span class="number">2</span>, <span class="number">23</span>&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">sum</span> += nums[i];</span><br><span class="line">        &#125;</span><br><span class="line">        log.info(<span class="string">&quot;è®¡ç®—ç»“æœä¸º: &quot;</span>+<span class="keyword">sum</span>);log.debug(<span class="string">&quot;ç»“æŸè®¡ç®—...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œå•å…ƒæµ‹è¯•ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°è¾“å‡ºçš„æ—¥å¿—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-303-1024x540.png" alt="img"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨è¾“å‡ºçš„æ—¥å¿—ä¿¡æ¯ä¸­ï¼Œä¸ä»…è¾“å‡ºäº†æ—¥å¿—çš„ä¿¡æ¯ï¼Œè¿˜åŒ…æ‹¬ï¼šæ—¥å¿—çš„è¾“å‡ºæ—¶é—´ã€çº¿ç¨‹åã€å…·ä½“åœ¨é‚£ä¸ªç±»ä¸­è¾“å‡ºçš„ã€‚</p>
<h3 id="6-3Logbacké…ç½®æ–‡ä»¶">6.3Logbacké…ç½®æ–‡ä»¶</h3>
<p>Logbackæ—¥å¿—æ¡†æ¶çš„é…ç½®æ–‡ä»¶å« <code>logback.xml</code> ã€‚</p>
<p>è¯¥é…ç½®æ–‡ä»¶æ˜¯å¯¹Logbackæ—¥å¿—æ¡†æ¶è¾“å‡ºçš„æ—¥å¿—è¿›è¡Œæ§åˆ¶çš„ï¼Œå¯ä»¥æ¥é…ç½®è¾“å‡ºçš„æ ¼å¼ã€ä½ç½®åŠæ—¥å¿—å¼€å…³ç­‰ã€‚</p>
<p>å¸¸ç”¨çš„ä¸¤ç§è¾“å‡ºæ—¥å¿—çš„ä½ç½®ï¼šæ§åˆ¶å°ã€ç³»ç»Ÿæ–‡ä»¶ã€‚</p>
<p><strong>1). å¦‚æœéœ€è¦è¾“å‡ºæ—¥å¿—åˆ°æ§åˆ¶å°ã€‚æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</strong></p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%d è¡¨ç¤ºæ—¥æœŸï¼Œ%thread è¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelè¡¨ç¤ºçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ï¼Œ%msgè¡¨ç¤ºæ—¥å¿—æ¶ˆæ¯ï¼Œ%nè¡¨ç¤ºæ¢è¡Œç¬¦ --&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d</span><span class="template-variable">&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;</span><span class="language-xml"> [%thread] %-5level %logger</span><span class="template-variable">&#123;50&#125;</span><span class="language-xml">-%msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><strong>2). å¦‚æœéœ€è¦è¾“å‡ºæ—¥å¿—åˆ°æ–‡ä»¶ã€‚æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š</strong></p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!-- æŒ‰ç…§æ¯å¤©ç”Ÿæˆæ—¥å¿—æ–‡ä»¶ --&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;FILE&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">rollingPolicy</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- æ—¥å¿—æ–‡ä»¶è¾“å‡ºçš„æ–‡ä»¶å, %iè¡¨ç¤ºåºå· --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">FileNamePattern</span>&gt;</span>D:/tlias-%d</span><span class="template-variable">&#123;yyyy-MM-dd&#125;</span><span class="language-xml">-%i.log<span class="tag">&lt;/<span class="name">FileNamePattern</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- æœ€å¤šä¿ç•™çš„å†å²æ—¥å¿—æ–‡ä»¶æ•°é‡ --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">MaxHistory</span>&gt;</span>30<span class="tag">&lt;/<span class="name">MaxHistory</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!-- æœ€å¤§æ–‡ä»¶å¤§å°ï¼Œè¶…è¿‡è¿™ä¸ªå¤§å°ä¼šè§¦å‘æ»šåŠ¨åˆ°æ–°æ–‡ä»¶ï¼Œé»˜è®¤ä¸º 10MB --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">maxFileSize</span>&gt;</span>10MB<span class="tag">&lt;/<span class="name">maxFileSize</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">rollingPolicy</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="comment">&lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%d è¡¨ç¤ºæ—¥æœŸï¼Œ%thread è¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelè¡¨ç¤ºçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦ï¼Œ%msgè¡¨ç¤ºæ—¥å¿—æ¶ˆæ¯ï¼Œ%nè¡¨ç¤ºæ¢è¡Œç¬¦ --&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d</span><span class="template-variable">&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;</span><span class="language-xml"> [%thread] %-5level %logger</span><span class="template-variable">&#123;50&#125;</span><span class="language-xml">-%msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><strong>3). æ—¥å¿—å¼€å…³é…ç½® ï¼ˆå¼€å¯æ—¥å¿—ï¼ˆALLï¼‰ï¼Œå–æ¶ˆæ—¥å¿—ï¼ˆOFFï¼‰ï¼‰</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ—¥å¿—è¾“å‡ºçº§åˆ« --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;ALL&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¾“å‡ºåˆ°æ§åˆ¶å°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¾“å‡ºåˆ°æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-4æ—¥å¿—çº§åˆ«">6.4æ—¥å¿—çº§åˆ«</h3>
<p>å¸¸è§çš„æ—¥å¿—çº§åˆ«å¦‚ä¸‹ï¼ˆä¼˜å…ˆçº§ç”±ä½åˆ°é«˜ï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th>æ—¥å¿—çº§åˆ«</th>
<th>è¯´æ˜</th>
<th>è®°å½•æ–¹å¼</th>
</tr>
</thead>
<tbody>
<tr>
<td>trace</td>
<td>è¿½è¸ªï¼Œè®°å½•ç¨‹åºè¿è¡Œè½¨è¿¹ ã€ä½¿ç”¨å¾ˆå°‘ã€‘</td>
<td>log.trace(â€œâ€¦â€)</td>
</tr>
<tr>
<td>debug</td>
<td>è°ƒè¯•ï¼Œè®°å½•ç¨‹åºè°ƒè¯•è¿‡ç¨‹ä¸­çš„ä¿¡æ¯ï¼Œå®é™…åº”ç”¨ä¸­ä¸€èˆ¬å°†å…¶è§†ä¸ºæœ€ä½çº§åˆ« ã€ä½¿ç”¨è¾ƒå¤šã€‘</td>
<td>log.debug(â€œâ€¦â€)</td>
</tr>
<tr>
<td>info</td>
<td>è®°å½•ä¸€èˆ¬ä¿¡æ¯ï¼Œæè¿°ç¨‹åºè¿è¡Œçš„å…³é”®äº‹ä»¶ï¼Œå¦‚ï¼šç½‘ç»œè¿æ¥ã€ioæ“ä½œ ã€ä½¿ç”¨è¾ƒå¤šã€‘</td>
<td><a target="_blank" rel="noopener" href="http://log.info">log.info</a>(â€œâ€¦â€)</td>
</tr>
<tr>
<td>warn</td>
<td>è­¦å‘Šä¿¡æ¯ï¼Œè®°å½•æ½œåœ¨æœ‰å®³çš„æƒ…å†µ ã€ä½¿ç”¨è¾ƒå¤šã€‘</td>
<td>log.warn(â€œâ€¦â€)</td>
</tr>
<tr>
<td>error</td>
<td>é”™è¯¯ä¿¡æ¯ ã€ä½¿ç”¨è¾ƒå¤šã€‘</td>
<td>log.error(â€œâ€¦â€)</td>
</tr>
</tbody>
</table>
<p>å¯ä»¥åœ¨é…ç½®æ–‡ä»¶<code>logback.xml</code>ä¸­ï¼Œçµæ´»çš„æ§åˆ¶è¾“å‡ºé‚£äº›ç±»å‹çš„æ—¥å¿—ã€‚ï¼ˆå¤§äºç­‰äºé…ç½®çš„æ—¥å¿—çº§åˆ«çš„æ—¥å¿—æ‰ä¼šè¾“å‡ºï¼‰</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- æ—¥å¿—è¾“å‡ºçº§åˆ« --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¾“å‡ºåˆ°æ§åˆ¶å°--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span> /&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--è¾“å‡ºåˆ°æ–‡ä»¶--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="6-5æ¡ˆä¾‹æ—¥å¿—è®°å½•">6.5æ¡ˆä¾‹æ—¥å¿—è®°å½•</h3>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * éƒ¨é—¨ç®¡ç†æ§åˆ¶å™¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@Slf4j</span><br><span class="line">@RequestMapping(&quot;/depts&quot;)</span><br><span class="line">@RestController</span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> DeptController &#123;</span><br><span class="line"></span><br><span class="line">    @Autowired</span><br><span class="line">    private DeptService deptService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    //@RequestMapping(<span class="keyword">value</span> = &quot;/depts&quot;, <span class="keyword">method</span> = RequestMethod.<span class="keyword">GET</span>)</span><br><span class="line">    @GetMapping</span><br><span class="line">    <span class="built_in">public</span> Result list()&#123;</span><br><span class="line">        //<span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨&quot;);</span><br><span class="line">        <span class="keyword">log</span>.<span class="keyword">info</span>(&quot;æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨&quot;);</span><br><span class="line">        List&lt;Dept&gt; deptList = deptService.findAll();</span><br><span class="line">        <span class="keyword">return</span> Result.success(deptList);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®idåˆ é™¤éƒ¨é—¨ - delete http://localhost:8080/depts?id=1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @DeleteMapping</span><br><span class="line">    <span class="built_in">public</span> Result <span class="keyword">delete</span>(<span class="type">Integer</span> id)&#123;</span><br><span class="line">        //<span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;æ ¹æ®idåˆ é™¤éƒ¨é—¨, id=&quot; + id);</span><br><span class="line">        <span class="keyword">log</span>.<span class="keyword">info</span>(&quot;æ ¹æ®idåˆ é™¤éƒ¨é—¨, id: &#123;&#125;&quot; , id);</span><br><span class="line">        deptService.deleteById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ–°å¢éƒ¨é—¨ - POST http://localhost:8080/depts   è¯·æ±‚å‚æ•°ï¼š&#123;&quot;name&quot;:&quot;ç ”å‘éƒ¨&quot;&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @PostMapping</span><br><span class="line">    <span class="built_in">public</span> Result save(@RequestBody Dept dept)&#123;</span><br><span class="line">        //<span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;æ–°å¢éƒ¨é—¨, dept=&quot; + dept);</span><br><span class="line">        <span class="keyword">log</span>.<span class="keyword">info</span>(&quot;æ–°å¢éƒ¨é—¨, dept: &#123;&#125;&quot; , dept);</span><br><span class="line">        deptService.save(dept);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®IDæŸ¥è¯¢ - GET http://localhost:8080/depts/1</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @GetMapping(&quot;/&#123;id&#125;&quot;)</span><br><span class="line">    <span class="built_in">public</span> Result getById(@PathVariable <span class="type">Integer</span> id)&#123;</span><br><span class="line">        //<span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;æ ¹æ®IDæŸ¥è¯¢, id=&quot; + id);</span><br><span class="line">        <span class="keyword">log</span>.<span class="keyword">info</span>(&quot;æ ¹æ®IDæŸ¥è¯¢, id: &#123;&#125;&quot; , id);</span><br><span class="line">        Dept dept = deptService.getById(id);</span><br><span class="line">        <span class="keyword">return</span> Result.success(dept);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¿®æ”¹éƒ¨é—¨ - PUT http://localhost:8080/depts  è¯·æ±‚å‚æ•°ï¼š&#123;&quot;id&quot;:1,&quot;name&quot;:&quot;ç ”å‘éƒ¨&quot;&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    @PutMapping</span><br><span class="line">    <span class="built_in">public</span> Result <span class="keyword">update</span>(@RequestBody Dept dept)&#123;</span><br><span class="line">        //<span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;ä¿®æ”¹éƒ¨é—¨, dept=&quot; + dept);</span><br><span class="line">        <span class="keyword">log</span>.<span class="keyword">info</span>(&quot;ä¿®æ”¹éƒ¨é—¨, dept: &#123;&#125;&quot; , dept);</span><br><span class="line">        deptService.<span class="keyword">update</span>(dept);</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>lombokä¸­æä¾›çš„@Slf4jæ³¨è§£ï¼Œå¯ä»¥ç®€åŒ–å®šä¹‰æ—¥å¿—è®°å½•å™¨è¿™æ­¥æ“ä½œã€‚æ·»åŠ äº†è¯¥æ³¨è§£ï¼Œå°±ç›¸å½“äºåœ¨ç±»ä¸­å®šä¹‰äº†æ—¥å¿—è®°å½•å™¨ï¼Œå°±ä¸‹é¢è¿™å¥ä»£ç ï¼š</p>
<figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private static Logger <span class="keyword">log</span> = LoggerFactory. getLogger(Xxx. <span class="class"><span class="keyword">class</span>)</span>;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼šè¯·æŒ‡å®šç¨³å®šçš„lombokï¼Œå› ä¸ºæœ€è¿‘jdkå¯èƒ½ä¼šå‡ºç°å…¼å®¹é—®é¢˜ï¼Œé€šè¿‡æŒ‡å®šç‰ˆæœ¬ 1.18.30é˜²æ­¢æŠ¥é”™</p>
<h1 id="â€“å‘˜å·¥ç®¡ç†æ¨¡å—">â€“å‘˜å·¥ç®¡ç†æ¨¡å—</h1>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-304.png" alt="img"></p>
<p>ä»é¡µé¢åŸå‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œåœ¨æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯çš„æ—¶å€™ï¼Œé™¤äº†è¦å±•ç¤º å§“åã€æ€§åˆ«ã€å¤´åƒã€èŒä½ã€å…¥èŒæ—¥æœŸã€æœ€åæ“ä½œæ—¶é—´è¿™äº›å‘˜å·¥ä¿¡æ¯å¤–ï¼Œè¿˜è¦å±•ç¤ºå‡ºæ‰€å±éƒ¨é—¨ï¼Œé‚£æ­¤æ—¶å°±éœ€è¦ä»ä¸¤å¼ è¡¨ä¸­æŸ¥è¯¢æ•°æ®ï¼Œä¸€å¼ æ˜¯éƒ¨é—¨è¡¨ï¼Œä¸€å¼ æ˜¯å‘˜å·¥è¡¨ï¼Œæ­¤æ—¶å°±ä¼šæ¶‰åŠåˆ°å¤šè¡¨æ“ä½œã€‚ï¼ˆå…·ä½“è§mysqlå†…å®¹ï¼Œè¿™é‡Œä¸èŠ±æ—¶é—´é˜è¿°ï¼‰</p>
<h2 id="1-å‘˜å·¥åˆ—è¡¨æŸ¥è¯¢">1.å‘˜å·¥åˆ—è¡¨æŸ¥è¯¢</h2>
<p>é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¦æ¥å®Œæˆçš„æ˜¯å‘˜å·¥åˆ—è¡¨çš„æŸ¥è¯¢åŠŸèƒ½å®ç°ã€‚ å…·ä½“çš„éœ€æ±‚å¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-329-1024x565.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-309-1024x721.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-310-1024x1007.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-311-1024x878.png" alt="img"></p>
<p>åœ¨æŸ¥è¯¢å‘˜å·¥åˆ—è¡¨æ•°æ®æ—¶ï¼Œæ—¢éœ€è¦æŸ¥è¯¢ å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯ï¼Œè¿˜éœ€è¦æŸ¥è¯¢å‘˜å·¥æ‰€å±çš„éƒ¨é—¨åç§°ï¼Œæ‰€ä»¥è¿™é‡Œï¼Œä¼šæ¶‰åŠåˆ°å¤šè¡¨æŸ¥è¯¢çš„æ“ä½œã€‚</p>
<p>è€Œä¸”ï¼Œåœ¨æŸ¥è¯¢å‘˜å·¥åˆ—è¡¨æ•°æ®æ—¶ï¼Œæ—¢è¦è€ƒè™‘æœç´¢æ ä¸­çš„æŸ¥è¯¢æ¡ä»¶ï¼Œè¿˜è¦è€ƒè™‘å¯¹æŸ¥è¯¢çš„ç»“æœè¿›è¡Œåˆ†é¡µå¤„ç†ã€‚</p>
<p>é‚£ä¹ˆæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨å®ç°è¿™ä¸ªåŠŸèƒ½æ—¶ï¼Œå°†ä¼šåˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†æ¥é€ä¸€å®ç°ï¼š</p>
<ul>
<li>å‡†å¤‡å·¥ä½œ</li>
<li>åˆ†é¡µæŸ¥è¯¢</li>
<li>æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</li>
</ul>
<h3 id="1-1å‡†å¤‡å·¥ä½œ">1.1å‡†å¤‡å·¥ä½œ</h3>
<p>éœ€æ±‚ï¼šæŸ¥è¯¢æ‰€æœ‰å‘˜å·¥ä¿¡æ¯ï¼Œå¹¶æŸ¥è¯¢å‡ºéƒ¨é—¨åç§°ã€‚ï¼ˆæ¶‰åŠåˆ°çš„è¡¨ï¼šempã€deptï¼‰</p>
<h4 id="1-1-1åŸºç¡€ä»£ç å‡†å¤‡">1.1.1åŸºç¡€ä»£ç å‡†å¤‡</h4>
<p><strong>1). åˆ›å»ºå‘˜å·¥ç®¡ç†ç›¸å…³è¡¨ç»“æ„</strong></p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">-</span><span class="punctuation">-</span> å‘˜å·¥è¡¨</span><br><span class="line">create table emp<span class="punctuation">(</span></span><br><span class="line">    id int unsigned primary key auto_increment comment &#x27;ID,ä¸»é”®&#x27;<span class="punctuation">,</span></span><br><span class="line">    username varchar<span class="punctuation">(</span><span class="number">20</span><span class="punctuation">)</span> not <span class="literal">null</span> unique comment &#x27;ç”¨æˆ·å&#x27;<span class="punctuation">,</span></span><br><span class="line">    password varchar<span class="punctuation">(</span><span class="number">50</span><span class="punctuation">)</span> default &#x27;<span class="number">123456</span>&#x27; comment &#x27;å¯†ç &#x27;<span class="punctuation">,</span></span><br><span class="line">    name varchar<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span> not <span class="literal">null</span> comment &#x27;å§“å&#x27;<span class="punctuation">,</span></span><br><span class="line">    gender tinyint unsigned not <span class="literal">null</span> comment &#x27;æ€§åˆ«, 1:ç”·, 2:å¥³&#x27;<span class="punctuation">,</span></span><br><span class="line">    phone char<span class="punctuation">(</span><span class="number">11</span><span class="punctuation">)</span> not <span class="literal">null</span> unique comment &#x27;æ‰‹æœºå·&#x27;<span class="punctuation">,</span></span><br><span class="line">    job tinyint unsigned comment &#x27;èŒä½, 1 ç­ä¸»ä»», 2 è®²å¸ˆ , 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ&#x27;<span class="punctuation">,</span></span><br><span class="line">    salary int unsigned comment &#x27;è–ªèµ„&#x27;<span class="punctuation">,</span></span><br><span class="line">    image varchar<span class="punctuation">(</span><span class="number">300</span><span class="punctuation">)</span> comment &#x27;å¤´åƒ&#x27;<span class="punctuation">,</span></span><br><span class="line">    entry_date date comment &#x27;å…¥èŒæ—¥æœŸ&#x27;<span class="punctuation">,</span></span><br><span class="line">    dept_id int unsigned comment &#x27;éƒ¨é—¨ID&#x27;<span class="punctuation">,</span></span><br><span class="line">    create_time datetime comment &#x27;åˆ›å»ºæ—¶é—´&#x27;<span class="punctuation">,</span></span><br><span class="line">    update_time datetime comment &#x27;ä¿®æ”¹æ—¶é—´&#x27;</span><br><span class="line"><span class="punctuation">)</span> comment &#x27;å‘˜å·¥è¡¨&#x27;<span class="punctuation">;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT INTO emp VALUES </span><br><span class="line">    <span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span>&#x27;shinaian&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æ–½è€åºµ&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909000</span>1&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">15000</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2000-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-11-16</span> 16:11:26&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span>&#x27;songjiang&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;å®‹æ±Ÿ&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909000</span>2&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">8600</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2015-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:37&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span>&#x27;lujunyi&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;å¢ä¿Šä¹‰&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909000</span>3&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">8900</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2008-05-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:39&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">4</span><span class="punctuation">,</span>&#x27;wuyong&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;å´ç”¨&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909000</span>4&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">9200</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2007-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:41&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span>&#x27;gongsunsheng&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;å…¬å­™èƒœ&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909000</span>5&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">9500</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2012-12-05</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:43&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">6</span><span class="punctuation">,</span>&#x27;huosanniang&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æ‰ˆä¸‰å¨˜&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">1330909000</span>6&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">6500</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2013-09-05</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:45&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">7</span><span class="punctuation">,</span>&#x27;chaijin&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æŸ´è¿›&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909000</span>7&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">4700</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2005-08-01</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:47&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">8</span><span class="punctuation">,</span>&#x27;likui&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æé€µ&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909000</span>8&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">4800</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2014-11-09</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:49&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">9</span><span class="punctuation">,</span>&#x27;wusong&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æ­¦æ¾&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909000</span>9&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">4900</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2011-03-11</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:51&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span>&#x27;linchong&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æ—å†²&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909001</span>0&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">5000</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2013-09-05</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:53&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">11</span><span class="punctuation">,</span>&#x27;huyanzhuo&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;å‘¼å»¶ç¼&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909001</span>1&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">9700</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2007-02-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:55&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">12</span><span class="punctuation">,</span>&#x27;xiaoliguang&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;å°æå¹¿&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909001</span>2&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">10000</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2008-08-18</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:57&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">13</span><span class="punctuation">,</span>&#x27;yangzhi&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æ¨å¿—&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909001</span>3&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">5300</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2012-11-01</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:59&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">14</span><span class="punctuation">,</span>&#x27;shijin&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;å²è¿›&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909001</span>4&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">10600</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2002-08-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:01&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">15</span><span class="punctuation">,</span>&#x27;sunerniang&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;å­™äºŒå¨˜&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">1330909001</span>5&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">10900</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2011-05-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:03&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">16</span><span class="punctuation">,</span>&#x27;luzhishen&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;é²æ™ºæ·±&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909001</span>6&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">9600</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2010-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:05&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">17</span><span class="punctuation">,</span>&#x27;liying&#x27;<span class="punctuation">,</span>&#x27;<span class="number">12345678</span>&#x27;<span class="punctuation">,</span>&#x27;æåº”&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909001</span>7&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">5800</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2015-03-21</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:07&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">18</span><span class="punctuation">,</span>&#x27;shiqian&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æ—¶è¿&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909001</span>8&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">10200</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2015-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:09&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">19</span><span class="punctuation">,</span>&#x27;gudasao&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;é¡¾å¤§å«‚&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">1330909001</span>9&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">10500</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2008-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:11&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">20</span><span class="punctuation">,</span>&#x27;ruanxiaoer&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;é˜®å°äºŒ&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909002</span>0&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">10800</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2018-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:13&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">21</span><span class="punctuation">,</span>&#x27;ruanxiaowu&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;é˜®å°äº”&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909002</span>1&#x27;<span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">5200</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2015-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:15&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">22</span><span class="punctuation">,</span>&#x27;ruanxiaoqi&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;é˜®å°ä¸ƒ&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909002</span>2&#x27;<span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">5500</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2016-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:17&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">23</span><span class="punctuation">,</span>&#x27;ruanji&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;é˜®ç±&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909002</span>3&#x27;<span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">5800</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2012-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">24</span><span class="punctuation">,</span>&#x27;tongwei&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;ç«¥å¨&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909002</span>4&#x27;<span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">5000</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2006-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:21&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">25</span><span class="punctuation">,</span>&#x27;tongmeng&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;ç«¥çŒ›&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909002</span>5&#x27;<span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">4800</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2002-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:23&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">26</span><span class="punctuation">,</span>&#x27;yanshun&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;ç‡•é¡º&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909002</span>6&#x27;<span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">5400</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2011-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-11-08</span> 22:12:46&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">27</span><span class="punctuation">,</span>&#x27;lijun&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æä¿Š&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909002</span>7&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">6600</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2004-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-11-16</span> 17:56:59&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">28</span><span class="punctuation">,</span>&#x27;lizhong&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æå¿ &#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909002</span>8&#x27;<span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">5000</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2007-01-01</span>&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-11-17</span> 16:34:22&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">30</span><span class="punctuation">,</span>&#x27;liyun&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;æäº‘&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909003</span>0&#x27;<span class="punctuation">,</span><span class="literal">NULL</span><span class="punctuation">,</span><span class="literal">NULL</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2020-03-01</span>&#x27;<span class="punctuation">,</span><span class="literal">NULL</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:35:33&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 16:36:31&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">36</span><span class="punctuation">,</span>&#x27;linghuchong&#x27;<span class="punctuation">,</span>&#x27;<span class="number">123456</span>&#x27;<span class="punctuation">,</span>&#x27;ä»¤ç‹å†²&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880909121</span>2&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">6800</span><span class="punctuation">,</span>&#x27;https://web-framework.oss-cn-hangzhou.aliyuncs.com/<span class="number">2023</span>/1.jpg&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-10-19</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2023-10-20</span> 20:44:54&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2023-11-09</span> 09:41:04&#x27;<span class="punctuation">)</span><span class="punctuation">;</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="punctuation">-</span><span class="punctuation">-</span> å‘˜å·¥å·¥ä½œç»å†ä¿¡æ¯</span><br><span class="line">create table emp_expr<span class="punctuation">(</span></span><br><span class="line">    id int unsigned primary key auto_increment comment &#x27;ID, ä¸»é”®&#x27;<span class="punctuation">,</span></span><br><span class="line">    emp_id int unsigned comment &#x27;å‘˜å·¥ID&#x27;<span class="punctuation">,</span></span><br><span class="line">    begin date comment &#x27;å¼€å§‹æ—¶é—´&#x27;<span class="punctuation">,</span></span><br><span class="line">    end  date comment &#x27;ç»“æŸæ—¶é—´&#x27;<span class="punctuation">,</span></span><br><span class="line">    company varchar<span class="punctuation">(</span><span class="number">50</span><span class="punctuation">)</span> comment &#x27;å…¬å¸åç§°&#x27;<span class="punctuation">,</span></span><br><span class="line">    job varchar<span class="punctuation">(</span><span class="number">50</span><span class="punctuation">)</span> comment &#x27;èŒä½&#x27;</span><br><span class="line"><span class="punctuation">)</span>comment &#x27;å·¥ä½œç»å†&#x27;<span class="punctuation">;</span></span><br></pre></td></tr></table></figure>
<p><strong>2). å‡†å¤‡empè¡¨å¯¹åº”çš„å®ä½“ç±»Empã€EmpExpr</strong></p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">package com.itheima.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.<span class="built_in">Data</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.<span class="built_in">List</span>;</span><br><span class="line"></span><br><span class="line">@<span class="built_in">Data</span></span><br><span class="line"><span class="keyword">public</span> class Emp &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> id; <span class="comment">//ID,ä¸»é”®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> username; <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> password; <span class="comment">//å¯†ç </span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> name; <span class="comment">//å§“å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> gender; <span class="comment">//æ€§åˆ«, 1:ç”·, 2:å¥³</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> phone; <span class="comment">//æ‰‹æœºå·</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> job; <span class="comment">//èŒä½, 1:ç­ä¸»ä»»,2:è®²å¸ˆ,3:å­¦å·¥ä¸»ç®¡,4:æ•™ç ”ä¸»ç®¡,5:å’¨è¯¢å¸ˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> salary; <span class="comment">//è–ªèµ„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> image; <span class="comment">//å¤´åƒ</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate entryDate; <span class="comment">//å…¥èŒæ—¥æœŸ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> deptId; <span class="comment">//å…³è”çš„éƒ¨é—¨ID</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime; <span class="comment">//åˆ›å»ºæ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime; <span class="comment">//ä¿®æ”¹æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°è£…éƒ¨é—¨åç§°æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> deptName; <span class="comment">//éƒ¨é—¨åç§°</span></span><br><span class="line">&#125;</span><br><span class="line">package com.itheima.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.<span class="built_in">Data</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å·¥ä½œç»å†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@<span class="built_in">Data</span></span><br><span class="line"><span class="keyword">public</span> class EmpExpr &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> id; <span class="comment">//ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> empId; <span class="comment">//å‘˜å·¥ID</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate begin; <span class="comment">//å¼€å§‹æ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate end; <span class="comment">//ç»“æŸæ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> company; <span class="comment">//å…¬å¸åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> job; <span class="comment">//èŒä½</span></span><br><span class="line">&#125;</span><br><span class="line">package com.itheima.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.<span class="built_in">Data</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * å·¥ä½œç»å†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@<span class="built_in">Data</span></span><br><span class="line"><span class="keyword">public</span> class EmpExpr &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> id; <span class="comment">//ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> empId; <span class="comment">//å‘˜å·¥ID</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate begin; <span class="comment">//å¼€å§‹æ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate end; <span class="comment">//ç»“æŸæ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> company; <span class="comment">//å…¬å¸åç§°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> job; <span class="comment">//èŒä½</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3). å‡†å¤‡Empå‘˜å·¥ç®¡ç†çš„åŸºç¡€ç»“æ„ï¼ŒåŒ…æ‹¬****Controllerã€Serviceã€Mapper</strong></p>
<p>EmpMapperï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.pojo.Emp;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>EmpService:</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">interface</span> <span class="title">EmpService</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>EmpServiceImpl:</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service.impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.mapper.EmpMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.service.EmpService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** * å‘˜å·¥ç®¡ç† */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">class</span> <span class="title">EmpServiceImpl</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">EmpService</span></span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmpMapper empMapper;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>EmpController:</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.service.EmpService;</span><br><span class="line"><span class="keyword">import</span> lombok.<span class="keyword">extern</span>.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** * å‘˜å·¥ç®¡ç† */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">class</span> <span class="title">EmpController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmpService empService;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-1-2SQL-Mapperæ¥å£">1.1.2SQL&amp;Mapperæ¥å£</h4>
<p><strong>1). å¯¹åº”çš„SQLè¯­å¥</strong></p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥ä¿¡æ¯ï¼Œå¦‚æœå‘˜å·¥å…³è”äº†éƒ¨é—¨ï¼Œä¹Ÿè¦æŸ¥è¯¢å‡ºéƒ¨é—¨åç§°</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.*, d.name <span class="keyword">as</span> dept_name <span class="keyword">from</span> emp <span class="built_in">e</span> <span class="keyword">left</span> <span class="keyword">join</span> dept d <span class="keyword">on</span> <span class="built_in">e</span>.dept_id = d.id;</span><br></pre></td></tr></table></figure>
<p><strong>2). Mapperæ¥å£æ–¹æ³•å®šä¹‰</strong></p>
<p>é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å®šä¹‰ä¸€ä¸ªå‘˜å·¥ç®¡ç†çš„mapperæ¥å£ <code>EmpMapper</code> å¹¶åœ¨å…¶ä¸­å®Œæˆå‘˜å·¥ä¿¡æ¯çš„æŸ¥è¯¢ã€‚ å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">interface</span> <span class="title">EmpMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥åŠå…¶å¯¹åº”çš„éƒ¨é—¨åç§°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Select</span>(<span class="string">&quot;select e.*, d.name as deptName from emp e left join dept d on e.dept_id = d.id&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> List&lt;Emp&gt; list();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼Œä¸Šè¿°SQLè¯­å¥ä¸­ï¼Œç»™ éƒ¨é—¨åç§°èµ·äº†åˆ«å <code>deptName</code> ï¼Œæ˜¯å› ä¸ºåœ¨æ¥å£æ–‡æ¡£ä¸­ï¼Œè¦æ±‚éƒ¨é—¨åç§°ç»™å‰ç«¯è¿”å›çš„æ•°æ®ä¸­ï¼Œå°±å¿…é¡»å« <code>deptName</code>ã€‚ è€Œè¿™é‡Œæˆ‘ä»¬éœ€è¦å°†æŸ¥è¯¢è¿”å›çš„æ¯ä¸€æ¡è®°å½•éƒ½å°è£…åˆ°Empå¯¹è±¡ä¸­ï¼Œé‚£ä¹ˆå°±å¿…é¡»ä¿è¯æŸ¥è¯¢è¿”å›çš„å­—æ®µåä¸å±æ€§åæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚</p>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨Empä¸­å®šä¹‰ä¸€ä¸ªå±æ€§ <code>deptName</code> ç”¨æ¥å°è£…éƒ¨é—¨åç§°ã€‚ å…·ä½“å¦‚ä¸‹ï¼š</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">Data</span></span><br><span class="line"><span class="keyword">public</span> class Emp &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> id; <span class="comment">//ID,ä¸»é”®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> username; <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> password; <span class="comment">//å¯†ç </span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> name; <span class="comment">//å§“å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> gender; <span class="comment">//æ€§åˆ«, 1:ç”·, 2:å¥³</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> phone; <span class="comment">//æ‰‹æœºå·</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> job; <span class="comment">//èŒä½, 1:ç­ä¸»ä»»,2:è®²å¸ˆ,3:å­¦å·¥ä¸»ç®¡,4:æ•™ç ”ä¸»ç®¡,5:å’¨è¯¢å¸ˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> salary; <span class="comment">//è–ªèµ„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> image; <span class="comment">//å¤´åƒ</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate entryDate; <span class="comment">//å…¥èŒæ—¥æœŸ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> deptId; <span class="comment">//å…³è”çš„éƒ¨é—¨ID</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime; <span class="comment">//åˆ›å»ºæ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime; <span class="comment">//ä¿®æ”¹æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°è£…éƒ¨é—¨åç§°æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> deptName; <span class="comment">//éƒ¨é—¨åç§°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç ç¼–å†™å®Œæ¯•åï¼Œæˆ‘ä»¬å¯ä»¥ç¼–å†™ä¸€ä¸ªå•å…ƒæµ‹è¯•ï¼Œå¯¹ä¸Šè¿°çš„ç¨‹åºè¿›è¡Œæµ‹è¯•ï¼š</p>
<h3 id="1-2åˆ†é¡µæŸ¥è¯¢">1.2åˆ†é¡µæŸ¥è¯¢</h3>
<p>æ¯æ¬¡åªå±•ç¤ºä¸€é¡µçš„æ•°æ®ï¼Œæ¯”å¦‚ï¼šä¸€é¡µå±•ç¤º10æ¡æ•°æ®ï¼Œå¦‚æœè¿˜æƒ³çœ‹å…¶ä»–çš„æ•°æ®ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»é¡µç è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<p>è€Œåœ¨å‘˜å·¥ç®¡ç†çš„éœ€æ±‚ä¸­ï¼Œå°±è¦æ±‚æˆ‘ä»¬è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼Œå±•ç¤ºå‡ºå¯¹åº”çš„æ•°æ®ã€‚ å…·ä½“çš„é¡µé¢åŸå‹å¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-338-1024x432.png" alt="img"></p>
<p>è¦æƒ³ä»æ•°æ®åº“ä¸­è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨<code>LIMIT</code>å…³é”®å­—ï¼Œæ ¼å¼ä¸ºï¼šlimit å¼€å§‹ç´¢å¼• æ¯é¡µæ˜¾ç¤ºçš„æ¡æ•°ã€‚</p>
<p>æŸ¥è¯¢ç¬¬1,2,3é¡µæ•°æ®çš„SQLè¯­å¥æ˜¯ï¼š</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp  <span class="keyword">limit</span> <span class="number">0</span>,<span class="number">10</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp  <span class="keyword">limit</span> <span class="number">10</span>,<span class="number">10</span>;</span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp  <span class="keyword">limit</span> <span class="number">20</span>,<span class="number">10</span>;</span><br></pre></td></tr></table></figure>
<p>è§‚å¯Ÿä»¥ä¸ŠSQLè¯­å¥ï¼Œå‘ç°ï¼š å¼€å§‹ç´¢å¼•ä¸€ç›´åœ¨æ”¹å˜ ï¼Œ æ¯é¡µæ˜¾ç¤ºæ¡æ•°æ˜¯å›ºå®šçš„</p>
<p><strong>å¼€å§‹ç´¢å¼•çš„è®¡ç®—å…¬å¼ï¼š <code>å¼€å§‹ç´¢å¼• = (å½“å‰é¡µç  - 1) \* æ¯é¡µæ˜¾ç¤ºæ¡æ•°</code></strong></p>
<p>æˆ‘ä»¬ç»§ç»­åŸºäºé¡µé¢åŸå‹ï¼Œç»§ç»­åˆ†æï¼Œå¾—å‡ºä»¥ä¸‹ç»“è®ºï¼š</p>
<ol>
<li>å‰ç«¯åœ¨è¯·æ±‚æœåŠ¡ç«¯æ—¶ï¼Œä¼ é€’çš„å‚æ•°
<ol>
<li>å½“å‰é¡µç  page</li>
<li>æ¯é¡µæ˜¾ç¤ºæ¡æ•° pageSize</li>
</ol>
</li>
<li>åç«¯éœ€è¦å“åº”ä»€ä¹ˆæ•°æ®ç»™å‰ç«¯
<ol>
<li>æ‰€æŸ¥è¯¢åˆ°çš„æ•°æ®åˆ—è¡¨ï¼ˆå­˜å‚¨åˆ°List é›†åˆä¸­ï¼‰</li>
<li>æ€»è®°å½•æ•°</li>
</ol>
</li>
</ol>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-312-1024x407.png" alt="img"></p>
<p>åå°ç»™å‰ç«¯è¿”å›çš„æ•°æ®åŒ…å«ï¼šListé›†åˆ(æ•°æ®åˆ—è¡¨)ã€total(æ€»è®°å½•æ•°)</p>
<p>è€Œè¿™ä¸¤éƒ¨åˆ†æˆ‘ä»¬é€šå¸¸å°è£…åˆ°PageResultå¯¹è±¡ä¸­ï¼Œå¹¶å°†è¯¥å¯¹è±¡è½¬æ¢ä¸ºjsonæ ¼å¼çš„æ•°æ®å“åº”å›ç»™æµè§ˆå™¨ã€‚</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Data</span></span><br><span class="line"><span class="variable">@NoArgsConstructor</span></span><br><span class="line"><span class="variable">@AllArgsConstructor</span></span><br><span class="line">public class PageResult &#123;</span><br><span class="line">        <span class="selector-tag">private</span> <span class="selector-tag">Long</span> <span class="selector-tag">total</span>; <span class="comment">//æ€»è®°å½•æ•°</span></span><br><span class="line">        <span class="selector-tag">private</span> <span class="selector-tag">List</span> <span class="selector-tag">rows</span>; <span class="comment">//å½“å‰é¡µæ•°æ®åˆ—è¡¨</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¤§å®¶ä¼šå‘ç°ï¼šåˆ†é¡µæŸ¥è¯¢åŠŸèƒ½ç¼–å†™èµ·æ¥æ¯”è¾ƒç¹çã€‚ è€Œåˆ†é¡µæŸ¥è¯¢çš„åŠŸèƒ½æ˜¯éå¸¸å¸¸è§çš„ï¼Œåˆ†é¡µæŸ¥è¯¢çš„æ€è·¯ã€æ­¥éª¤æ˜¯æ¯”è¾ƒå›ºå®šçš„ã€‚ åœ¨Mapperæ¥å£ä¸­å®šä¹‰ä¸¤ä¸ªæ–¹æ³•æ‰§è¡Œä¸¤æ¡ä¸åŒçš„SQLè¯­å¥ï¼š</p>
<ol>
<li>æŸ¥è¯¢æ€»è®°å½•æ•°</li>
<li>æŒ‡å®šé¡µç çš„æ•°æ®åˆ—è¡¨</li>
</ol>
<p>åœ¨Serviceå½“ä¸­ï¼Œè°ƒç”¨Mapperæ¥å£çš„ä¸¤ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«è·å–ï¼šæ€»è®°å½•æ•°ã€æŸ¥è¯¢ç»“æœåˆ—è¡¨ï¼Œç„¶ååœ¨å°†è·å–çš„æ•°æ®ç»“æœå°è£…åˆ°PageBeanå¯¹è±¡ä¸­ã€‚</p>
<p>å¦‚æœåœ¨æœªæ¥å¼€å‘å…¶ä»–é¡¹ç›®ï¼Œåªè¦æ¶‰åŠåˆ°åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½(ä¾‹ï¼šè®¢å•ã€ç”¨æˆ·ã€æ”¯ä»˜ã€å•†å“)ï¼Œéƒ½å¿…é¡»æŒ‰ç…§ä»¥ä¸Šæ“ä½œå®ŒæˆåŠŸèƒ½å¼€å‘</p>
<p>ç»“è®ºï¼šåŸå§‹æ–¹å¼çš„åˆ†é¡µæŸ¥è¯¢ï¼Œå­˜åœ¨ç€&quot;æ­¥éª¤å›ºå®š&quot;ã€&quot;ä»£ç é¢‘ç¹&quot;çš„é—®é¢˜</p>
<p>è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥ä½¿ç”¨ä¸€äº›ç°æˆçš„åˆ†é¡µæ’ä»¶å®Œæˆã€‚å¯¹äºMybatisæ¥è®²ç°åœ¨æœ€ä¸»æµçš„å°±æ˜¯PageHelperã€‚</p>
<h3 id="1-3PageHelperåˆ†é¡µæ’ä»¶">1.3PageHelperåˆ†é¡µæ’ä»¶</h3>
<h4 id="1-3-1ä»‹ç»">1.3.1ä»‹ç»</h4>
<p><strong>PageHelperæ˜¯ç¬¬ä¸‰æ–¹æä¾›çš„Mybatisæ¡†æ¶ä¸­çš„ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§ã€æ–¹ä¾¿æ˜“ç”¨çš„åˆ†é¡µæ’ä»¶ï¼Œæ”¯æŒä»»ä½•å½¢å¼çš„å•æ ‡ã€å¤šè¡¨çš„åˆ†é¡µæŸ¥è¯¢ã€‚</strong></p>
<p>å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://pagehelper.github.io/">https://pagehelper.github.io/</a></p>
<p>é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹æ¯”ä¸€ä¸‹ï¼Œä½¿ç”¨PageHelperåˆ†é¡µæ’ä»¶è¿›è¡Œåˆ†é¡µ ä¸ åŸå§‹æ–¹å¼è¿›è¡Œåˆ†é¡µä»£ç å®ç°çš„ä¸Šçš„å·®åˆ«ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-313-1024x466.png" alt="img"></p>
<ul>
<li>Mapperæ¥å£å±‚ï¼š
<ul>
<li>åŸå§‹çš„åˆ†é¡µæŸ¥è¯¢åŠŸèƒ½ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨Mapperæ¥å£ä¸­å®šä¹‰ä¸¤æ¡SQLè¯­å¥ã€‚</li>
<li>PageHelperå®ç°åˆ†é¡µæŸ¥è¯¢ä¹‹åï¼Œåªéœ€è¦ç¼–å†™ä¸€æ¡SQLè¯­å¥ï¼Œè€Œä¸”ä¸éœ€è¦è€ƒè™‘åˆ†é¡µæ“ä½œï¼Œå°±æ˜¯ä¸€æ¡æ­£å¸¸çš„æŸ¥è¯¢è¯­å¥ã€‚</li>
</ul>
</li>
<li>Serviceå±‚ï¼š
<ul>
<li>éœ€è¦æ ¹æ®é¡µç ã€æ¯é¡µå±•ç¤ºè®°å½•æ•°ï¼Œæ‰‹åŠ¨çš„è®¡ç®—èµ·å§‹ç´¢å¼•ã€‚</li>
<li>æ— éœ€æ‰‹åŠ¨è®¡ç®—èµ·å§‹ç´¢å¼•ï¼Œç›´æ¥å‘Šè¯‰PageHelperéœ€è¦æŸ¥è¯¢é‚£ä¸€é¡µçš„æ•°æ®ï¼Œæ¯é¡µå±•ç¤ºå¤šå°‘æ¡è®°å½•å³å¯ã€‚</li>
</ul>
</li>
</ul>
<h4 id="1-3-2ä»£ç å®ç°">1.3.2ä»£ç å®ç°</h4>
<p>å½“ä½¿ç”¨äº†PageHelperåˆ†é¡µæ’ä»¶è¿›è¡Œåˆ†é¡µï¼Œå°±æ— éœ€å†Mapperä¸­è¿›è¡Œæ‰‹åŠ¨åˆ†é¡µäº†ã€‚ åœ¨Mapperä¸­æˆ‘ä»¬åªéœ€è¦è¿›è¡Œæ­£å¸¸çš„åˆ—è¡¨æŸ¥è¯¢å³å¯ã€‚åœ¨Serviceå±‚ä¸­ï¼Œè°ƒç”¨Mapperçš„æ–¹æ³•ä¹‹å‰è®¾ç½®åˆ†é¡µå‚æ•°ï¼Œåœ¨è°ƒç”¨Mapperæ–¹æ³•æ‰§è¡ŒæŸ¥è¯¢ä¹‹åï¼Œè§£æåˆ†é¡µç»“æœï¼Œå¹¶å°†ç»“æœå°è£…åˆ°PageResultå¯¹è±¡ä¸­è¿”å›ã€‚</p>
<p>1). åœ¨pom.xmlå¼•å…¥ä¾èµ–</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--åˆ†é¡µæ’ä»¶PageHelper--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.4.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>2). EmpMapper</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥åŠå…¶å¯¹åº”çš„éƒ¨é—¨åç§°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@Select(<span class="string">&quot;select e.*, d.name deptName from emp as e left join dept as d on e.dept_id = d.id&quot;</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Emp&gt; <span class="title">list</span>()</span>;</span><br></pre></td></tr></table></figure>
<p>3). EmpServiceImpl</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="type">PageResult</span> page(<span class="type">Integer</span> page, <span class="type">Integer</span> pageSize) &#123;</span><br><span class="line">    <span class="comment">//1. è®¾ç½®åˆ†é¡µå‚æ•°</span></span><br><span class="line">    <span class="type">PageHelper</span>.startPage(page,pageSize);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. æ‰§è¡ŒæŸ¥è¯¢</span></span><br><span class="line">    <span class="type">List</span>&lt;<span class="type">Emp</span>&gt; empList <span class="operator">=</span> empMapper.list();</span><br><span class="line">    <span class="type">Page</span>&lt;<span class="type">Emp</span>&gt; p <span class="operator">=</span> (<span class="type">Page</span>&lt;<span class="type">Emp</span>&gt;) empList;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. å°è£…ç»“æœ</span></span><br><span class="line">    <span class="keyword">return</span> new <span class="type">PageResult</span>(p.getTotal(), p.getResult());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="1-3-3pageHelperçš„å®ç°æœºåˆ¶">1.3.3pageHelperçš„å®ç°æœºåˆ¶</h4>
<p>æˆ‘ä»¬æ‰“å¼€Ideaçš„æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°åœ¨è¿›è¡Œåˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œè¾“å‡ºçš„SQLè¯­å¥ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-334-1024x214.png" alt="img"></p>
<p>æˆ‘ä»¬çœ‹åˆ°æ‰§è¡Œäº†ä¸¤æ¡SQLè¯­å¥ï¼Œè€Œè¿™ä¸¤æ¡SQLè¯­å¥ï¼Œå…¶å®æ˜¯ä»æˆ‘ä»¬åœ¨Mapperæ¥å£ä¸­å®šä¹‰çš„SQLæ¼”å˜è€Œæ¥çš„ã€‚</p>
<ul>
<li>ç¬¬ä¸€æ¡SQLè¯­å¥ï¼Œç”¨æ¥æŸ¥è¯¢æ€»è®°å½•æ•°ã€‚</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-336-1024x78.png" alt="img"></p>
<p>å…¶å®å°±æ˜¯å°†æˆ‘ä»¬ç¼–å†™çš„SQLè¯­å¥è¿›è¡Œçš„æ”¹é€ å¢å¼ºï¼Œå°†æŸ¥è¯¢è¿”å›çš„å­—æ®µåˆ—è¡¨æ›¿æ¢æˆäº† <code>count(0)</code> æ¥ç»Ÿè®¡æ€»è®°å½•æ•°ã€‚</p>
<ul>
<li>ç¬¬äºŒæ¡SQLè¯­å¥ï¼Œç”¨æ¥è¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼ŒæŸ¥è¯¢æŒ‡å®šé¡µç å¯¹åº” çš„æ•°æ®åˆ—è¡¨ã€‚</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-337-1024x86.png" alt="img"></p>
<p>å…¶å®å°±æ˜¯å°†æˆ‘ä»¬ç¼–å†™çš„SQLè¯­å¥è¿›è¡Œçš„æ”¹é€ å¢å¼ºï¼Œåœ¨SQLè¯­å¥ä¹‹åæ‹¼æ¥ä¸Šäº†limitè¿›è¡Œåˆ†é¡µæŸ¥è¯¢ï¼Œè€Œç”±äºæµ‹è¯•æ—¶æŸ¥è¯¢çš„æ˜¯ç¬¬ä¸€é¡µï¼Œèµ·å§‹ç´¢å¼•æ˜¯0ï¼Œæ‰€ä»¥ç®€å†™ä¸ºlimit ï¼Ÿã€‚</p>
<p>è€ŒPageHelperåœ¨è¿›è¡Œåˆ†é¡µæŸ¥è¯¢æ—¶ï¼Œä¼šæ‰§è¡Œä¸Šè¿°ä¸¤æ¡SQLè¯­å¥ï¼Œå¹¶å°†æŸ¥è¯¢åˆ°çš„æ€»è®°å½•æ•°ï¼Œä¸æ•°æ®åˆ—è¡¨å°è£…åˆ°äº† <code>Page&lt;Emp&gt;</code> å¯¹è±¡ä¸­ï¼Œæˆ‘ä»¬å†è·å–æŸ¥è¯¢ç»“æœæ—¶ï¼Œåªéœ€è¦è°ƒç”¨Pageå¯¹è±¡çš„æ–¹æ³•å°±å¯ä»¥è·å–ã€‚</p>
<p><strong>æ³¨æ„ï¼š</strong></p>
<ul>
<li>PageHelperå®ç°åˆ†é¡µæŸ¥è¯¢æ—¶ï¼ŒSQLè¯­å¥çš„ç»“å°¾ä¸€å®šä¸€å®šä¸€å®šä¸è¦åŠ åˆ†å·(;).ï¼Œå®¹æ˜“å‡ºç°æ‹¼æ¥é—®é¢˜</li>
<li>PageHelperåªä¼šå¯¹ç´§è·Ÿåœ¨å…¶åçš„ç¬¬ä¸€æ¡SQLè¯­å¥è¿›è¡Œåˆ†é¡µå¤„ç†ã€‚</li>
</ul>
<h3 id="1-4æ¡ä»¶åˆ†é¡µæŸ¥è¯¢">1.4æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</h3>
<p>å®Œäº†åˆ†é¡µæŸ¥è¯¢åï¼Œä¸‹é¢æˆ‘ä»¬éœ€è¦åœ¨åˆ†é¡µæŸ¥è¯¢çš„åŸºç¡€ä¸Šï¼Œæ·»åŠ æ¡ä»¶ã€‚</p>
<h4 id="1-4-1éœ€æ±‚">1.4.1éœ€æ±‚</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-317-1024x567.png" alt="img"></p>
<p>é€šè¿‡å‘˜å·¥ç®¡ç†çš„é¡µé¢åŸå‹æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‘˜å·¥åˆ—è¡¨é¡µé¢çš„æŸ¥è¯¢ï¼Œä¸ä»…ä»…éœ€è¦è€ƒè™‘åˆ†é¡µï¼Œè¿˜éœ€è¦è€ƒè™‘æŸ¥è¯¢æ¡ä»¶ã€‚ åˆ†é¡µæŸ¥è¯¢æˆ‘ä»¬å·²ç»å®ç°äº†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è€ƒè™‘åœ¨åˆ†é¡µæŸ¥è¯¢çš„åŸºç¡€ä¸Šï¼Œå†åŠ ä¸ŠæŸ¥è¯¢æ¡ä»¶ã€‚</p>
<p>æˆ‘ä»¬çœ‹åˆ°é¡µé¢åŸå‹åŠéœ€æ±‚ä¸­æè¿°ï¼Œæœç´¢æ çš„æœç´¢æ¡ä»¶æœ‰ä¸‰ä¸ªï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li>å§“åï¼šæ¨¡ç³ŠåŒ¹é…</li>
<li>æ€§åˆ«ï¼šç²¾ç¡®åŒ¹é…</li>
<li>å…¥èŒæ—¥æœŸï¼šèŒƒå›´åŒ¹é…</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-318-1024x729.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-319-1024x904.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-320.png" alt="img"></p>
<h4 id="1-4-2å®ç°æ€è·¯">1.4.2å®ç°æ€è·¯</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-321-1024x286.png" alt="img"></p>
<h4 id="1-4-3ä»£ç å®ç°">1.4.3ä»£ç å®ç°</h4>
<p>åœ¨åŸæœ‰åˆ†é¡µæŸ¥è¯¢çš„ä»£ç åŸºç¡€ä¸Šè¿›è¡Œæ”¹é€ ã€‚</p>
<p><strong>1). åœ¨EmpControlleræ–¹æ³•ä¸­é€šè¿‡å¤šä¸ªæ–¹æ³•å½¢å‚ï¼Œä¾æ¬¡æ¥æ”¶è¿™å‡ ä¸ªå‚æ•°</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(<span class="string">&quot;/emps&quot;</span>)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmpService empService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span></span><br><span class="line">    <span class="keyword">public</span> Result page(<span class="meta">@RequestParam(defaultValue = <span class="string">&quot;1&quot;</span>)</span> Integer page,</span><br><span class="line">                       <span class="meta">@RequestParam(defaultValue = <span class="string">&quot;10&quot;</span>)</span> Integer pageSize,</span><br><span class="line">                       String name, Integer gender,</span><br><span class="line">                       <span class="meta">@DateTimeFormat(pattern = <span class="string">&quot;yyyy-MM-dd&quot;</span>)</span> LocalDate begin,</span><br><span class="line">                       <span class="meta">@DateTimeFormat(pattern = <span class="string">&quot;yyyy-MM-dd&quot;</span>)</span> LocalDate end) &#123;</span><br><span class="line">        log.info(<span class="string">&quot;æŸ¥è¯¢è¯·æ±‚å‚æ•°ï¼š &#123;&#125;, &#123;&#125;, &#123;&#125;, &#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, page, pageSize, name, gender, begin, end);</span><br><span class="line">        PageResult pageResult = empService.page(page, pageSize);</span><br><span class="line">        <span class="keyword">return</span> Result.success(pageResult);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). ä¿®æ”¹EmpServiceåŠEmpServiceImplä¸­çš„ä»£ç é€»è¾‘</strong></p>
<p>EmpServiceï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> interface EmpService &#123;</span><br><span class="line">    <span class="comment">/**    </span></span><br><span class="line"><span class="comment">   * åˆ†é¡µæŸ¥è¯¢    </span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">PageResult page(<span class="type">Integer</span> page, <span class="type">Integer</span> pageSize, String <span class="type">name</span>, <span class="type">Integer</span> gender, LocalDate <span class="keyword">begin</span>, LocalDate <span class="keyword">end</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>EmpServiceImpl:</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** </span></span><br><span class="line"><span class="comment">* å‘˜å·¥ç®¡ç† </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">class</span> <span class="title">EmpServiceImpl</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">EmpService</span></span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmpMapper empMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> PageResult page(Integer page, Integer pageSize, <span class="keyword">String</span> name, Integer gender, LocalDate begin, LocalDate end) &#123;</span><br><span class="line">        <span class="comment">//1. è®¾ç½®PageHelperåˆ†é¡µå‚æ•°</span></span><br><span class="line">        PageHelper.startPage(page, pageSize);</span><br><span class="line">        <span class="comment">//2. æ‰§è¡ŒæŸ¥è¯¢</span></span><br><span class="line">        List&lt;Emp&gt; empList = empMapper.list(name, gender, begin, end);</span><br><span class="line">        <span class="comment">//3. å°è£…åˆ†é¡µç»“æœ</span></span><br><span class="line">        Page&lt;Emp&gt; p = (Page&lt;Emp&gt;) empList;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span><span class="type"></span> PageResult(p.getTotal(), p.getResult());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3). è°ƒæ•´EmpMapperæ¥å£æ–¹æ³•</strong></p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line"><span class="keyword">public</span> interface EmpMapper &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**     </span></span><br><span class="line"><span class="comment">    * æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥åŠå…¶å¯¹åº”çš„éƒ¨é—¨åç§°    </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;Emp&gt; <span class="title">list</span><span class="params">(<span class="type">String</span> name, Integer gender, LocalDate begin, LocalDate end)</span></span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±äºSQLè¯­å¥æ¯”è¾ƒå¤æ‚ï¼Œå»ºè®®å°†SQLè¯­å¥é…ç½®åœ¨XMLæ˜ å°„æ–‡ä»¶ä¸­ã€‚</p>
<p><strong>4). æ–°å¢Mapperæ˜ å°„æ–‡ä»¶</strong>**<code>EmpMapper.xml</code>**</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!--å®šä¹‰Mapperæ˜ å°„æ–‡ä»¶çš„çº¦æŸå’ŒåŸºæœ¬ç»“æ„--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span></span><br><span class="line"><span class="meta"><span class="language-xml">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span></span><br><span class="line"><span class="meta"><span class="language-xml">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.EmpMapper&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.pojo.Emp&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        select e.*, d.name deptName from emp as e left join dept as d on e.dept_id = d.id</span></span><br><span class="line"><span class="language-xml">        where e.name like concat(&#x27;%&#x27;,#</span><span class="template-variable">&#123;name&#125;</span><span class="language-xml">,&#x27;%&#x27;)</span></span><br><span class="line"><span class="language-xml">          and e.gender = #</span><span class="template-variable">&#123;gender&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">          and e.entry_date between #</span><span class="template-variable">&#123;begin&#125;</span><span class="language-xml"> and #</span><span class="template-variable">&#123;end&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h4 id="1-4-4ç¨‹åºä¼˜åŒ–1ï¼ˆè¯·æ±‚å‚æ•°å°è£…å®ä½“ç±»ç®€åŒ–ä»£ç ï¼‰">1.4.4ç¨‹åºä¼˜åŒ–1ï¼ˆè¯·æ±‚å‚æ•°å°è£…å®ä½“ç±»ç®€åŒ–ä»£ç ï¼‰</h4>
<p>åœ¨ä¸Šè¿°åˆ†é¡µæ¡ä»¶æŸ¥è¯¢ä¸­ï¼Œè¯·æ±‚å‚æ•°æ¯”è¾ƒå¤šï¼Œæœ‰6ä¸ªï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<ul>
<li>è¯·æ±‚å‚æ•°ï¼š/emps?name=å¼ &amp;gender=1&amp;begin=2007-09-01&amp;end=2022-09-01&amp;page=1&amp;pageSize=10</li>
</ul>
<p>é‚£æˆ‘ä»¬åœ¨controllerå±‚æ–¹æ³•ä¸­ï¼Œæ¥æ”¶è¯·æ±‚å‚æ•°çš„æ—¶å€™ï¼Œç›´æ¥åœ¨controlleræ–¹æ³•ä¸­å£°æ˜è¿™æ ·6ä¸ªå‚æ•°å³å¯ï¼Œè¿™æ ·åšï¼ŒåŠŸèƒ½å¯ä»¥å®ç°ï¼Œä½†æ˜¯ä¸æ–¹ä¾¿ç»´æŠ¤å’Œç®¡ç†ã€‚</p>
<p>ä¼˜åŒ–æ€è·¯ï¼šå®šä¹‰ä¸€ä¸ªå®ä½“ç±»ï¼Œæ¥å°è£…è¿™å‡ ä¸ªè¯·æ±‚å‚æ•°ã€‚ <strong>ã€éœ€è¦ä¿è¯ï¼Œå‰ç«¯ä¼ é€’çš„è¯·æ±‚å‚æ•°å’Œå®ä½“ç±»çš„å±æ€§åæ˜¯ä¸€æ ·çš„ã€‘</strong></p>
<p><strong>1). å®šä¹‰å®ä½“ç±»ï¼šEmpQueryParam</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.format.annotation.DateTimeFormat;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EmpQueryParam</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">page</span> <span class="operator">=</span> <span class="number">1</span>; <span class="comment">//é¡µç </span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Integer</span> <span class="variable">pageSize</span> <span class="operator">=</span> <span class="number">10</span>; <span class="comment">//æ¯é¡µå±•ç¤ºè®°å½•æ•°</span></span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">//å§“å</span></span><br><span class="line">    <span class="keyword">private</span> Integer gender; <span class="comment">//æ€§åˆ«</span></span><br><span class="line">    <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate begin; <span class="comment">//å…¥èŒå¼€å§‹æ—¶é—´</span></span><br><span class="line">    <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate end; <span class="comment">//å…¥èŒç»“æŸæ—¶é—´</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). EmpControlleræ¥æ”¶è¯·æ±‚å‚æ•°</strong></p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="keyword">public</span> <span class="function">Result <span class="title">page</span><span class="params">(EmpQueryParam empQueryParam)</span> </span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;æŸ¥è¯¢è¯·æ±‚å‚æ•°ï¼š &#123;&#125;&quot;</span>, empQueryParam);</span><br><span class="line">    PageResult pageResult = empService.page(empQueryParam);</span><br><span class="line">    <span class="function"><span class="keyword">return</span> Result.<span class="title">success</span><span class="params">(pageResult)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3). ä¿®æ”¹EmpServiceæ¥å£æ–¹æ³•</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> interface EmpService &#123;</span><br><span class="line">    <span class="comment">/**     * åˆ†é¡µæŸ¥è¯¢     */</span></span><br><span class="line">//PageResult page(<span class="type">Integer</span> page, <span class="type">Integer</span> pageSize, String <span class="type">name</span>, <span class="type">Integer</span> gender, LocalDate <span class="keyword">begin</span>, LocalDate <span class="keyword">end</span>);</span><br><span class="line">    PageResult page(EmpQueryParam empQueryParam);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4). ä¿®æ”¹EmpServiceImplä¸­çš„pageæ–¹æ³•</strong></p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">@</span>Service</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> EmpServiceImpl implements EmpService &#123;</span><br><span class="line"></span><br><span class="line">    <span class="operator">@</span>Autowired</span><br><span class="line">    <span class="keyword">private</span> EmpMapper empMapper;</span><br><span class="line"></span><br><span class="line">    <span class="operator">/*@</span>Override</span><br><span class="line">    <span class="keyword">public</span> PageResult page(Integer page, Integer pageSize, String name, Integer gender, LocalDate <span class="keyword">begin</span>, LocalDate <span class="keyword">end</span>) &#123;</span><br><span class="line">        <span class="comment">//1. è®¾ç½®PageHelperåˆ†é¡µå‚æ•°</span></span><br><span class="line">        PageHelper.startPage(page, pageSize);</span><br><span class="line">        <span class="comment">//2. æ‰§è¡ŒæŸ¥è¯¢</span></span><br><span class="line">        List<span class="operator">&lt;</span>Emp<span class="operator">&gt;</span> empList <span class="operator">=</span> empMapper.list(name, gender, <span class="keyword">begin</span>, <span class="keyword">end</span>);</span><br><span class="line">        <span class="comment">//3. å°è£…åˆ†é¡µç»“æœ</span></span><br><span class="line">        Page<span class="operator">&lt;</span>Emp<span class="operator">&gt;</span> p <span class="operator">=</span> (Page<span class="operator">&lt;</span>Emp<span class="operator">&gt;</span>) empList;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PageResult(p.getTotal(), p.getResult());</span><br><span class="line">    &#125;<span class="operator">*/</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> PageResult page(EmpQueryParam empQueryParam) &#123;</span><br><span class="line">        <span class="comment">//1. è®¾ç½®PageHelperåˆ†é¡µå‚æ•°</span></span><br><span class="line">        PageHelper.startPage(empQueryParam.getPage(), empQueryParam.getPageSize());</span><br><span class="line">        <span class="comment">//2. æ‰§è¡ŒæŸ¥è¯¢</span></span><br><span class="line">        List<span class="operator">&lt;</span>Emp<span class="operator">&gt;</span> empList <span class="operator">=</span> empMapper.list(empQueryParam);</span><br><span class="line">        <span class="comment">//3. å°è£…åˆ†é¡µç»“æœ</span></span><br><span class="line">        Page<span class="operator">&lt;</span>Emp<span class="operator">&gt;</span> p <span class="operator">=</span> (Page<span class="operator">&lt;</span>Emp<span class="operator">&gt;</span>)empList;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> PageResult(p.getTotal(), p.getResult());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>5). ä¿®æ”¹EmpMapperæ¥å£æ–¹æ³•</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line"><span class="built_in">public</span> interface EmpMapper &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**     * æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥åŠå…¶å¯¹åº”çš„éƒ¨é—¨åç§°     */</span></span><br><span class="line">//    @<span class="keyword">Select</span>(&quot;select e.*, d.name as deptName from emp e left join dept d on e.dept_id = d.id&quot;)</span><br><span class="line">//    <span class="built_in">public</span> List&lt;Emp&gt; list(String <span class="type">name</span>, <span class="type">Integer</span> gender, LocalDate <span class="keyword">begin</span>, LocalDate <span class="keyword">end</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**     * æ ¹æ®æŸ¥è¯¢æ¡ä»¶æŸ¥è¯¢å‘˜å·¥     */</span></span><br><span class="line">List&lt;Emp&gt; list(EmpQueryParam empQueryParam);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>EmpMapper.xml ä¸­çš„é…ç½®æ— éœ€ä¿®æ”¹ã€‚</p>
<p>ä½†å½“æˆ‘ä»¬åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Œé¡µç è¾“å…¥è´Ÿæ•°ï¼ŒæŸ¥è¯¢æ˜¯æœ‰é—®é¢˜çš„ï¼ŒæŸ¥ä¸åˆ°å¯¹åº”çš„æ•°æ®äº†ã€‚</p>
<p>é‚£å…¶å®åœ¨PageHelperä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åˆç†åŒ–å‚æ•°é…ç½®ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ç›´æ¥åœ¨application.ymlä¸­ï¼Œå¼•å…¥å¦‚ä¸‹é…ç½®å³å¯ï¼š</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">pagehelper:</span></span><br><span class="line">  <span class="params">reasonable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="params">helper-dialect:</span> mysql</span><br></pre></td></tr></table></figure>
<p>reasonableï¼šåˆ†é¡µåˆç†åŒ–å‚æ•°ï¼Œé»˜è®¤å€¼ä¸ºfalseã€‚å½“è¯¥å‚æ•°è®¾ç½®ä¸ºtrueæ—¶ï¼ŒpageNum&lt;=0æ—¶ä¼šæŸ¥è¯¢ç¬¬ä¸€é¡µï¼ŒpageNum&gt;pagesï¼ˆè¶…è¿‡æ€»æ•°æ—¶ï¼‰ï¼Œä¼šæŸ¥è¯¢æœ€åä¸€é¡µã€‚é»˜è®¤false æ—¶ï¼Œç›´æ¥æ ¹æ®å‚æ•°è¿›è¡ŒæŸ¥è¯¢ã€‚</p>
<h4 id="1-4-5ç¨‹åºä¼˜åŒ–2ï¼ˆåŠ¨æ€SQLæ”¹é€ ï¼‰">1.4.5ç¨‹åºä¼˜åŒ–2ï¼ˆåŠ¨æ€SQLæ”¹é€ ï¼‰</h4>
<p>å½“å‰ï¼Œæˆ‘ä»¬åœ¨æŸ¥è¯¢çš„æ—¶å€™ï¼ŒMapperæ˜ å°„é…ç½®æ–‡ä»¶ä¸­çš„SQLè¯­å¥ä¸­ï¼ŒæŸ¥è¯¢æ¡ä»¶æ˜¯å†™æ­»çš„ã€‚ è€Œæˆ‘ä»¬åœ¨å‘˜å·¥ç®¡ç†ä¸­ï¼Œæ ¹æ®æ¡ä»¶æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯æ—¶ï¼ŒæŸ¥è¯¢æ¡ä»¶æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥è¾“å…¥ä¹Ÿå¯ä»¥ä¸è¾“å…¥ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-322-1024x94.png" alt="img"></p>
<ul>
<li>å¦‚æœåªè¾“å…¥ <strong>å§“å</strong> è¿™ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œåˆ™SQLè¯­å¥ä¸­åªæ ¹æ®nameå­—æ®µæŸ¥è¯¢ï¼ŒSQLå¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.*, d.name deptName <span class="keyword">from</span> emp <span class="keyword">as</span> <span class="built_in">e</span> <span class="keyword">left</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> <span class="built_in">e</span>.dept_id = d.id <span class="keyword">where</span> <span class="built_in">e</span>.name <span class="keyword">like</span> concat(<span class="string">&#x27;%&#x27;</span>,#&#123;name&#125;,<span class="string">&#x27;%&#x27;</span>)ï¼›</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœåªè¾“å…¥ <strong>æ€§åˆ«</strong> è¿™ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œåˆ™SQLè¯­å¥ä¸­åªæ ¹æ®genderå­—æ®µæŸ¥è¯¢ï¼ŒSQLå¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.*, d.name deptName <span class="keyword">from</span> emp <span class="keyword">as</span> <span class="built_in">e</span> <span class="keyword">left</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> <span class="built_in">e</span>.dept_id = d.id <span class="keyword">where</span> <span class="built_in">e</span>.gender = #&#123;gender&#125;ï¼›</span><br></pre></td></tr></table></figure>
<ul>
<li>å¦‚æœè¾“å…¥ <strong>å§“å</strong> å’Œ <strong>æ€§åˆ«</strong> è¿™ä¸¤ä¸ªæŸ¥è¯¢æ¡ä»¶ï¼Œåˆ™SQLè¯­å¥ä¸­è¦æ ¹æ®nameã€genderä¸¤ä¸ªå­—æ®µæŸ¥è¯¢ï¼ŒSQLå¦‚ä¸‹ï¼š</li>
</ul>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.*, d.name deptName <span class="keyword">from</span> emp <span class="keyword">as</span> <span class="built_in">e</span> <span class="keyword">left</span> <span class="keyword">join</span> dept <span class="keyword">as</span> d <span class="keyword">on</span> <span class="built_in">e</span>.dept_id = d.id</span><br><span class="line"><span class="keyword">where</span> <span class="built_in">e</span>.name <span class="keyword">like</span> concat(<span class="string">&#x27;%&#x27;</span>,#&#123;name&#125;,<span class="string">&#x27;%&#x27;</span>) <span class="keyword">and</span> <span class="built_in">e</span>.gender = #&#123;gender&#125;ï¼›</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬çœ‹åˆ°ï¼Œè¿™ä¸ªSQLè¯­å¥ä¸åº”è¯¥æ˜¯å†™æ­»çš„ï¼Œè€Œåº”è¯¥æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æ¡ä»¶çš„å˜åŒ–è€Œå˜åŒ–ã€‚ é‚£è¿™é‡Œå‘¢ï¼Œå°±è¦é€šè¿‡Mybatisä¸­çš„<strong>åŠ¨æ€SQL</strong>æ¥å®ç°ã€‚</p>
<p><strong>æ‰€è°“åŠ¨æ€SQLï¼ŒæŒ‡çš„å°±æ˜¯éšç€ç”¨æˆ·çš„è¾“å…¥æˆ–å¤–éƒ¨çš„æ¡ä»¶çš„å˜åŒ–è€Œå˜åŒ–çš„SQLè¯­å¥ã€‚</strong></p>
<p>å…·ä½“çš„ä»£ç å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!--å®šä¹‰Mapperæ˜ å°„æ–‡ä»¶çš„çº¦æŸå’ŒåŸºæœ¬ç»“æ„--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span></span><br><span class="line"><span class="meta"><span class="language-xml">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span></span><br><span class="line"><span class="meta"><span class="language-xml">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.EmpMapper&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.pojo.Emp&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        select e.*, d.name deptName from emp as e left join dept as d on e.dept_id = d.id</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">where</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                e.name like concat(&#x27;%&#x27;,#</span><span class="template-variable">&#123;name&#125;</span><span class="language-xml">,&#x27;%&#x27;)</span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                and e.gender = #</span><span class="template-variable">&#123;gender&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;begin != null and end != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                and e.entry_date between #</span><span class="template-variable">&#123;begin&#125;</span><span class="language-xml"> and #</span><span class="template-variable">&#123;end&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™é‡Œå‘¢ï¼Œæˆ‘ä»¬ç”¨åˆ°äº†ä¸¤ä¸ªåŠ¨æ€SQLçš„æ ‡ç­¾ï¼š<code>&lt;if&gt;``&lt;where&gt;</code>ã€‚ è¿™ä¸¤ä¸ªæ ‡ç­¾çš„å…·ä½“ä½œç”¨å¦‚ä¸‹ï¼š</p>
<p><code>&lt;if&gt;</code>ï¼šåˆ¤æ–­æ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œå¦‚æœæ¡ä»¶ä¸ºtrueï¼Œåˆ™æ‹¼æ¥SQLã€‚</p>
<p><code>&lt;where&gt;</code>ï¼šæ ¹æ®æŸ¥è¯¢æ¡ä»¶ï¼Œæ¥ç”Ÿæˆwhereå…³é”®å­—ï¼Œå¹¶ä¼šè‡ªåŠ¨å»é™¤æ¡ä»¶å‰é¢å¤šä½™çš„andæˆ–orã€‚</p>
<p>å½“æˆ‘ä»¬è¾“å…¥ä¸åŒçš„æœç´¢æ¡ä»¶æ—¶ï¼Œä¼šåŠ¨æ€çš„æ ¹æ®æŸ¥è¯¢æ¡ä»¶ï¼ŒåŠ¨æ€æ‹¼æ¥SQLè¯­å¥ã€‚</p>
<h2 id="2-æ–°å¢å‘˜å·¥">2.æ–°å¢å‘˜å·¥</h2>
<h3 id="2-1éœ€æ±‚">2.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-323.png" alt="img"></p>
<p>åœ¨æ–°å¢å‘˜å·¥çš„æ—¶å€™ï¼Œåœ¨è¡¨å•ä¸­ï¼Œæˆ‘ä»¬æ—¢è¦å½•å…¥å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯ï¼Œåˆè¦å½•å…¥å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ã€‚ å‘˜å·¥åŸºæœ¬ä¿¡æ¯ï¼Œå¯¹åº”çš„è¡¨ç»“æ„æ˜¯ empè¡¨ï¼Œå‘˜å·¥å·¥ä½œç»å†ä¿¡æ¯ï¼Œå¯¹åº”çš„è¡¨ç»“æ„æ˜¯ emp_expr è¡¨ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦æ“ä½œä¸¤å¼ è¡¨ï¼Œå¾€ä¸¤å¼ è¡¨ä¸­ä¿å­˜æ•°æ®ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-330-1024x854.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-331-1024x695.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-332-1024x506.png" alt="img"></p>
<h3 id="2-2å®ç°æ€è·¯">2.2å®ç°æ€è·¯</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-333-1024x263.png" alt="img"></p>
<ul>
<li>æ¥å£æ–‡æ¡£è§„å®šï¼š
<ul>
<li>è¯·æ±‚è·¯å¾„ï¼š/emps</li>
<li>è¯·æ±‚æ–¹å¼ï¼šPOST</li>
<li>è¯·æ±‚å‚æ•°ï¼šJsonæ ¼å¼æ•°æ®</li>
<li>å“åº”æ•°æ®ï¼šJsonæ ¼å¼æ•°æ®</li>
</ul>
</li>
<li>**é—®é¢˜1ï¼š**å¦‚ä½•é™å®šè¯·æ±‚æ–¹å¼æ˜¯POSTï¼Ÿ <strong><code>@PostMapping</code></strong></li>
<li><strong>é—®é¢˜2ï¼š<strong>æ€ä¹ˆåœ¨controllerä¸­æ¥æ”¶jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°ï¼Ÿ</strong><code>@RequestBody</code></strong></li>
</ul>
<h3 id="2-3åŠŸèƒ½å¼€å‘">2.3åŠŸèƒ½å¼€å‘</h3>
<h4 id="2-3-1å‡†å¤‡å·¥ä½œ">2.3.1å‡†å¤‡å·¥ä½œ</h4>
<p>å‡†å¤‡<code>EmpExprMapper</code>æ¥å£åŠæ˜ å°„é…ç½®æ–‡ä»¶<code>EmpExprMapper.xml</code>ï¼Œå¹¶å‡†å¤‡å®ä½“ç±»æ¥æ”¶å‰ç«¯ä¼ é€’çš„jsonæ ¼å¼çš„è¯·æ±‚å‚æ•°ã€‚</p>
<p>1). EmpExprMapperæ¥å£</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">interface</span> <span class="title">EmpExprMapper</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2). EmpExprMapper.xml é…ç½®æ–‡ä»¶</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.EmpExprMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>3). éœ€è¦åœ¨ <code>Emp</code> å‘˜å·¥å®ä½“ç±»ä¸­å¢åŠ å±æ€§ <code>exprList</code> æ¥å°è£…å·¥ä½œç»å†æ•°æ®ã€‚ æœ€ç»ˆå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">Data</span></span><br><span class="line"><span class="keyword">public</span> class Emp &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> id; <span class="comment">//ID,ä¸»é”®</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> username; <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> password; <span class="comment">//å¯†ç </span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> name; <span class="comment">//å§“å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> gender; <span class="comment">//æ€§åˆ«, 1:ç”·, 2:å¥³</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> phone; <span class="comment">//æ‰‹æœºå·</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> job; <span class="comment">//èŒä½, 1:ç­ä¸»ä»»,2:è®²å¸ˆ,3:å­¦å·¥ä¸»ç®¡,4:æ•™ç ”ä¸»ç®¡,5:å’¨è¯¢å¸ˆ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> salary; <span class="comment">//è–ªèµ„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> image; <span class="comment">//å¤´åƒ</span></span><br><span class="line">    <span class="keyword">private</span> LocalDate entryDate; <span class="comment">//å…¥èŒæ—¥æœŸ</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">Integer</span> deptId; <span class="comment">//å…³è”çš„éƒ¨é—¨ID</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime createTime; <span class="comment">//åˆ›å»ºæ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime updateTime; <span class="comment">//ä¿®æ”¹æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°è£…éƒ¨é—¨åç§°æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="built_in">String</span> deptName; <span class="comment">//éƒ¨é—¨åç§°</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å°è£…å‘˜å·¥å·¥ä½œç»å†ä¿¡æ¯    private List&lt;EmpExpr&gt; exprList;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-3-2ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯">2.3.2ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯</h4>
<p>1). EmpController</p>
<p>åœ¨ <code>EmpController</code> ä¸­å¢åŠ saveæ–¹æ³•ã€‚</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ å‘˜å·¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@PostMapping</span></span><br><span class="line">public Result <span class="built_in">save</span>(<span class="variable">@RequestBody</span> Emp emp)&#123;</span><br><span class="line">    <span class="selector-tag">log</span><span class="selector-class">.info</span>(<span class="string">&quot;è¯·æ±‚å‚æ•°emp: &#123;&#125;&quot;</span>, emp);</span><br><span class="line">    <span class="selector-tag">empService</span><span class="selector-class">.save</span>(emp);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2). EmpService &amp; EmpServiceImpl</p>
<p>åœ¨ <code>EmpService</code> ä¸­å¢åŠ  save æ–¹æ³•</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ·»åŠ å‘˜å·¥</span></span><br><span class="line"><span class="comment">* @param emp</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">save</span><span class="params">(Emp emp)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>EmpServiceImpl</code> ä¸­å¢åŠ saveæ–¹æ³• , å®ç°æ¥å£ä¸­çš„saveæ–¹æ³•</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@Override</span></span><br><span class="line">public void save(Emp emp) &#123;</span><br><span class="line">    <span class="comment">//1.è¡¥å…¨åŸºç¡€å±æ€§</span></span><br><span class="line">    emp<span class="selector-class">.setCreateTime</span>(LocalDateTime.now());</span><br><span class="line">    emp<span class="selector-class">.setUpdateTime</span>(LocalDateTime.now());</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//2.ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    empMapper<span class="selector-class">.insert</span>(emp);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. ä¿å­˜å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ - æ‰¹é‡ (ç¨åå®Œæˆ)</span></span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3). EmpMapper</p>
<p>åœ¨ <code>EmpMapper</code> ä¸­å¢åŠ insertæ–¹æ³•ï¼Œæ–°å¢å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯ã€‚</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ–°å¢å‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">@Options(useGeneratedKeys = <span class="literal">true</span>, keyProperty = <span class="string">&quot;id&quot;</span>)</span><br><span class="line">@Insert(<span class="string">&quot;insert into emp(username, name, gender, phone, job, salary, image, entry_date, dept_id, create_time, update_time) &quot;</span> +</span><br><span class="line">        <span class="string">&quot;values (<span class="subst">#&#123;username&#125;</span>,<span class="subst">#&#123;name&#125;</span>,<span class="subst">#&#123;gender&#125;</span>,<span class="subst">#&#123;phone&#125;</span>,<span class="subst">#&#123;job&#125;</span>,<span class="subst">#&#123;salary&#125;</span>,<span class="subst">#&#123;image&#125;</span>,<span class="subst">#&#123;entryDate&#125;</span>,<span class="subst">#&#123;deptId&#125;</span>,<span class="subst">#&#123;createTime&#125;</span>,<span class="subst">#&#123;updateTime&#125;</span>)&quot;</span>)</span><br><span class="line"><span class="literal">void</span> insert(Emp emp);</span><br></pre></td></tr></table></figure>
<p><strong>ä¸»é”®è¿”å›ï¼š</strong><code>@Options(useGeneratedKeys = true, keyProperty = &quot;id&quot;)</code></p>
<p>ç”±äºç¨åï¼Œæˆ‘ä»¬åœ¨ä¿å­˜å·¥ä½œç»å†ä¿¡æ¯çš„æ—¶å€™ï¼Œéœ€è¦è®°å½•æ˜¯å“ªä½å‘˜å·¥çš„å·¥ä½œç»å†ã€‚ æ‰€ä»¥ï¼Œä¿å­˜å®Œå‘˜å·¥ä¿¡æ¯ä¹‹åï¼Œæ˜¯éœ€è¦è·å–åˆ°å‘˜å·¥çš„IDçš„ï¼Œé‚£è¿™é‡Œå°±éœ€è¦<strong>é€šè¿‡Mybatisä¸­æä¾›çš„ä¸»é”®è¿”å›åŠŸèƒ½æ¥è·å–</strong>ã€‚</p>
<h4 id="2-3-3æ‰¹é‡ä¿å­˜å·¥ä½œç»å†">2.3.3æ‰¹é‡ä¿å­˜å·¥ä½œç»å†</h4>
<h5 id="1-åˆ†æ">1.åˆ†æ</h5>
<p>ä¸€ä¸ªå‘˜å·¥ï¼Œæ˜¯å¯ä»¥æœ‰å¤šæ®µå·¥ä½œç»å†çš„ï¼Œæ‰€ä»¥åœ¨é¡µé¢ä¸Šå°†æ¥ç”¨æˆ·å½•å…¥å‘˜å·¥ä¿¡æ¯æ—¶ï¼Œå¯ä»¥è‡ªå·±æ ¹æ®éœ€è¦æ·»åŠ å¤šæ®µå·¥ä½œç»å†ã€‚é¡µé¢åŸå‹å±•ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-344.png" alt="img"></p>
<p>é‚£å¦‚æœå‘˜å·¥åªæœ‰ä¸€æ®µå·¥ä½œç»å†ï¼Œæˆ‘ä»¬å°±éœ€è¦å¾€å·¥ä½œç»å†è¡¨ä¸­ä¿å­˜ä¸€æ¡è®°å½•ã€‚ æ‰§è¡Œçš„SQLå¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-374-1024x85.png" alt="img"></p>
<p>å¦‚æœå‘˜å·¥æœ‰ä¸¤æ®µå·¥ä½œç»å†ï¼Œæˆ‘ä»¬å°±éœ€è¦å¾€å·¥ä½œç»å†è¡¨ä¸­ä¿å­˜ä¸¤æ¡è®°å½•ã€‚æ‰§è¡Œçš„SQLå¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-375-1024x106.png" alt="img"></p>
<p>å¦‚æœå‘˜å·¥æœ‰ä¸‰æ®µå·¥ä½œç»å†ï¼Œæˆ‘ä»¬å°±éœ€è¦å¾€å·¥ä½œç»å†è¡¨ä¸­ä¿å­˜ä¸‰æ¡è®°å½•ã€‚æ‰§è¡Œçš„SQLå¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-376-1024x119.png" alt="img"></p>
<p>æ‰€ä»¥ï¼Œè¿™é‡Œæœ€ç»ˆæˆ‘ä»¬éœ€è¦æ‰§è¡Œçš„æ˜¯æ‰¹é‡æ’å…¥æ•°æ®çš„insertè¯­å¥ã€‚</p>
<h5 id="2-ä»£ç å®ç°">2.ä»£ç å®ç°</h5>
<p>1). EmpServiceImpl</p>
<p>å®Œå–„saveæ–¹æ³•ä¸­ä¿å­˜å‘˜å·¥ä¿¡æ¯çš„é€»è¾‘ã€‚å®Œæ•´é€»è¾‘å¦‚ä¸‹ï¼š</p>
<figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public <span class="keyword">void</span> save(Emp emp) &#123;</span><br><span class="line">    <span class="comment">//1.è¡¥å…¨åŸºç¡€å±æ€§</span></span><br><span class="line">    emp.setCreateTime(LocalDateTime.<span class="built_in">now</span>());</span><br><span class="line">    emp.setUpdateTime(LocalDateTime.<span class="built_in">now</span>());</span><br><span class="line">    <span class="comment">//2.ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    empMapper.<span class="built_in">insert</span>(emp);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. ä¿å­˜å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ - æ‰¹é‡</span></span><br><span class="line">    Integer empId = emp.getId();</span><br><span class="line">    List&lt;EmpExpr&gt; exprList = emp.getExprList();</span><br><span class="line">    <span class="keyword">if</span>(!CollectionUtils.<span class="built_in">isEmpty</span>(exprList))&#123;</span><br><span class="line">        exprList.forEach(empExpr -&gt; empExpr.setEmpId(empId));</span><br><span class="line">        empExprMapper.insertBatch(exprList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2). EmpExprMapper</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Mapper</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="symbol">EmpExprMapper</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ‰¹é‡æ’å…¥å‘˜å·¥å·¥ä½œç»å†ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> insertBatch(List&lt;EmpExpr&gt; exprList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3). EmpExprMapper.xml</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span></span><br><span class="line"><span class="meta"><span class="language-xml">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span></span><br><span class="line"><span class="meta"><span class="language-xml">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;com.itheima.mapper.EmpExprMapper&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--æ‰¹é‡æ’å…¥å‘˜å·¥å·¥ä½œç»å†ä¿¡æ¯--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertBatch&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        insert into emp_expr (emp_id, begin, end, company, job) values</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;exprList&quot;</span> <span class="attr">item</span>=<span class="string">&quot;expr&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            (#</span><span class="template-variable">&#123;expr.empId&#125;</span><span class="language-xml">, #</span><span class="template-variable">&#123;expr.begin&#125;</span><span class="language-xml">, #</span><span class="template-variable">&#123;expr.end&#125;</span><span class="language-xml">, #</span><span class="template-variable">&#123;expr.company&#125;</span><span class="language-xml">, #</span><span class="template-variable">&#123;expr.job&#125;</span><span class="language-xml">)</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¿™é‡Œç”¨åˆ°Mybatisä¸­çš„åŠ¨æ€SQLé‡Œæä¾›çš„ <code>&lt;foreach&gt;</code> æ ‡ç­¾ï¼Œæ”¹æ ‡ç­¾çš„ä½œç”¨ï¼Œæ˜¯ç”¨æ¥éå†å¾ªç¯ï¼Œå¸¸è§çš„å±æ€§è¯´æ˜ï¼š</p>
<ol>
<li>collectionï¼šé›†åˆåç§°</li>
<li>itemï¼šé›†åˆéå†å‡ºæ¥çš„å…ƒç´ /é¡¹</li>
<li>separatorï¼šæ¯ä¸€æ¬¡éå†ä½¿ç”¨çš„åˆ†éš”ç¬¦</li>
<li>openï¼šéå†å¼€å§‹å‰æ‹¼æ¥çš„ç‰‡æ®µ</li>
<li>closeï¼šéå†ç»“æŸåæ‹¼æ¥çš„ç‰‡æ®µ</li>
</ol>
<p>ä¸Šè¿°çš„å±æ€§ï¼Œæ˜¯å¯é€‰çš„ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„éƒ½æ˜¯å¿…é¡»çš„ã€‚ å¯ä»¥è‡ªå·±æ ¹æ®å®é™…éœ€æ±‚ï¼Œæ¥æŒ‡å®šå¯¹åº”çš„å±æ€§ã€‚</p>
</blockquote>
<p>Apifoxè¯·æ±‚å®Œæ¯•åï¼Œå¯ä»¥æ‰“å¼€ideaçš„æ§åˆ¶å°çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-377-1024x246.png" alt="img"></p>
<h2 id="3-äº‹åŠ¡ç®¡ç†">3.äº‹åŠ¡ç®¡ç†</h2>
<h3 id="3-1é—®é¢˜åˆ†æ">3.1é—®é¢˜åˆ†æ</h3>
<p>ç›®å‰æˆ‘ä»¬å®ç°çš„æ–°å¢å‘˜å·¥åŠŸèƒ½ä¸­ï¼Œæ“ä½œäº†ä¸¤æ¬¡æ•°æ®åº“ï¼Œæ‰§è¡Œäº†ä¸¤æ¬¡ insert æ“ä½œã€‚</p>
<ul>
<li>ç¬¬ä¸€æ¬¡ï¼šä¿å­˜å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯åˆ° <code>emp</code> è¡¨ä¸­ã€‚</li>
<li>ç¬¬äºŒæ¬¡ï¼šä¿å­˜å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯åˆ° <code>emp_expr</code> è¡¨ä¸­ã€‚</li>
</ul>
<p>å¦‚æœè¯´ï¼Œä¿å­˜å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯æˆåŠŸäº†ï¼Œè€Œä¿å­˜å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯å‡ºé”™äº†ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆç°è±¡å‘¢ï¼Ÿé‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥åšä¸€ä¸ªæµ‹è¯• ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­ï¼Œäººä¸ºåœ¨ä¿å­˜å‘˜å·¥çš„serviceå±‚çš„saveæ–¹æ³•ä¸­ï¼Œæ„é€ ä¸€ä¸ªé”™è¯¯ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-345-1024x508.png" alt="img"></p>
<p>é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±é‡å¯æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œæ¥åšä¸€ä¸ªæµ‹è¯•ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-378-1024x496.png" alt="img"></p>
<p>ç‚¹å‡» â€œä¿å­˜â€ ä¹‹åï¼Œæç¤º â€œç³»ç»Ÿæ¥å£å¼‚å¸¸â€ã€‚æˆ‘ä»¬å¯ä»¥æ‰“å¼€IDEAæ§åˆ¶å°çœ‹ä¸€ä¸‹ï¼ŒæŠ¥å‡ºçš„é”™è¯¯ä¿¡æ¯ã€‚ æˆ‘ä»¬çœ‹åˆ°ï¼Œä¿å­˜äº†å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯ä¹‹åï¼Œç³»ç»Ÿå‡ºç°äº†å¼‚å¸¸ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-379-1024x392.png" alt="img"></p>
<p>æˆ‘ä»¬å†æ‰“å¼€æ•°æ®åº“ï¼Œçœ‹çœ‹è¡¨ç»“æ„ä¸­çš„æ•°æ®æ˜¯å¦æ­£å¸¸ã€‚</p>
<p>1). <code>emp</code> å‘˜å·¥è¡¨ä¸­æ˜¯æœ‰ <code>shaseng</code> è¿™æ¡æ•°æ®çš„ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-381-1024x464.png" alt="img"></p>
<p>2). <code>emp_expr</code> è¡¨ä¸­æ²¡æœ‰è¯¥å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-380-1024x159.png" alt="img"></p>
<p>æœ€ç»ˆï¼Œæˆ‘ä»¬çœ‹åˆ°ï¼Œç¨‹åºå‡ºç°äº†å¼‚å¸¸ ï¼Œå‘˜å·¥è¡¨ <code>emp</code> æ•°æ®ä¿å­˜æˆåŠŸäº†, ä½†æ˜¯ <code>emp_expr</code> å‘˜å·¥å·¥ä½œç»å†ä¿¡æ¯è¡¨ï¼Œæ•°æ®ä¿å­˜å¤±è´¥äº†ã€‚ é‚£æ˜¯å¦å…è®¸è¿™ç§æƒ…å†µå‘ç”Ÿå‘¢ï¼Ÿ</p>
<ul>
<li>ä¸å…è®¸</li>
<li>å› ä¸ºè¿™å±äºä¸€ä¸ªä¸šåŠ¡æ“ä½œï¼Œå¦‚æœä¿å­˜å‘˜å·¥ä¿¡æ¯æˆåŠŸäº†ï¼Œä¿å­˜å·¥ä½œç»å†ä¿¡æ¯å¤±è´¥äº†ï¼Œå°±ä¼šé€ æˆæ•°æ®åº“æ•°æ®çš„ä¸å®Œæ•´ã€ä¸ä¸€è‡´ã€‚</li>
</ul>
<p>é‚£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ è¿™éœ€è¦é€šè¿‡æ•°æ®åº“ä¸­çš„<strong>äº‹åŠ¡</strong>æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<h3 id="3-2ä»‹ç»">3.2ä»‹ç»</h3>
<p><strong>æ¦‚å¿µï¼š</strong> äº‹åŠ¡æ˜¯ä¸€ç»„æ“ä½œçš„é›†åˆï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ã€‚äº‹åŠ¡ä¼šæŠŠæ‰€æœ‰çš„æ“ä½œä½œä¸ºä¸€ä¸ªæ•´ä½“ä¸€èµ·å‘ç³»ç»Ÿæäº¤æˆ–æ’¤é”€æ“ä½œè¯·æ±‚ï¼Œå³è¿™äº›æ“ä½œ <strong>è¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥</strong>ã€‚</p>
<p>å°±æ‹¿æ·»åŠ å‘˜å·¥çš„è¿™ä¸ªä¸šåŠ¡ä¸ºä¾‹ï¼Œåœ¨è¿™ä¸ªä¸šåŠ¡æ“ä½œä¸­ï¼ŒåŒ…å«äº†ä¸¤ä¸ªæ“ä½œï¼Œé‚£è¿™ä¸¤ä¸ªæ“ä½œæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ã€‚</p>
<p>è¿™ä¸¤ä¸ªæ“ä½œï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ï¼Œè¦ä¹ˆåŒæ—¶æˆåŠŸã€‚</p>
<p>é»˜è®¤MySQLçš„äº‹åŠ¡æ˜¯è‡ªåŠ¨æäº¤çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æ‰§è¡Œä¸€æ¡DMLè¯­å¥ï¼ŒMySQLä¼šç«‹å³éšå¼çš„æäº¤äº‹åŠ¡ã€‚</p>
<h3 id="3-3æ“ä½œ">3.3æ“ä½œ</h3>
<p>äº‹åŠ¡æ§åˆ¶ä¸»è¦ä¸‰æ­¥æ“ä½œï¼šå¼€å¯äº‹åŠ¡ã€æäº¤äº‹åŠ¡/å›æ»šäº‹åŠ¡ã€‚</p>
<ul>
<li>éœ€è¦åœ¨è¿™ç»„æ“ä½œæ‰§è¡Œä¹‹å‰ï¼Œå…ˆå¼€å¯äº‹åŠ¡ ( <code>start transaction; / begin;</code>)ã€‚</li>
<li>æ‰€æœ‰æ“ä½œå¦‚æœå…¨éƒ¨éƒ½æ‰§è¡ŒæˆåŠŸï¼Œåˆ™æäº¤äº‹åŠ¡ ( <code>commit;</code> )ã€‚</li>
<li>å¦‚æœè¿™ç»„æ“ä½œä¸­ï¼Œæœ‰ä»»ä½•ä¸€ä¸ªæ“ä½œæ‰§è¡Œå¤±è´¥ï¼Œéƒ½åº”è¯¥å›æ»šäº‹åŠ¡ ( <code>rollback</code> )ã€‚</li>
</ul>
<p>é‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†æ·»åŠ å‘˜å·¥çš„ä¸šåŠ¡æ“ä½œï¼Œè¿›è¡Œäº‹åŠ¡ç®¡ç†ã€‚ å…·ä½“çš„SQLå¦‚ä¸‹ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å¼€å¯äº‹åŠ¡</span></span><br><span class="line"><span class="keyword">start</span> <span class="keyword">transaction</span>; / <span class="keyword">begin</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 1. ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp <span class="keyword">values</span> (<span class="number">39</span>, <span class="string">&#x27;Tom&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>, <span class="string">&#x27;æ±¤å§†&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;13300001111&#x27;</span>, <span class="number">1</span>, <span class="number">4000</span>, <span class="string">&#x27;1.jpg&#x27;</span>, <span class="string">&#x27;2023-11-01&#x27;</span>, <span class="number">1</span>, now(), now());</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 2. ä¿å­˜å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> emp_expr(emp_id, <span class="keyword">begin</span>, <span class="keyword">end</span>, company, job) <span class="keyword">values</span> (<span class="number">39</span>,<span class="string">&#x27;2019-01-01&#x27;</span>, <span class="string">&#x27;2020-01-01&#x27;</span>, <span class="string">&#x27;ç™¾åº¦&#x27;</span>, <span class="string">&#x27;å¼€å‘&#x27;</span>),                                                                                                       (<span class="number">39</span>,<span class="string">&#x27;2020-01-10&#x27;</span>, <span class="string">&#x27;2022-02-01&#x27;</span>, <span class="string">&#x27;é˜¿é‡Œ&#x27;</span>, <span class="string">&#x27;æ¶æ„&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- æäº¤äº‹åŠ¡(å…¨éƒ¨æˆåŠŸ)</span></span><br><span class="line"><span class="keyword">commit</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- å›æ»šäº‹åŠ¡(æœ‰ä¸€ä¸ªå¤±è´¥)</span></span><br><span class="line"><span class="keyword">rollback</span>;</span><br></pre></td></tr></table></figure>
<p>äº‹åŠ¡ç®¡ç†çš„åœºæ™¯ï¼Œæ˜¯éå¸¸å¤šçš„ï¼Œæ¯”å¦‚ï¼š</p>
<ul>
<li>é“¶è¡Œè½¬è´¦</li>
<li>ä¸‹å•æ‰£å‡åº“å­˜</li>
</ul>
<h3 id="3-4Springäº‹åŠ¡ç®¡ç†ï¼ˆ-Transactionalï¼‰">3.4Springäº‹åŠ¡ç®¡ç†ï¼ˆ@Transactionalï¼‰</h3>
<h4 id="3-4-1åˆ†æ">3.4.1åˆ†æ</h4>
<p>åœ¨ä¸Šè¿°å®ç°çš„æ–°å¢å‘˜å·¥çš„åŠŸèƒ½ä¸­ï¼Œä¸€æ—¦åœ¨ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯åå‡ºç°å¼‚å¸¸ã€‚ æˆ‘ä»¬å°±ä¼šå‘ç°ï¼Œå‘˜å·¥ä¿¡æ¯ä¿å­˜æˆåŠŸï¼Œä½†æ˜¯å·¥ä½œç»å†ä¿¡æ¯ä¿å­˜å¤±è´¥ï¼Œé€ æˆäº†æ•°æ®çš„ä¸å®Œæ•´ä¸ä¸€è‡´ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-382-1024x465.png" alt="img"></p>
<p>äº§ç”ŸåŸå› ï¼š</p>
<ul>
<li>å…ˆæ‰§è¡Œæ–°å¢å‘˜å·¥çš„æ“ä½œï¼Œè¿™æ­¥æ‰§è¡Œå®Œæ¯•ï¼Œå°±å·²ç»å¾€å‘˜å·¥è¡¨ <code>emp</code> æ’å…¥äº†æ•°æ®ã€‚</li>
<li>æ‰§è¡Œ 1/0 æ“ä½œï¼ŒæŠ›å‡ºå¼‚å¸¸</li>
<li>æŠ›å‡ºå¼‚å¸¸ä¹‹å‰ï¼Œä¸‹é¢æ‰€æœ‰çš„ä»£ç éƒ½ä¸ä¼šæ‰§è¡Œäº†ï¼Œæ‰¹é‡ä¿å­˜å·¥ä½œç»å†ä¿¡æ¯ï¼Œè¿™ä¸ªæ“ä½œä¹Ÿä¸ä¼šæ‰§è¡Œ ã€‚</li>
</ul>
<p>æ­¤æ—¶å°±å‡ºç°é—®é¢˜äº†ï¼Œå‘˜å·¥åŸºæœ¬ä¿¡æ¯ä¿å­˜äº†ï¼Œå‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯æœªä¿å­˜ï¼Œä¸šåŠ¡æ“ä½œå‰åæ•°æ®ä¸ä¸€è‡´ã€‚</p>
<p>è€Œè¦æƒ³ä¿è¯æ“ä½œå‰åï¼Œæ•°æ®çš„ä¸€è‡´æ€§ï¼Œå°±éœ€è¦è®©æ–°å¢å‘˜å·¥ä¸­æ¶‰åŠåˆ°çš„ä¸¤ä¸ªä¸šåŠ¡æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ ã€‚ é‚£æˆ‘ä»¬å¦‚ä½•ï¼Œè®©è¿™ä¸¤ä¸ªæ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥å‘¢ ï¼Ÿ</p>
<p>é‚£å°±å¯ä»¥é€šè¿‡äº‹åŠ¡æ¥å®ç°ï¼Œå› ä¸ºä¸€ä¸ªäº‹åŠ¡ä¸­çš„å¤šä¸ªä¸šåŠ¡æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨æ–°å¢å‘˜å·¥åŠŸèƒ½ä¸­æ·»åŠ äº‹åŠ¡ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-383.png" alt="img"></p>
<p>åœ¨æ–¹æ³•è¿è¡Œä¹‹å‰ï¼Œå¼€å¯äº‹åŠ¡ï¼Œå¦‚æœæ–¹æ³•æˆåŠŸæ‰§è¡Œï¼Œå°±æäº¤äº‹åŠ¡ï¼Œå¦‚æœæ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹å½“ä¸­å‡ºç°å¼‚å¸¸äº†ï¼Œå°±å›æ»šäº‹åŠ¡ã€‚</p>
<p>**æ€è€ƒï¼š**å¼€å‘ä¸­æ‰€æœ‰çš„ä¸šåŠ¡æ“ä½œï¼Œä¸€æ—¦æˆ‘ä»¬è¦è¿›è¡Œæ§åˆ¶äº‹åŠ¡ï¼Œæ˜¯ä¸æ˜¯éƒ½æ˜¯è¿™æ ·çš„å¥—è·¯ï¼Ÿ</p>
<p>**ç­”æ¡ˆï¼š**æ˜¯çš„ã€‚</p>
<p>æ‰€ä»¥åœ¨springæ¡†æ¶å½“ä¸­å°±å·²ç»æŠŠäº‹åŠ¡æ§åˆ¶çš„ä»£ç éƒ½å·²ç»å°è£…å¥½äº†ï¼Œå¹¶ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å®ç°ã€‚æˆ‘ä»¬ä½¿ç”¨äº†springæ¡†æ¶ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡ä¸€ä¸ªç®€å•çš„æ³¨è§£@Transactionalå°±æå®šäº†ã€‚</p>
<h4 id="3-4-2Transactionalæ³¨è§£">3.4.2Transactionalæ³¨è§£</h4>
<p><strong>æ³¨è§£ï¼š</strong>@Transactional</p>
<p>**ä½œç”¨ï¼š**å°±æ˜¯åœ¨å½“å‰è¿™ä¸ªæ–¹æ³•æ‰§è¡Œå¼€å§‹ä¹‹å‰æ¥å¼€å¯äº‹åŠ¡ï¼Œæ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¹‹åæäº¤äº‹åŠ¡ã€‚å¦‚æœåœ¨è¿™ä¸ªæ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹å½“ä¸­å‡ºç°äº†å¼‚å¸¸ï¼Œå°±ä¼šè¿›è¡Œäº‹åŠ¡çš„å›æ»šæ“ä½œã€‚</p>
<p>**ä½ç½®ï¼š**ä¸šåŠ¡å±‚çš„æ–¹æ³•ä¸Šã€ç±»ä¸Šã€æ¥å£ä¸Š</p>
<p>æ¥å£ä¸Šï¼šæ¥å£ä¸‹æ‰€æœ‰çš„å®ç°ç±»å½“ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½äº¤ç»™spring è¿›è¡Œäº‹åŠ¡ç®¡ç†</p>
<p>æ–¹æ³•ä¸Šï¼šå½“å‰æ–¹æ³•äº¤ç»™springè¿›è¡Œäº‹åŠ¡ç®¡ç†</p>
<p>ç±»ä¸Šï¼šå½“å‰ç±»ä¸­æ‰€æœ‰çš„æ–¹æ³•éƒ½äº¤ç”±springè¿›è¡Œäº‹åŠ¡ç®¡ç†</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨ä¸šåŠ¡æ–¹æ³•saveä¸ŠåŠ ä¸Š <code>@Transactional</code> æ¥æ§åˆ¶äº‹åŠ¡ ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Emp emp)</span> &#123;</span><br><span class="line">    <span class="comment">//1.è¡¥å…¨åŸºç¡€å±æ€§</span></span><br><span class="line">    emp.setCreateTime(LocalDateTime.now());</span><br><span class="line">    emp.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    <span class="comment">//2.ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    empMapper.insert(emp);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. ä¿å­˜å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ - æ‰¹é‡</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">empId</span> <span class="operator">=</span> emp.getId();</span><br><span class="line">    List&lt;EmpExpr&gt; exprList = emp.getExprList();</span><br><span class="line">    <span class="keyword">if</span>(!CollectionUtils.isEmpty(exprList))&#123;</span><br><span class="line">        exprList.forEach(empExpr -&gt; empExpr.setEmpId(empId));</span><br><span class="line">        empExprMapper.insertBatch(exprList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@Transactionalæ³¨è§£ï¼šæˆ‘ä»¬ä¸€èˆ¬ä¼šåœ¨ä¸šåŠ¡å±‚å½“ä¸­æ¥æ§åˆ¶äº‹åŠ¡ï¼Œå› ä¸ºåœ¨ä¸šåŠ¡å±‚å½“ä¸­ï¼Œä¸€ä¸ªä¸šåŠ¡åŠŸèƒ½å¯èƒ½ä¼šåŒ…å«å¤šä¸ªæ•°æ®è®¿é—®çš„æ“ä½œã€‚åœ¨ä¸šåŠ¡å±‚æ¥æ§åˆ¶äº‹åŠ¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å¤šä¸ªæ•°æ®è®¿é—®æ“ä½œæ§åˆ¶åœ¨ä¸€ä¸ªäº‹åŠ¡èŒƒå›´å†…ã€‚</p>
<p>è¯´æ˜ï¼šå¯ä»¥åœ¨<code>application.yml</code>é…ç½®æ–‡ä»¶ä¸­å¼€å¯äº‹åŠ¡ç®¡ç†æ—¥å¿—ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ§åˆ¶çœ‹åˆ°å’Œäº‹åŠ¡ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯äº†</p>
<figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#springäº‹åŠ¡ç®¡ç†æ—¥å¿—</span></span><br><span class="line"><span class="attribute">logging</span><span class="punctuation">: </span></span><br><span class="line">  <span class="attribute">level</span><span class="punctuation">: </span></span><br><span class="line">    <span class="attribute">org.springframework.jdbc.support.JdbcTransactionManager</span><span class="punctuation">:</span> <span class="string">debug</span></span><br></pre></td></tr></table></figure>
<h4 id="3-4-3Transactionalçš„ä¸¤ä¸ªé‡è¦å±æ€§åŠç›¸å…³çŸ¥è¯†ç‚¹">3.4.3Transactionalçš„ä¸¤ä¸ªé‡è¦å±æ€§åŠç›¸å…³çŸ¥è¯†ç‚¹</h4>
<p>ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼šSpringçš„@Transactionalä¼šé€šè¿‡set autocommit=0åœ¨è¿æ¥å¼€å§‹æ—¶å…³é—­è‡ªåŠ¨æäº¤æ¥ç¦ç”¨MySQLçš„é»˜è®¤è‡ªåŠ¨æäº¤(autocommit)æ¨¡å¼ã€‚</p>
<p>è¿™é‡Œä¸»è¦ä»‹ç»@Transactionalæ³¨è§£å½“ä¸­çš„ä¸¤ä¸ªå¸¸è§çš„å±æ€§ï¼š</p>
<ul>
<li>å¼‚å¸¸å›æ»šçš„å±æ€§ï¼š<code>rollbackFor</code></li>
<li>äº‹åŠ¡ä¼ æ’­è¡Œä¸ºï¼š<code>propagation</code></li>
</ul>
<p>1.<code>rollbackFor</code></p>
<p>æˆ‘ä»¬åœ¨ä¹‹å‰ç¼–å†™çš„ä¸šåŠ¡æ–¹æ³•ä¸Šæ·»åŠ äº†@Transactionalæ³¨è§£ï¼Œæ¥å®ç°äº‹åŠ¡ç®¡ç†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Emp emp)</span> &#123;</span><br><span class="line">    <span class="comment">//1.è¡¥å…¨åŸºç¡€å±æ€§</span></span><br><span class="line">    emp.setCreateTime(LocalDateTime.now());</span><br><span class="line">    emp.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    <span class="comment">//2.ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    empMapper.insert(emp);</span><br><span class="line">        </span><br><span class="line">    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//3. ä¿å­˜å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ - æ‰¹é‡</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">empId</span> <span class="operator">=</span> emp.getId();</span><br><span class="line">    List&lt;EmpExpr&gt; exprList = emp.getExprList();</span><br><span class="line">    <span class="keyword">if</span>(!CollectionUtils.isEmpty(exprList))&#123;</span><br><span class="line">        exprList.forEach(empExpr -&gt; empExpr.setEmpId(empId));</span><br><span class="line">        empExprMapper.insertBatch(exprList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä¸šåŠ¡åŠŸèƒ½saveæ–¹æ³•åœ¨è¿è¡Œæ—¶ï¼Œä¼šå¼•å‘é™¤0çš„ç®—æœ¯è¿ç®—å¼‚å¸¸(è¿è¡Œæ—¶å¼‚å¸¸)ï¼Œå‡ºç°å¼‚å¸¸ä¹‹åï¼Œç”±äºæˆ‘ä»¬åœ¨æ–¹æ³•ä¸ŠåŠ äº†<code>@Transactional</code>æ³¨è§£è¿›è¡Œäº‹åŠ¡ç®¡ç†ï¼Œæ‰€ä»¥å‘ç”Ÿå¼‚å¸¸ä¼šæ‰§è¡Œrollbackå›æ»šæ“ä½œï¼Œä»è€Œä¿è¯äº‹åŠ¡æ“ä½œå‰åæ•°æ®æ˜¯ä¸€è‡´çš„ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬åœ¨åšä¸€ä¸ªæµ‹è¯•ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸šåŠ¡åŠŸèƒ½ä»£ç ï¼Œåœ¨æ¨¡æ‹Ÿå¼‚å¸¸çš„ä½ç½®ä¸Šç›´æ¥æŠ›å‡ºExceptionå¼‚å¸¸ï¼ˆç¼–è¯‘æ—¶å¼‚å¸¸ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Emp emp)</span> &#123;</span><br><span class="line">    <span class="comment">//1.è¡¥å…¨åŸºç¡€å±æ€§</span></span><br><span class="line">    emp.setCreateTime(LocalDateTime.now());</span><br><span class="line">    emp.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    <span class="comment">//2.ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    empMapper.insert(emp);</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿï¼šå¼‚å¸¸å‘ç”Ÿ</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;å‡ºç°å¼‚å¸¸äº†~~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//3. ä¿å­˜å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ - æ‰¹é‡</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">empId</span> <span class="operator">=</span> emp.getId();</span><br><span class="line">    List&lt;EmpExpr&gt; exprList = emp.getExprList();</span><br><span class="line">    <span class="keyword">if</span>(!CollectionUtils.isEmpty(exprList))&#123;</span><br><span class="line">        exprList.forEach(empExpr -&gt; empExpr.setEmpId(empId));</span><br><span class="line">        empExprMapper.insertBatch(exprList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>è¯´æ˜ï¼šåœ¨serviceä¸­å‘ä¸ŠæŠ›å‡ºä¸€ä¸ªExceptionç¼–è¯‘æ—¶å¼‚å¸¸ä¹‹åï¼Œç”±äºæ˜¯controllerè°ƒç”¨serviceï¼Œæ‰€ä»¥åœ¨controllerä¸­è¦æœ‰å¼‚å¸¸å¤„ç†ä»£ç ï¼Œæ­¤æ—¶æˆ‘ä»¬é€‰æ‹©åœ¨controllerä¸­ç»§ç»­æŠŠå¼‚å¸¸å‘ä¸ŠæŠ›ã€‚</p>
</blockquote>
<p>é‡æ–°å¯åŠ¨æœåŠ¡åï¼Œæ‰“å¼€Apifoxè¿›è¡Œæµ‹è¯•ï¼Œè¯·æ±‚æ·»åŠ å‘˜å·¥çš„æ¥å£ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-389-1024x497.png" alt="img"></p>
<p>é€šè¿‡Apifoxè¿”å›çš„ç»“æœï¼Œæˆ‘ä»¬çœ‹åˆ°æŠ›å‡ºå¼‚å¸¸äº†ã€‚ç„¶åæˆ‘ä»¬åœ¨å›åˆ°IDEAçš„æ§åˆ¶å°æ¥çœ‹ä¸€ä¸‹ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-388-1024x435.png" alt="img"></p>
<p>æˆ‘ä»¬çœ‹åˆ°æ•°æ®åº“çš„äº‹åŠ¡å±…ç„¶æäº¤äº†ï¼Œå¹¶æ²¡æœ‰è¿›è¡Œå›æ»šã€‚</p>
<p>é€šè¿‡ä»¥ä¸Šæµ‹è¯•å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š<strong>é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰å‡ºç°RuntimeException(è¿è¡Œæ—¶å¼‚å¸¸)æ‰ä¼šå›æ»šäº‹åŠ¡ã€‚</strong></p>
<p>å‡å¦‚æˆ‘ä»¬æƒ³è®©æ‰€æœ‰çš„å¼‚å¸¸éƒ½å›æ»šï¼Œéœ€è¦æ¥é…ç½®@Transactionalæ³¨è§£å½“ä¸­çš„rollbackForå±æ€§ï¼Œé€šè¿‡rollbackForè¿™ä¸ªå±æ€§å¯ä»¥æŒ‡å®šå‡ºç°ä½•ç§å¼‚å¸¸ç±»å‹å›æ»šäº‹åŠ¡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional(rollbackFor = Exception.class)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Emp emp)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">//1.è¡¥å…¨åŸºç¡€å±æ€§</span></span><br><span class="line">    emp.setCreateTime(LocalDateTime.now());</span><br><span class="line">    emp.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    <span class="comment">//2.ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    empMapper.insert(emp);</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//int i = 1/0;</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="literal">true</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;å‡ºå¼‚å¸¸å•¦....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//3. ä¿å­˜å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ - æ‰¹é‡</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">empId</span> <span class="operator">=</span> emp.getId();</span><br><span class="line">    List&lt;EmpExpr&gt; exprList = emp.getExprList();</span><br><span class="line">    <span class="keyword">if</span>(!CollectionUtils.isEmpty(exprList))&#123;</span><br><span class="line">        exprList.forEach(empExpr -&gt; empExpr.setEmpId(empId));</span><br><span class="line">        empExprMapper.insertBatch(exprList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œæµ‹è¯•æ–°å¢å‘˜å·¥çš„æ“ä½œï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-386-1024x498.png" alt="img"></p>
<p>æ§åˆ¶å°æ—¥å¿—ï¼Œå¯ä»¥çœ‹åˆ°å› ä¸ºå‡ºç°äº†å¼‚å¸¸åˆè¿›è¡Œäº†äº‹åŠ¡å›æ»šã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-387-1024x406.png" alt="img"></p>
<p><strong>ç»“è®ºï¼š</strong></p>
<ul>
<li>åœ¨Springçš„äº‹åŠ¡ç®¡ç†ä¸­ï¼Œé»˜è®¤åªæœ‰è¿è¡Œæ—¶å¼‚å¸¸ RuntimeExceptionæ‰ä¼šå›æ»šã€‚</li>
<li>å¦‚æœè¿˜éœ€è¦å›æ»šæŒ‡å®šç±»å‹çš„å¼‚å¸¸ï¼Œå¯ä»¥é€šè¿‡rollbackForå±æ€§æ¥æŒ‡å®šã€‚</li>
</ul>
<p>2.propagation</p>
<p>propagationï¼Œè¿™ä¸ªå±æ€§æ˜¯ç”¨æ¥é…ç½®äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºçš„ã€‚</p>
<p>ä»€ä¹ˆæ˜¯äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºå‘¢ï¼Ÿ</p>
<ul>
<li>å°±æ˜¯å½“ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è¢«å¦ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªäº‹åŠ¡æ–¹æ³•åº”è¯¥å¦‚ä½•è¿›è¡Œäº‹åŠ¡æ§åˆ¶ã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼šä¸¤ä¸ªäº‹åŠ¡æ–¹æ³•ï¼Œä¸€ä¸ªAæ–¹æ³•ï¼Œä¸€ä¸ªBæ–¹æ³•ã€‚åœ¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¸Šéƒ½æ·»åŠ äº†@Transactionalæ³¨è§£ï¼Œå°±ä»£è¡¨è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å…·æœ‰äº‹åŠ¡ï¼Œè€Œåœ¨Aæ–¹æ³•å½“ä¸­åˆå»è°ƒç”¨äº†Bæ–¹æ³•ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-464-1024x204.png" alt="img"></p>
<p>æ‰€è°“äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼ŒæŒ‡çš„å°±æ˜¯åœ¨Aæ–¹æ³•è¿è¡Œçš„æ—¶å€™ï¼Œé¦–å…ˆä¼šå¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œåœ¨Aæ–¹æ³•å½“ä¸­åˆè°ƒç”¨äº†Bæ–¹æ³•ï¼Œ Bæ–¹æ³•è‡ªèº«ä¹Ÿå…·æœ‰äº‹åŠ¡ï¼Œé‚£ä¹ˆBæ–¹æ³•åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œåˆ°åº•æ˜¯åŠ å…¥åˆ°Aæ–¹æ³•çš„äº‹åŠ¡å½“ä¸­æ¥ï¼Œè¿˜æ˜¯Bæ–¹æ³•åœ¨è¿è¡Œçš„æ—¶å€™æ–°å»ºä¸€ä¸ªäº‹åŠ¡ï¼Ÿè¿™ä¸ªå°±æ¶‰åŠåˆ°äº†äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºã€‚</p>
<p>æˆ‘ä»¬è¦æƒ³æ§åˆ¶äº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºï¼Œåœ¨@Transactionalæ³¨è§£çš„åé¢æŒ‡å®šä¸€ä¸ªå±æ€§propagationï¼Œé€šè¿‡ propagation å±æ€§æ¥æŒ‡å®šä¼ æ’­è¡Œä¸ºã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ä¸‹å¸¸è§çš„äº‹åŠ¡ä¼ æ’­è¡Œä¸ºã€‚</p>
<table>
<thead>
<tr>
<th>å±æ€§å€¼</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>REQUIRED</td>
<td>ã€é»˜è®¤å€¼ã€‘éœ€è¦äº‹åŠ¡ï¼Œæœ‰åˆ™åŠ å…¥ï¼Œæ— åˆ™åˆ›å»ºæ–°äº‹åŠ¡</td>
</tr>
<tr>
<td>REQUIRES_NEW</td>
<td>éœ€è¦æ–°äº‹åŠ¡ï¼Œæ— è®ºæœ‰æ— ï¼Œæ€»æ˜¯åˆ›å»ºæ–°äº‹åŠ¡</td>
</tr>
<tr>
<td>SUPPORTS</td>
<td>æ”¯æŒäº‹åŠ¡ï¼Œæœ‰åˆ™åŠ å…¥ï¼Œæ— åˆ™åœ¨æ— äº‹åŠ¡çŠ¶æ€ä¸­è¿è¡Œ</td>
</tr>
<tr>
<td>NOT_SUPPORTED</td>
<td>ä¸æ”¯æŒäº‹åŠ¡ï¼Œåœ¨æ— äº‹åŠ¡çŠ¶æ€ä¸‹è¿è¡Œ,å¦‚æœå½“å‰å­˜åœ¨å·²æœ‰äº‹åŠ¡,åˆ™æŒ‚èµ·å½“å‰äº‹åŠ¡</td>
</tr>
<tr>
<td>MANDATORY</td>
<td>å¿…é¡»æœ‰äº‹åŠ¡ï¼Œå¦åˆ™æŠ›å¼‚å¸¸</td>
</tr>
<tr>
<td>NEVER</td>
<td>å¿…é¡»æ²¡äº‹åŠ¡ï¼Œå¦åˆ™æŠ›å¼‚å¸¸</td>
</tr>
<tr>
<td>â€¦</td>
<td></td>
</tr>
</tbody>
</table>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±é€šè¿‡ä¸€ä¸ªæ¡ˆä¾‹æ¥æ¼”ç¤ºä¸‹äº‹åŠ¡ä¼ æ’­è¡Œä¸ºpropagationå±æ€§çš„ä½¿ç”¨ã€‚</p>
<p>**éœ€æ±‚ï¼š**åœ¨æ–°å¢å‘˜å·¥ä¿¡æ¯æ—¶ï¼Œæ— è®ºæ˜¯æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œéƒ½è¦è®°å½•æ“ä½œæ—¥å¿—ã€‚</p>
<p><strong>æ­¥éª¤ï¼š</strong></p>
<ol>
<li>å‡†å¤‡æ—¥å¿—è¡¨ emp_logã€å®ä½“ç±»EmpLogã€Mapperæ¥å£EmpLogMapper</li>
<li>åœ¨æ–°å¢å‘˜å·¥æ—¶è®°å½•æ—¥å¿—</li>
</ol>
<p><strong>å‡†å¤‡å·¥ä½œï¼š</strong></p>
<p>1). åˆ›å»ºæ•°æ®åº“è¡¨ <code>emp_log</code> æ—¥å¿—è¡¨</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- åˆ›å»ºå‘˜å·¥æ—¥å¿—è¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> emp_log(</span><br><span class="line">    id <span class="type">int</span> unsigned <span class="keyword">primary key</span> auto_increment <span class="keyword">comment</span> <span class="string">&#x27;ID, ä¸»é”®&#x27;</span>,</span><br><span class="line">    operate_time datetime <span class="keyword">comment</span> <span class="string">&#x27;æ“ä½œæ—¶é—´&#x27;</span>,</span><br><span class="line">    <span class="keyword">info</span> <span class="type">varchar</span>(<span class="number">2000</span>) <span class="keyword">comment</span> <span class="string">&#x27;æ—¥å¿—ä¿¡æ¯&#x27;</span></span><br><span class="line">) <span class="keyword">comment</span> <span class="string">&#x27;å‘˜å·¥æ—¥å¿—è¡¨&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>2). å¼•å…¥èµ„æ–™ä¸­æä¾›çš„å®ä½“ç±»ï¼šEmpLog</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Data</span></span><br><span class="line"><span class="variable">@NoArgsConstructor</span></span><br><span class="line"><span class="variable">@AllArgsConstructor</span></span><br><span class="line">public class EmpLog &#123;</span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Integer</span> <span class="selector-tag">id</span>; <span class="comment">//ID</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">LocalDateTime</span> <span class="selector-tag">operateTime</span>; <span class="comment">//æ“ä½œæ—¶é—´</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">info</span>; <span class="comment">//è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3). å¼•å…¥èµ„æ–™ä¸­æä¾›çš„Mapperæ¥å£ï¼šEmpLogMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">EmpLogMapper</span> &#123;</span><br><span class="line">        <span class="comment">//æ’å…¥æ—¥å¿—</span></span><br><span class="line">    <span class="meta">@Insert(&quot;insert into emp_log (operate_time, info) values (#&#123;operateTime&#125;, #&#123;info&#125;)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(EmpLog empLog)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4). å¼•å…¥èµ„æ–™ä¸­æä¾›çš„ä¸šåŠ¡æ¥å£ï¼šEmpLogService</p>
<figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="symbol">EmpLogService</span> &#123;</span><br><span class="line">        <span class="comment">//è®°å½•æ–°å¢å‘˜å·¥æ—¥å¿—</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> insertLog(EmpLog empLog);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5). å¼•å…¥èµ„æ–™ä¸­æä¾›çš„ä¸šåŠ¡å®ç°ç±»ï¼šEmpLogServiceImpl</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Service</span></span><br><span class="line">public class EmpLogServiceImpl implements EmpLogService &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable">@Autowired</span></span><br><span class="line">    private EmpLogMapper empLogMapper;</span><br><span class="line"></span><br><span class="line">    <span class="variable">@Transactional</span></span><br><span class="line">    <span class="variable">@Override</span></span><br><span class="line">    public void <span class="built_in">insertLog</span>(EmpLog empLog) &#123;</span><br><span class="line">        <span class="selector-tag">empLogMapper</span><span class="selector-class">.insert</span>(empLog);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä»£ç å®ç°:</strong></p>
<p>ä¸šåŠ¡å®ç°ç±»ï¼šEmpServiceImpl</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> EmpMapper empMapper;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> EmpExprMapper empExprMapper;</span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> EmpLogService empLogService;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Transactional(rollbackFor = &#123;Exception.class&#125;)</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">save</span><span class="params">(Emp emp)</span> &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//1.è¡¥å…¨åŸºç¡€å±æ€§</span></span><br><span class="line">        emp.setCreateTime(LocalDateTime.now());</span><br><span class="line">        emp.setUpdateTime(LocalDateTime.now());</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2.ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">        empMapper.insert(emp);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>/<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. ä¿å­˜å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ - æ‰¹é‡</span></span><br><span class="line">        <span class="type">Integer</span> <span class="variable">empId</span> <span class="operator">=</span> emp.getId();</span><br><span class="line">        List&lt;EmpExpr&gt; exprList = emp.getExprList();</span><br><span class="line">        <span class="keyword">if</span>(!CollectionUtils.isEmpty(exprList))&#123;</span><br><span class="line">            exprList.forEach(empExpr -&gt; empExpr.setEmpId(empId));</span><br><span class="line">            empExprMapper.insertBatch(exprList);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="comment">//è®°å½•æ“ä½œæ—¥å¿—</span></span><br><span class="line">        <span class="type">EmpLog</span> <span class="variable">empLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EmpLog</span>(<span class="literal">null</span>, LocalDateTime.now(), emp.toString());</span><br><span class="line">        empLogService.insertLog(empLog);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•:</strong></p>
<p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæµ‹è¯•æ–°å¢å‘˜å·¥æ“ä½œ ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ§åˆ¶å°ä¸­è¾“å‡ºçš„æ—¥å¿—ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-390-1024x424.png" alt="img"></p>
<p>ä»æ—¥å¿—ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š</p>
<ul>
<li>æ‰§è¡Œäº†æ’å…¥å‘˜å·¥æ•°æ®çš„æ“ä½œ</li>
<li>æ‰§è¡Œäº†æ’å…¥æ—¥å¿—æ“ä½œ</li>
<li>ç¨‹åºå‘ç”ŸExceptionå¼‚å¸¸</li>
<li>æ‰§è¡Œäº‹åŠ¡å›æ»šï¼ˆä¿å­˜å‘˜å·¥æ•°æ®ã€æ’å…¥æ“ä½œæ—¥å¿— å› ä¸ºåœ¨ä¸€ä¸ªäº‹åŠ¡èŒƒå›´å†…ï¼Œä¸¤ä¸ªæ“ä½œéƒ½ä¼šè¢«å›æ»šï¼‰</li>
</ul>
<p>ç„¶ååœ¨ <code>emp_log</code> è¡¨ä¸­æ²¡æœ‰è®°å½•æ—¥å¿—æ•°æ® ã€‚</p>
<p><strong>åŸå› åˆ†æ:</strong></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦æ¥åˆ†æä¸€ä¸‹å…·ä½“æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„æ—¥å¿—æ²¡æœ‰æˆåŠŸçš„è®°å½•ã€‚</p>
<ul>
<li>åœ¨æ‰§è¡Œ <code>save</code> æ–¹æ³•æ—¶å¼€å¯äº†ä¸€ä¸ªäº‹åŠ¡</li>
<li>å½“æ‰§è¡Œ <code>empLogService.insertLog</code> æ“ä½œæ—¶ï¼Œ<code>insertLog</code>è®¾ç½®çš„äº‹åŠ¡ä¼ æ’­è¡Œæ˜¯é»˜è®¤å€¼REQUIREDï¼Œè¡¨ç¤ºæœ‰äº‹åŠ¡å°±åŠ å…¥ï¼Œæ²¡æœ‰åˆ™æ–°å»ºäº‹åŠ¡</li>
<li>æ­¤æ—¶ï¼š<code>save</code> å’Œ <code>insertLog</code> æ“ä½œä½¿ç”¨äº†åŒä¸€ä¸ªäº‹åŠ¡ï¼ŒåŒä¸€ä¸ªäº‹åŠ¡ä¸­çš„å¤šä¸ªæ“ä½œï¼Œè¦ä¹ˆåŒæ—¶æˆåŠŸï¼Œè¦ä¹ˆåŒæ—¶å¤±è´¥ï¼Œæ‰€ä»¥å½“å¼‚å¸¸å‘ç”Ÿæ—¶è¿›è¡Œäº‹åŠ¡å›æ»šï¼Œå°±ä¼šå›æ»š <code>save</code> å’Œ <code>insertLog</code> æ“ä½œ</li>
</ul>
<p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong></p>
<p>åœ¨<code>EmpLogServiceImpl</code>ç±»ä¸­insertLogæ–¹æ³•ä¸Šï¼Œæ·»åŠ  <code>@Transactional(propagation = Propagation.REQUIRES_NEW)</code></p>
<p>Propagation.REQUIRES_NEW ï¼šä¸è®ºæ˜¯å¦æœ‰äº‹åŠ¡ï¼Œéƒ½åˆ›å»ºæ–°äº‹åŠ¡ ï¼Œè¿è¡Œåœ¨ä¸€ä¸ªç‹¬ç«‹çš„äº‹åŠ¡ä¸­ã€‚</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Service</span></span><br><span class="line">public class EmpLogServiceImpl implements EmpLogService &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable">@Autowired</span></span><br><span class="line">    private EmpLogMapper empLogMapper;</span><br><span class="line"></span><br><span class="line">    <span class="variable">@Transactional</span>(propagation = Propagation.REQUIRES_NEW)</span><br><span class="line">    <span class="variable">@Override</span></span><br><span class="line">    public void <span class="built_in">insertLog</span>(EmpLog empLog) &#123;</span><br><span class="line">        <span class="selector-tag">empLogMapper</span><span class="selector-class">.insert</span>(empLog);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯SpringBootæœåŠ¡ï¼Œå†æ¬¡æµ‹è¯• æ–°å¢å‘˜å·¥çš„æ“ä½œ ï¼Œä¼šçœ‹åˆ°å…·ä½“çš„æ—¥å¿—å¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-391-1024x651.png" alt="img"></p>
<p>é‚£æ­¤æ—¶ï¼Œ<code>EmpServiceImpl</code> ä¸­çš„ <code>save</code> æ–¹æ³•è¿è¡Œæ—¶ï¼Œä¼šå¼€å¯ä¸€ä¸ªäº‹åŠ¡ã€‚ å½“è°ƒç”¨ <code>empLogService.insertLog(empLog)</code> æ—¶ï¼Œä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„äº‹åŠ¡ï¼Œé‚£æ­¤æ—¶ï¼Œå½“ <code>insertLog</code> æ–¹æ³•è¿è¡Œå®Œæ¯•ä¹‹åï¼Œäº‹åŠ¡å°±å·²ç»æäº¤äº†ã€‚ å³ä½¿å¤–éƒ¨çš„äº‹åŠ¡å‡ºç°å¼‚å¸¸ï¼Œå†…éƒ¨å·²ç»æäº¤çš„äº‹åŠ¡ï¼Œä¹Ÿä¸ä¼šå›æ»šäº†ï¼Œå› ä¸ºæ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„äº‹åŠ¡ã€‚</p>
<p>åˆ°æ­¤äº‹åŠ¡ä¼ æ’­è¡Œä¸ºå·²æ¼”ç¤ºå®Œæˆï¼Œäº‹åŠ¡çš„ä¼ æ’­è¡Œä¸ºæˆ‘ä»¬åªéœ€è¦æŒæ¡ä¸¤ä¸ªï¼šREQUIREDã€REQUIRES_NEWã€‚</p>
<ul>
<li>**REQUIREDï¼š**å¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ç”¨è¯¥ä¼ æ’­è¡Œä¸ºå³å¯ã€‚</li>
<li>**REQUIRES_NEWï¼š**å½“æˆ‘ä»¬ä¸å¸Œæœ›äº‹åŠ¡ä¹‹é—´ç›¸äº’å½±å“æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è¯¥ä¼ æ’­è¡Œä¸ºã€‚æ¯”å¦‚ï¼šä¸‹è®¢å•å‰éœ€è¦è®°å½•æ—¥å¿—ï¼Œä¸è®ºè®¢å•ä¿å­˜æˆåŠŸä¸å¦ï¼Œéƒ½éœ€è¦ä¿è¯æ—¥å¿—è®°å½•èƒ½å¤Ÿè®°å½•æˆåŠŸã€‚</li>
</ul>
<h4 id="3-4-4äº‹åŠ¡å››å¤§ç‰¹æ€§">3.4.4äº‹åŠ¡å››å¤§ç‰¹æ€§</h4>
<p>äº‹åŠ¡æœ‰å“ªäº›ç‰¹æ€§ï¼Ÿ</p>
<ul>
<li>åŸå­æ€§ï¼ˆAtomicityï¼‰ï¼šäº‹åŠ¡æ˜¯ä¸å¯åˆ†å‰²çš„æœ€å°å•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</li>
<li>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰ï¼šäº‹åŠ¡å®Œæˆæ—¶ï¼Œå¿…é¡»ä½¿æ‰€æœ‰çš„æ•°æ®éƒ½ä¿æŒä¸€è‡´çŠ¶æ€ã€‚</li>
<li>éš”ç¦»æ€§ï¼ˆIsolationï¼‰ï¼šæ•°æ®åº“ç³»ç»Ÿæä¾›çš„éš”ç¦»æœºåˆ¶ï¼Œä¿è¯äº‹åŠ¡åœ¨ä¸å—å¤–éƒ¨å¹¶å‘æ“ä½œå½±å“çš„ç‹¬ç«‹ç¯å¢ƒä¸‹è¿è¡Œã€‚</li>
<li>æŒä¹…æ€§ï¼ˆDurabilityï¼‰ï¼šäº‹åŠ¡ä¸€æ—¦æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…çš„ã€‚</li>
</ul>
<p>äº‹åŠ¡çš„å››å¤§ç‰¹æ€§ç®€ç§°ä¸ºï¼šACID</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-392-1024x311.png" alt="img"></p>
<p><strong>æŒä¹…æ€§ï¼ˆDurabilityï¼‰</strong>ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤æˆ–å›æ»šï¼Œå®ƒå¯¹æ•°æ®åº“çš„æ”¹å˜å°†æ˜¯æ°¸ä¹…æ€§çš„ï¼Œå“ªæ€•æ•°æ®åº“å‘ç”Ÿå¼‚å¸¸ï¼Œé‡å¯ä¹‹åæ•°æ®äº¦ç„¶å­˜åœ¨ã€‚</p>
<p><strong>åŸå­æ€§ï¼ˆAtomicityï¼‰</strong> ï¼šåŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡åŒ…è£…çš„ä¸€ç»„sqlæ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•å…ƒï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨å¤±è´¥ã€‚</p>
<p><strong>ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰</strong>ï¼šä¸€ä¸ªäº‹åŠ¡å®Œæˆä¹‹åæ•°æ®éƒ½å¿…é¡»å¤„äºä¸€è‡´æ€§çŠ¶æ€ã€‚</p>
<p>å¦‚æœäº‹åŠ¡æˆåŠŸçš„å®Œæˆï¼Œé‚£ä¹ˆæ•°æ®åº“çš„æ‰€æœ‰å˜åŒ–å°†ç”Ÿæ•ˆã€‚</p>
<p>å¦‚æœäº‹åŠ¡æ‰§è¡Œå‡ºç°é”™è¯¯ï¼Œé‚£ä¹ˆæ•°æ®åº“çš„æ‰€æœ‰å˜åŒ–å°†ä¼šè¢«å›æ»š(æ’¤é”€)ï¼Œè¿”å›åˆ°åŸå§‹çŠ¶æ€ã€‚</p>
<p><strong>éš”ç¦»æ€§ï¼ˆIsolationï¼‰</strong>ï¼šå¤šä¸ªç”¨æˆ·å¹¶å‘çš„è®¿é—®æ•°æ®åº“æ—¶ï¼Œä¸€ä¸ªç”¨æˆ·çš„äº‹åŠ¡ä¸èƒ½è¢«å…¶ä»–ç”¨æˆ·çš„äº‹åŠ¡å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘çš„äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»ã€‚</p>
<p>ä¸€ä¸ªäº‹åŠ¡çš„æˆåŠŸæˆ–è€…å¤±è´¥å¯¹äºå…¶ä»–çš„äº‹åŠ¡æ˜¯æ²¡æœ‰å½±å“ã€‚</p>
<h2 id="4-æ–‡ä»¶ä¸Šä¼ ">4.æ–‡ä»¶ä¸Šä¼ </h2>
<h3 id="4-1ç®€ä»‹">4.1ç®€ä»‹</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-394-1024x502.png" alt="img"></p>
<p>æ–‡ä»¶ä¸Šä¼ ï¼Œæ˜¯æŒ‡å°†æœ¬åœ°å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘ç­‰æ–‡ä»¶ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œä¾›å…¶ä»–ç”¨æˆ·æµè§ˆæˆ–ä¸‹è½½çš„è¿‡ç¨‹ã€‚</p>
<p>æ–‡ä»¶ä¸Šä¼ åœ¨é¡¹ç›®ä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼Œæˆ‘ä»¬ç»å¸¸å‘å¾®åšã€å‘å¾®ä¿¡æœ‹å‹åœˆéƒ½ç”¨åˆ°äº†æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ã€‚</p>
<p>ä¸Šä¼ æ–‡ä»¶çš„åŸå§‹formè¡¨å•ï¼Œè¦æ±‚è¡¨å•å¿…é¡»å…·å¤‡ä»¥ä¸‹ä¸‰ç‚¹ï¼ˆä¸Šä¼ æ–‡ä»¶é¡µé¢ä¸‰è¦ç´ ï¼‰ï¼š</p>
<ul>
<li>è¡¨å•å¿…é¡»æœ‰fileåŸŸï¼Œç”¨äºé€‰æ‹©è¦ä¸Šä¼ çš„æ–‡ä»¶</li>
<li>è¡¨å•æäº¤æ–¹å¼å¿…é¡»ä¸ºPOSTï¼šé€šå¸¸ä¸Šä¼ çš„æ–‡ä»¶ä¼šæ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ POST æäº¤æ–¹å¼</li>
<li>è¡¨å•çš„ç¼–ç ç±»å‹enctypeå¿…é¡»è¦è®¾ç½®ä¸ºï¼šmultipart/form-dataï¼šæ™®é€šé»˜è®¤çš„ç¼–ç æ ¼å¼æ˜¯ä¸é€‚åˆä¼ è¾“å¤§å‹çš„äºŒè¿›åˆ¶æ•°æ®çš„ï¼Œæ‰€ä»¥åœ¨æ–‡ä»¶ä¸Šä¼ æ—¶ï¼Œè¡¨å•çš„ç¼–ç æ ¼å¼å¿…é¡»è®¾ç½®ä¸ºmultipart/form-data</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.<span class="keyword">File</span>;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line">@Slf4j</span><br><span class="line">@RestController</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> UploadController &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**     * ä¸Šä¼ æ–‡ä»¶ - å‚æ•°åfile     */</span>@PostMapping(<span class="string">&quot;/upload&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> Result upload(String username, Integer age , MultipartFile <span class="keyword">file</span>) <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        log.info(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ï¼š&#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, username, age, <span class="keyword">file</span>);</span><br><span class="line">        <span class="keyword">if</span>(!<span class="keyword">file</span>.isEmpty())&#123;</span><br><span class="line">            <span class="keyword">file</span>.transferTo(<span class="keyword">new</span> <span class="keyword">File</span>(<span class="string">&quot;D:\\images\\&quot;</span> + <span class="keyword">file</span>.getOriginalFilename()));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨å®šä¹‰çš„æ–¹æ³•ä¸­æ¥æ”¶æäº¤è¿‡æ¥çš„æ•°æ® ï¼ˆæ–¹æ³•ä¸­çš„å½¢å‚åå’Œè¯·æ±‚å‚æ•°çš„åå­—ä¿æŒä¸€è‡´ï¼‰</p>
<ul>
<li>ç”¨æˆ·åï¼š<code>String name</code></li>
<li>å¹´é¾„ï¼š <code>Integer age</code></li>
<li>æ–‡ä»¶ï¼š <code>MultipartFile file</code></li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-395-1024x510.png" alt="img"></p>
<p>Springä¸­æä¾›äº†ä¸€ä¸ªAPIï¼šMultipartFileï¼Œä½¿ç”¨è¿™ä¸ªAPIå°±å¯ä»¥æ¥æ¥æ”¶åˆ°ä¸Šä¼ çš„æ–‡ä»¶</p>
<p><strong>é—®é¢˜1ï¼šå¦‚æœè¡¨å•é¡¹çš„åå­—å’Œæ–¹æ³•ä¸­å½¢å‚åä¸ä¸€è‡´ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ</strong></p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Result <span class="title">upload</span><span class="params">(<span class="type">String</span> username, </span></span></span><br><span class="line"><span class="params"><span class="function">                        Integer age,  </span></span></span><br><span class="line"><span class="params"><span class="function">                        MultipartFile image)</span> <span class="comment">//imageå½¢å‚åå’Œè¯·æ±‚å‚æ•°åfileä¸ä¸€è‡´</span></span></span><br></pre></td></tr></table></figure>
<p><strong>è§£å†³ï¼šä½¿ç”¨@RequestParamæ³¨è§£è¿›è¡Œå‚æ•°ç»‘å®š</strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">public</span> <span class="selector-tag">Result</span> <span class="selector-tag">upload</span>(String username,</span><br><span class="line">                     Integer age, </span><br><span class="line">                     <span class="variable">@RequestParam</span>(<span class="string">&quot;file&quot;</span>) MultipartFile image)</span><br></pre></td></tr></table></figure>
<h3 id="4-2æœ¬åœ°å­˜å‚¨">4.2æœ¬åœ°å­˜å‚¨</h3>
<p>ä¸Šé¢æˆ‘ä»¬å·²ç»å®Œæˆäº†æ–‡ä»¶ä¸Šä¼ æœ€åŸºæœ¬çš„åŠŸèƒ½å®ç°ï¼Œå·²ç»å¯ä»¥åœ¨æœåŠ¡ç«¯æ¥æ”¶åˆ°ä¸Šä¼ çš„æ–‡ä»¶ï¼Œå¹¶å°†æ–‡ä»¶ä¿å­˜åœ¨æœ¬åœ°æœåŠ¡å™¨çš„ç£ç›˜ç›®å½•ä¸­äº†ã€‚ ä½†æ˜¯æˆ‘ä»¬æµ‹è¯•çš„æ—¶å€™å‘ç°ï¼Œå¦‚æœä¸Šä¼ çš„æ–‡ä»¶åç›¸åŒï¼Œåé¢ä¸Šä¼ çš„ä¼šè¦†ç›–å‰é¢ä¸Šä¼ çš„æ–‡ä»¶ï¼Œé‚£æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±è¦æ¥ä¼˜åŒ–è¿™ä¸€å—çš„åŠŸèƒ½ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.pojo.Result;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">UPLOAD_DIR</span> <span class="operator">=</span> <span class="string">&quot;D:/images/&quot;</span>;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ä¸Šä¼ æ–‡ä»¶ - å‚æ•°åfile</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(String username, Integer age,MultipartFile file)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        log.info(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ï¼š&#123;&#125;, &#123;&#125;, &#123;&#125;&quot;</span>, username, age, file);</span><br><span class="line">        <span class="keyword">if</span> (!file.isEmpty()) &#123;</span><br><span class="line">            <span class="comment">// ç”Ÿæˆå”¯ä¸€æ–‡ä»¶å</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">            <span class="type">String</span> <span class="variable">extName</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));<span class="comment">//è·å–åç¼€å</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">uniqueFileName</span> <span class="operator">=</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>) + extName;</span><br><span class="line">            <span class="comment">// æ‹¼æ¥å®Œæ•´çš„æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">targetFile</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(UPLOAD_DIR + uniqueFileName);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// å¦‚æœç›®æ ‡ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒ</span></span><br><span class="line">            <span class="keyword">if</span> (!targetFile.getParentFile().exists()) &#123;</span><br><span class="line">                targetFile.getParentFile().mkdirs();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// ä¿å­˜æ–‡ä»¶</span></span><br><span class="line">            file.transferTo(targetFile);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>MultipartFile å¸¸è§æ–¹æ³•ï¼š</strong></p>
<ul>
<li><code>String getOriginalFilename();</code> //è·å–åŸå§‹æ–‡ä»¶å</li>
<li><code>void transferTo(File dest);</code> //å°†æ¥æ”¶çš„æ–‡ä»¶è½¬å­˜åˆ°ç£ç›˜æ–‡ä»¶ä¸­</li>
<li><code>long getSize();</code> //è·å–æ–‡ä»¶çš„å¤§å°ï¼Œå•ä½ï¼šå­—èŠ‚</li>
<li><code>byte[] getBytes();</code> //è·å–æ–‡ä»¶å†…å®¹çš„å­—èŠ‚æ•°ç»„</li>
<li><code>InputStream getInputStream();</code> //è·å–æ¥æ”¶åˆ°çš„æ–‡ä»¶å†…å®¹çš„è¾“å…¥æµ</li>
</ul>
<p>åˆ©ç”¨ <code>Apifox</code> æµ‹è¯•ï¼Œæ³¨æ„ï¼šè¯·æ±‚å‚æ•°åå’Œcontrolleræ–¹æ³•å½¢å‚åä¿æŒä¸€è‡´ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-396-1024x582.png" alt="img"></p>
<p>é€šè¿‡ <code>Apifox</code> æµ‹è¯•ï¼Œæˆ‘ä»¬å‘ç°æ–‡ä»¶ä¸Šä¼ æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚</p>
<p>åœ¨è§£å†³äº†æ–‡ä»¶åå”¯ä¸€æ€§çš„é—®é¢˜åï¼Œæˆ‘ä»¬å†æ¬¡ä¸Šä¼ ä¸€ä¸ªè¾ƒå¤§çš„æ–‡ä»¶(è¶…å‡º1M)æ—¶å‘ç°ï¼Œåç«¯ç¨‹åºæŠ¥é”™ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-397-1024x183.png" alt="img"></p>
<p>æŠ¥é”™åŸå› å‘¢ï¼Œæ˜¯å› ä¸ºï¼šåœ¨SpringBootä¸­ï¼Œæ–‡ä»¶ä¸Šä¼ æ—¶é»˜è®¤å•ä¸ªæ–‡ä»¶æœ€å¤§å¤§å°ä¸º1M</p>
<p>é‚£ä¹ˆå¦‚æœéœ€è¦ä¸Šä¼ å¤§æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ <code>application.properties</code> è¿›è¡Œå¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">spring</span>ï¼š</span><br><span class="line">  servlet:</span><br><span class="line">    multipart:</span><br><span class="line">      <span class="keyword">max</span>-<span class="keyword">file</span>-<span class="keyword">size</span>: <span class="number">10</span>MB</span><br><span class="line">      <span class="keyword">max</span>-request-<span class="keyword">size</span>: <span class="number">100</span>MB</span><br></pre></td></tr></table></figure>
<p>ä½†å¦‚æœç›´æ¥å­˜å‚¨åœ¨æœåŠ¡å™¨çš„ç£ç›˜ç›®å½•ä¸­ï¼Œå­˜åœ¨ä»¥ä¸‹ç¼ºç‚¹ï¼š</p>
<ul>
<li>ä¸å®‰å…¨ï¼šç£ç›˜å¦‚æœæŸåï¼Œæ‰€æœ‰çš„æ–‡ä»¶å°±ä¼šä¸¢å¤±</li>
<li>å®¹é‡æœ‰é™ï¼šå¦‚æœå­˜å‚¨å¤§é‡çš„å›¾ç‰‡ï¼Œç£ç›˜ç©ºé—´æœ‰é™(ç£ç›˜ä¸å¯èƒ½æ— é™åˆ¶æ‰©å®¹)</li>
<li>æ— æ³•ç›´æ¥è®¿é—®</li>
</ul>
<h3 id="3-3é˜¿é‡Œäº‘OSSï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰">3.3é˜¿é‡Œäº‘OSSï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰</h3>
<h4 id="3-3-1ä»‹ç»">3.3.1ä»‹ç»</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-346-1024x135.png" alt="img"></p>
<p>**Bucketï¼š**å­˜å‚¨ç©ºé—´æ˜¯ç”¨æˆ·ç”¨äºå­˜å‚¨å¯¹è±¡ï¼ˆObjectï¼Œå°±æ˜¯æ–‡ä»¶ï¼‰çš„å®¹å™¨ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½å¿…é¡»éš¶å±äºæŸä¸ªå­˜å‚¨ç©ºé—´ã€‚</p>
<p>å€ŸåŠ©AIå¸®æˆ‘ç”Ÿæˆäº†ä¸€ä¸ªå·¥å…·ç±»å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.ClientException;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSS;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSClientBuilder;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.OSSException;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.common.auth.CredentialsProviderFactory;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.common.auth.EnvironmentVariableCredentialsProvider;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.model.OSSObject;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.model.ObjectListing;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.model.OSSObjectSummary;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.model.PutObjectRequest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OssJavaSdkQuickStart</span> &#123;</span><br><span class="line">    <span class="comment">/** ç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ Bucket åç§° */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">generateUniqueBucketName</span><span class="params">(String prefix)</span> &#123;</span><br><span class="line">        <span class="comment">// è·å–å½“å‰æ—¶é—´æˆ³</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">timestamp</span> <span class="operator">=</span> String.valueOf(System.currentTimeMillis());</span><br><span class="line">        <span class="comment">// ç”Ÿæˆä¸€ä¸ª 0 åˆ° 9999 ä¹‹é—´çš„éšæœºæ•°</span></span><br><span class="line">        <span class="type">Random</span> <span class="variable">random</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">randomNum</span> <span class="operator">=</span> random.nextInt(<span class="number">10000</span>); <span class="comment">// ç”Ÿæˆä¸€ä¸ª 0 åˆ° 9999 ä¹‹é—´çš„éšæœºæ•°</span></span><br><span class="line">        <span class="comment">// è¿æ¥ä»¥å½¢æˆä¸€ä¸ªå”¯ä¸€çš„ Bucket åç§°</span></span><br><span class="line">        <span class="keyword">return</span> prefix + <span class="string">&quot;-&quot;</span> + timestamp + <span class="string">&quot;-&quot;</span> + randomNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> com.aliyuncs.exceptions.ClientException &#123;</span><br><span class="line">        <span class="comment">// è®¾ç½® OSS Endpoint å’Œ Bucket åç§°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">endpoint</span> <span class="operator">=</span> <span class="string">&quot;https://oss-cn-beijing.aliyuncs.com&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">bucketName</span> <span class="operator">=</span> <span class="string">&quot;java-geqian&quot;</span>;</span><br><span class="line">        <span class="comment">// æ›¿æ¢ä¸ºæ‚¨çš„ Bucket åŒºåŸŸ</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">region</span> <span class="operator">=</span> <span class="string">&quot;cn-beijing&quot;</span>;</span><br><span class="line">        <span class="comment">// æœ¬åœ°æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">localFilePath</span> <span class="operator">=</span> <span class="string">&quot;D:/ç¼–ç¨‹/001.png&quot;</span>;</span><br><span class="line">        <span class="comment">// æ–‡ä»¶ä¸Šä¼ åçš„è·¯å¾„å’Œåç§°</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">objectName</span> <span class="operator">=</span> <span class="string">&quot;exampledir/001.png&quot;</span>;</span><br><span class="line">        <span class="comment">// åˆ›å»º OSSClient å®ä¾‹</span></span><br><span class="line">        <span class="type">EnvironmentVariableCredentialsProvider</span> <span class="variable">credentialsProvider</span> <span class="operator">=</span></span><br><span class="line">                CredentialsProviderFactory.newEnvironmentVariableCredentialsProvider();</span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> OSSClientBuilder.create()</span><br><span class="line">                .endpoint(endpoint)</span><br><span class="line">                .credentialsProvider(credentialsProvider)</span><br><span class="line">                .region(region)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 1. åˆ›å»ºå­˜å‚¨ç©ºé—´ï¼ˆBucketï¼‰</span></span><br><span class="line">            ossClient.createBucket(bucketName);</span><br><span class="line">            System.out.println(<span class="string">&quot;1. Bucket &quot;</span> + bucketName + <span class="string">&quot; åˆ›å»ºæˆåŠŸã€‚&quot;</span>);</span><br><span class="line">            <span class="comment">// 2. ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">            <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(localFilePath);</span><br><span class="line">            <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">                <span class="type">PutObjectRequest</span> <span class="variable">putObjectRequest</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PutObjectRequest</span>(bucketName, objectName, file);</span><br><span class="line">                ossClient.putObject(putObjectRequest);</span><br><span class="line">                System.out.println(<span class="string">&quot;2. æ–‡ä»¶ &quot;</span> + objectName + <span class="string">&quot; ä¸Šä¼ æˆåŠŸã€‚&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;æ–‡ä»¶ &quot;</span> + localFilePath + <span class="string">&quot; ä¸å­˜åœ¨ï¼&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 3. ä¸‹è½½æ–‡ä»¶</span></span><br><span class="line">            <span class="type">OSSObject</span> <span class="variable">ossObject</span> <span class="operator">=</span> ossClient.getObject(bucketName, objectName);</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">contentStream</span> <span class="operator">=</span> ossObject.getObjectContent();</span><br><span class="line">            <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(contentStream));</span><br><span class="line">            String line;</span><br><span class="line">            System.out.println(<span class="string">&quot;3. ä¸‹è½½çš„æ–‡ä»¶å†…å®¹ï¼š&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> ((line = reader.readLine()) != <span class="literal">null</span>) &#123;</span><br><span class="line">                System.out.println(line);</span><br><span class="line">            &#125;</span><br><span class="line">            contentStream.close();</span><br><span class="line">            <span class="comment">// 4. åˆ—å‡ºæ–‡ä»¶</span></span><br><span class="line">            System.out.println(<span class="string">&quot;4. åˆ—å‡º Bucket ä¸­çš„æ–‡ä»¶ï¼š&quot;</span>);</span><br><span class="line">            <span class="type">ObjectListing</span> <span class="variable">objectListing</span> <span class="operator">=</span> ossClient.listObjects(bucketName);</span><br><span class="line">            <span class="keyword">for</span> (OSSObjectSummary objectSummary : objectListing.getObjectSummaries()) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot; - &quot;</span> + objectSummary.getKey() + <span class="string">&quot; (å¤§å° = &quot;</span> + objectSummary.getSize() + <span class="string">&quot;)&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 5. åˆ é™¤æ–‡ä»¶</span></span><br><span class="line"><span class="comment">//            ossClient.deleteObject(bucketName, objectName);</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;5. æ–‡ä»¶ &quot; + objectName + &quot; åˆ é™¤æˆåŠŸã€‚&quot;);</span></span><br><span class="line">            <span class="comment">// 6. åˆ é™¤å­˜å‚¨ç©ºé—´ï¼ˆBucketï¼‰</span></span><br><span class="line"><span class="comment">//            ossClient.deleteBucket(bucketName);</span></span><br><span class="line"><span class="comment">//            System.out.println(&quot;6. Bucket &quot; + bucketName + &quot; åˆ é™¤æˆåŠŸã€‚&quot;);</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (OSSException oe) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Caught an OSSException, which means your request made it to OSS, &quot;</span></span><br><span class="line">                    + <span class="string">&quot;but was rejected with an error response for some reason.&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Message:&quot;</span> + oe.getErrorMessage());</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Code:&quot;</span> + oe.getErrorCode());</span><br><span class="line">            System.out.println(<span class="string">&quot;Request ID:&quot;</span> + oe.getRequestId());</span><br><span class="line">            System.out.println(<span class="string">&quot;Host ID:&quot;</span> + oe.getHostId());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClientException | IOException ce) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Caught an ClientException, which means the client encountered &quot;</span></span><br><span class="line">                    + <span class="string">&quot;a serious internal problem while trying to communicate with OSS, &quot;</span></span><br><span class="line">                    + <span class="string">&quot;such as not being able to access the network.&quot;</span>);</span><br><span class="line">            System.out.println(<span class="string">&quot;Error Message:&quot;</span> + ce.getMessage());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (ossClient != <span class="literal">null</span>) &#123;</span><br><span class="line">                ossClient.shutdown();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-2é›†æˆOSS">3.3.2é›†æˆOSS</h4>
<p>é˜¿é‡Œäº‘osså¯¹è±¡å­˜å‚¨æœåŠ¡çš„å‡†å¤‡å·¥ä½œä»¥åŠå…¥é—¨ç¨‹åºæˆ‘ä»¬éƒ½å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦åœ¨æ¡ˆä¾‹å½“ä¸­é›†æˆosså¯¹è±¡å­˜å‚¨æœåŠ¡ï¼Œæ¥å­˜å‚¨å’Œç®¡ç†æ¡ˆä¾‹ä¸­ä¸Šä¼ çš„å›¾ç‰‡ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-398-1024x289.png" alt="img"></p>
<blockquote>
<p>åœ¨æ–°å¢å‘˜å·¥çš„æ—¶å€™ï¼Œä¸Šä¼ å‘˜å·¥çš„å›¾åƒï¼Œè€Œä¹‹æ‰€ä»¥éœ€è¦ä¸Šä¼ å‘˜å·¥çš„å›¾åƒï¼Œæ˜¯å› ä¸ºå°†æ¥æˆ‘ä»¬éœ€è¦åœ¨ç³»ç»Ÿé¡µé¢å½“ä¸­è®¿é—®å¹¶å±•ç¤ºå‘˜å·¥çš„å›¾åƒã€‚è€Œè¦æƒ³å®Œæˆè¿™ä¸ªæ“ä½œï¼Œéœ€è¦åšä¸¤ä»¶äº‹ï¼š</p>
<ol>
<li>éœ€è¦ä¸Šä¼ å‘˜å·¥çš„å›¾åƒï¼Œå¹¶æŠŠå›¾åƒä¿å­˜èµ·æ¥ï¼ˆå­˜å‚¨åˆ°é˜¿é‡Œäº‘OSSï¼‰</li>
<li>è®¿é—®å‘˜å·¥å›¾åƒï¼ˆé€šè¿‡å›¾åƒåœ¨é˜¿é‡Œäº‘OSSçš„å­˜å‚¨åœ°å€è®¿é—®å›¾åƒï¼‰
<ol>
<li>OSSä¸­çš„æ¯ä¸€ä¸ªæ–‡ä»¶éƒ½ä¼šåˆ†é…ä¸€ä¸ªè®¿é—®çš„urlï¼Œé€šè¿‡è¿™ä¸ªurlå°±å¯ä»¥è®¿é—®åˆ°å­˜å‚¨åœ¨é˜¿é‡Œäº‘ä¸Šçš„å›¾ç‰‡ã€‚æ‰€ä»¥éœ€è¦æŠŠurlè¿”å›ç»™å‰ç«¯ï¼Œè¿™æ ·å‰ç«¯å°±å¯ä»¥é€šè¿‡urlè·å–åˆ°å›¾åƒã€‚</li>
</ol>
</li>
</ol>
</blockquote>
<p>æˆ‘ä»¬å‚ç…§æ¥å£æ–‡æ¡£æ¥å¼€å‘æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½ï¼š</p>
<p><strong>åŸºæœ¬ä¿¡æ¯</strong></p>
<ul>
<li>è¯·æ±‚è·¯å¾„ï¼š/upload è¯·æ±‚æ–¹å¼ï¼šPOST æ¥å£æè¿°ï¼šä¸Šä¼ å›¾ç‰‡æ¥å£</li>
</ul>
<p><strong>è¯·æ±‚å‚æ•°</strong></p>
<ul>
<li>å‚æ•°æ ¼å¼ï¼šmultipart/form-data</li>
<li>å‚æ•°è¯´æ˜ï¼š</li>
</ul>
<table>
<thead>
<tr>
<th>å‚æ•°åç§°</th>
<th>å‚æ•°ç±»å‹</th>
<th>æ˜¯å¦å¿…é¡»</th>
<th>ç¤ºä¾‹</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>image</td>
<td>file</td>
<td>æ˜¯</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h4 id="3-3-3å…·ä½“å®ç°">3.3.3å…·ä½“å®ç°</h4>
<p><strong>1). å¼•å…¥é˜¿é‡Œäº‘OSSä¸Šä¼ æ–‡ä»¶å·¥å…·ç±»ï¼ˆç”±å®˜æ–¹çš„ç¤ºä¾‹ä»£ç æ”¹é€ è€Œæ¥ï¼‰</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.*;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.common.auth.CredentialsProviderFactory;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.common.auth.EnvironmentVariableCredentialsProvider;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.common.comm.SignVersion;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliyunOSSOperator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">endpoint</span> <span class="operator">=</span> <span class="string">&quot;https://oss-cn-beijing.aliyuncs.com&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">bucketName</span> <span class="operator">=</span> <span class="string">&quot;java-ai&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">String</span> <span class="variable">region</span> <span class="operator">=</span> <span class="string">&quot;cn-beijing&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(<span class="type">byte</span>[] content, String originalFilename)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// ä»ç¯å¢ƒå˜é‡ä¸­è·å–è®¿é—®å‡­è¯ã€‚è¿è¡Œæœ¬ä»£ç ç¤ºä¾‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿å·²è®¾ç½®ç¯å¢ƒå˜é‡OSS_ACCESS_KEY_IDå’ŒOSS_ACCESS_KEY_SECRETã€‚</span></span><br><span class="line">        <span class="type">EnvironmentVariableCredentialsProvider</span> <span class="variable">credentialsProvider</span> <span class="operator">=</span> CredentialsProviderFactory.newEnvironmentVariableCredentialsProvider();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¡«å†™Objectå®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚202406/1.pngã€‚Objectå®Œæ•´è·¯å¾„ä¸­ä¸èƒ½åŒ…å«Bucketåç§°ã€‚</span></span><br><span class="line">        <span class="comment">//è·å–å½“å‰ç³»ç»Ÿæ—¥æœŸçš„å­—ç¬¦ä¸²,æ ¼å¼ä¸º yyyy/MM</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">dir</span> <span class="operator">=</span> LocalDate.now().format(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy/MM&quot;</span>));</span><br><span class="line">        <span class="comment">//ç”Ÿæˆä¸€ä¸ªæ–°çš„ä¸é‡å¤çš„æ–‡ä»¶å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">newFileName</span> <span class="operator">=</span> UUID.randomUUID() + originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">        <span class="type">String</span> <span class="variable">objectName</span> <span class="operator">=</span> dir + <span class="string">&quot;/&quot;</span> + newFileName;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span></span><br><span class="line">        <span class="type">ClientBuilderConfiguration</span> <span class="variable">clientBuilderConfiguration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClientBuilderConfiguration</span>();</span><br><span class="line">        clientBuilderConfiguration.setSignatureVersion(SignVersion.V4);</span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> OSSClientBuilder.create()</span><br><span class="line">                .endpoint(endpoint)</span><br><span class="line">                .credentialsProvider(credentialsProvider)</span><br><span class="line">                .clientConfiguration(clientBuilderConfiguration)</span><br><span class="line">                .region(region)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ossClient.putObject(bucketName, objectName, <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(content));</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            ossClient.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;//&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">1</span>] + <span class="string">&quot;/&quot;</span> + objectName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). ä¿®æ”¹UploadControllerä»£ç </strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.pojo.Result;</span><br><span class="line"><span class="keyword">import</span> com.itheima.utils.AliyunOSSOperator;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.PostMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.multipart.MultipartFile;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UploadController</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> AliyunOSSOperator aliyunOSSOperator;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(&quot;/upload&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Result <span class="title function_">upload</span><span class="params">(MultipartFile file)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        log.info(<span class="string">&quot;ä¸Šä¼ æ–‡ä»¶ï¼š&#123;&#125;&quot;</span>, file);</span><br><span class="line">        <span class="keyword">if</span> (!file.isEmpty()) &#123;</span><br><span class="line">            <span class="comment">// ç”Ÿæˆå”¯ä¸€æ–‡ä»¶å</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">originalFilename</span> <span class="operator">=</span> file.getOriginalFilename();</span><br><span class="line">            <span class="type">String</span> <span class="variable">extName</span> <span class="operator">=</span> originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">            <span class="type">String</span> <span class="variable">uniqueFileName</span> <span class="operator">=</span> UUID.randomUUID().toString().replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>) + extName;</span><br><span class="line">            <span class="comment">// ä¸Šä¼ æ–‡ä»¶</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> aliyunOSSOperator.upload(file.getBytes(), uniqueFileName);</span><br><span class="line">            <span class="keyword">return</span> Result.success(url);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;ä¸Šä¼ å¤±è´¥&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ Apifox æµ‹è¯•ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-400-1024x516.png" alt="img"></p>
<p>æ¥å£æµ‹è¯•é€šè¿‡ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œå‰åç«¯è”è°ƒäº†ã€‚</p>
<h4 id="3-3-4åŠŸèƒ½ä¼˜åŒ–">3.3.4åŠŸèƒ½ä¼˜åŒ–</h4>
<p>åœ¨åˆšæ‰æˆ‘ä»¬åˆ¶ä½œçš„AliyunOSSæ“ä½œçš„å·¥å…·ç±»ä¸­ï¼Œæˆ‘ä»¬ç›´æ¥å°† endpointã€bucketNameå‚æ•°ç›´æ¥åœ¨javaæ–‡ä»¶ä¸­å†™æ­»äº†ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-404.png" alt="img"></p>
<p>å¦‚æœåç»­ï¼Œé¡¹ç›®è¦éƒ¨ç½²åˆ°æµ‹è¯•ç¯å¢ƒã€ä¸Šç”Ÿäº§ç¯å¢ƒï¼Œæˆ‘ä»¬éœ€è¦æ¥ä¿®æ”¹è¿™ä¸¤ä¸ªå‚æ•°ã€‚ è€Œå¦‚æœå¼€å‘ä¸€ä¸ªå¤§å‹é¡¹ç›®ï¼Œæ‰€æœ‰ç”¨åˆ°çš„æŠ€æœ¯æ¶‰åŠåˆ°çš„è¿™äº›ä¸ªå‚æ•°å…¨éƒ¨å†™æ­»åœ¨javaä»£ç ä¸­ï¼Œæ˜¯éå¸¸ä¸ä¾¿äºç»´æŠ¤å’Œç®¡ç†çš„ã€‚</p>
<p>é‚£ä¹ˆå¯¹äºè¿™äº›å®¹æ˜“å˜åŠ¨çš„å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥<strong>å°†å…¶é…ç½®åœ¨é…ç½®æ–‡ä»¶ä¸­</strong>ï¼Œç„¶åé€šè¿‡ <code>@Value</code> æ³¨è§£æ¥æ³¨è§£å¤–éƒ¨é…ç½®çš„å±æ€§ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p>æ–¹å¼ä¸€ï¼š@Valueæ³¨å…¥ï¼ˆç¼ºç‚¹ï¼šå¦‚æœé…ç½®é¡¹å¤šï¼Œæ³¨å…¥ç¹çï¼Œä¸ä¾¿äºç»´æŠ¤ç®¡ç†å’Œå¤ç”¨ã€‚ï¼‰</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-403-1024x478.png" alt="img"></p>
<p>æ–¹å¼äºŒï¼šè‡ªåŠ¨æ³¨å…¥  åœ¨Springä¸­ç»™æˆ‘ä»¬æä¾›äº†ä¸€ç§ç®€åŒ–æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®é¡¹çš„å€¼è‡ªåŠ¨çš„æ³¨å…¥åˆ°å¯¹è±¡çš„å±æ€§ä¸­ã€‚</p>
<p>Springæä¾›çš„ç®€åŒ–æ–¹å¼å¥—è·¯ï¼š</p>
<p>1). éœ€è¦åˆ›å»ºä¸€ä¸ªå®ç°ç±»ï¼Œä¸”å®ä½“ç±»ä¸­çš„å±æ€§åå’Œé…ç½®æ–‡ä»¶å½“ä¸­keyçš„åå­—å¿…é¡»è¦ä¸€è‡´</p>
<p>æ¯”å¦‚ï¼šé…ç½®æ–‡ä»¶å½“ä¸­å«endpointï¼Œå®ä½“ç±»å½“ä¸­çš„å±æ€§ä¹Ÿå¾—å«endpointï¼Œå¦å¤–å®ä½“ç±»å½“ä¸­çš„å±æ€§è¿˜éœ€è¦æä¾› getter / setteræ–¹æ³•</p>
<p>2). éœ€è¦å°†å®ä½“ç±»äº¤ç»™Springçš„IOCå®¹å™¨ç®¡ç†ï¼Œæˆä¸ºIOCå®¹å™¨å½“ä¸­çš„beanå¯¹è±¡</p>
<p>3). åœ¨å®ä½“ç±»ä¸Šæ·»åŠ <code>**@ConfigurationProperties**</code>æ³¨è§£ï¼Œå¹¶é€šè¿‡perfectå±æ€§æ¥æŒ‡å®šé…ç½®å‚æ•°é¡¹çš„å‰ç¼€</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-402-1024x218.png" alt="img"></p>
<p><strong>å…·ä½“å®ç°æ­¥éª¤:</strong></p>
<p>1). å®šä¹‰å®ä½“ç±»AliyunOSSProperties ï¼Œå¹¶äº¤ç»™IOCå®¹å™¨ç®¡ç†</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties</span>(prefix = <span class="string">&quot;aliyun.oss&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">class</span> <span class="title">AliyunOSSProperties</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> endpoint;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> bucketName;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> region;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2). ä¿®æ”¹AliyunOSSOperator</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.*;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.common.auth.CredentialsProviderFactory;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.common.auth.EnvironmentVariableCredentialsProvider;</span><br><span class="line"><span class="keyword">import</span> com.aliyun.oss.common.comm.SignVersion;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Value;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> java.io.ByteArrayInputStream;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.format.DateTimeFormatter;</span><br><span class="line"><span class="keyword">import</span> java.util.UUID;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AliyunOSSOperator</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ–¹å¼ä¸€: é€šè¿‡@Valueæ³¨è§£ä¸€ä¸ªå±æ€§ä¸€ä¸ªå±æ€§çš„æ³¨å…¥</span></span><br><span class="line">    <span class="comment">//@Value(&quot;$&#123;aliyun.oss.endpoint&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//private String endpoint;</span></span><br><span class="line">    <span class="comment">//@Value(&quot;$&#123;aliyun.oss.bucketName&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//private String bucketName;</span></span><br><span class="line">    <span class="comment">//@Value(&quot;$&#123;aliyun.oss.region&#125;&quot;)</span></span><br><span class="line">    <span class="comment">//private String region;</span></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span>    <span class="keyword">private</span> AliyunOSSProperties aliyunOSSProperties;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">upload</span><span class="params">(<span class="type">byte</span>[] content, String originalFilename)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">endpoint</span> <span class="operator">=</span> aliyunOSSProperties.getEndpoint();       </span><br><span class="line">        <span class="type">String</span> <span class="variable">bucketName</span> <span class="operator">=</span> aliyunOSSProperties.getBucketName();     </span><br><span class="line">        <span class="type">String</span> <span class="variable">region</span> <span class="operator">=</span> aliyunOSSProperties.getRegion();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ä»ç¯å¢ƒå˜é‡ä¸­è·å–è®¿é—®å‡­è¯ã€‚è¿è¡Œæœ¬ä»£ç ç¤ºä¾‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿å·²è®¾ç½®ç¯å¢ƒå˜é‡OSS_ACCESS_KEY_IDå’ŒOSS_ACCESS_KEY_SECRETã€‚</span></span><br><span class="line">        <span class="type">EnvironmentVariableCredentialsProvider</span> <span class="variable">credentialsProvider</span> <span class="operator">=</span> CredentialsProviderFactory.newEnvironmentVariableCredentialsProvider();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¡«å†™Objectå®Œæ•´è·¯å¾„ï¼Œä¾‹å¦‚2024/06/1.pngã€‚Objectå®Œæ•´è·¯å¾„ä¸­ä¸èƒ½åŒ…å«Bucketåç§°ã€‚</span></span><br><span class="line">        <span class="comment">//è·å–å½“å‰ç³»ç»Ÿæ—¥æœŸçš„å­—ç¬¦ä¸²,æ ¼å¼ä¸º yyyy/MM</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">dir</span> <span class="operator">=</span> LocalDate.now().format(DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy/MM&quot;</span>));</span><br><span class="line">        <span class="comment">//ç”Ÿæˆä¸€ä¸ªæ–°çš„ä¸é‡å¤çš„æ–‡ä»¶å</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">newFileName</span> <span class="operator">=</span> UUID.randomUUID() + originalFilename.substring(originalFilename.lastIndexOf(<span class="string">&quot;.&quot;</span>));</span><br><span class="line">        <span class="type">String</span> <span class="variable">objectName</span> <span class="operator">=</span> dir + <span class="string">&quot;/&quot;</span> + newFileName;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ›å»ºOSSClientå®ä¾‹ã€‚</span></span><br><span class="line">        <span class="type">ClientBuilderConfiguration</span> <span class="variable">clientBuilderConfiguration</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClientBuilderConfiguration</span>();</span><br><span class="line">        clientBuilderConfiguration.setSignatureVersion(SignVersion.V4);</span><br><span class="line">        <span class="type">OSS</span> <span class="variable">ossClient</span> <span class="operator">=</span> OSSClientBuilder.create()</span><br><span class="line">                .endpoint(endpoint)</span><br><span class="line">                .credentialsProvider(credentialsProvider)</span><br><span class="line">                .clientConfiguration(clientBuilderConfiguration)</span><br><span class="line">                .region(region)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            ossClient.putObject(bucketName, objectName, <span class="keyword">new</span> <span class="title class_">ByteArrayInputStream</span>(content));</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            ossClient.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">0</span>] + <span class="string">&quot;//&quot;</span> + bucketName + <span class="string">&quot;.&quot;</span> + endpoint.split(<span class="string">&quot;//&quot;</span>)[<span class="number">1</span>] + <span class="string">&quot;/&quot;</span> + objectName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3-3-5-ConfigurationPropertiesè¯¦è§£">3.3.5@ConfigurationPropertiesè¯¦è§£</h4>
<p><code>@ConfigurationProperties</code>æ˜¯ Spring Boot æ¡†æ¶ä¸­ç”¨äºå°†é…ç½®æ–‡ä»¶ï¼ˆå¦‚<code>application.yml</code>æˆ–<code>application.properties</code>ï¼‰ä¸­çš„å±æ€§æ‰¹é‡ç»‘å®šåˆ°Javaå¯¹è±¡çš„æ³¨è§£ã€‚</p>
<p>1.è§£è€¦é…ç½®ä¸ä»£ç </p>
<ul>
<li>æ•æ„Ÿä¿¡æ¯éš”ç¦»ï¼šå°†æ•°æ®åº“å¯†ç ã€API å¯†é’¥ç­‰ä»ä»£ç ä¸­å‰¥ç¦»ï¼Œå­˜å‚¨äºé…ç½®æ–‡ä»¶ã€‚</li>
<li>ç¯å¢ƒå·®å¼‚åŒ–ï¼šé€šè¿‡ application-dev.ymlã€application-prod.yml å®ç°å¤šç¯å¢ƒé…ç½®åˆ‡æ¢ã€‚</li>
</ul>
<p>2.æå‡å¯ç»´æŠ¤æ€§</p>
<ul>
<li>é›†ä¸­ç®¡ç†ï¼šæ‰€æœ‰ç›¸å…³é…ç½®å±æ€§èšåˆåœ¨ä¸€ä¸ªç±»ä¸­ï¼Œä¾¿äºæŸ¥æ‰¾å’Œä¿®æ”¹ã€‚</li>
<li>IDE æ”¯æŒï¼šå­—æ®µè‡ªåŠ¨è¡¥å…¨ã€ç±»å‹æ£€æŸ¥å’Œé…ç½®æç¤ºï¼ˆå¦‚ IntelliJ IDEA çš„ â€œSpring Bootâ€ æ’ä»¶ï¼‰ã€‚</li>
</ul>
<p>3.éªŒè¯ä¸çº¦æŸ<br>
ç»“åˆ @Validated å’Œ JSR-303 æ³¨è§£ï¼ˆå¦‚ @NotBlankã€@Minï¼‰ï¼Œå®ç°é…ç½®åˆæ³•æ€§æ ¡éªŒã€‚</p>
<p>ä¸å…¶ä»–æ³¨è§£çš„å¯¹æ¯”</p>
<table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ç‰¹ç‚¹</th>
<th>é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@Value</code></td>
<td>ç›´æ¥æ³¨å…¥å•ä¸ªå±æ€§å€¼ï¼Œé€‚åˆç®€å•åœºæ™¯</td>
<td>å°‘é‡åˆ†æ•£é…ç½®</td>
</tr>
<tr>
<td><code>@ConfigurationProperties</code></td>
<td>æ‰¹é‡ç»‘å®šå±æ€§åˆ°å¯¹è±¡ï¼Œæ”¯æŒå¤æ‚ç»“æ„å’Œç±»å‹å®‰å…¨</td>
<td>ç»“æ„åŒ–ã€æ¨¡å—åŒ–é…ç½®</td>
</tr>
<tr>
<td><code>@PropertySource</code></td>
<td>æŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶è·¯å¾„</td>
<td>éé»˜è®¤é…ç½®æ–‡ä»¶åŠ è½½</td>
</tr>
</tbody>
</table>
<h2 id="5-åˆ é™¤å‘˜å·¥">5.åˆ é™¤å‘˜å·¥</h2>
<h3 id="5-1éœ€æ±‚">5.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-348-1024x291.png" alt="img"></p>
<p>å½“æˆ‘ä»¬å‹¾é€‰åˆ—è¡¨å‰é¢çš„å¤é€‰æ¡†ï¼Œç„¶åç‚¹å‡» â€œæ‰¹é‡åˆ é™¤â€ æŒ‰é’®ï¼Œå°±å¯ä»¥å°†è¿™ä¸€æ‰¹æ¬¡çš„å‘˜å·¥ä¿¡æ¯åˆ é™¤æ‰äº†ã€‚ä¹Ÿå¯ä»¥åªå‹¾é€‰ä¸€ä¸ªå¤é€‰æ¡†ï¼Œä»…åˆ é™¤ä¸€ä¸ªå‘˜å·¥ä¿¡æ¯ã€‚</p>
<p>é—®é¢˜ï¼šæˆ‘ä»¬éœ€è¦å¼€å‘ä¸¤ä¸ªåŠŸèƒ½æ¥å£å—ï¼Ÿä¸€ä¸ªåˆ é™¤å•ä¸ªå‘˜å·¥ï¼Œä¸€ä¸ªåˆ é™¤å¤šä¸ªå‘˜å·¥</p>
<p>ç­”æ¡ˆï¼šä¸éœ€è¦ã€‚ åªéœ€è¦å¼€å‘ä¸€ä¸ªåŠŸèƒ½æ¥å£å³å¯ï¼ˆåˆ é™¤å¤šä¸ªå‘˜å·¥åŒ…å«åªåˆ é™¤ä¸€ä¸ªå‘˜å·¥ï¼‰</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-349-1024x544.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-350-1024x526.png" alt="img"></p>
<h3 id="5-2å®ç°æ€è·¯">5.2å®ç°æ€è·¯</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-351-1024x258.png" alt="img"></p>
<h3 id="5-3åŠŸèƒ½å¼€å‘">5.3åŠŸèƒ½å¼€å‘</h3>
<h4 id="5-3-1Controlleræ¥æ”¶å‚æ•°">5.3.1Controlleræ¥æ”¶å‚æ•°</h4>
<p>åœ¨ <code>EmpController</code> ä¸­å¢åŠ å¦‚ä¸‹æ–¹æ³• <code>delete</code> ï¼Œæ¥æ‰§è¡Œæ‰¹é‡åˆ é™¤å‘˜å·¥çš„æ“ä½œã€‚</p>
<p><strong>æ–¹å¼ä¸€ï¼šåœ¨Controlleræ–¹æ³•ä¸­é€šè¿‡æ•°ç»„æ¥æ¥æ”¶</strong></p>
<p>å¤šä¸ªå‚æ•°ï¼Œé»˜è®¤å¯ä»¥å°†å…¶å°è£…åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œéœ€è¦ä¿è¯å‰ç«¯ä¼ é€’çš„å‚æ•°å ä¸ æ–¹æ³•å½¢å‚åç§°ä¿æŒä¸€è‡´ã€‚</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ‰¹é‡åˆ é™¤å‘˜å·¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">@DeleteMapping</span><br><span class="line"><span class="built_in">public</span> Result <span class="keyword">delete</span>(<span class="type">Integer</span>[] ids)&#123;</span><br><span class="line">    <span class="keyword">log</span>.<span class="keyword">info</span>(&quot;æ‰¹é‡åˆ é™¤éƒ¨é—¨: ids=&#123;&#125; &quot;, Arrays.asList(ids));</span><br><span class="line">    <span class="keyword">return</span> Result.success();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ–¹å¼äºŒï¼šåœ¨Controlleræ–¹æ³•ä¸­é€šè¿‡é›†åˆæ¥æ¥æ”¶</strong></p>
<p>ä¹Ÿå¯ä»¥å°†å…¶å°è£…åˆ°ä¸€ä¸ªList<Integer> é›†åˆä¸­ï¼Œå¦‚æœè¦å°†å…¶å°è£…åˆ°ä¸€ä¸ªé›†åˆä¸­ï¼Œéœ€è¦åœ¨é›†åˆå‰é¢åŠ ä¸Š <code>@RequestParam</code> æ³¨è§£ã€‚</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ‰¹é‡åˆ é™¤å‘˜å·¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">@DeleteMapping</span></span><br><span class="line">public Result <span class="built_in">delete</span>(<span class="variable">@RequestParam</span> List&lt;Integer&gt; ids)&#123;</span><br><span class="line">    <span class="selector-tag">log</span><span class="selector-class">.info</span>(<span class="string">&quot;æ‰¹é‡åˆ é™¤éƒ¨é—¨: ids=&#123;&#125; &quot;</span>, ids);</span><br><span class="line">    <span class="selector-tag">empService</span><span class="selector-class">.deleteByIds</span>(ids);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸¤ç§æ–¹å¼ï¼Œé€‰æ‹©å…¶ä¸­ä¸€ç§å°±å¯ä»¥ï¼Œæˆ‘ä»¬ä¸€èˆ¬æ¨èé€‰æ‹©é›†åˆï¼Œå› ä¸ºåŸºäºé›†åˆæ“ä½œå…¶ä¸­çš„å…ƒç´ ä¼šæ›´åŠ æ–¹ä¾¿ã€‚</p>
<h4 id="5-3-2Service">5.3.2Service</h4>
<p>1). åœ¨æ¥å£ä¸­ <code>EmpService</code> ä¸­å®šä¹‰æ¥å£æ–¹æ³• <code>deleteByIds</code></p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ‰¹é‡åˆ é™¤å‘˜å·¥</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteByIds</span><span class="params">(List&lt;Integer&gt; ids)</span></span>;</span><br></pre></td></tr></table></figure>
<p>2). åœ¨å®ç°ç±» <code>EmpServiceImpl</code> ä¸­å®ç°æ¥å£æ–¹æ³• <code>deleteByIds</code></p>
<p>åœ¨åˆ é™¤å‘˜å·¥ä¿¡æ¯æ—¶ï¼Œæ—¢éœ€è¦åˆ é™¤ emp è¡¨ä¸­çš„å‘˜å·¥åŸºæœ¬ä¿¡æ¯ï¼Œè¿˜éœ€è¦åˆ é™¤ emp_expr è¡¨ä¸­å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Transactional</span></span><br><span class="line"><span class="variable">@Override</span></span><br><span class="line">public void <span class="built_in">deleteByIds</span>(List&lt;Integer&gt; ids) &#123;</span><br><span class="line">    <span class="comment">//1. æ ¹æ®IDæ‰¹é‡åˆ é™¤å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    <span class="selector-tag">empMapper</span><span class="selector-class">.deleteByIds</span>(ids);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. æ ¹æ®å‘˜å·¥çš„IDæ‰¹é‡åˆ é™¤å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯</span></span><br><span class="line">    <span class="selector-tag">empExprMapper</span><span class="selector-class">.deleteByEmpIds</span>(ids);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç”±äºåˆ é™¤å‘˜å·¥ä¿¡æ¯ï¼Œæ—¢è¦åˆ é™¤å‘˜å·¥åŸºæœ¬ä¿¡æ¯ï¼Œåˆè¦åˆ é™¤å·¥ä½œç»å†ä¿¡æ¯ï¼Œæ“ä½œå¤šæ¬¡æ•°æ®åº“çš„åˆ é™¤ï¼Œæ‰€ä»¥éœ€è¦è¿›è¡Œäº‹åŠ¡æ§åˆ¶ã€‚</p>
<h4 id="5-3-3Mapper">5.3.3Mapper</h4>
<p>1). åœ¨ <code>EmpMapper</code> æ¥å£ä¸­å¢åŠ  <code>deleteByIds</code> æ–¹æ³•å®ç°æ‰¹é‡åˆ é™¤å‘˜å·¥åŸºæœ¬ä¿¡æ¯</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ‰¹é‡åˆ é™¤å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteByIds</span><span class="params">(List&lt;Integer&gt; ids)</span></span>;</span><br></pre></td></tr></table></figure>
<p>2). åœ¨ <code>EmpMapper.xml</code> é…ç½®æ–‡ä»¶ä¸­, é…ç½®å¯¹åº”çš„SQLè¯­å¥</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!--æ‰¹é‡åˆ é™¤å‘˜å·¥ä¿¡æ¯--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    delete from emp where id in</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            #</span><span class="template-variable">&#123;id&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>3). åœ¨ <code>EmpExprMapper</code> æ¥å£ä¸­å¢åŠ  <code>deleteByEmpIds</code> æ–¹æ³•å®ç°æ ¹æ®å‘˜å·¥IDæ‰¹é‡åˆ é™¤å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ ¹æ®å‘˜å·¥çš„IDæ‰¹é‡åˆ é™¤å·¥ä½œç»å†ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteByEmpIds</span><span class="params">(List&lt;Integer&gt; empIds)</span></span>;</span><br></pre></td></tr></table></figure>
<p>4). åœ¨ <code>EmpExprMapper.xml</code> é…ç½®æ–‡ä»¶ä¸­, é…ç½®å¯¹åº”çš„SQLè¯­å¥</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!--æ ¹æ®å‘˜å·¥çš„IDæ‰¹é‡åˆ é™¤å·¥ä½œç»å†ä¿¡æ¯--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByEmpIds&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    delete from emp_expr where emp_id in</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;empIds&quot;</span> <span class="attr">item</span>=<span class="string">&quot;empId&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            #</span><span class="template-variable">&#123;empId&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="6-ä¿®æ”¹å‘˜å·¥">6.ä¿®æ”¹å‘˜å·¥</h2>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-352-1024x587.png" alt="img"></p>
<p>åœ¨è¿›è¡Œä¿®æ”¹å‘˜å·¥ä¿¡æ¯çš„æ—¶å€™ï¼Œæˆ‘ä»¬é¦–å…ˆå…ˆè¦æ ¹æ®å‘˜å·¥çš„IDæŸ¥è¯¢å‘˜å·¥çš„è¯¦ç»†ä¿¡æ¯ç”¨äºé¡µé¢å›æ˜¾å±•ç¤ºï¼Œç„¶åç”¨æˆ·ä¿®æ”¹å‘˜å·¥æ•°æ®ä¹‹åï¼Œç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå°±å¯ä»¥å°†ä¿®æ”¹çš„æ•°æ®æäº¤åˆ°æœåŠ¡ç«¯ï¼Œä¿å­˜åˆ°æ•°æ®åº“ã€‚ å…·ä½“æ“ä½œä¸ºï¼š</p>
<ol>
<li>æ ¹æ®IDæŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</li>
<li>ä¿å­˜ä¿®æ”¹çš„å‘˜å·¥ä¿¡æ¯</li>
</ol>
<h3 id="6-1æŸ¥è¯¢å›æ˜¾">6.1æŸ¥è¯¢å›æ˜¾</h3>
<h4 id="6-1-1éœ€æ±‚">6.1.1éœ€æ±‚</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-353-1024x542.png" alt="img"></p>
<p><strong>2.4.3 å“åº”æ•°æ®</strong></p>
<p>å‚æ•°æ ¼å¼ï¼šapplication/json</p>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>ç±»å‹</th>
<th>æ˜¯å¦å¿…é¡»</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>code</td>
<td>number</td>
<td>å¿…é¡»</td>
<td>å“åº”ç , 1 æˆåŠŸ , 0 å¤±è´¥</td>
</tr>
<tr>
<td>msg</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>æç¤ºä¿¡æ¯</td>
</tr>
<tr>
<td>data</td>
<td>object</td>
<td>å¿…é¡»</td>
<td>è¿”å›çš„æ•°æ®</td>
</tr>
<tr>
<td>|- id</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>id</td>
</tr>
<tr>
<td>|- username</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>ç”¨æˆ·å</td>
</tr>
<tr>
<td>|- name</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>å§“å</td>
</tr>
<tr>
<td>|- password</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>å¯†ç </td>
</tr>
<tr>
<td>|- entryDate</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>å…¥èŒæ—¥æœŸ</td>
</tr>
<tr>
<td>|- gender</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>æ€§åˆ« , 1 ç”· ; 2 å¥³</td>
</tr>
<tr>
<td>|- image</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>å›¾åƒ</td>
</tr>
<tr>
<td>|- job</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ</td>
</tr>
<tr>
<td>|- salary</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>è–ªèµ„</td>
</tr>
<tr>
<td>|- deptId</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>éƒ¨é—¨id</td>
</tr>
<tr>
<td>|- createTime</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>åˆ›å»ºæ—¶é—´</td>
</tr>
<tr>
<td>|- updateTime</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>æ›´æ–°æ—¶é—´</td>
</tr>
<tr>
<td>|- exprList</td>
<td>object[]</td>
<td>éå¿…é¡»</td>
<td>å·¥ä½œç»å†åˆ—è¡¨</td>
</tr>
<tr>
<td>|- id</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>ID</td>
</tr>
<tr>
<td>|- company</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>æ‰€åœ¨å…¬å¸</td>
</tr>
<tr>
<td>|- job</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>èŒä½</td>
</tr>
<tr>
<td>|- begin</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>å¼€å§‹æ—¶é—´</td>
</tr>
<tr>
<td>|- end</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>ç»“æŸæ—¶é—´</td>
</tr>
<tr>
<td>|- empId</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>å‘˜å·¥ID</td>
</tr>
</tbody>
</table>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-356-1024x890.png" alt="img"></p>
<h4 id="6-1-2å®ç°æ€è·¯">6.1.2å®ç°æ€è·¯</h4>
<p>åœ¨æŸ¥è¯¢å›æ˜¾æ—¶ï¼Œæ—¢éœ€è¦æŸ¥è¯¢å‡ºå‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯ï¼Œåˆéœ€è¦æŸ¥è¯¢å‡ºè¯¥å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-405.png" alt="img"></p>
<p>æˆ‘ä»¬å¯ä»¥å…ˆé€šè¿‡ä¸€æ¡SQLè¯­å¥ï¼ŒæŸ¥è¯¢å‡ºæŒ‡å®šå‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯ï¼ŒåŠå…¶å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ã€‚SQLå¦‚ä¸‹ï¼š</p>
<figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">e</span>.*,</span><br><span class="line">       ee.id ee_id,</span><br><span class="line">       ee.<span class="keyword">begin</span> ee_begin,</span><br><span class="line">       ee.<span class="keyword">end</span> ee_end,</span><br><span class="line">       ee.company ee_company,</span><br><span class="line">       ee.job ee_job</span><br><span class="line"><span class="keyword">from</span> emp <span class="built_in">e</span> <span class="keyword">left</span> <span class="keyword">join</span> emp_expr ee <span class="keyword">on</span> <span class="built_in">e</span>.id = ee.emp_id <span class="keyword">where</span> <span class="built_in">e</span>.id = <span class="number">39</span>;</span><br></pre></td></tr></table></figure>
<p>å…·ä½“çš„å®ç°æ€è·¯å¦‚ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-406-1024x254.png" alt="img"></p>
<h4 id="6-1-3ä»£ç å®ç°">6.1.3ä»£ç å®ç°</h4>
<p>1). <code>EmpController</code> æ·»åŠ  <code>getInfo</code> ç”¨æ¥æ ¹æ®IDæŸ¥è¯¢å‘˜å·¥æ•°æ®ï¼Œç”¨äºé¡µé¢å›æ˜¾</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢å›æ˜¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">getInfo</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;æ ¹æ®idæŸ¥è¯¢å‘˜å·¥çš„è¯¦ç»†ä¿¡æ¯&quot;</span>);</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">emp</span>  <span class="operator">=</span> empService.getInfo(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success(emp);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2). <code>EmpService</code> æ¥å£ä¸­å¢åŠ  <code>getInfo</code> æ–¹æ³•</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDæŸ¥è¯¢å‘˜å·¥çš„è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Emp <span class="built_in">getInfo</span>(Integer id);</span><br></pre></td></tr></table></figure>
<p>3). <code>EmpServiceImpl</code> å®ç°ç±»ä¸­å®ç° <code>getInfo</code> æ–¹æ³•</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="function">Emp <span class="title">getInfo</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">return</span> empMapper.<span class="title">getById</span><span class="params">(id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4). <code>EmpMapper</code> æ¥å£ä¸­å¢åŠ  <code>getById</code> æ–¹æ³•</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDæŸ¥è¯¢å‘˜å·¥è¯¦ç»†ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Emp <span class="built_in">getById</span>(Integer id);</span><br></pre></td></tr></table></figure>
<p>5). <code>EmpMapper.xml</code> é…ç½®æ–‡ä»¶ä¸­å®šä¹‰å¯¹åº”çš„SQL</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!--è‡ªå®šä¹‰ç»“æœé›†ResultMap--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;empResultMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;com.itheima.pojo.Emp&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;username&quot;</span> <span class="attr">property</span>=<span class="string">&quot;username&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;password&quot;</span> <span class="attr">property</span>=<span class="string">&quot;password&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;gender&quot;</span> <span class="attr">property</span>=<span class="string">&quot;gender&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;phone&quot;</span> <span class="attr">property</span>=<span class="string">&quot;phone&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;job&quot;</span> <span class="attr">property</span>=<span class="string">&quot;job&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;salary&quot;</span> <span class="attr">property</span>=<span class="string">&quot;salary&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;image&quot;</span> <span class="attr">property</span>=<span class="string">&quot;image&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;entry_date&quot;</span> <span class="attr">property</span>=<span class="string">&quot;entryDate&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dept_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;deptId&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;create_time&quot;</span> <span class="attr">property</span>=<span class="string">&quot;createTime&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;update_time&quot;</span> <span class="attr">property</span>=<span class="string">&quot;updateTime&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="comment">&lt;!--å°è£…exprList--&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">collection</span> <span class="attr">property</span>=<span class="string">&quot;exprList&quot;</span> <span class="attr">ofType</span>=<span class="string">&quot;com.itheima.pojo.EmpExpr&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;ee_id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ee_company&quot;</span> <span class="attr">property</span>=<span class="string">&quot;company&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ee_job&quot;</span> <span class="attr">property</span>=<span class="string">&quot;job&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ee_begin&quot;</span> <span class="attr">property</span>=<span class="string">&quot;begin&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ee_end&quot;</span> <span class="attr">property</span>=<span class="string">&quot;end&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;ee_empid&quot;</span> <span class="attr">property</span>=<span class="string">&quot;empId&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">collection</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="comment">&lt;!--æ ¹æ®IDæŸ¥è¯¢å‘˜å·¥çš„è¯¦ç»†ä¿¡æ¯--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getById&quot;</span> <span class="attr">resultMap</span>=<span class="string">&quot;empResultMap&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    select e.*,</span></span><br><span class="line"><span class="language-xml">        ee.id ee_id,</span></span><br><span class="line"><span class="language-xml">        ee.emp_id ee_empid,</span></span><br><span class="line"><span class="language-xml">        ee.begin ee_begin,</span></span><br><span class="line"><span class="language-xml">        ee.end ee_end,</span></span><br><span class="line"><span class="language-xml">        ee.company ee_company,</span></span><br><span class="line"><span class="language-xml">        ee.job ee_job</span></span><br><span class="line"><span class="language-xml">    from emp e left join emp_expr ee on e.id = ee.emp_id</span></span><br><span class="line"><span class="language-xml">    where e.id = #</span><span class="template-variable">&#123;id&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>åœ¨è¿™ç§ä¸€å¯¹å¤šçš„æŸ¥è¯¢ä¸­ï¼Œæˆ‘ä»¬è¦æƒ³æˆåŠŸçš„å°è£…çš„ç»“æœï¼Œéœ€è¦æ‰‹åŠ¨çš„åŸºäº <code>&lt;resultMap&gt;</code> æ¥è¿›è¡Œå°è£…ç»“æœã€‚</p>
<p>Mybatisä¸­å°è£…æŸ¥è¯¢ç»“æœï¼Œä»€ä¹ˆæ—¶å€™ç”¨ resultTypeï¼Œä»€ä¹ˆæ—¶å€™ç”¨resultMap ï¼Ÿ</p>
<ul>
<li>å¦‚æœæŸ¥è¯¢è¿”å›çš„å­—æ®µåä¸å®ä½“çš„å±æ€§åå¯ä»¥ç›´æ¥å¯¹åº”ä¸Šï¼Œç”¨resultType ã€‚</li>
<li>å¦‚æœæŸ¥è¯¢è¿”å›çš„å­—æ®µåä¸å®ä½“çš„å±æ€§åå¯¹åº”ä¸ä¸Šï¼Œæˆ–å®ä½“å±æ€§æ¯”è¾ƒå¤æ‚ï¼Œå¯ä»¥é€šè¿‡resultMapæ‰‹åŠ¨å°è£…</li>
</ul>
<h3 id="6-2ä¿®æ”¹å‘˜å·¥">6.2ä¿®æ”¹å‘˜å·¥</h3>
<h4 id="6-2-1éœ€æ±‚">6.2.1éœ€æ±‚</h4>
<p>æŸ¥è¯¢å›æ˜¾ä¹‹åï¼Œå°±å¯ä»¥åœ¨é¡µé¢ä¸Šä¿®æ”¹å‘˜å·¥çš„ä¿¡æ¯äº†ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-407-1024x501.png" alt="img"></p>
<ul>
<li>å½“ç”¨æˆ·ä¿®æ”¹å®Œæ•°æ®ä¹‹åï¼Œç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå°±éœ€è¦å°†æ•°æ®æäº¤åˆ°æœåŠ¡ç«¯ï¼Œç„¶åæœåŠ¡ç«¯éœ€è¦å°†ä¿®æ”¹åçš„æ•°æ®æ›´æ–°åˆ°æ•°æ®åº“ä¸­ ã€‚</li>
<li>è€Œæ­¤æ¬¡æ›´æ–°çš„æ—¶å€™ï¼Œæ—¢éœ€è¦æ›´æ–°å‘˜å·¥çš„åŸºæœ¬ä¿¡æ¯ï¼› åˆéœ€è¦æ›´æ–°å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ ã€‚</li>
</ul>
<p>åŸºæœ¬ä¿¡æ¯</p>
<blockquote>
<p>è¯·æ±‚è·¯å¾„ï¼š/emps</p>
<p>è¯·æ±‚æ–¹å¼ï¼šPUT</p>
<p>æ¥å£æè¿°ï¼šè¯¥æ¥å£ç”¨äºä¿®æ”¹å‘˜å·¥çš„æ•°æ®ä¿¡æ¯</p>
</blockquote>
<p>è¯·æ±‚å‚æ•°</p>
<p>å‚æ•°æ ¼å¼ï¼šapplication/json</p>
<p>å‚æ•°è¯´æ˜ï¼š</p>
<table>
<thead>
<tr>
<th>åç§°</th>
<th>ç±»å‹</th>
<th>æ˜¯å¦å¿…é¡»</th>
<th>å¤‡æ³¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>number</td>
<td>å¿…é¡»</td>
<td>id</td>
</tr>
<tr>
<td>username</td>
<td>string</td>
<td>å¿…é¡»</td>
<td>ç”¨æˆ·å</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>å¿…é¡»</td>
<td>å§“å</td>
</tr>
<tr>
<td>gender</td>
<td>number</td>
<td>å¿…é¡»</td>
<td>æ€§åˆ«, è¯´æ˜: 1 ç”·, 2 å¥³</td>
</tr>
<tr>
<td>image</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>å›¾åƒ</td>
</tr>
<tr>
<td>deptId</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>éƒ¨é—¨id</td>
</tr>
<tr>
<td>entryDate</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>å…¥èŒæ—¥æœŸ</td>
</tr>
<tr>
<td>job</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>èŒä½, è¯´æ˜: 1 ç­ä¸»ä»»,2 è®²å¸ˆ, 3 å­¦å·¥ä¸»ç®¡, 4 æ•™ç ”ä¸»ç®¡, 5 å’¨è¯¢å¸ˆ</td>
</tr>
<tr>
<td>salary</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>è–ªèµ„</td>
</tr>
<tr>
<td>exprList</td>
<td>object[]</td>
<td>éå¿…é¡»</td>
<td>å·¥ä½œç»å†åˆ—è¡¨</td>
</tr>
<tr>
<td>|- id</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>ID</td>
</tr>
<tr>
<td>|- company</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>æ‰€åœ¨å…¬å¸</td>
</tr>
<tr>
<td>|- job</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>èŒä½</td>
</tr>
<tr>
<td>|- begin</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>å¼€å§‹æ—¶é—´</td>
</tr>
<tr>
<td>|- end</td>
<td>string</td>
<td>éå¿…é¡»</td>
<td>ç»“æŸæ—¶é—´</td>
</tr>
<tr>
<td>|- empId</td>
<td>number</td>
<td>éå¿…é¡»</td>
<td>å‘˜å·¥ID</td>
</tr>
</tbody>
</table>
<p>è¯·æ±‚æ•°æ®æ ·ä¾‹ï¼š</p>
<figure class="highlight prolog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="string">&quot;username&quot;</span>: <span class="string">&quot;zhangwuji&quot;</span>,</span><br><span class="line"><span class="string">&quot;password&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line"><span class="string">&quot;name&quot;</span>: <span class="string">&quot;å¼ æ— å¿Œ&quot;</span>,</span><br><span class="line"><span class="string">&quot;gender&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="string">&quot;image&quot;</span>: <span class="string">&quot;https://web-framework.oss-cn-hangzhou.aliyuncs.com/2022-09-02-00-27-53B.jpg&quot;</span>,</span><br><span class="line"><span class="string">&quot;job&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="string">&quot;salary&quot;</span>: <span class="number">8000</span>,</span><br><span class="line"><span class="string">&quot;entryDate&quot;</span>: <span class="string">&quot;2015-01-01&quot;</span>,</span><br><span class="line"><span class="string">&quot;deptId&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="string">&quot;createTime&quot;</span>: <span class="string">&quot;2022-09-01T23:06:30&quot;</span>,</span><br><span class="line"><span class="string">&quot;updateTime&quot;</span>: <span class="string">&quot;2022-09-02T00:29:04&quot;</span>,</span><br><span class="line"><span class="string">&quot;exprList&quot;</span>: [</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line"><span class="string">&quot;begin&quot;</span>: <span class="string">&quot;2012-07-01&quot;</span>,</span><br><span class="line"><span class="string">&quot;end&quot;</span>: <span class="string">&quot;2015-06-20&quot;</span></span><br><span class="line"><span class="string">&quot;company&quot;</span>: <span class="string">&quot;ä¸­è½¯å›½é™…è‚¡ä»½æœ‰é™å…¬å¸&quot;</span></span><br><span class="line"><span class="string">&quot;job&quot;</span>: <span class="string">&quot;javaå¼€å‘&quot;</span>,</span><br><span class="line"><span class="string">&quot;empId&quot;</span>: <span class="number">2</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line"><span class="string">&quot;begin&quot;</span>: <span class="string">&quot;2015-07-01&quot;</span>,</span><br><span class="line"><span class="string">&quot;end&quot;</span>: <span class="string">&quot;2019-03-03&quot;</span></span><br><span class="line"><span class="string">&quot;company&quot;</span>: <span class="string">&quot;ç™¾åº¦ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸&quot;</span></span><br><span class="line"><span class="string">&quot;job&quot;</span>: <span class="string">&quot;javaå¼€å‘&quot;</span>,</span><br><span class="line"><span class="string">&quot;empId&quot;</span>: <span class="number">2</span></span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line"><span class="string">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line"><span class="string">&quot;begin&quot;</span>: <span class="string">&quot;2019-3-15&quot;</span>,</span><br><span class="line"><span class="string">&quot;end&quot;</span>: <span class="string">&quot;2023-03-01&quot;</span></span><br><span class="line"><span class="string">&quot;company&quot;</span>: <span class="string">&quot;é˜¿é‡Œå·´å·´ç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸&quot;</span></span><br><span class="line"><span class="string">&quot;job&quot;</span>: <span class="string">&quot;æ¶æ„å¸ˆ&quot;</span>,</span><br><span class="line"><span class="string">&quot;empId&quot;</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="6-2-2å®ç°æ€è·¯">6.2.2å®ç°æ€è·¯</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-357-1024x269.png" alt="img"></p>
<h4 id="6-2-3ä»£ç å®ç°">6.2.3ä»£ç å®ç°</h4>
<p>1). <code>EmpController</code> å¢åŠ  <code>update</code> æ–¹æ³•æ¥æ”¶è¯·æ±‚å‚æ•°ï¼Œå“åº”æ•°æ®</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ›´æ–°å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="variable">@PutMapping</span></span><br><span class="line">public Result <span class="built_in">update</span>(<span class="variable">@RequestBody</span> Emp emp)&#123;</span><br><span class="line">    <span class="selector-tag">log</span><span class="selector-class">.info</span>(<span class="string">&quot;ä¿®æ”¹å‘˜å·¥ä¿¡æ¯, &#123;&#125;&quot;</span>, emp);</span><br><span class="line">    <span class="selector-tag">empService</span><span class="selector-class">.update</span>(emp);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2). <code>EmpService</code> æ¥å£å¢åŠ  <code>update</code> æ–¹æ³•</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ›´æ–°å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment">* @param emp</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(Emp emp)</span></span>;</span><br></pre></td></tr></table></figure>
<p>3). <code>EmpServiceImpl</code>å®ç°ç±»å®ç° <code>update</code> æ–¹æ³•</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Emp emp)</span> &#123;</span><br><span class="line">    <span class="comment">//1. æ ¹æ®IDæ›´æ–°å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line">    emp.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    empMapper.updateById(emp);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. æ ¹æ®å‘˜å·¥IDåˆ é™¤å‘˜å·¥çš„å·¥ä½œç»å†ä¿¡æ¯ ã€åˆ é™¤è€çš„ã€‘</span></span><br><span class="line">    empExprMapper.deleteByEmpIds(Arrays.asList(emp.getId()));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. æ–°å¢å‘˜å·¥çš„å·¥ä½œç»å†æ•°æ® ã€æ–°å¢æ–°çš„ã€‘</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">empId</span> <span class="operator">=</span> emp.getId();</span><br><span class="line">    List&lt;EmpExpr&gt; exprList = emp.getExprList();</span><br><span class="line">    <span class="keyword">if</span>(!CollectionUtils.isEmpty(exprList))&#123;</span><br><span class="line">        exprList.forEach(empExpr -&gt; empExpr.setEmpId(empId));</span><br><span class="line">        empExprMapper.insertBatch(exprList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4). <code>EmpMapper</code> æ¥å£ä¸­å¢åŠ  <code>updateById</code> æ–¹æ³•</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* æ›´æ–°å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">updateById</span><span class="params">(Emp emp)</span></span>;</span><br></pre></td></tr></table></figure>
<p>5). <code>EmpMapper.xml</code> é…ç½®æ–‡ä»¶ä¸­å®šä¹‰å¯¹åº”çš„SQLè¯­å¥ï¼ŒåŸºäºåŠ¨æ€SQLæ›´æ–°å‘˜å·¥ä¿¡æ¯</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!--æ ¹æ®IDæ›´æ–°å‘˜å·¥ä¿¡æ¯--&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateById&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    update emp</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;username != null and username != &#x27;&#x27;&quot;</span>&gt;</span>username = #</span><span class="template-variable">&#123;username&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;password != null and password != &#x27;&#x27;&quot;</span>&gt;</span>password = #</span><span class="template-variable">&#123;password&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span>name = #</span><span class="template-variable">&#123;name&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null&quot;</span>&gt;</span>gender = #</span><span class="template-variable">&#123;gender&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null and phone != &#x27;&#x27;&quot;</span>&gt;</span>phone = #</span><span class="template-variable">&#123;phone&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;job != null&quot;</span>&gt;</span>job = #</span><span class="template-variable">&#123;job&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;salary != null&quot;</span>&gt;</span>salary = #</span><span class="template-variable">&#123;salary&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;image != null and image != &#x27;&#x27;&quot;</span>&gt;</span>image = #</span><span class="template-variable">&#123;image&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;entryDate != null&quot;</span>&gt;</span>entry_date = #</span><span class="template-variable">&#123;entryDate&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;deptId != null&quot;</span>&gt;</span>dept_id = #</span><span class="template-variable">&#123;deptId&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span>update_time = #</span><span class="template-variable">&#123;updateTime&#125;</span><span class="language-xml">,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    where id = #</span><span class="template-variable">&#123;id&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="7-å¼‚å¸¸å¤„ç†">7.å¼‚å¸¸å¤„ç†</h2>
<h3 id="7-1ä»‹ç»">7.1ä»‹ç»</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-358.png" alt="img"></p>
<p>å½“æˆ‘ä»¬æ²¡æœ‰åšä»»ä½•çš„å¼‚å¸¸å¤„ç†æ—¶ï¼Œæˆ‘ä»¬ä¸‰å±‚æ¶æ„å¤„ç†å¼‚å¸¸çš„æ–¹æ¡ˆï¼š</p>
<ul>
<li>Mapperæ¥å£åœ¨æ“ä½œæ•°æ®åº“çš„æ—¶å€™å‡ºé”™äº†ï¼Œæ­¤æ—¶å¼‚å¸¸ä¼šå¾€ä¸ŠæŠ›(è°è°ƒç”¨Mapperå°±æŠ›ç»™è°)ï¼Œä¼šæŠ›ç»™serviceã€‚</li>
<li>service ä¸­ä¹Ÿå­˜åœ¨å¼‚å¸¸äº†ï¼Œä¼šæŠ›ç»™controllerã€‚</li>
<li>è€Œåœ¨controllerå½“ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰åšä»»ä½•çš„å¼‚å¸¸å¤„ç†ï¼Œæ‰€ä»¥æœ€ç»ˆå¼‚å¸¸ä¼šå†å¾€ä¸ŠæŠ›ã€‚æœ€ç»ˆæŠ›ç»™æ¡†æ¶ä¹‹åï¼Œæ¡†æ¶å°±ä¼šè¿”å›ä¸€ä¸ªJSONæ ¼å¼çš„æ•°æ®ï¼Œé‡Œé¢å°è£…çš„å°±æ˜¯é”™è¯¯çš„ä¿¡æ¯ï¼Œä½†æ˜¯æ¡†æ¶è¿”å›çš„JSONæ ¼å¼çš„æ•°æ®å¹¶ä¸ç¬¦åˆæˆ‘ä»¬çš„å¼€å‘è§„èŒƒã€‚</li>
</ul>
<h3 id="7-2è§£å†³æ–¹æ¡ˆ">7.2è§£å†³æ–¹æ¡ˆ</h3>
<p>é‚£ä¹ˆåœ¨ä¸‰å±‚æ„æ¶é¡¹ç›®ä¸­ï¼Œå‡ºç°äº†å¼‚å¸¸ï¼Œè¯¥å¦‚ä½•å¤„ç†?</p>
<ul>
<li><strong>æ–¹æ¡ˆä¸€ï¼šåœ¨æ‰€æœ‰Controllerçš„æ‰€æœ‰æ–¹æ³•ä¸­è¿›è¡Œtryâ€¦catchå¤„ç†</strong></li>
</ul>
<p>ç¼ºç‚¹ï¼šä»£ç è‡ƒè‚¿ï¼ˆä¸æ¨èï¼‰</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-369.png" alt="img"></p>
<ul>
<li>**æ–¹æ¡ˆäºŒï¼š**<strong>å…¨å±€å¼‚å¸¸å¤„ç†å™¨</strong></li>
</ul>
<p>å¥½å¤„ï¼šç®€å•ã€ä¼˜é›…ï¼ˆæ¨èï¼‰</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-370.png" alt="img"></p>
<ol>
<li>å…¨å±€å¼‚å¸¸å¤„ç†å™¨</li>
</ol>
<p>æˆ‘ä»¬è¯¥æ€ä¹ˆæ ·å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†å™¨ï¼Ÿ</p>
<ul>
<li>å®šä¹‰å…¨å±€å¼‚å¸¸å¤„ç†å™¨éå¸¸ç®€å•ï¼Œå°±æ˜¯å®šä¹‰ä¸€ä¸ªç±»ï¼Œåœ¨ç±»ä¸ŠåŠ ä¸Šä¸€ä¸ªæ³¨è§£@RestControllerAdviceï¼ŒåŠ ä¸Šè¿™ä¸ªæ³¨è§£å°±ä»£è¡¨æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå…¨å±€å¼‚å¸¸å¤„ç†å™¨ã€‚</li>
<li>åœ¨å…¨å±€å¼‚å¸¸å¤„ç†å™¨å½“ä¸­ï¼Œéœ€è¦å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ¥æ•è·å¼‚å¸¸ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸Šéœ€è¦åŠ ä¸Šæ³¨è§£@ExceptionHandlerã€‚é€šè¿‡@ExceptionHandleræ³¨è§£å½“ä¸­çš„valueå±æ€§æ¥æŒ‡å®šæˆ‘ä»¬è¦æ•è·çš„æ˜¯å“ªä¸€ç±»å‹çš„å¼‚å¸¸ã€‚</li>
</ul>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GlobalExceptionHandler</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å¤„ç†å¼‚å¸¸</span></span><br><span class="line">    <span class="meta">@ExceptionHandler</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function">Result <span class="title">ex</span><span class="params">(Exception e)</span></span>&#123;<span class="comment">//æ–¹æ³•å½¢å‚ä¸­æŒ‡å®šèƒ½å¤Ÿå¤„ç†çš„å¼‚å¸¸ç±»å‹</span></span><br><span class="line">        e.printStackTrace();<span class="comment">//æ‰“å°å †æ ˆä¸­çš„å¼‚å¸¸ä¿¡æ¯</span></span><br><span class="line">        <span class="comment">//æ•è·åˆ°å¼‚å¸¸ä¹‹åï¼Œå“åº”ä¸€ä¸ªæ ‡å‡†çš„Result</span></span><br><span class="line">        <span class="function"><span class="keyword">return</span> Result.<span class="title">error</span><span class="params">(<span class="string">&quot;å¯¹ä¸èµ·,æ“ä½œå¤±è´¥,è¯·è”ç³»ç®¡ç†å‘˜&quot;</span>)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>@RestControllerAdvice = @ControllerAdvice + @ResponseBody</p>
<p>å¤„ç†å¼‚å¸¸çš„æ–¹æ³•è¿”å›å€¼ä¼šè½¬æ¢ä¸ºjsonåå†å“åº”ç»™å‰ç«¯</p>
<p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œå†æ¥æµ‹è¯•ä¸€ä¸‹ ä¿®æ”¹å‘˜å·¥ è¿™ä¸ªæ“ä½œï¼Œæˆ‘ä»¬ä¾ç„¶è®¾ç½®å·²å­˜åœ¨çš„ <code>13309090027</code>è¿™ä¸ªæ‰‹æœºå·ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-373-1024x502.png" alt="img"></p>
<p>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå‡ºç°å¼‚å¸¸ä¹‹åï¼Œå¼‚å¸¸å·²ç»è¢«å…¨å±€å¼‚å¸¸å¤„ç†å™¨æ•è·äº†ã€‚ç„¶åè¿”å›çš„é”™è¯¯ä¿¡æ¯ï¼Œè¢«å‰ç«¯ç¨‹åºæ­£å¸¸è§£æï¼Œç„¶åæç¤ºå‡ºäº†å¯¹åº”çš„é”™è¯¯æç¤ºä¿¡æ¯ã€‚</p>
<p>ä»¥ä¸Šå°±æ˜¯å…¨å±€å¼‚å¸¸å¤„ç†å™¨çš„ä½¿ç”¨ï¼Œä¸»è¦æ¶‰åŠåˆ°ä¸¤ä¸ªæ³¨è§£ï¼š</p>
<ul>
<li>@RestControllerAdvice //è¡¨ç¤ºå½“å‰ç±»ä¸ºå…¨å±€å¼‚å¸¸å¤„ç†å™¨</li>
<li>@ExceptionHandler //æŒ‡å®šå¯ä»¥æ•è·å“ªç§ç±»å‹çš„å¼‚å¸¸è¿›è¡Œå¤„ç†</li>
</ul>
<h2 id="8-å‘˜å·¥ä¿¡æ¯ç»Ÿè®¡">8.å‘˜å·¥ä¿¡æ¯ç»Ÿè®¡</h2>
<h3 id="8-1ä»‹ç»">8.1ä»‹ç»</h3>
<p>å¯¹äºè¿™äº›å›¾å½¢æŠ¥è¡¨çš„å¼€å‘ï¼Œå…¶å®å‘¢ï¼Œéƒ½æ˜¯åŸºäºç°æˆçš„ä¸€äº›å›¾å½¢æŠ¥è¡¨çš„ç»„ä»¶å¼€å‘çš„ï¼Œæ¯”å¦‚ï¼šEchartsã€HighChartsç­‰ã€‚</p>
<p>è€ŒæŠ¥è¡¨çš„åˆ¶ä½œï¼Œä¸»è¦æ˜¯å‰ç«¯äººå‘˜å¼€å‘ï¼Œå¼•å…¥å¯¹åº”çš„ç»„ä»¶ï¼ˆæ¯”å¦‚ï¼šEChartsï¼‰å³å¯ã€‚ æœåŠ¡ç«¯å¼€å‘äººå‘˜ä»…ä¸ºå…¶æä¾›æ•°æ®å³å¯ã€‚</p>
<p>å®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://echarts.apache.org/zh/index.html">https://echarts.apache.org/zh/index.html</a></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-371-1024x502.png" alt="img"></p>
<h3 id="8-2èŒä½ç»Ÿè®¡">8.2èŒä½ç»Ÿè®¡</h3>
<h4 id="8-2-1éœ€æ±‚">8.2.1éœ€æ±‚</h4>
<p>å¯¹äºè¿™ç±»çš„å›¾å½¢æŠ¥è¡¨ï¼ŒæœåŠ¡ç«¯è¦åšçš„ï¼Œå°±æ˜¯ä¸ºå…¶æä¾›æ•°æ®å³å¯ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡å®˜æ–¹çš„ç¤ºä¾‹ï¼Œçœ‹åˆ°æä¾›çš„æ•°æ®å…¶å®å°±æ˜¯Xè½´å±•ç¤ºçš„ä¿¡æ¯ï¼Œå’Œå¯¹åº”çš„æ•°æ®ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-372-1024x464.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-359-1024x733.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-360-1024x292.png" alt="img"></p>
<h4 id="8-2-2ä»£ç å®ç°">8.2.2ä»£ç å®ç°</h4>
<p><strong>1). å®šä¹‰****å°è£…ç»“æœå¯¹è±¡JobOption</strong></p>
<p>åœ¨ <code>com.itheima.pojo</code> åŒ…ä¸­å®šä¹‰å®ä½“ç±» <code>JobOption</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JobOption</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List jobList;</span><br><span class="line">    <span class="keyword">private</span> List dataList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>1). å®šä¹‰ReportControllerï¼Œå¹¶æ·»åŠ æ–¹æ³•ã€‚</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RequestMapping(<span class="string">&quot;/report&quot;</span>)</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReportController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ReportService reportService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»Ÿè®¡å„ä¸ªèŒä½çš„å‘˜å·¥äººæ•°</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/empJobData&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Result getEmpJobData()&#123;</span><br><span class="line">        log.info(<span class="string">&quot;ç»Ÿè®¡å„ä¸ªèŒä½çš„å‘˜å·¥äººæ•°&quot;</span>);</span><br><span class="line">        JobOption jobOption = reportService.getEmpJobData();</span><br><span class="line">        <span class="keyword">return</span> Result.success(jobOption);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). å®šä¹‰ReportServiceæ¥å£ï¼Œå¹¶æ·»åŠ æ¥å£æ–¹æ³•ã€‚</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title">ReportService</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç»Ÿè®¡å„ä¸ªèŒä½çš„å‘˜å·¥äººæ•°</span></span><br><span class="line"><span class="comment">     * @return</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">JobOption <span class="title">getEmpJobData</span>()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3). å®šä¹‰ReportServiceImplå®ç°ç±»ï¼Œå¹¶å®ç°æ–¹æ³•</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReportServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">ReportService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">EmpMapper</span> empMapper;</span><br><span class="line">        </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">JobOption</span> <span class="title function_">getEmpJobData</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Map</span>&lt;<span class="title class_">String</span>,<span class="title class_">Object</span>&gt;&gt; list = empMapper.<span class="title function_">countEmpJobData</span>();</span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Object</span>&gt; jobList = list.<span class="title function_">stream</span>().<span class="title function_">map</span>(dataMap -&gt; dataMap.<span class="title function_">get</span>(<span class="string">&quot;pos&quot;</span>)).<span class="title function_">toList</span>();</span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Object</span>&gt; dataList = list.<span class="title function_">stream</span>().<span class="title function_">map</span>(dataMap -&gt; dataMap.<span class="title function_">get</span>(<span class="string">&quot;total&quot;</span>)).<span class="title function_">toList</span>();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">JobOption</span>(jobList, dataList);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4). å®šä¹‰EmpMapper æ¥å£</strong></p>
<p>ç»Ÿè®¡çš„æ˜¯å‘˜å·¥çš„ä¿¡æ¯ï¼Œæ‰€ä»¥éœ€è¦æ“ä½œçš„æ˜¯å‘˜å·¥è¡¨ã€‚ æ‰€ä»¥ä»£ç æˆ‘ä»¬å°±å†™åœ¨ <code>EmpMapper</code> æ¥å£ä¸­å³å¯ã€‚</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡å„ä¸ªèŒä½çš„å‘˜å·¥äººæ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@MapKey(<span class="string">&quot;pos&quot;</span>)</span><br><span class="line">List&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>,<span class="built_in">Object</span>&gt;&gt; countEmpJobData();</span><br></pre></td></tr></table></figure>
<p>å¦‚æœæŸ¥è¯¢çš„è®°å½•å¾€Mapä¸­å°è£…ï¼Œå¯ä»¥é€šè¿‡@MapKeyæ³¨è§£æŒ‡å®šè¿”å›çš„mapä¸­çš„å”¯ä¸€æ ‡è¯†æ˜¯é‚£ä¸ªå­—æ®µã€‚ã€ä¹Ÿå¯ä»¥ä¸æŒ‡å®šã€‘</p>
<p><strong>5). å®šä¹‰EmpMapper.xml</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="comment">-- ç»Ÿè®¡å„ä¸ªèŒä½çš„å‘˜å·¥äººæ•° --&gt;</span></span><br><span class="line">&lt;<span class="keyword">select</span> id=&quot;countEmpJobData&quot; resultType=&quot;java.util.Map&quot;&gt;</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">    (<span class="keyword">case</span> job <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;ç­ä¸»ä»»&#x27;</span> </span><br><span class="line">                     <span class="keyword">when</span> <span class="number">2</span> <span class="keyword">then</span> <span class="string">&#x27;è®²å¸ˆ&#x27;</span> </span><br><span class="line">                     <span class="keyword">when</span> <span class="number">3</span> <span class="keyword">then</span> <span class="string">&#x27;å­¦å·¥ä¸»ç®¡&#x27;</span> </span><br><span class="line">                     <span class="keyword">when</span> <span class="number">4</span> <span class="keyword">then</span> <span class="string">&#x27;æ•™ç ”ä¸»ç®¡&#x27;</span> </span><br><span class="line">                     <span class="keyword">when</span> <span class="number">5</span> <span class="keyword">then</span> <span class="string">&#x27;å’¨è¯¢å¸ˆ&#x27;</span> </span><br><span class="line">                     <span class="keyword">else</span> <span class="string">&#x27;å…¶ä»–&#x27;</span> <span class="keyword">end</span>)  pos,</span><br><span class="line">    count(*) total</span><br><span class="line">    <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> job</span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> total</span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br></pre></td></tr></table></figure>
<p><strong>caseæµç¨‹æ§åˆ¶å‡½æ•°ï¼š</strong></p>
<ul>
<li>
<p>è¯­æ³•ä¸€ï¼šcase when cond1 then res1 [ when cond2 then res2 ] else res end ;</p>
</li>
<li>
<p>å«ä¹‰ï¼šå¦‚æœ cond1 æˆç«‹ï¼Œ å– res1ã€‚ å¦‚æœ cond2 æˆç«‹ï¼Œå– res2ã€‚ å¦‚æœå‰é¢çš„æ¡ä»¶éƒ½ä¸æˆç«‹ï¼Œåˆ™å– resã€‚</p>
</li>
<li>
<p>è¯­æ³•äºŒï¼ˆä»…é€‚ç”¨äºç­‰å€¼åŒ¹é…ï¼‰ï¼šcase expr when val1 then res1 [ when val2 then res2 ] else res end ;</p>
</li>
<li>
<p>å«ä¹‰ï¼šå¦‚æœ expr çš„å€¼ä¸º val1 ï¼Œ å– res1ã€‚ å¦‚æœ expr çš„å€¼ä¸º val2 ï¼Œå– res2ã€‚ å¦‚æœå‰é¢çš„æ¡ä»¶éƒ½ä¸æˆç«‹ï¼Œåˆ™å– resã€‚</p>
</li>
</ul>
<p>é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€Apifoxè¿›è¡Œæµ‹è¯•ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-408-1024x646.png" alt="img"></p>
<p>è”è°ƒæµ‹è¯•</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-409-1024x501.png" alt="img"></p>
<h3 id="8-3æ€§åˆ«ç»Ÿè®¡">8.3æ€§åˆ«ç»Ÿè®¡</h3>
<h4 id="8-3-1éœ€æ±‚">8.3.1éœ€æ±‚</h4>
<p>å¯¹äºè¿™ç±»çš„å›¾å½¢æŠ¥è¡¨ï¼ŒæœåŠ¡ç«¯è¦åšçš„ï¼Œå°±æ˜¯ä¸ºå…¶æä¾›æ•°æ®å³å¯ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡å®˜æ–¹çš„ç¤ºä¾‹ï¼Œçœ‹åˆ°æä¾›çš„æ•°æ®å°±æ˜¯ä¸€ä¸ªjsonæ ¼å¼çš„æ•°æ®ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-410.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-361-1024x714.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-362-1024x307.png" alt="img"></p>
<h4 id="8-3-2ä»£ç å®ç°">8.3.2ä»£ç å®ç°</h4>
<p><strong>1). åœ¨ReportControllerï¼Œæ·»åŠ æ–¹æ³•ã€‚</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡å‘˜å·¥æ€§åˆ«ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">&quot;/empGenderData&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">Result</span> <span class="title function_">getEmpGenderData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    log.<span class="title function_">info</span>(<span class="string">&quot;ç»Ÿè®¡å‘˜å·¥æ€§åˆ«ä¿¡æ¯&quot;</span>);</span><br><span class="line">    <span class="title class_">List</span>&lt;<span class="title class_">Map</span>&gt; genderList = reportService.<span class="title function_">getEmpGenderData</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Result</span>.<span class="title function_">success</span>(genderList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). åœ¨ReportServiceæ¥å£ï¼Œæ·»åŠ æ¥å£æ–¹æ³•ã€‚</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡å‘˜å·¥æ€§åˆ«ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function">List&lt;Map&gt; <span class="title">getEmpGenderData</span>()</span>;</span><br></pre></td></tr></table></figure>
<p><strong>3). åœ¨ReportServiceImplå®ç°ç±»ï¼Œå®ç°æ–¹æ³•</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_">List</span>&lt;<span class="title class_">Map</span>&gt; <span class="title function_">getEmpGenderData</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> empMapper.<span class="title function_">countEmpGenderData</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>4). å®šä¹‰EmpMapper æ¥å£</strong></p>
<p>ç»Ÿè®¡çš„æ˜¯å‘˜å·¥çš„ä¿¡æ¯ï¼Œæ‰€ä»¥éœ€è¦æ“ä½œçš„æ˜¯å‘˜å·¥è¡¨ã€‚ æ‰€ä»¥ä»£ç æˆ‘ä»¬å°±å†™åœ¨ <code>EmpMapper</code> æ¥å£ä¸­å³å¯ã€‚</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡å‘˜å·¥æ€§åˆ«ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@MapKey</span>(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">List&lt;Map&gt; <span class="built_in">countEmpGenderData</span>();</span><br></pre></td></tr></table></figure>
<p><strong>5). å®šä¹‰EmpMapper.xml</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="comment">-- ç»Ÿè®¡å‘˜å·¥çš„æ€§åˆ«ä¿¡æ¯ --&gt;</span></span><br><span class="line">&lt;<span class="keyword">select</span> id=&quot;countEmpGenderData&quot; resultType=&quot;java.util.Map&quot;&gt;</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">    <span class="keyword">if</span>(gender = <span class="number">1</span>, <span class="string">&#x27;ç”·&#x27;</span>, <span class="string">&#x27;å¥³&#x27;</span>) <span class="keyword">as</span> <span class="type">name</span>,</span><br><span class="line">    count(*) <span class="keyword">as</span> <span class="keyword">value</span></span><br><span class="line">    <span class="keyword">from</span> emp <span class="keyword">group</span> <span class="keyword">by</span> gender ;</span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br></pre></td></tr></table></figure>
<p>ifå‡½æ•°è¯­æ³•ï¼š<code>if(æ¡ä»¶, æ¡ä»¶ä¸ºtrueå–å€¼, æ¡ä»¶ä¸ºfalseå–å€¼)</code></p>
<p>ifnullå‡½æ•°è¯­æ³•ï¼š<code>ifnull(expr, val1)</code> å¦‚æœexprä¸ä¸ºnullï¼Œå–è‡ªèº«ï¼Œå¦åˆ™å–val1</p>
<p>Apifoxæµ‹è¯•</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-411.png" alt="img"></p>
<p>è”è°ƒæµ‹è¯•</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-412.png" alt="img"></p>
<h1 id="â€“ç­çº§ç®¡ç†">â€“ç­çº§ç®¡ç†</h1>
<p>æ•°æ®å‡†å¤‡</p>
<p>åœ¨æ•°æ®åº“ä¸­ï¼Œåˆ›å»ºå­¦ç”Ÿè¡¨ <code>clazz</code> , <code>student</code>ï¼ŒSQLå¦‚ä¸‹ï¼š</p>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">create table clazz<span class="punctuation">(</span></span><br><span class="line">    id   int unsigned primary key auto_increment comment &#x27;ID,ä¸»é”®&#x27;<span class="punctuation">,</span></span><br><span class="line">    name  varchar<span class="punctuation">(</span><span class="number">30</span><span class="punctuation">)</span> not <span class="literal">null</span> unique  comment &#x27;ç­çº§åç§°&#x27;<span class="punctuation">,</span></span><br><span class="line">    room  varchar<span class="punctuation">(</span><span class="number">20</span><span class="punctuation">)</span> comment &#x27;ç­çº§æ•™å®¤&#x27;<span class="punctuation">,</span></span><br><span class="line">    begin_date date not <span class="literal">null</span> comment &#x27;å¼€è¯¾æ—¶é—´&#x27;<span class="punctuation">,</span></span><br><span class="line">    end_date date not <span class="literal">null</span> comment &#x27;ç»“è¯¾æ—¶é—´&#x27;<span class="punctuation">,</span></span><br><span class="line">    master_id int unsigned <span class="literal">null</span> comment &#x27;ç­ä¸»ä»»ID, å…³è”å‘˜å·¥è¡¨ID&#x27;<span class="punctuation">,</span></span><br><span class="line">    subject tinyint unsigned not <span class="literal">null</span> comment &#x27;å­¦ç§‘, 1:java, 2:å‰ç«¯, 3:å¤§æ•°æ®, 4:Python, 5:Go, 6: åµŒå…¥å¼&#x27;<span class="punctuation">,</span></span><br><span class="line">    create_time datetime  comment &#x27;åˆ›å»ºæ—¶é—´&#x27;<span class="punctuation">,</span></span><br><span class="line">    update_time datetime  comment &#x27;ä¿®æ”¹æ—¶é—´&#x27;</span><br><span class="line"><span class="punctuation">)</span>comment &#x27;ç­çº§è¡¨&#x27;<span class="punctuation">;</span></span><br><span class="line"></span><br><span class="line">INSERT INTO clazz VALUES <span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span>&#x27;JavaEEå°±ä¸š163æœŸ&#x27;<span class="punctuation">,</span>&#x27;212&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-04-30</span>&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-06-29</span>&#x27;<span class="punctuation">,</span><span class="number">10</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2024-06-01</span> 17:08:23&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-06-01</span> 17:39:58&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span>&#x27;å‰ç«¯å°±ä¸š90æœŸ&#x27;<span class="punctuation">,</span>&#x27;210&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-07-10</span>&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-01-20</span>&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2024-06-01</span> 17:45:12&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-06-01</span> 17:45:12&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span>&#x27;JavaEEå°±ä¸š165æœŸ&#x27;<span class="punctuation">,</span>&#x27;108&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-06-15</span>&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-12-25</span>&#x27;<span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2024-06-01</span> 17:45:40&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-06-01</span> 17:45:40&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">4</span><span class="punctuation">,</span>&#x27;JavaEEå°±ä¸š166æœŸ&#x27;<span class="punctuation">,</span>&#x27;105&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-07-20</span>&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-02-20</span>&#x27;<span class="punctuation">,</span><span class="number">20</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2024-06-01</span> 17:46:10&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-06-01</span> 17:46:10&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span>&#x27;å¤§æ•°æ®å°±ä¸š58æœŸ&#x27;<span class="punctuation">,</span>&#x27;209&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-08-01</span>&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-02-15</span>&#x27;<span class="punctuation">,</span><span class="number">7</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2024-06-01</span> 17:51:21&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-06-01</span> 17:51:21&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">6</span><span class="punctuation">,</span>&#x27;JavaEEå°±ä¸š167æœŸ&#x27;<span class="punctuation">,</span>&#x27;325&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-20</span>&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-05-10</span>&#x27;<span class="punctuation">,</span><span class="number">36</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-15</span> 11:35:46&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-12-13</span> 14:31:24&#x27;<span class="punctuation">)</span><span class="punctuation">;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">create table student<span class="punctuation">(</span></span><br><span class="line">  id int unsigned primary key auto_increment comment &#x27;ID,ä¸»é”®&#x27;<span class="punctuation">,</span></span><br><span class="line">  name varchar<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span>  not <span class="literal">null</span> comment &#x27;å§“å&#x27;<span class="punctuation">,</span></span><br><span class="line">  no char<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span>  not <span class="literal">null</span> unique comment &#x27;å­¦å·&#x27;<span class="punctuation">,</span></span><br><span class="line">  gender tinyint unsigned  not <span class="literal">null</span> comment &#x27;æ€§åˆ«, 1: ç”·, 2: å¥³&#x27;<span class="punctuation">,</span></span><br><span class="line">  phone  varchar<span class="punctuation">(</span><span class="number">11</span><span class="punctuation">)</span>  not <span class="literal">null</span> unique comment &#x27;æ‰‹æœºå·&#x27;<span class="punctuation">,</span></span><br><span class="line">  id_card  char<span class="punctuation">(</span><span class="number">18</span><span class="punctuation">)</span>  not <span class="literal">null</span> unique comment &#x27;èº«ä»½è¯å·&#x27;<span class="punctuation">,</span></span><br><span class="line">  is_college tinyint unsigned  not <span class="literal">null</span> comment &#x27;æ˜¯å¦æ¥è‡ªäºé™¢æ ¡, 1:æ˜¯, 0:å¦&#x27;<span class="punctuation">,</span></span><br><span class="line">  address  varchar<span class="punctuation">(</span><span class="number">100</span><span class="punctuation">)</span>  comment &#x27;è”ç³»åœ°å€&#x27;<span class="punctuation">,</span></span><br><span class="line">  degree  tinyint unsigned  comment &#x27;æœ€é«˜å­¦å†, 1:åˆä¸­, 2:é«˜ä¸­, 3:å¤§ä¸“, 4:æœ¬ç§‘, 5:ç¡•å£«, 6:åšå£«&#x27;<span class="punctuation">,</span></span><br><span class="line">  graduation_date date comment &#x27;æ¯•ä¸šæ—¶é—´&#x27;<span class="punctuation">,</span></span><br><span class="line">  clazz_id  int unsigned not <span class="literal">null</span> comment &#x27;ç­çº§ID, å…³è”ç­çº§è¡¨ID&#x27;<span class="punctuation">,</span></span><br><span class="line">  violation_count tinyint unsigned default &#x27;0&#x27; not <span class="literal">null</span> comment &#x27;è¿çºªæ¬¡æ•°&#x27;<span class="punctuation">,</span></span><br><span class="line">  violation_score tinyint unsigned default &#x27;0&#x27; not <span class="literal">null</span> comment &#x27;è¿çºªæ‰£åˆ†&#x27;<span class="punctuation">,</span></span><br><span class="line">  create_time  datetime  comment &#x27;åˆ›å»ºæ—¶é—´&#x27;<span class="punctuation">,</span></span><br><span class="line">  update_time  datetime  comment &#x27;ä¿®æ”¹æ—¶é—´&#x27;</span><br><span class="line"><span class="punctuation">)</span> comment &#x27;å­¦å‘˜è¡¨&#x27;<span class="punctuation">;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT INTO student VALUES <span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span>&#x27;æ®µèª‰&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000001</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880000000</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0001</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯1å·&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">2021-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-15</span> 16:20:59&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span>&#x27;è§å³°&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000002</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880021000</span>3&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0002</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯2å·&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2022-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span>&#x27;è™šç«¹&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000003</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880001300</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0003</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯3å·&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2024-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">4</span><span class="punctuation">,</span>&#x27;è§è¿œå±±&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000004</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880000321</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0004</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯4å·&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2024-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">5</span><span class="punctuation">,</span>&#x27;é˜¿æœ±&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000005</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">1880016000</span>2&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0005</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯5å·&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span>&#x27;<span class="number">2020-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">6</span><span class="punctuation">,</span>&#x27;é˜¿ç´«&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000006</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">1880000003</span>4&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0006</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯6å·&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span>&#x27;<span class="number">2021-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">7</span><span class="punctuation">,</span>&#x27;æ¸¸å¦ä¹‹&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000007</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880000006</span>7&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0007</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯7å·&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span>&#x27;<span class="number">2022-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">8</span><span class="punctuation">,</span>&#x27;åº·æ•&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000008</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">1880000007</span>7&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0008</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯8å·&#x27;<span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span>&#x27;<span class="number">2024-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">9</span><span class="punctuation">,</span>&#x27;å¾é•¿è€&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000009</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880000034</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0009</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯9å·&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2024-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">10</span><span class="punctuation">,</span>&#x27;äº‘ä¸­é¹¤&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000010</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880000657</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0010</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯10å·&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2020-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">11</span><span class="punctuation">,</span>&#x27;é’Ÿä¸‡ä»‡&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000011</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880000039</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0011</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯11å·&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span>&#x27;<span class="number">2021-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-15</span> 16:21:24&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">12</span><span class="punctuation">,</span>&#x27;å´”ç™¾æ³‰&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000012</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880000078</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0018</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯12å·&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span>&#x27;<span class="number">2022-07-05</span>&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">,</span><span class="number">17</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-12-13</span> 14:33:58&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">13</span><span class="punctuation">,</span>&#x27;è€¶å¾‹æ´ªåŸº&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000013</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880000890</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0013</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯13å·&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span>&#x27;<span class="number">2024-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-15</span> 16:21:21&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">14</span><span class="punctuation">,</span>&#x27;å¤©å±±ç«¥å§¥&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000014</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">1880000920</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0014</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯14å·&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span>&#x27;<span class="number">2024-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-15</span> 16:21:17&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">15</span><span class="punctuation">,</span>&#x27;åˆ˜ç«¹åº„&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000015</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880000940</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0015</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯15å·&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span>&#x27;<span class="number">2020-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">16</span><span class="punctuation">,</span>&#x27;ææ˜¥æ¥&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000016</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1880000850</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0016</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯16å·&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span>&#x27;<span class="number">2021-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">17</span><span class="punctuation">,</span>&#x27;ç‹è¯­å«£&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2022000017</span>&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">1880000760</span>1&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11012000030020</span><span class="number">0017</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå»ºæåŸè¥¿è·¯17å·&#x27;<span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span>&#x27;<span class="number">2022-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-14</span> 21:22:19&#x27;<span class="punctuation">)</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">(</span><span class="number">18</span><span class="punctuation">,</span>&#x27;éƒ‘æˆåŠŸ&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024001101</span>&#x27;<span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span>&#x27;<span class="number">1330909234</span>5&#x27;<span class="punctuation">,</span>&#x27;<span class="number">11011011011011</span><span class="number">0110</span>&#x27;<span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span>&#x27;åŒ—äº¬å¸‚æ˜Œå¹³åŒºå›é¾™è§‚è¡—é“88å·&#x27;<span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span>&#x27;<span class="number">2021-07-01</span>&#x27;<span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">7</span><span class="punctuation">,</span>&#x27;<span class="number">2024-11-15</span> 16:26:18&#x27;<span class="punctuation">,</span>&#x27;<span class="number">2024-11-15</span> 16:40:10&#x27;<span class="punctuation">)</span><span class="punctuation">;</span></span><br></pre></td></tr></table></figure>
<p>è¡¨ç»“æ„å…³ç³»è¯´æ˜ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-413-1024x562.png" alt="img"></p>
<p>å®ä½“ç±»Clazzï¼š</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Data</span></span><br><span class="line"><span class="variable">@NoArgsConstructor</span></span><br><span class="line"><span class="variable">@AllArgsConstructor</span></span><br><span class="line">public class Clazz &#123;</span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Integer</span> <span class="selector-tag">id</span>; <span class="comment">//ID</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">name</span>; <span class="comment">//ç­çº§åç§°</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">room</span>; <span class="comment">//ç­çº§æ•™å®¤</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">LocalDate</span> <span class="selector-tag">beginDate</span>; <span class="comment">//å¼€è¯¾æ—¶é—´</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">LocalDate</span> <span class="selector-tag">endDate</span>; <span class="comment">//ç»“è¯¾æ—¶é—´</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Integer</span> <span class="selector-tag">masterId</span>; <span class="comment">//ç­ä¸»ä»»</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Integer</span> <span class="selector-tag">subject</span>; <span class="comment">//å­¦ç§‘</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">LocalDateTime</span> <span class="selector-tag">createTime</span>; <span class="comment">//åˆ›å»ºæ—¶é—´</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">LocalDateTime</span> <span class="selector-tag">updateTime</span>; <span class="comment">//ä¿®æ”¹æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">masterName</span>; <span class="comment">//ç­ä¸»ä»»å§“å</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">status</span>; <span class="comment">//ç­çº§çŠ¶æ€ - æœªå¼€ç­ , åœ¨è¯» , å·²ç»“è¯¾</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ä½“ç±»Studentï¼š</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Data</span></span><br><span class="line"><span class="variable">@NoArgsConstructor</span></span><br><span class="line"><span class="variable">@AllArgsConstructor</span></span><br><span class="line">public class Student &#123;</span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Integer</span> <span class="selector-tag">id</span>; <span class="comment">//ID</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">name</span>; <span class="comment">//å§“å</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">no</span>; <span class="comment">//åºå·</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Integer</span> <span class="selector-tag">gender</span>; <span class="comment">//æ€§åˆ« , 1: ç”· , 2 : å¥³</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">phone</span>; <span class="comment">//æ‰‹æœºå·</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">idCard</span>; <span class="comment">//èº«ä»½è¯å·</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Integer</span> <span class="selector-tag">isCollege</span>; <span class="comment">//æ˜¯å¦æ¥è‡ªäºé™¢æ ¡, 1: æ˜¯, 0: å¦</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">address</span>; <span class="comment">//è”ç³»åœ°å€</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Integer</span> <span class="selector-tag">degree</span>; <span class="comment">//æœ€é«˜å­¦å†, 1: åˆä¸­, 2: é«˜ä¸­ , 3: å¤§ä¸“ , 4: æœ¬ç§‘ , 5: ç¡•å£« , 6: åšå£«</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">LocalDate</span> <span class="selector-tag">graduationDate</span>; <span class="comment">//æ¯•ä¸šæ—¶é—´</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Integer</span> <span class="selector-tag">clazzId</span>; <span class="comment">//ç­çº§ID</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Short</span> <span class="selector-tag">violationCount</span>; <span class="comment">//è¿çºªæ¬¡æ•°</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Short</span> <span class="selector-tag">violationScore</span>; <span class="comment">//è¿çºªæ‰£åˆ†</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">LocalDateTime</span> <span class="selector-tag">createTime</span>; <span class="comment">//åˆ›å»ºæ—¶é—´</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">LocalDateTime</span> <span class="selector-tag">updateTime</span>; <span class="comment">//ä¿®æ”¹æ—¶é—´</span></span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">clazzName</span>;<span class="comment">//ç­çº§åç§°</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="1-æ¡ä»¶åˆ†é¡µæŸ¥è¯¢">1.æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</h2>
<h3 id="1-1éœ€æ±‚">1.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-363-1024x474.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-364-1024x718.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-365-1024x761.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-367-759x1024.png" alt="img"></p>
<h3 id="1-2ä»£ç å®ç°">1.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ <code>ClazzController</code> ä¸­</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_">Result</span> <span class="title function_">page</span>(<span class="params"><span class="title class_">String</span> name ,</span></span><br><span class="line"><span class="params">                   <span class="meta">@DateTimeFormat</span>(pattern = <span class="string">&quot;yyyy-MM-dd&quot;</span>) <span class="title class_">LocalDate</span> begin ,</span></span><br><span class="line"><span class="params">                   <span class="meta">@DateTimeFormat</span>(pattern = <span class="string">&quot;yyyy-MM-dd&quot;</span>) <span class="title class_">LocalDate</span> end,</span></span><br><span class="line"><span class="params">                   <span class="meta">@RequestParam</span>(defaultValue = <span class="string">&quot;1&quot;</span>) <span class="title class_">Integer</span> page ,</span></span><br><span class="line"><span class="params">                   <span class="meta">@RequestParam</span>(defaultValue = <span class="string">&quot;10&quot;</span>)<span class="title class_">Integer</span> pageSize</span>)&#123;</span><br><span class="line">    <span class="title class_">PageResult</span> pageResult = clazzService.<span class="title function_">page</span>(name , begin , end , page , pageSize);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Result</span>.<span class="title function_">success</span>(pageResult);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).<code>Clazz</code>Service &amp; <code>Clazz</code>ServiceImpl</p>
<p>åœ¨ <code>ClazzService</code> ä¸­</p>
<figure class="highlight julia"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</span><br><span class="line"> * <span class="meta">@param</span> name</span><br><span class="line"> * <span class="meta">@param</span> <span class="keyword">begin</span></span><br><span class="line"> * <span class="meta">@param</span> <span class="keyword">end</span></span><br><span class="line"> * <span class="meta">@param</span> page</span><br><span class="line"> * <span class="meta">@param</span> pageSize</span><br><span class="line"> * <span class="meta">@return</span></span><br><span class="line"> */</span><br><span class="line">PageResult page(<span class="built_in">String</span> name, LocalDate <span class="keyword">begin</span>, LocalDate <span class="keyword">end</span>, <span class="built_in">Integer</span> page, <span class="built_in">Integer</span> pageSize);</span><br></pre></td></tr></table></figure>
<p>åœ¨<code>Clazz</code>ServiceImplä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line"><span class="built_in">public</span> PageResult page(String <span class="type">name</span>, LocalDate <span class="keyword">begin</span>, LocalDate <span class="keyword">end</span>, <span class="type">Integer</span> page, <span class="type">Integer</span> pageSize) &#123;</span><br><span class="line">    PageHelper.startPage(page, pageSize);</span><br><span class="line"></span><br><span class="line">    List&lt;Clazz&gt; dataList = clazzMapper.list(<span class="type">name</span>,<span class="keyword">begin</span>,<span class="keyword">end</span>);</span><br><span class="line">    Page&lt;Clazz&gt; p = (Page&lt;Clazz&gt;) dataList;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">new</span> PageResult(p.getTotal(), p.getResult());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ClazzMapperä¸­</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * åŠ¨æ€æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function">List&lt;Clazz&gt; <span class="title">list</span><span class="params">(<span class="type">String</span> name, LocalDate begin, LocalDate end)</span></span>;</span><br></pre></td></tr></table></figure>
<p>ClazzMapper.xmlä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">select</span> id=&quot;list&quot; resultType=&quot;com.itheima.pojo.Clazz&quot;&gt;</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        c.*,</span><br><span class="line">        e.name masterName,</span><br><span class="line">        (<span class="keyword">case</span> <span class="keyword">when</span> begin_date &amp;gt; now() <span class="keyword">then</span> <span class="string">&#x27;æœªå¼€ç­&#x27;</span> <span class="keyword">when</span> now() &amp;gt; end_date <span class="keyword">then</span> <span class="string">&#x27;å·²ç»“è¯¾&#x27;</span> <span class="keyword">else</span>  <span class="string">&#x27;åœ¨è¯»ä¸­&#x27;</span> <span class="keyword">end</span> ) status</span><br><span class="line">    <span class="keyword">from</span> clazz c <span class="keyword">left join</span> emp e <span class="keyword">on</span> c.master_id = e.id</span><br><span class="line">    &lt;<span class="keyword">where</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">if</span> test=&quot;name != null and name != &#x27;&#x27;&quot;&gt;</span><br><span class="line">            c.name <span class="keyword">like</span> concat(<span class="string">&#x27;%&#x27;</span>,#&#123;<span class="type">name</span>&#125;,<span class="string">&#x27;%&#x27;</span>)</span><br><span class="line">        &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">        &lt;<span class="keyword">if</span> test=&quot;begin != null and end != null&quot;&gt;</span><br><span class="line">            <span class="keyword">and</span> c.end_date <span class="keyword">between</span> #&#123;<span class="keyword">begin</span>&#125; <span class="keyword">and</span> #&#123;<span class="keyword">end</span>&#125;</span><br><span class="line">        &lt;/<span class="keyword">if</span>&gt;</span><br><span class="line">    &lt;/<span class="keyword">where</span>&gt;</span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> c.update_time <span class="keyword">desc</span></span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br></pre></td></tr></table></figure>
<h2 id="2-æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥">2.æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥</h2>
<h3 id="2-1éœ€æ±‚-2">2.1éœ€æ±‚</h3>
<p>é‚£å…¶å®ï¼Œå¯¹äºåŸ¹è®­æœºæ„æ¥è¯´ï¼Œç­ä¸»ä»»å°±æ˜¯è¿™ä¸ªä¼ä¸šçš„å‘˜å·¥ã€‚æ‰€ä»¥ï¼Œç­ä¸»ä»»ä¸‹æ‹‰åˆ—è¡¨ä¸­å±•ç¤ºçš„å°±æ˜¯æ‰€æœ‰çš„å‘˜å·¥æ•°æ®ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-368-1024x490.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-415.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-414-1024x775.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-416-1024x841.png" alt="img"></p>
<h3 id="2-2ä»£ç å®ç°">2.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨Emp<code>Controller</code> ä¸­</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping</span>(<span class="string">&quot;/list&quot;</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="function">Result <span class="title">list</span><span class="params">()</span></span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥æ•°æ®&quot;</span>);</span><br><span class="line">        List&lt;Emp&gt; empList = empService.list();</span><br><span class="line">        <span class="function"><span class="keyword">return</span> Result.<span class="title">success</span><span class="params">(empList)</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).<code>Emp</code>Service &amp;EmpServiceImpl</p>
<p>åœ¨ <code>EmpService</code> ä¸­</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æŸ¥è¯¢æ‰€æœ‰çš„å‘˜å·¥æ•°æ®</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function">List&lt;Emp&gt; <span class="title">list</span>()</span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ EmpServiceImplä¸­</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="title class_">List</span>&lt;<span class="title class_">Emp</span>&gt; <span class="title function_">list</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> empMapper.<span class="title function_">findAll</span>();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰EmpMapper ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢å…¨éƒ¨å‘˜å·¥</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@Select</span>(<span class="string">&quot;select id, username, password, name, gender, phone, job, salary, image, entry_date, dept_id, create_time, update_time from emp&quot;</span>)</span><br><span class="line">List&lt;Emp&gt; <span class="built_in">findAll</span>();</span><br></pre></td></tr></table></figure>
<h2 id="3-æ–°å¢ç­çº§ä¿¡æ¯">3.æ–°å¢ç­çº§ä¿¡æ¯</h2>
<h3 id="3-1éœ€æ±‚">3.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-417-1024x481.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-418-1024x640.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-419-1024x830.png" alt="img"></p>
<h3 id="3-2ä»£ç å®ç°">3.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ <code>ClazzController</code> ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ–°å¢ç­çº§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@PostMapping</span></span><br><span class="line">public Result <span class="built_in">save</span>(<span class="variable">@RequestBody</span> Clazz clazz)&#123;</span><br><span class="line">    <span class="selector-tag">clazzService</span><span class="selector-class">.save</span>(clazz);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).<code>Clazz</code>Service &amp; <code>Clazz</code>ServiceImpl</p>
<p>åœ¨ <code>ClazzService</code> ä¸­</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ ç­çº§ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * @param clazz</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">save</span><span class="params">(Clazz clazz)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>Clazz</code>ServiceImpl ä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line"><span class="built_in">public</span> <span class="type">void</span> save(Clazz clazz) &#123;</span><br><span class="line">    clazz.setCreateTime(LocalDateTime.now());</span><br><span class="line">    clazz.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    clazzMapper.<span class="keyword">insert</span>(clazz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ClazzMapper ä¸­</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æ·»åŠ ç­çº§ä¿¡æ¯</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   @Insert(<span class="string">&quot;insert into clazz VALUES (null,<span class="subst">#&#123;name&#125;</span>,<span class="subst">#&#123;room&#125;</span>,<span class="subst">#&#123;beginDate&#125;</span>,<span class="subst">#&#123;endDate&#125;</span>,<span class="subst">#&#123;masterId&#125;</span>, <span class="subst">#&#123;subject&#125;</span>,<span class="subst">#&#123;createTime&#125;</span>,<span class="subst">#&#123;updateTime&#125;</span>)&quot;</span>)</span><br><span class="line">   <span class="literal">void</span> insert(Clazz clazz);</span><br></pre></td></tr></table></figure>
<h2 id="4-æ ¹æ®IDæŸ¥è¯¢ç­çº§">4.<strong>æ ¹æ®IDæŸ¥è¯¢ç­çº§</strong></h2>
<h3 id="4-1éœ€æ±‚">4.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-420-1024x488.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-421-1024x524.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-422-1024x644.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-423-1024x427.png" alt="img"></p>
<h3 id="4-2ä»£ç å®ç°">4.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ <code>ClazzController</code> ä¸­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDæŸ¥è¯¢ç­çº§è¯¦æƒ…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">getInfo</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">    <span class="type">Clazz</span> <span class="variable">clazz</span> <span class="operator">=</span> clazzService.getInfo(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success(clazz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).<code>Clazz</code>Service &amp; <code>Clazz</code>ServiceImpl</p>
<p>åœ¨ <code>ClazzService</code> ä¸­</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * æ ¹æ®IDæŸ¥è¯¢ç­çº§è¯¦æƒ…</span><br><span class="line"> * @param <span class="built_in">id</span></span><br><span class="line"> * @<span class="literal">return</span></span><br><span class="line"> */</span><br><span class="line">Clazz getInfo(Integer <span class="built_in">id</span>);</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>Clazz</code>ServiceImpl ä¸­</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="function">Clazz <span class="title">getInfo</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">return</span> clazzMapper.<span class="title">getInfo</span><span class="params">(id)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ClazzMapper ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDæŸ¥è¯¢ç­çº§è¯¦æƒ…</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@Select</span>(<span class="string">&quot;select * from clazz where  id = #&#123;id&#125;&quot;</span>)</span><br><span class="line">Clazz <span class="built_in">getInfo</span>(Integer id);</span><br></pre></td></tr></table></figure>
<h2 id="5-ä¿®æ”¹ç­çº§ä¿¡æ¯">5.<strong>ä¿®æ”¹ç­çº§ä¿¡æ¯</strong></h2>
<h3 id="5-1éœ€æ±‚-2">5.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-424-1024x491.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-425-1024x647.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-426-1024x838.png" alt="img"></p>
<h3 id="5-2ä»£ç å®ç°">5.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ <code>ClazzController</code> ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ›´æ–°ç­çº§ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@PutMapping</span></span><br><span class="line">public Result <span class="built_in">update</span>(<span class="variable">@RequestBody</span> Clazz clazz)&#123;</span><br><span class="line">    <span class="selector-tag">clazzService</span><span class="selector-class">.update</span>(clazz);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).<code>Clazz</code>Service &amp; <code>Clazz</code>ServiceImpl</p>
<p>åœ¨ <code>ClazzService</code> ä¸­</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹ç­çº§ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> * @param clazz</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(Clazz clazz)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>Clazz</code>ServiceImpl ä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line"><span class="built_in">public</span> <span class="type">void</span> <span class="keyword">update</span>(Clazz clazz) &#123;</span><br><span class="line">    clazz.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    clazzMapper.<span class="keyword">update</span>(clazz);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ClazzMapper ä¸­</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åŠ¨æ€æ›´æ–°ç­çº§ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(Clazz clazz)</span></span>;</span><br></pre></td></tr></table></figure>
<p>ClazzMapper.xml ä¸­</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!--åŠ¨æ€æ›´æ–°ç­çº§ä¿¡æ¯--&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       update clazz</span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">set</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               name = #</span><span class="template-variable">&#123;name&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;room != null and room != &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               room = #</span><span class="template-variable">&#123;room&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;beginDate != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               begin_date = #</span><span class="template-variable">&#123;beginDate&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;endDate != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               end_date = #</span><span class="template-variable">&#123;endDate&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;masterId != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               master_id = #</span><span class="template-variable">&#123;masterId&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;subject != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               subject = #</span><span class="template-variable">&#123;subject&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               update_time = #</span><span class="template-variable">&#123;updateTime&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       where id = #</span><span class="template-variable">&#123;id&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="6-åˆ é™¤ç­çº§ä¿¡æ¯">6.åˆ é™¤ç­çº§ä¿¡æ¯</h2>
<h3 id="6-1éœ€æ±‚">6.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-427-1024x491.png" alt="img"></p>
<p><strong>æ³¨æ„ï¼šåœ¨é¡µé¢åŸå‹ä¸­ï¼Œè¦æ±‚å¦‚æœè¯¥ç­çº§ä¸‹å…³è”çš„æœ‰å­¦ç”Ÿï¼Œæ˜¯ä¸å…è®¸åˆ é™¤çš„ï¼Œå¹¶æç¤ºé”™è¯¯ä¿¡æ¯ï¼šâ€œå¯¹ä¸èµ·, è¯¥ç­çº§ä¸‹æœ‰å­¦ç”Ÿ, ä¸èƒ½ç›´æ¥åˆ é™¤â€ã€‚ (æç¤ºï¼šå¯ä»¥é€šè¿‡è‡ªå®šä¹‰å¼‚å¸¸ + å…¨å±€å¼‚å¸¸å¤„ç†å™¨å®ç°)</strong></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-437-1024x490.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-428-1024x549.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-429-1024x520.png" alt="img"></p>
<h3 id="6-2ä»£ç å®ç°">6.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ <code>ClazzController</code> ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDåˆ é™¤ç­çº§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@DeleteMapping</span>(<span class="string">&quot;/&#123;id&#125;&quot;</span>)</span><br><span class="line">public Result <span class="built_in">delete</span>(<span class="variable">@PathVariable</span> Integer id)&#123;</span><br><span class="line">    <span class="selector-tag">clazzService</span><span class="selector-class">.deleteById</span>(id);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).<code>Clazz</code>Service &amp; <code>Clazz</code>ServiceImpl</p>
<p>åœ¨ <code>ClazzService</code> ä¸­</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * åˆ é™¤ç­çº§</span></span><br><span class="line"><span class="comment">    * @param id</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="type">void</span> <span class="title">deleteById</span><span class="params">(Integer id)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>Clazz</code>ServiceImpl ä¸­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">      <span class="comment">//1. æŸ¥è¯¢ç­çº§ä¸‹æ˜¯å¦æœ‰å­¦å‘˜</span></span><br><span class="line">      <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> studentMapper.countByClazzId(id);</span><br><span class="line">      <span class="keyword">if</span>(count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(<span class="string">&quot;ç­çº§ä¸‹æœ‰å­¦å‘˜, ä¸èƒ½ç›´æ¥åˆ é™¤~&quot;</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//2. å¦‚æœæ²¡æœ‰, å†åˆ é™¤ç­çº§ä¿¡æ¯</span></span><br><span class="line">      clazzMapper.deleteById(id);</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ClazzMapper ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDåˆ é™¤ç­çº§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@Delete</span>(<span class="string">&quot;delete from clazz where id = #&#123;id&#125;&quot;</span>)</span><br><span class="line">void <span class="built_in">deleteById</span>(Integer id);</span><br></pre></td></tr></table></figure>
<h1 id="â€“å­¦å‘˜ç®¡ç†">â€“å­¦å‘˜ç®¡ç†</h1>
<h2 id="1-æŸ¥è¯¢æ‰€æœ‰ç­çº§">1.æŸ¥è¯¢æ‰€æœ‰ç­çº§</h2>
<h3 id="1-1éœ€æ±‚-2">1.1éœ€æ±‚</h3>
<p>åœ¨æ–°å¢å­¦å‘˜çš„æ—¶å€™ï¼Œè¦å±•ç¤ºå‡ºæ‰€æœ‰çš„ç­çº§ä¿¡æ¯ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-430-1024x493.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-431-1024x850.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-432-1024x692.png" alt="img"></p>
<h3 id="1-2ä»£ç å®ç°-2">1.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ <code>ClazzController</code> ä¸­</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * æŸ¥è¯¢å…¨éƒ¨ç­çº§</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="meta">@GetMapping</span>(<span class="string">&quot;/list&quot;</span>)</span><br><span class="line">  <span class="keyword">public</span> <span class="function">Result <span class="title">findAll</span><span class="params">()</span></span>&#123;</span><br><span class="line">      List&lt;Clazz&gt; clazzList = clazzService.findAll();</span><br><span class="line">      <span class="function"><span class="keyword">return</span> Result.<span class="title">success</span><span class="params">(clazzList)</span></span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>2).<code>Clazz</code>Service &amp; <code>Clazz</code>ServiceImpl</p>
<p>åœ¨ <code>ClazzService</code> ä¸­</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * æŸ¥è¯¢å…¨éƒ¨ç­çº§</span></span><br><span class="line"><span class="comment">    * @return</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function">List&lt;Clazz&gt; <span class="title">findAll</span>()</span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ <code>Clazz</code>ServiceImpl ä¸­</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"> <span class="keyword">public</span> <span class="title class_">List</span>&lt;<span class="title class_">Clazz</span>&gt; <span class="title function_">findAll</span>(<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">return</span> clazzMapper.<span class="title function_">findAll</span>();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ClazzMapper ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æŸ¥è¯¢å…¨éƒ¨ç­çº§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@Select</span>(<span class="string">&quot;select * from clazz&quot;</span>)</span><br><span class="line">List&lt;Clazz&gt; <span class="built_in">findAll</span>();</span><br></pre></td></tr></table></figure>
<h2 id="2-æ¡ä»¶åˆ†é¡µæŸ¥è¯¢">2.æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</h2>
<h3 id="2-1éœ€æ±‚-3">2.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-433-1024x495.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-434-1024x744.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-435-1024x912.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-436-1024x854.png" alt="img"></p>
<h3 id="2-2ä»£ç å®ç°-2">2.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ Student<code>Controller</code> ä¸­</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_">Result</span> <span class="title function_">page</span>(<span class="params"><span class="title class_">String</span> name ,</span></span><br><span class="line"><span class="params">                   <span class="title class_">Integer</span> degree,</span></span><br><span class="line"><span class="params">                   <span class="title class_">Integer</span> clazzId,</span></span><br><span class="line"><span class="params">                   <span class="meta">@RequestParam</span>(defaultValue = <span class="string">&quot;1&quot;</span>) <span class="title class_">Integer</span> page ,</span></span><br><span class="line"><span class="params">                   <span class="meta">@RequestParam</span>(defaultValue = <span class="string">&quot;10&quot;</span>) <span class="title class_">Integer</span> pageSize</span>)&#123;</span><br><span class="line">    <span class="title class_">PageResult</span> pageResult = studentService.<span class="title function_">page</span>(name,degree,clazzId,page,pageSize);</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Result</span>.<span class="title function_">success</span>(pageResult);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).StudentService &amp; StudentServiceImpl</p>
<p>åœ¨ <code>StudentService</code> ä¸­</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">PageResult page(<span class="built_in">String</span> name, <span class="built_in">Integer</span> degree, <span class="built_in">Integer</span> clazzId, <span class="built_in">Integer</span> page, <span class="built_in">Integer</span> pageSize);</span><br></pre></td></tr></table></figure>
<p>åœ¨StudentServiceImpl ä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line"><span class="built_in">public</span> PageResult page(String <span class="type">name</span>, <span class="type">Integer</span> degree, <span class="type">Integer</span> clazzId, <span class="type">Integer</span> page, <span class="type">Integer</span> pageSize) &#123;</span><br><span class="line">    PageHelper.startPage(page, pageSize);</span><br><span class="line"></span><br><span class="line">    List&lt;Student&gt; studentList = studentMapper.list(<span class="type">name</span>,degree,clazzId);</span><br><span class="line">    Page&lt;Student&gt; p = (Page&lt;Student&gt;) studentList;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">new</span> PageResult(p.getTotal(), p.getResult());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰StudentMapper ä¸­</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * åŠ¨æ€æ¡ä»¶æŸ¥è¯¢</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="built_in">List</span>&lt;Student&gt; <span class="built_in">list</span>(<span class="built_in">String</span> name, <span class="built_in">Integer</span> degree, <span class="built_in">Integer</span> clazzId);</span><br></pre></td></tr></table></figure>
<p>StudentMapper.xml ä¸­</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!-- åŠ¨æ€æ¡ä»¶æŸ¥è¯¢ --&gt;</span></span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.itheima.pojo.Student&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     select s.*, c.name clazzName from student s left join clazz c on s.clazz_id = c.id</span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;<span class="name">where</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             s.name like concat(&#x27;%&#x27;,#</span><span class="template-variable">&#123;name&#125;</span><span class="language-xml">,&#x27;%&#x27;)</span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;degree != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             and s.degree = #</span><span class="template-variable">&#123;degree&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;clazzId != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">             and s.clazz_id = #</span><span class="template-variable">&#123;clazzId&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">         <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">     order by s.update_time desc</span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="3-æ–°å¢å­¦ç”Ÿä¿¡æ¯">3.æ–°å¢å­¦ç”Ÿä¿¡æ¯</h2>
<h3 id="3-1éœ€æ±‚-2">3.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-439-1024x496.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-440-1024x787.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-441-1024x873.png" alt="img"></p>
<h3 id="3-2ä»£ç å®ç°-2">3.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ Student<code>Controller</code> ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * æ·»åŠ å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="variable">@PostMapping</span></span><br><span class="line"> public Result <span class="built_in">save</span>(<span class="variable">@RequestBody</span> Student student)&#123;</span><br><span class="line">     <span class="selector-tag">studentService</span><span class="selector-class">.save</span>(student);</span><br><span class="line">     <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>2).StudentService &amp; StudentServiceImpl</p>
<p>åœ¨ <code>StudentService</code> ä¸­</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">save</span><span class="params">(Student student)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ StudentServiceImpl ä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line"><span class="built_in">public</span> <span class="type">void</span> save(Student student) &#123;</span><br><span class="line">    student.setCreateTime(LocalDateTime.now());</span><br><span class="line">    student.setUpdateTime(LocalDateTime.now());</span><br><span class="line">    studentMapper.<span class="keyword">insert</span>(student);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰StudentMapper ä¸­</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ·»åŠ å­¦ç”Ÿ</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@Insert(<span class="string">&quot;insert into student(name, no, gender, phone,id_card, is_college, address, degree, graduation_date,clazz_id, create_time, update_time) VALUES &quot;</span> +</span><br><span class="line">        <span class="string">&quot;(<span class="subst">#&#123;name&#125;</span>,<span class="subst">#&#123;<span class="literal">no</span>&#125;</span>,<span class="subst">#&#123;gender&#125;</span>,<span class="subst">#&#123;phone&#125;</span>,<span class="subst">#&#123;idCard&#125;</span>,<span class="subst">#&#123;isCollege&#125;</span>,<span class="subst">#&#123;address&#125;</span>,<span class="subst">#&#123;degree&#125;</span>,<span class="subst">#&#123;graduationDate&#125;</span>,<span class="subst">#&#123;clazzId&#125;</span>,<span class="subst">#&#123;createTime&#125;</span>,<span class="subst">#&#123;updateTime&#125;</span>)&quot;</span>)</span><br><span class="line"><span class="literal">void</span> insert(Student student);</span><br></pre></td></tr></table></figure>
<h2 id="4-æ ¹æ®IDæŸ¥è¯¢å­¦ç”Ÿ">4.æ ¹æ®IDæŸ¥è¯¢å­¦ç”Ÿ</h2>
<h3 id="4-1éœ€æ±‚-2">4.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-442-1024x496.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-443-1024x522.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-444-1024x884.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-445-1024x575.png" alt="img"></p>
<h3 id="4-2ä»£ç å®ç°-2">4.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ StudentController ä¸­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line"><span class="keyword">public</span> Result <span class="title function_">getInfo</span><span class="params">(<span class="meta">@PathVariable</span> Integer id)</span>&#123;</span><br><span class="line">    <span class="type">Student</span> <span class="variable">student</span> <span class="operator">=</span> studentService.getInfo(id);</span><br><span class="line">    <span class="keyword">return</span> Result.success(student);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).StudentService &amp; StudentServiceImpl</p>
<p>åœ¨ StudentService ä¸­</p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">Student <span class="built_in">getInfo</span>(Integer id);</span><br></pre></td></tr></table></figure>
<p>åœ¨ StudentServiceImpl ä¸­</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">  <span class="keyword">public</span> <span class="function">Student <span class="title">getInfo</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">      <span class="function"><span class="keyword">return</span> studentMapper.<span class="title">getById</span><span class="params">(id)</span></span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰StudentMapper ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDæŸ¥è¯¢å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@Select</span>(<span class="string">&quot;select * from student where id = #&#123;id&#125;&quot;</span>)</span><br><span class="line">Student <span class="built_in">getById</span>(Integer id);</span><br></pre></td></tr></table></figure>
<h2 id="5-ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯">5.ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯</h2>
<h3 id="5-1éœ€æ±‚-3">5.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-446-1024x491.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-447-1024x886.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-448-1024x448.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-449-1024x527.png" alt="img"></p>
<h3 id="5-2ä»£ç å®ç°-2">5.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ StudentController ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@PutMapping</span></span><br><span class="line">public Result <span class="built_in">update</span>(<span class="variable">@RequestBody</span> Student student)&#123;</span><br><span class="line">    <span class="selector-tag">studentService</span><span class="selector-class">.update</span>(student);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).StudentService &amp; StudentServiceImpl</p>
<p>åœ¨ StudentService ä¸­</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(Student student)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨ StudentServiceImpl ä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line"> <span class="built_in">public</span> <span class="type">void</span> <span class="keyword">update</span>(Student student) &#123;</span><br><span class="line">     student.setUpdateTime(LocalDateTime.now());</span><br><span class="line">     studentMapper.<span class="keyword">update</span>(student);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰StudentMapper ä¸­</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">update</span><span class="params">(Student student)</span></span>;</span><br></pre></td></tr></table></figure>
<p>StudentMapper.xml ä¸­</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!-- ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯ --&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       update student</span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">set</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null and name != &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               name = #</span><span class="template-variable">&#123;name&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;no != null and no != &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               no = #</span><span class="template-variable">&#123;no&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;gender != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               gender = #</span><span class="template-variable">&#123;gender&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;phone != null and phone != &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               phone = #</span><span class="template-variable">&#123;phone&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;idCard != null and idCard != &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               id_card = #</span><span class="template-variable">&#123;idCard&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;isCollege != null and isCollege != &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               is_college = #</span><span class="template-variable">&#123;isCollege&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;address != null and address != &#x27;&#x27;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               address = #</span><span class="template-variable">&#123;address&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;graduationDate != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               graduation_date = #</span><span class="template-variable">&#123;graduationDate&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;degree != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               degree = #</span><span class="template-variable">&#123;degree&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;violationCount != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               violation_count = #</span><span class="template-variable">&#123;violationCount&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;violationScore != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               violation_score = #</span><span class="template-variable">&#123;violationScore&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;clazzId != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               clazz_id = #</span><span class="template-variable">&#123;clazzId&#125;</span><span class="language-xml">,</span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;updateTime != null&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">               update_time = #</span><span class="template-variable">&#123;updateTime&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">           <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       where id = #</span><span class="template-variable">&#123;id&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="6-åˆ é™¤å­¦ç”Ÿä¿¡æ¯">6.åˆ é™¤å­¦ç”Ÿä¿¡æ¯</h2>
<h3 id="6-1éœ€æ±‚-2">6.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-450-1024x494.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-451-1024x546.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-452-1024x506.png" alt="img"></p>
<h3 id="6-2ä»£ç å®ç°-2">6.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ StudentController ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * åˆ é™¤å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@DeleteMapping</span>(<span class="string">&quot;/&#123;ids&#125;&quot;</span>)</span><br><span class="line">public Result <span class="built_in">delete</span>(<span class="variable">@PathVariable</span> List&lt;Integer&gt; ids)&#123;</span><br><span class="line">    <span class="selector-tag">studentService</span><span class="selector-class">.delete</span>(ids);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).StudentService &amp; StudentServiceImpl</p>
<p>åœ¨ StudentService ä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * åˆ é™¤å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">void</span> <span class="keyword">delete</span>(List&lt;<span class="type">Integer</span>&gt; ids);</span><br></pre></td></tr></table></figure>
<p>åœ¨ StudentServiceImpl ä¸­</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="keyword">delete</span>(List&lt;Integer&gt; ids) &#123;</span><br><span class="line">    studentMapper.<span class="keyword">delete</span>(ids);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰StudentMapper ä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ‰¹é‡åˆ é™¤å­¦ç”Ÿä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">void</span> <span class="keyword">delete</span>(List&lt;<span class="type">Integer</span>&gt; ids);</span><br></pre></td></tr></table></figure>
<p>StudentMapper.xml ä¸­</p>
<figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="language-xml"><span class="comment">&lt;!--æ‰¹é‡åˆ é™¤å­¦ç”Ÿä¿¡æ¯--&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;delete&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">       delete from student where id in</span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;ids&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span> <span class="attr">open</span>=<span class="string">&quot;(&quot;</span> <span class="attr">close</span>=<span class="string">&quot;)&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">           #</span><span class="template-variable">&#123;id&#125;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">       <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<h2 id="7-è¿çºªå¤„ç†">7.<strong>è¿çºªå¤„ç†</strong></h2>
<h3 id="7-1éœ€æ±‚">7.1éœ€æ±‚</h3>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-453-1024x495.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-454-1024x499.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-455-1024x502.png" alt="img"></p>
<h3 id="7-2ä»£ç å®ç°">7.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ StudentController ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿çºªå¤„ç†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@PutMapping</span>(<span class="string">&quot;/violation/&#123;id&#125;/&#123;score&#125;&quot;</span>)</span><br><span class="line">public Result <span class="built_in">violationHandle</span>(<span class="variable">@PathVariable</span> Integer id , <span class="variable">@PathVariable</span> Integer score)&#123;</span><br><span class="line">    <span class="selector-tag">studentService</span><span class="selector-class">.violationHandle</span>(id, score);</span><br><span class="line">    <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2).StudentService &amp; StudentServiceImpl</p>
<p>åœ¨ StudentService ä¸­</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * è¿çºªå¤„ç†</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="literal">void</span> violationHandle(<span class="built_in">Integer</span> id, <span class="built_in">Integer</span> score);</span><br></pre></td></tr></table></figure>
<p>åœ¨ StudentServiceImpl ä¸­</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">violationHandle</span>(<span class="params"><span class="title class_">Integer</span> id, <span class="title class_">Integer</span> score</span>) &#123;</span><br><span class="line">    studentMapper.<span class="title function_">updateViolation</span>(id, score);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰StudentMapper ä¸­</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * è¿çºªå¤„ç†</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@Update(<span class="string">&quot;update student set violation_count = violation_count + 1 , violation_score = violation_score + <span class="subst">#&#123;score&#125;</span> , update_time = now() where id = <span class="subst">#&#123;id&#125;</span>&quot;</span>)</span><br><span class="line"><span class="literal">void</span> updateViolation(Integer id, Integer score);</span><br></pre></td></tr></table></figure>
<h2 id="8-å­¦å‘˜ä¿¡æ¯ç»Ÿè®¡">8.å­¦å‘˜ä¿¡æ¯ç»Ÿè®¡</h2>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-457-1024x482.png" alt="img"></p>
<h3 id="8-1ç­çº§äººæ•°ç»Ÿè®¡æ¥å£å¼€å‘">8.1ç­çº§äººæ•°ç»Ÿè®¡æ¥å£å¼€å‘</h3>
<h4 id="8-1-1éœ€æ±‚">8.1.1éœ€æ±‚</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-458-1024x739.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-459-1024x291.png" alt="img"></p>
<h4 id="8-1-2ä»£ç å®ç°">8.1.2ä»£ç å®ç°</h4>
<p>1ï¼‰åœ¨ ReportController ä¸­</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç­çº§äººæ•°ç»Ÿè®¡</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">&quot;/studentCountData&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="function">Result <span class="title">getStudentCountData</span><span class="params">()</span></span>&#123;</span><br><span class="line">    log.info(<span class="string">&quot;ç­çº§äººæ•°ç»Ÿè®¡&quot;</span>);</span><br><span class="line">    ClazzCountOption clazzCountOption = reportService.getStudentCountData();</span><br><span class="line">    <span class="function"><span class="keyword">return</span> Result.<span class="title">success</span><span class="params">(clazzCountOption)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2). ReportService &amp; ReportServiceImpl</p>
<p>åœ¨ ReportService ä¸­</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ç»Ÿè®¡ç­çº§äººæ•°</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="function">ClazzCountOption <span class="title">getStudentCountData</span>()</span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨  ReportServiceImpl ä¸­</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">    public ClazzCountOption getStudentCountData() &#123;</span><br><span class="line">        List&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">Object</span>&gt;&gt; countList = studentMapper.getStudentCount();</span><br><span class="line">        <span class="keyword">if</span>(!CollectionUtils.isEmpty(countList))&#123;</span><br><span class="line">            List&lt;<span class="built_in">Object</span>&gt; clazzList = countList.stream().<span class="keyword">map</span>(<span class="keyword">map</span> -&gt; &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">map</span>.get(<span class="string">&quot;cname&quot;</span>);</span><br><span class="line">            &#125;).toList();</span><br><span class="line"></span><br><span class="line">            List&lt;<span class="built_in">Object</span>&gt; dataList = countList.stream().<span class="keyword">map</span>(<span class="keyword">map</span> -&gt; &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">map</span>.get(<span class="string">&quot;scount&quot;</span>);</span><br><span class="line">            &#125;).toList();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> ClazzCountOption(clazzList, dataList);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨StudentMapperä¸­</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡ç­çº§äººæ•°</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">@Select(<span class="string">&quot;select c.name cname , count(s.id) scount from clazz c  left join student s on s.clazz_id = c.id group by c.name order by count(s.id) desc &quot;</span>)</span><br><span class="line">List&lt;<span class="built_in">Map</span>&lt;<span class="built_in">String</span>,<span class="built_in">Object</span>&gt;&gt; getStudentCount();</span><br></pre></td></tr></table></figure>
<h3 id="8-2å­¦å‘˜å­¦å†ä¿¡æ¯ç»Ÿè®¡æ¥å£å¼€å‘">8.2å­¦å‘˜å­¦å†ä¿¡æ¯ç»Ÿè®¡æ¥å£å¼€å‘</h3>
<h4 id="8-2-1éœ€æ±‚-2">8.2.1éœ€æ±‚</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-460-1024x768.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-461-1024x735.png" alt="img"></p>
<h4 id="8-2-2ä»£ç å®ç°-2">8.2.2ä»£ç å®ç°</h4>
<p>1ï¼‰åœ¨ ReportController ä¸­</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç»Ÿè®¡å­¦å‘˜çš„å­¦å†ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@GetMapping</span>(<span class="string">&quot;/studentDegreeData&quot;</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="title class_">Result</span> <span class="title function_">getStudentDegreeData</span>(<span class="params"></span>)&#123;</span><br><span class="line">    log.<span class="title function_">info</span>(<span class="string">&quot;ç»Ÿè®¡å­¦å‘˜çš„å­¦å†ä¿¡æ¯&quot;</span>);</span><br><span class="line">    <span class="title class_">List</span>&lt;<span class="title class_">Map</span>&gt; dataList = reportService.<span class="title function_">getStudentDegreeData</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Result</span>.<span class="title function_">success</span>(dataList);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2). ReportService &amp; ReportServiceImpl</p>
<p>åœ¨ ReportService ä¸­</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * ç»Ÿè®¡å­¦å†äººæ•°</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function">List&lt;Map&gt; <span class="title">getStudentDegreeData</span>()</span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨  ReportServiceImpl ä¸­</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> <span class="title class_">List</span>&lt;<span class="title class_">Map</span>&gt; <span class="title function_">getStudentDegreeData</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="keyword">return</span> studentMapper.<span class="title function_">countStudentDegreeData</span>();</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰StudentMapper ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * ç»Ÿè®¡å­¦å‘˜å­¦å†</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="variable">@MapKey</span>(<span class="string">&quot;name&quot;</span>)</span><br><span class="line"> List&lt;Map&gt; <span class="built_in">countStudentDegreeData</span>();</span><br></pre></td></tr></table></figure>
<p>StudentMapper.xml ä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="comment">--å­¦å‘˜å­¦å†ç»Ÿè®¡--&gt;</span></span><br><span class="line">&lt;<span class="keyword">select</span> id=&quot;countStudentDegreeData&quot; resultType=&quot;java.util.Map&quot;&gt;</span><br><span class="line">    <span class="keyword">select</span></span><br><span class="line">        (<span class="keyword">case</span> degree</span><br><span class="line">            <span class="keyword">when</span> <span class="number">1</span> <span class="keyword">then</span> <span class="string">&#x27;åˆä¸­&#x27;</span></span><br><span class="line">            <span class="keyword">when</span> <span class="number">2</span> <span class="keyword">then</span> <span class="string">&#x27;é«˜ä¸­&#x27;</span></span><br><span class="line">            <span class="keyword">when</span> <span class="number">3</span> <span class="keyword">then</span> <span class="string">&#x27;å¤§ä¸“&#x27;</span></span><br><span class="line">            <span class="keyword">when</span> <span class="number">4</span> <span class="keyword">then</span> <span class="string">&#x27;æœ¬ç§‘&#x27;</span></span><br><span class="line">            <span class="keyword">when</span> <span class="number">5</span> <span class="keyword">then</span> <span class="string">&#x27;ç¡•å£«&#x27;</span></span><br><span class="line">            <span class="keyword">when</span> <span class="number">6</span> <span class="keyword">then</span> <span class="string">&#x27;åšå£«&#x27;</span></span><br><span class="line">            <span class="keyword">else</span> <span class="string">&#x27;å…¶ä»–&#x27;</span> <span class="keyword">end</span>)  <span class="type">name</span>,</span><br><span class="line">        count(*) <span class="keyword">value</span></span><br><span class="line">    <span class="keyword">from</span> student <span class="keyword">group</span> <span class="keyword">by</span> degree</span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> degree</span><br><span class="line">&lt;/<span class="keyword">select</span>&gt;</span><br></pre></td></tr></table></figure>
<h2 id="9-åˆ é™¤éƒ¨é—¨å®Œå–„">9.<strong>åˆ é™¤éƒ¨é—¨å®Œå–„</strong></h2>
<h3 id="9-1éœ€æ±‚">9.1éœ€æ±‚</h3>
<p>å¦‚æœéƒ¨é—¨ä¸‹æœ‰å‘˜å·¥ï¼Œåˆ™ä¸å…è®¸åˆ é™¤è¯¥éƒ¨é—¨ï¼Œå¹¶ç»™å‰ç«¯æç¤ºé”™è¯¯ä¿¡æ¯ï¼šå¯¹ä¸èµ·ï¼Œå½“å‰éƒ¨é—¨ä¸‹æœ‰å‘˜å·¥ï¼Œä¸èƒ½ç›´æ¥åˆ é™¤ï¼</p>
<h3 id="9-2ä»£ç å®ç°">9.2ä»£ç å®ç°</h3>
<p>1ï¼‰åœ¨ DeptController ä¸­</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * åˆ é™¤éƒ¨é—¨ - çœç•¥@RequestParam (å‰ç«¯ä¼ é€’çš„è¯·æ±‚å‚æ•°åä¸æœåŠ¡ç«¯æ–¹æ³•å½¢å‚åä¸€è‡´) [æ¨è]</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> @DeleteMapping</span><br><span class="line"> <span class="built_in">public</span> Result <span class="keyword">delete</span>(<span class="type">Integer</span> id)&#123;</span><br><span class="line">     //<span class="keyword">System</span>.<span class="keyword">out</span>.println(&quot;æ ¹æ®IDåˆ é™¤éƒ¨é—¨: &quot; + id);</span><br><span class="line">     <span class="keyword">log</span>.<span class="keyword">info</span>(&quot;æ ¹æ®IDåˆ é™¤éƒ¨é—¨: &#123;&#125;&quot;, id);</span><br><span class="line">     deptService.deleteById(id);</span><br><span class="line">     <span class="keyword">return</span> Result.success();</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>2). DeptService &amp; DeptServiceImpl</p>
<p>åœ¨  DeptService ä¸­</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDåˆ é™¤éƒ¨é—¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteById</span><span class="params">(Integer id)</span></span>;</span><br></pre></td></tr></table></figure>
<p>åœ¨  DeptServiceImpl ä¸­</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">    <span class="comment">//1. åˆ¤æ–­éƒ¨é—¨ä¸‹æ˜¯å¦æœ‰å‘˜å·¥ï¼Œ å¦‚æœæœ‰ï¼Œ éœ€è¦æç¤ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">    <span class="type">Integer</span> <span class="variable">count</span> <span class="operator">=</span> empMapper.countByDeptId(id);</span><br><span class="line">    <span class="keyword">if</span>(count &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(<span class="string">&quot;éƒ¨é—¨ä¸‹æœ‰å‘˜å·¥ï¼Œ ä¸èƒ½åˆ é™¤&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. åˆ é™¤éƒ¨é—¨</span></span><br><span class="line">    deptMapper.deleteById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰ DeptMapper ä¸­</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®IDåˆ é™¤éƒ¨é—¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@Delete</span>(<span class="string">&quot;delete from dept where id = #&#123;id&#125;&quot;</span>)</span><br><span class="line">void <span class="built_in">deleteById</span>(Integer id);</span><br></pre></td></tr></table></figure>
<h1 id="â€“ç™»å½•è®¤è¯">â€“ç™»å½•è®¤è¯</h1>
<h2 id="1-ç™»å½•åŠŸèƒ½">1.ç™»å½•åŠŸèƒ½</h2>
<h3 id="1-1éœ€æ±‚-3">1.1éœ€æ±‚</h3>
<p>åœ¨ç™»å½•ç•Œé¢ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥ç”¨æˆ·çš„ç”¨æˆ·åä»¥åŠå¯†ç ï¼Œç„¶åç‚¹å‡» â€œç™»å½•â€ æŒ‰é’®å°±è¦è¯·æ±‚æœåŠ¡å™¨ï¼ŒæœåŠ¡ç«¯åˆ¤æ–­ç”¨æˆ·è¾“å…¥çš„ç”¨æˆ·åæˆ–è€…å¯†ç æ˜¯å¦æ­£ç¡®ã€‚å¦‚æœæ­£ç¡®ï¼Œåˆ™è¿”å›æˆåŠŸç»“æœï¼Œå‰ç«¯è·³è½¬è‡³ç³»ç»Ÿé¦–é¡µé¢ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-462-1024x648.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-463-1024x833.png" alt="img"></p>
<h3 id="1-2å®ç°æ€è·¯">1.2å®ç°æ€è·¯</h3>
<ul>
<li>æ€ä¹ˆæ ·æ‰ç®—ç™»å½•æˆåŠŸäº†å‘¢ï¼Ÿ
<ul>
<li>ç”¨æˆ·åå’Œå¯†ç éƒ½è¾“å…¥æ­£ç¡®ï¼Œç™»å½•æˆåŠŸ</li>
<li>å¦åˆ™ï¼Œç™»å½•å¤±è´¥</li>
</ul>
</li>
<li>ç™»å½•åŠŸèƒ½çš„æœ¬è´¨æ˜¯ä»€ä¹ˆï¼Ÿ
<ul>
<li>æŸ¥è¯¢</li>
<li>æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</li>
</ul>
</li>
</ul>
<h3 id="1-3ä»£ç å®ç°">1.3ä»£ç å®ç°</h3>
<p><strong>1). å‡†å¤‡å®ä½“ç±» <code>LoginInfo</code>ï¼Œ å°è£…ç™»å½•æˆåŠŸåï¼Œ è¿”å›ç»™å‰ç«¯çš„æ•°æ® ã€‚</strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç™»å½•æˆåŠŸç»“æœå°è£…ç±»</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@Data</span></span><br><span class="line"><span class="variable">@NoArgsConstructor</span></span><br><span class="line"><span class="variable">@AllArgsConstructor</span></span><br><span class="line">public class LoginInfo &#123;</span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">Integer</span> <span class="selector-tag">id</span>; <span class="comment">//å‘˜å·¥ID</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">username</span>; <span class="comment">//ç”¨æˆ·å</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">name</span>; <span class="comment">//å§“å</span></span><br><span class="line">    <span class="selector-tag">private</span> <span class="selector-tag">String</span> <span class="selector-tag">token</span>; <span class="comment">//ä»¤ç‰Œ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). å®šä¹‰<code>LoginController</code></strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> EmpService empService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PostMapping(<span class="string">&quot;/login&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Result login(<span class="meta">@RequestBody</span> Emp emp)&#123;</span><br><span class="line">        log.info(<span class="string">&quot;å‘˜å·¥æ¥ç™»å½•å•¦ , &#123;&#125;&quot;</span>, emp);</span><br><span class="line">        LoginInfo loginInfo = empService.login(emp);</span><br><span class="line">        <span class="keyword">if</span>(loginInfo != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">return</span> Result.success(loginInfo);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.error(<span class="string">&quot;ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>**3).****<code>EmpService</code>**<strong>æ¥å£ä¸­å¢åŠ  login ç™»å½•æ–¹æ³•</strong></p>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç™»å½•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">LoginInfo <span class="built_in">login</span>(Emp emp);</span><br></pre></td></tr></table></figure>
<p><strong>4).</strong> <strong><code>EmpServiceImpl</code></strong> <strong>å®ç°loginæ–¹æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> LoginInfo <span class="title function_">login</span><span class="params">(Emp emp)</span> &#123;</span><br><span class="line">    <span class="type">Emp</span> <span class="variable">empLogin</span> <span class="operator">=</span> empMapper.getUsernameAndPassword(emp);</span><br><span class="line">    <span class="keyword">if</span>(empLogin != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="type">LoginInfo</span> <span class="variable">loginInfo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">LoginInfo</span>(empLogin.getId(), empLogin.getUsername(), empLogin.getName(), <span class="literal">null</span>);</span><br><span class="line">        <span class="keyword">return</span> loginInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>5).</strong> **<code>EmpMapper</code>**<strong>å¢åŠ æ¥å£æ–¹æ³•</strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æ ¹æ®ç”¨æˆ·åå’Œå¯†ç æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@Select</span>(<span class="string">&quot;select * from emp where username = #&#123;username&#125; and password = #&#123;password&#125;&quot;</span>)</span><br><span class="line">Emp <span class="built_in">getUsernameAndPassword</span>(Emp emp);</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯å½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­æ–°çš„é¡µé¢ä¸Šè¾“å…¥åœ°å€ï¼š<code>http://localhost:90</code>ï¼Œå‘ç°æ²¡æœ‰ç™»å½•ä»ç„¶å¯ä»¥è¿›å…¥åˆ°åç«¯ç®¡ç†ç³»ç»Ÿé¡µé¢ã€‚</p>
<p>è€ŒçœŸæ­£çš„ç™»å½•åŠŸèƒ½åº”è¯¥æ˜¯ï¼šç™»é™†åæ‰èƒ½è®¿é—®åç«¯ç³»ç»Ÿé¡µé¢ï¼Œä¸ç™»é™†åˆ™è·³è½¬ç™»é™†é¡µé¢è¿›è¡Œç™»é™†ã€‚</p>
<p>ä¸ºä»€ä¹ˆä¼šå‡ºç°è¿™ä¸ªé—®é¢˜ï¼Ÿå…¶å®åŸå› å¾ˆç®€å•ï¼Œå°±æ˜¯å› ä¸ºé’ˆå¯¹äºæˆ‘ä»¬å½“å‰æ‰€å¼€å‘çš„éƒ¨é—¨ç®¡ç†ã€å‘˜å·¥ç®¡ç†ä»¥åŠæ–‡ä»¶ä¸Šä¼ ç­‰ç›¸å…³æ¥å£æ¥è¯´ï¼Œæˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯å¹¶æ²¡æœ‰åšä»»ä½•çš„åˆ¤æ–­ï¼Œæ²¡æœ‰å»åˆ¤æ–­ç”¨æˆ·æ˜¯å¦ç™»å½•äº†ã€‚æ‰€ä»¥æ— è®ºç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œéƒ½å¯ä»¥è®¿é—®éƒ¨é—¨ç®¡ç†ä»¥åŠå‘˜å·¥ç®¡ç†çš„ç›¸å…³æ•°æ®ã€‚æ‰€ä»¥æˆ‘ä»¬ç›®å‰æ‰€å¼€å‘çš„ç™»å½•åŠŸèƒ½ï¼Œå®ƒåªæ˜¯å¾’æœ‰å…¶è¡¨ã€‚è€Œæˆ‘ä»¬è¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±éœ€è¦å®Œæˆä¸€æ­¥éå¸¸é‡è¦çš„æ“ä½œï¼šç™»å½•æ ¡éªŒã€‚</p>
<h2 id="2-ç™»å½•æ•ˆéªŒ">2.ç™»å½•æ•ˆéªŒ</h2>
<p>ä»€ä¹ˆæ˜¯ç™»å½•æ ¡éªŒï¼Ÿ</p>
<p>æ‰€è°“ç™»å½•æ ¡éªŒï¼ŒæŒ‡çš„æ˜¯æˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯æ¥æ”¶åˆ°æµè§ˆå™¨å‘é€è¿‡æ¥çš„è¯·æ±‚ä¹‹åï¼Œé¦–å…ˆæˆ‘ä»¬è¦å¯¹è¯·æ±‚è¿›è¡Œæ ¡éªŒã€‚å…ˆè¦æ ¡éªŒä¸€ä¸‹ç”¨æˆ·ç™»å½•äº†æ²¡æœ‰ï¼Œå¦‚æœç”¨æˆ·å·²ç»ç™»å½•äº†ï¼Œå°±ç›´æ¥æ‰§è¡Œå¯¹åº”çš„ä¸šåŠ¡æ“ä½œå°±å¯ä»¥äº†ï¼›å¦‚æœç”¨æˆ·æ²¡æœ‰ç™»å½•ï¼Œæ­¤æ—¶å°±ä¸å…è®¸ä»–æ‰§è¡Œç›¸å…³çš„ä¸šåŠ¡æ“ä½œï¼Œç›´æ¥ç»™å‰ç«¯å“åº”ä¸€ä¸ªé”™è¯¯çš„ç»“æœï¼Œæœ€ç»ˆè·³è½¬åˆ°ç™»å½•é¡µé¢ï¼Œè¦æ±‚ä»–ç™»å½•æˆåŠŸä¹‹åï¼Œå†æ¥è®¿é—®å¯¹åº”çš„æ•°æ®ã€‚</p>
<p>è¯¥æ€ä¹ˆæ¥å®ç°ç™»å½•æ ¡éªŒçš„æ“ä½œå‘¢ï¼Ÿå…·ä½“çš„å®ç°æ€è·¯å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š</p>
<ol>
<li>åœ¨å‘˜å·¥ç™»å½•æˆåŠŸåï¼Œéœ€è¦å°†ç”¨æˆ·ç™»å½•æˆåŠŸçš„ä¿¡æ¯å­˜èµ·æ¥ï¼Œè®°å½•ç”¨æˆ·å·²ç»ç™»å½•æˆåŠŸçš„æ ‡è®°ã€‚</li>
<li>åœ¨æµè§ˆå™¨å‘èµ·è¯·æ±‚æ—¶ï¼Œéœ€è¦åœ¨æœåŠ¡ç«¯è¿›è¡Œç»Ÿä¸€æ‹¦æˆªï¼Œæ‹¦æˆªåè¿›è¡Œç™»å½•æ ¡éªŒã€‚</li>
</ol>
<p>æƒ³è¦åˆ¤æ–­å‘˜å·¥æ˜¯å¦å·²ç»ç™»å½•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å‘˜å·¥ç™»å½•æˆåŠŸä¹‹åï¼Œå­˜å‚¨ä¸€ä¸ªç™»å½•æˆåŠŸçš„æ ‡è®°ï¼Œæ¥ä¸‹æ¥åœ¨æ¯ä¸€ä¸ªæ¥å£æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œå…ˆåšä¸€ä¸ªæ¡ä»¶åˆ¤æ–­ï¼Œåˆ¤æ–­ä¸€ä¸‹è¿™ä¸ªå‘˜å·¥åˆ°åº•ç™»å½•äº†æ²¡æœ‰ã€‚å¦‚æœæ˜¯ç™»å½•äº†ï¼Œå°±å¯ä»¥æ‰§è¡Œæ­£å¸¸çš„ä¸šåŠ¡æ“ä½œï¼Œå¦‚æœæ²¡æœ‰ç™»å½•ï¼Œä¼šç›´æ¥ç»™å‰ç«¯è¿”å›ä¸€ä¸ªé”™è¯¯çš„ä¿¡æ¯ï¼Œå‰ç«¯æ‹¿åˆ°è¿™ä¸ªé”™è¯¯ä¿¡æ¯ä¹‹åä¼šè‡ªåŠ¨çš„è·³è½¬åˆ°ç™»å½•é¡µé¢ã€‚</p>
<p>æˆ‘ä»¬ç¨‹åºä¸­æ‰€å¼€å‘çš„æŸ¥è¯¢åŠŸèƒ½ã€åˆ é™¤åŠŸèƒ½ã€æ·»åŠ åŠŸèƒ½ã€ä¿®æ”¹åŠŸèƒ½ï¼Œéƒ½éœ€è¦ä½¿ç”¨ä»¥ä¸Šå¥—è·¯è¿›è¡Œç™»å½•æ ¡éªŒã€‚ä¸ºäº†ç®€åŒ–è¿™å—æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç§æŠ€æœ¯ï¼šç»Ÿä¸€æ‹¦æˆªæŠ€æœ¯ã€‚</p>
<p>é€šè¿‡ç»Ÿä¸€æ‹¦æˆªçš„æŠ€æœ¯ï¼Œæˆ‘ä»¬å¯ä»¥æ¥æ‹¦æˆªæµè§ˆå™¨å‘é€è¿‡æ¥çš„æ‰€æœ‰çš„è¯·æ±‚ï¼Œæ‹¦æˆªåˆ°è¿™ä¸ªè¯·æ±‚ä¹‹åï¼Œå°±å¯ä»¥é€šè¿‡è¯·æ±‚æ¥è·å–ä¹‹å‰æ‰€å­˜å…¥çš„ç™»å½•æ ‡è®°ï¼Œåœ¨è·å–åˆ°ç™»å½•æ ‡è®°ä¸”æ ‡è®°ä¸ºç™»å½•æˆåŠŸï¼Œå°±è¯´æ˜å‘˜å·¥å·²ç»ç™»å½•äº†ã€‚å¦‚æœå·²ç»ç™»å½•ï¼Œæˆ‘ä»¬å°±ç›´æ¥æ”¾è¡Œ(æ„æ€å°±æ˜¯å¯ä»¥è®¿é—®æ­£å¸¸çš„ä¸šåŠ¡æ¥å£äº†)ã€‚</p>
<p>æˆ‘ä»¬è¦å®Œæˆä»¥ä¸Šæ“ä½œï¼Œä¼šæ¶‰åŠåˆ°webå¼€å‘ä¸­çš„ä¸¤ä¸ªæŠ€æœ¯ï¼š</p>
<ol>
<li>ä¼šè¯æŠ€æœ¯ï¼šç”¨æˆ·ç™»å½•æˆåŠŸä¹‹åï¼Œåœ¨åç»­çš„æ¯ä¸€æ¬¡è¯·æ±‚ä¸­ï¼Œéƒ½å¯ä»¥è·å–åˆ°è¯¥æ ‡è®°ã€‚</li>
<li>ç»Ÿä¸€æ‹¦æˆªæŠ€æœ¯ï¼šè¿‡æ»¤å™¨Filterã€æ‹¦æˆªå™¨Interceptor</li>
</ol>
<h3 id="2-1ä¼šè¯æŠ€æœ¯">2.1ä¼šè¯æŠ€æœ¯</h3>
<h4 id="2-1-1åŸºç¡€çŸ¥è¯†">2.1.1åŸºç¡€çŸ¥è¯†</h4>
<p><strong>ä»€ä¹ˆæ˜¯ä¼šè¯ï¼Ÿ</strong></p>
<p>åœ¨webå¼€å‘å½“ä¸­ï¼Œä¼šè¯æŒ‡çš„å°±æ˜¯æµè§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„ä¸€æ¬¡è¿æ¥ï¼Œæˆ‘ä»¬å°±ç§°ä¸ºä¸€æ¬¡ä¼šè¯ã€‚</p>
<p>ä¸¾ä¾‹ï¼šåœ¨ç”¨æˆ·æ‰“å¼€æµè§ˆå™¨ç¬¬ä¸€æ¬¡è®¿é—®æœåŠ¡å™¨çš„æ—¶å€™ï¼Œè¿™ä¸ªä¼šè¯å°±å»ºç«‹äº†ï¼Œç›´åˆ°æœ‰ä»»ä½•ä¸€æ–¹æ–­å¼€è¿æ¥ï¼Œæ­¤æ—¶ä¼šè¯å°±ç»“æŸäº†ã€‚åœ¨ä¸€æ¬¡ä¼šè¯å½“ä¸­ï¼Œæ˜¯å¯ä»¥åŒ…å«å¤šæ¬¡è¯·æ±‚å’Œå“åº”çš„ã€‚</p>
<p>æ¯”å¦‚ï¼šæ‰“å¼€äº†æµè§ˆå™¨æ¥è®¿é—®webæœåŠ¡å™¨ä¸Šçš„èµ„æºï¼ˆæµè§ˆå™¨ä¸èƒ½å…³é—­ã€æœåŠ¡å™¨ä¸èƒ½æ–­å¼€ï¼‰</p>
<ul>
<li>ç¬¬1æ¬¡ï¼šè®¿é—®çš„æ˜¯ç™»å½•çš„æ¥å£ï¼Œå®Œæˆç™»å½•æ“ä½œ</li>
<li>ç¬¬2æ¬¡ï¼šè®¿é—®çš„æ˜¯éƒ¨é—¨ç®¡ç†æ¥å£ï¼ŒæŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®</li>
<li>ç¬¬3æ¬¡ï¼šè®¿é—®çš„æ˜¯å‘˜å·¥ç®¡ç†æ¥å£ï¼ŒæŸ¥è¯¢å‘˜å·¥æ•°æ®</li>
</ul>
<p>åªè¦æµè§ˆå™¨å’ŒæœåŠ¡å™¨éƒ½æ²¡æœ‰å…³é—­ï¼Œ<strong>ä»¥ä¸Š3æ¬¡è¯·æ±‚éƒ½å±äºä¸€æ¬¡ä¼šè¯</strong>å½“ä¸­å®Œæˆçš„ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼šä¼šè¯æ˜¯å’Œæµè§ˆå™¨å…³è”çš„ï¼Œå½“æœ‰ä¸‰ä¸ªæµè§ˆå™¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å»ºç«‹äº†è¿æ¥æ—¶ï¼Œå°±ä¼šæœ‰ä¸‰ä¸ªä¼šè¯ã€‚åŒä¸€ä¸ªæµè§ˆå™¨åœ¨æœªå…³é—­ä¹‹å‰è¯·æ±‚äº†å¤šæ¬¡æœåŠ¡å™¨ï¼Œè¿™å¤šæ¬¡è¯·æ±‚æ˜¯å±äºåŒä¸€ä¸ªä¼šè¯ã€‚</p>
<p><strong>ä¼šè¯è·Ÿè¸ªï¼š<strong>ä¸€ç§ç»´æŠ¤æµè§ˆå™¨çŠ¶æ€çš„æ–¹æ³•ï¼ŒæœåŠ¡å™¨</strong>éœ€è¦è¯†åˆ«å¤šæ¬¡è¯·æ±‚æ˜¯å¦æ¥è‡ªäºåŒä¸€æµè§ˆå™¨</strong>ï¼Œä»¥ä¾¿åœ¨åŒä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚é—´å…±äº«æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬ä½¿ç”¨ä¼šè¯è·Ÿè¸ªæŠ€æœ¯å°±æ˜¯è¦å®Œæˆåœ¨åŒä¸€ä¸ªä¼šè¯ä¸­ï¼Œå¤šä¸ªè¯·æ±‚ä¹‹é—´è¿›è¡Œå…±äº«æ•°æ®ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆè¦å…±äº«æ•°æ®å‘¢ï¼Ÿ</strong></p>
<p>ç”±äº<strong>HTTPæ˜¯æ— çŠ¶æ€åè®®</strong>ï¼Œåœ¨åé¢è¯·æ±‚ä¸­æ€ä¹ˆæ‹¿åˆ°å‰ä¸€æ¬¡è¯·æ±‚ç”Ÿæˆçš„æ•°æ®å‘¢ï¼Ÿæ­¤æ—¶å°±éœ€è¦åœ¨ä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚ä¹‹é—´è¿›è¡Œæ•°æ®å…±äº«</p>
<h4 id="2-1-2ä¸‰ç§ä¼šè¯è¿½è¸ªæ–¹æ¡ˆ">2.1.2ä¸‰ç§ä¼šè¯è¿½è¸ªæ–¹æ¡ˆ</h4>
<p>ä¼šè¯è·Ÿè¸ªæŠ€æœ¯æœ‰ä¸‰ç§ï¼š</p>
<ol>
<li>Cookieï¼ˆå®¢æˆ·ç«¯ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼‰ï¼šæ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨å½“ä¸­</li>
<li>Sessionï¼ˆæœåŠ¡ç«¯ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼‰ï¼šæ•°æ®å­˜å‚¨åœ¨å‚¨åœ¨æœåŠ¡ç«¯</li>
<li>ä»¤ç‰ŒæŠ€æœ¯</li>
</ol>
<h4 id="2-1-3æ–¹æ¡ˆä¸€ï¼šCookie">2.1.3<strong>æ–¹æ¡ˆä¸€</strong>ï¼šCookie</h4>
<p>cookie æ˜¯å®¢æˆ·ç«¯ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼Œ<strong>å®ƒæ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯æµè§ˆå™¨çš„</strong>ï¼Œæˆ‘ä»¬ä½¿ç”¨ cookie æ¥è·Ÿè¸ªä¼šè¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨ç¬¬ä¸€æ¬¡å‘èµ·è¯·æ±‚æ¥è¯·æ±‚æœåŠ¡å™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨æœåŠ¡å™¨ç«¯æ¥è®¾ç½®ä¸€ä¸ªcookieã€‚</p>
<p>æ¯”å¦‚ç¬¬ä¸€æ¬¡è¯·æ±‚äº†ç™»å½•æ¥å£ï¼Œç™»å½•æ¥å£æ‰§è¡Œå®Œæˆä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¾ç½®ä¸€ä¸ªcookieï¼Œåœ¨ cookie å½“ä¸­æˆ‘ä»¬å°±å¯ä»¥æ¥å­˜å‚¨ç”¨æˆ·ç›¸å…³çš„ä¸€äº›æ•°æ®ä¿¡æ¯ã€‚æ¯”å¦‚æˆ‘å¯ä»¥åœ¨ cookie å½“ä¸­æ¥å­˜å‚¨å½“å‰ç™»å½•ç”¨æˆ·çš„ç”¨æˆ·åï¼Œç”¨æˆ·çš„IDã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-465-1024x255.png" alt="img"></p>
<ul>
<li>æœåŠ¡å™¨ä¼š <strong>è‡ªåŠ¨</strong> çš„å°† cookie å“åº”ç»™æµè§ˆå™¨ã€‚</li>
<li>æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”å›æ¥çš„æ•°æ®ä¹‹åï¼Œä¼š <strong>è‡ªåŠ¨</strong> çš„å°† cookie å­˜å‚¨åœ¨æµè§ˆå™¨æœ¬åœ°ã€‚</li>
<li>åœ¨åç»­çš„è¯·æ±‚å½“ä¸­ï¼Œæµè§ˆå™¨ä¼š <strong>è‡ªåŠ¨</strong> çš„å°† cookie æºå¸¦åˆ°æœåŠ¡å™¨ç«¯ã€‚</li>
</ul>
<p><strong>ä¸ºä»€ä¹ˆè¿™ä¸€åˆ‡éƒ½æ˜¯è‡ªåŠ¨åŒ–è¿›è¡Œçš„ï¼Ÿ</strong></p>
<p>æ˜¯å› ä¸º cookie å®ƒæ˜¯ HTTP åè®®å½“ä¸­æ‰€æ”¯æŒçš„æŠ€æœ¯ï¼Œè€Œå„å¤§æµè§ˆå™¨å‚å•†éƒ½æ”¯æŒäº†è¿™ä¸€æ ‡å‡†ã€‚åœ¨ HTTP åè®®å®˜æ–¹ç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ªå“åº”å¤´å’Œè¯·æ±‚å¤´ï¼š</p>
<ul>
<li>å“åº”å¤´ Set-Cookie ï¼šè®¾ç½®Cookieæ•°æ®çš„</li>
<li>è¯·æ±‚å¤´ Cookieï¼šæºå¸¦Cookieæ•°æ®çš„</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-475.png" alt="img"></p>
<p><strong>ä»£ç æµ‹è¯•ï¼š</strong></p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SessionController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è®¾ç½®Cookie</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/c1&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Result cookie1(HttpServletResponse response)&#123;</span><br><span class="line">        response.addCookie(new Cookie(<span class="string">&quot;login_username&quot;</span>,<span class="string">&quot;itheima&quot;</span>)); <span class="comment">//è®¾ç½®Cookie/å“åº”Cookie</span></span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">        </span><br><span class="line">    <span class="comment">//è·å–Cookie</span></span><br><span class="line">    <span class="meta">@GetMapping(<span class="string">&quot;/c2&quot;</span>)</span></span><br><span class="line">    <span class="keyword">public</span> Result cookie2(HttpServletRequest request)&#123;</span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">            <span class="keyword">if</span>(cookie.getName().equals(<span class="string">&quot;login_username&quot;</span>))&#123;</span><br><span class="line">                System.<span class="keyword">out</span>.println(<span class="string">&quot;login_username: &quot;</span>+cookie.getValue()); <span class="comment">//è¾“å‡ºnameä¸ºlogin_usernameçš„cookie</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>
<p>A. è®¿é—®c1æ¥å£ï¼Œè®¾ç½®Cookieï¼Œ<code>http://localhost:8080/c1</code></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-476-1024x353.png" alt="img"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œè®¾ç½®çš„cookieï¼Œé€šè¿‡<strong>å“åº”å¤´Set-Cookie</strong>å“åº”ç»™æµè§ˆå™¨ï¼Œå¹¶ä¸”æµè§ˆå™¨ä¼šå°†Cookieï¼Œå­˜å‚¨åœ¨æµè§ˆå™¨ç«¯ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-477-1024x302.png" alt="img"></p>
<p>B. è®¿é—®c2æ¥å£ <code>http://localhost:8080/c2</code>ï¼Œæ­¤æ—¶æµè§ˆå™¨ä¼šè‡ªåŠ¨çš„å°†Cookieæºå¸¦åˆ°æœåŠ¡ç«¯ï¼Œæ˜¯é€šè¿‡<strong>è¯·æ±‚å¤´Cookie</strong>ï¼Œæºå¸¦çš„ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-478-1024x302.png" alt="img"></p>
<p><strong>ä¼˜ç¼ºç‚¹ï¼š</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šHTTPåè®®ä¸­æ”¯æŒçš„æŠ€æœ¯ï¼ˆåƒSet-Cookie å“åº”å¤´çš„è§£æä»¥åŠ Cookie è¯·æ±‚å¤´æ•°æ®çš„æºå¸¦ï¼Œéƒ½æ˜¯æµè§ˆå™¨è‡ªåŠ¨è¿›è¡Œçš„ï¼Œæ˜¯æ— éœ€æˆ‘ä»¬æ‰‹åŠ¨æ“ä½œçš„ï¼‰</li>
<li>ç¼ºç‚¹ï¼š
<ul>
<li>ç§»åŠ¨ç«¯APP(Androidã€IOS)ä¸­æ— æ³•ä½¿ç”¨Cookie</li>
<li>ä¸å®‰å…¨ï¼Œç”¨æˆ·å¯ä»¥è‡ªå·±ç¦ç”¨Cookie</li>
<li>Cookieä¸èƒ½è·¨åŸŸ</li>
</ul>
</li>
</ul>
<h4 id="2-1-4å…³äºè·¨åŸŸ">2.1.4å…³äºè·¨åŸŸ</h4>
<blockquote>
<p><strong>è·¨åŸŸä»‹ç»ï¼š</strong></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-479.png" alt="img"></p>
<ul>
<li>ç°åœ¨çš„é¡¹ç›®ï¼Œå¤§éƒ¨åˆ†éƒ½æ˜¯å‰åç«¯åˆ†ç¦»çš„ï¼Œå‰åç«¯æœ€ç»ˆä¹Ÿä¼šåˆ†å¼€éƒ¨ç½²ï¼Œå‰ç«¯éƒ¨ç½²åœ¨æœåŠ¡å™¨ 192.168.150.200 ä¸Šï¼Œç«¯å£ 80ï¼Œåç«¯éƒ¨ç½²åœ¨ 192.168.150.100ä¸Šï¼Œç«¯å£ 8080</li>
<li>æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨ç›´æ¥è®¿é—®å‰ç«¯å·¥ç¨‹ï¼Œè®¿é—®urlï¼š<a target="_blank" rel="noopener" href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a></li>
<li>ç„¶ååœ¨è¯¥é¡µé¢å‘èµ·è¯·æ±‚åˆ°æœåŠ¡ç«¯ï¼Œè€ŒæœåŠ¡ç«¯æ‰€åœ¨åœ°å€ä¸å†æ˜¯localhostï¼Œè€Œæ˜¯æœåŠ¡å™¨çš„IPåœ°å€192.168.150.100ï¼Œå‡è®¾è®¿é—®æ¥å£åœ°å€ä¸ºï¼š<a target="_blank" rel="noopener" href="http://192.168.150.100:8080/login">http://192.168.150.100:8080/login</a></li>
<li>é‚£æ­¤æ—¶å°±å­˜åœ¨è·¨åŸŸæ“ä½œäº†ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨http://192.168.150.200/login.htmlè¿™ä¸ªé¡µé¢ä¸Šè®¿é—®äº†http://192.168.150.100:8080/loginæ¥å£</li>
<li>æ­¤æ—¶å¦‚æœæœåŠ¡å™¨è®¾ç½®äº†ä¸€ä¸ªCookieï¼Œè¿™ä¸ªCookieæ˜¯ä¸èƒ½ä½¿ç”¨çš„ï¼Œ<strong>å› ä¸ºCookieæ— æ³•è·¨åŸŸ</strong></li>
</ul>
<p>åŒºåˆ†è·¨åŸŸçš„ç»´åº¦ï¼ˆä¸‰ä¸ªç»´åº¦æœ‰ä»»ä½•ä¸€ä¸ªç»´åº¦ä¸åŒï¼Œé‚£å°±æ˜¯è·¨åŸŸæ“ä½œï¼‰ï¼š</p>
<ul>
<li>åè®®</li>
<li>IP/åè®®</li>
<li>ç«¯å£</li>
</ul>
<p>ä¸¾ä¾‹ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a> ----------&gt; <a target="_blank" rel="noopener" href="https://192.168.150.200/login">https://192.168.150.200/login</a> [åè®®ä¸åŒï¼Œè·¨åŸŸ]</li>
<li><a target="_blank" rel="noopener" href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a> ----------&gt; <a target="_blank" rel="noopener" href="http://192.168.150.100/login">http://192.168.150.100/login</a> [IPä¸åŒï¼Œè·¨åŸŸ]</li>
<li><a target="_blank" rel="noopener" href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a> ----------&gt; <a target="_blank" rel="noopener" href="http://192.168.150.200:8080/login">http://192.168.150.200:8080/login</a> [ç«¯å£ä¸åŒï¼Œè·¨åŸŸ]</li>
<li><a target="_blank" rel="noopener" href="http://192.168.150.200/login.html">http://192.168.150.200/login.html</a> ----------&gt; <a target="_blank" rel="noopener" href="http://192.168.150.200/login">http://192.168.150.200/login</a> [ä¸è·¨åŸŸ]</li>
</ul>
</blockquote>
<h4 id="2-1-5æ–¹æ¡ˆäºŒSession">2.1.5æ–¹æ¡ˆäºŒSession</h4>
<p>å®ƒæ˜¯æœåŠ¡å™¨ç«¯ä¼šè¯è·Ÿè¸ªæŠ€æœ¯ï¼Œæ‰€ä»¥<strong>å®ƒæ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯çš„</strong>ã€‚</p>
<ul>
<li>
<p><strong>æœåŠ¡å™¨ç«¯ä¼šè¯è·Ÿè¸ªæŠ€æœ¯</strong>ï¼šæ‰€æœ‰ä¼šè¯æ•°æ®éƒ½ä¿å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œåªåœ¨å®¢æˆ·ç«¯ï¼æµè§ˆå™¨é‡Œå­˜ä¸€ä¸ªæ ‡è¯†ï¼ˆIDï¼‰ã€‚</p>
</li>
<li>
<p><strong>åŸºäº Cookie å®ç°</strong>ï¼šåº•å±‚é€šè¿‡åœ¨ HTTP å“åº”é‡Œä¸‹å‘ä¸€ä¸ªåä¸º <code>JSESSIONID</code> çš„ Cookieï¼ŒæŠŠ Session çš„ ID æŠŠç»™æµè§ˆå™¨ã€‚</p>
</li>
<li>
<p>åˆ›å»ºå¹¶ä¸‹å‘ Session</p>
</li>
</ul>
<p>ç¬¬ä¸€æ¬¡è¯·æ±‚</p>
<ul>
<li>æµè§ˆå™¨å‘æœåŠ¡å™¨å‘èµ·è¯·æ±‚ã€‚</li>
<li>æœåŠ¡å™¨æ£€æŸ¥å½“å‰è¯·æ±‚æ˜¯å¦å¸¦æœ‰ Session IDï¼ˆCookieï¼‰ï¼Œå‘ç°æ²¡æœ‰ã€‚</li>
<li>æ­¤æ—¶æœåŠ¡å™¨è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ Session å¯¹è±¡ï¼ˆå¦‚å›¾ä¸­æ ‡æ³¨ä¸º Session(1)ï¼‰ï¼Œå¹¶ç»™å®ƒåˆ†é…ä¸€ä¸ªå”¯ä¸€ IDã€‚</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-480-1024x249.png" alt="img"></p>
<p>å“åº”ä¸­ä¸‹å‘ Cookie</p>
<ul>
<li>æœåŠ¡å™¨åœ¨ HTTP å“åº”å¤´ä¸­åŠ ä¸Šï¼š <code>Set-Cookie: JSESSIONID=&lt;session-id&gt;</code></li>
<li>æµè§ˆå™¨æ”¶åˆ°åï¼Œä¼šæŠŠè¿™ä¸ª <code>JSESSIONID</code> å­˜åˆ°æœ¬åœ°ã€‚</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-481-1024x248.png" alt="img"></p>
<ul>
<li>æŸ¥æ‰¾å¹¶å¤ç”¨ Session</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-482-1024x248.png" alt="img"></p>
<p><strong>æµè§ˆå™¨è‡ªåŠ¨å¸¦ä¸Š Cookie</strong></p>
<ul>
<li>ä¹‹åæ¯æ¬¡å‘è¯·æ±‚æ—¶ï¼Œæµè§ˆå™¨éƒ½ä¼šåœ¨å¤´é‡ŒåŠ ä¸Šï¼š</li>
</ul>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="params">Cookie:</span> JSESSIONID<span class="operator">=</span><span class="symbol">&lt;session-id&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>æœåŠ¡å™¨å–å› Session æ•°æ®</strong></p>
<ul>
<li>æœåŠ¡å™¨ä» Cookie é‡Œå–å‡º <code>JSESSIONID</code>ï¼Œæ ¹æ®è¿™ä¸ª ID ä»è‡ªèº«çš„ Session å­˜å‚¨ä¸­æ‰¾åˆ°å¯¹åº”çš„ä¼šè¯å¯¹è±¡ã€‚</li>
<li>å› æ­¤ï¼Œå¤šä¸ªè¯·æ±‚å°±èƒ½å…±äº«åŒä¸€ä¸ª Session å¯¹è±¡é‡Œçš„æ•°æ®ï¼ˆå¦‚ç”¨æˆ·ç™»å½•çŠ¶æ€ã€ä¸´æ—¶å˜é‡ç­‰ï¼‰ã€‚</li>
</ul>
<ol>
<li></li>
</ol>
<p><strong>ä»£ç æµ‹è¯•</strong></p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@Slf4j</span><br><span class="line">@RestController</span><br><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> SessionController &#123;</span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;/s1&quot;)</span><br><span class="line">    <span class="built_in">public</span> Result session1(HttpSession <span class="keyword">session</span>)&#123;</span><br><span class="line">        <span class="keyword">log</span>.<span class="keyword">info</span>(&quot;HttpSession-s1: &#123;&#125;&quot;, <span class="keyword">session</span>.hashCode());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">session</span>.setAttribute(&quot;loginUser&quot;, &quot;tom&quot;); //å¾€<span class="keyword">session</span>ä¸­å­˜å‚¨æ•°æ®</span><br><span class="line">        <span class="keyword">return</span> Result.success();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @GetMapping(&quot;/s2&quot;)</span><br><span class="line">    <span class="built_in">public</span> Result session2(HttpServletRequest request)&#123;</span><br><span class="line">        HttpSession <span class="keyword">session</span> = request.getSession();</span><br><span class="line">        <span class="keyword">log</span>.<span class="keyword">info</span>(&quot;HttpSession-s2: &#123;&#125;&quot;, <span class="keyword">session</span>.hashCode());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">Object</span> loginUser = <span class="keyword">session</span>.getAttribute(&quot;loginUser&quot;); //ä»<span class="keyword">session</span>ä¸­è·å–æ•°æ®</span><br><span class="line">        <span class="keyword">log</span>.<span class="keyword">info</span>(&quot;loginUser: &#123;&#125;&quot;, loginUser);</span><br><span class="line">        <span class="keyword">return</span> Result.success(loginUser);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>A. è®¿é—® s1 æ¥å£ï¼Œ<code>http://localhost:8080/s1</code></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-483-1024x368.png" alt="img"></p>
<p>è¯·æ±‚å®Œæˆä¹‹åï¼Œåœ¨å“åº”å¤´ä¸­ï¼Œå°±ä¼šçœ‹åˆ°æœ‰ä¸€ä¸ªSet-Cookieçš„å“åº”å¤´ï¼Œé‡Œé¢å“åº”å›æ¥äº†ä¸€ä¸ªCookieï¼Œå°±æ˜¯JSESSIONIDï¼Œè¿™ä¸ªå°±æ˜¯æœåŠ¡ç«¯ä¼šè¯å¯¹è±¡ Session çš„IDã€‚</p>
<p>B. è®¿é—® s2 æ¥å£ï¼Œ<code>http://localhost:8080/s2</code></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-484-1024x292.png" alt="img"></p>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨åç»­çš„æ¯æ¬¡è¯·æ±‚æ—¶ï¼Œéƒ½ä¼šå°†Cookieçš„å€¼ï¼Œæºå¸¦åˆ°æœåŠ¡ç«¯ï¼Œé‚£æœåŠ¡ç«¯å‘¢ï¼Œæ¥æ”¶åˆ°Cookieä¹‹åï¼Œä¼šè‡ªåŠ¨çš„æ ¹æ®JSESSIONIDçš„å€¼ï¼Œæ‰¾åˆ°å¯¹åº”çš„ä¼šè¯å¯¹è±¡Sessionã€‚</p>
<p>é‚£ç»è¿‡è¿™ä¸¤æ­¥æµ‹è¯•ï¼Œå¤§å®¶ä¹Ÿä¼šçœ‹åˆ°ï¼Œåœ¨æ§åˆ¶å°ä¸­è¾“å‡ºå¦‚ä¸‹æ—¥å¿—ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-485-1024x77.png" alt="img"></p>
<p>ä¸¤æ¬¡è¯·æ±‚ï¼Œè·å–åˆ°çš„Sessionä¼šè¯å¯¹è±¡çš„hashcodeæ˜¯ä¸€æ ·çš„ï¼Œå°±è¯´æ˜æ˜¯åŒä¸€ä¸ªä¼šè¯å¯¹è±¡ã€‚è€Œä¸”ï¼Œç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œå¾€Sessionä¼šè¯å¯¹è±¡ä¸­å­˜å‚¨çš„å€¼ï¼Œç¬¬äºŒæ¬¡è¯·æ±‚æ—¶ï¼Œä¹Ÿè·å–åˆ°äº†ã€‚ é‚£è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡Sessionä¼šè¯å¯¹è±¡ï¼Œåœ¨åŒä¸€ä¸ªä¼šè¯çš„å¤šæ¬¡è¯·æ±‚ä¹‹é—´æ¥è¿›è¡Œæ•°æ®å…±äº«äº†ã€‚</p>
<p><strong>ä¼˜ç¼ºç‚¹</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼šSessionæ˜¯å­˜å‚¨åœ¨æœåŠ¡ç«¯çš„ï¼Œå®‰å…¨</li>
<li>ç¼ºç‚¹ï¼š
<ul>
<li>æœåŠ¡å™¨é›†ç¾¤ç¯å¢ƒä¸‹æ— æ³•ç›´æ¥ä½¿ç”¨Session</li>
<li>ç§»åŠ¨ç«¯APP(Androidã€IOS)ä¸­æ— æ³•ä½¿ç”¨Cookie</li>
<li>ç”¨æˆ·å¯ä»¥è‡ªå·±ç¦ç”¨Cookie</li>
<li>Cookieä¸èƒ½è·¨åŸŸ</li>
</ul>
</li>
</ul>
<p>PSï¼šSession åº•å±‚æ˜¯åŸºäºCookieå®ç°çš„ä¼šè¯è·Ÿè¸ªï¼Œå¦‚æœCookieä¸å¯ç”¨ï¼Œåˆ™è¯¥æ–¹æ¡ˆï¼Œä¹Ÿå°±å¤±æ•ˆäº†ã€‚</p>
<h4 id="2-1-6æœåŠ¡å™¨é›†ç¾¤ç¯å¢ƒä¸ºä½•æ— æ³•ä½¿ç”¨Sessionï¼Ÿ">2.1.6<strong>æœåŠ¡å™¨é›†ç¾¤ç¯å¢ƒä¸ºä½•æ— æ³•ä½¿ç”¨Sessionï¼Ÿ</strong></h4>
<p>åœ¨å¤šæœºéƒ¨ç½²ï¼ˆé›†ç¾¤ï¼‰ä¸‹ç›´æ¥ç”¨ Session ä¼šç¢°åˆ°è¿™æ ·çš„é—®é¢˜ï¼š</p>
<ol>
<li>é›†ç¾¤éƒ¨ç½²
<ul>
<li>ä¸ºäº†é¿å…å•ç‚¹æ•…éšœï¼Œé¡¹ç›®é€šå¸¸éƒ¨ç½²å¤šä»½ï¼ˆä¾‹å¦‚ 3 å° Tomcatï¼‰ï¼Œå¹¶åœ¨å‰ç«¯åŠ ä¸€å°è´Ÿè½½å‡è¡¡æœåŠ¡å™¨æ¥åˆ†å‘è¯·æ±‚ã€‚</li>
<li></li>
</ul>
</li>
<li>Session æœ¬åœ°å­˜å‚¨
<ul>
<li>æ¯å° Tomcat éƒ½ç»´æŠ¤è‡ªå·±çš„ä¸€ä»½ Session å­˜å‚¨ï¼ŒSession IDï¼ˆJSESSIONIDï¼‰å’Œä¼šè¯æ•°æ®åªä¿å­˜åœ¨äº§ç”Ÿå®ƒçš„é‚£å°æœºå™¨ä¸Šã€‚</li>
</ul>
</li>
<li>è¯·æ±‚ä¸ç¨³å®šè·¯ç”±
<ul>
<li>æµè§ˆå™¨ç¬¬ä¸€æ¬¡ç™»å½•ï¼Œç»è´Ÿè½½å‡è¡¡åˆ°è¾¾ A æœåŠ¡å™¨ï¼ŒA æœåŠ¡å™¨åˆ›å»º Session(1)ï¼Œå¹¶ä¸‹å‘ JSESSIONID=1 ç»™æµè§ˆå™¨ã€‚</li>
<li>æµè§ˆå™¨ç¬¬äºŒæ¬¡è¯·æ±‚ï¼ˆå¸¦ JSESSIONID=1ï¼‰åˆè¢«è·¯ç”±åˆ° B æœåŠ¡å™¨ï¼ŒB æœåŠ¡å™¨åœ¨è‡ªå·±çš„å­˜å‚¨é‡Œæ‰¾ä¸åˆ° ID=1 çš„ Sessionï¼Œå°±æ— æ³•è¯†åˆ«ç”¨æˆ·çŠ¶æ€ã€‚</li>
</ul>
</li>
<li>ç»“æœ
<ul>
<li>åŒä¸€ä¸ªæµè§ˆå™¨è¿ç»­è¯·æ±‚ï¼Œå´å› ä¸ºè¢«åˆ†åˆ°ä¸åŒèŠ‚ç‚¹ï¼Œæ‹¿ä¸åˆ°åŒä¸€ä¸ª Sessionï¼Œå¯¼è‡´ä¼šè¯è·Ÿè¸ªå¤±æ•ˆã€‚</li>
</ul>
</li>
</ol>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-468.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-469.png" alt="img"></p>
<ol>
<li></li>
</ol>
<p><strong>æ ¸å¿ƒç»“è®º</strong>ï¼š</p>
<ul>
<li>ä¼ ç»Ÿçš„æœåŠ¡å™¨å†…å­˜å‹ Session åªèƒ½åœ¨å•æœºä¸Šä½¿ç”¨ï¼›</li>
<li>åœ¨é›†ç¾¤ç¯å¢ƒä¸‹ï¼Œå¿…é¡»å¼•å…¥â€œä¼šè¯å…±äº«â€æˆ–â€œç²˜æ€§ä¼šè¯â€ç­‰æœºåˆ¶ï¼Œæ‰èƒ½ä¿è¯æ¯æ¬¡è¯·æ±‚éƒ½èƒ½å–åˆ°åŒä¸€ä¸ª Session å¯¹è±¡ã€‚</li>
</ul>
<h4 id="2-1-7æ–¹æ¡ˆä¸‰ï¼šä»¤ç‰ŒæŠ€æœ¯">2.1.7æ–¹æ¡ˆä¸‰ï¼šä»¤ç‰ŒæŠ€æœ¯</h4>
<p>è¿™é‡Œæåˆ°çš„ä»¤ç‰Œï¼Œå…¶å®å®ƒå°±æ˜¯ä¸€ä¸ªç”¨æˆ·èº«ä»½çš„æ ‡è¯†ï¼Œæœ¬è´¨å°±æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-470-1024x248.png" alt="img"></p>
<p>å¦‚æœé€šè¿‡ä»¤ç‰ŒæŠ€æœ¯æ¥è·Ÿè¸ªä¼šè¯ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨æµè§ˆå™¨å‘èµ·è¯·æ±‚ã€‚åœ¨è¯·æ±‚ç™»å½•æ¥å£çš„æ—¶å€™ï¼Œå¦‚æœç™»å½•æˆåŠŸï¼Œæˆ‘å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªä»¤ç‰Œï¼Œä»¤ç‰Œå°±æ˜¯ç”¨æˆ·çš„åˆæ³•èº«ä»½å‡­è¯ã€‚æ¥ä¸‹æ¥æˆ‘åœ¨å“åº”æ•°æ®çš„æ—¶å€™ï¼Œæˆ‘å°±å¯ä»¥ç›´æ¥å°†ä»¤ç‰Œå“åº”ç»™å‰ç«¯ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨å‰ç«¯ç¨‹åºå½“ä¸­æ¥æ”¶åˆ°ä»¤ç‰Œä¹‹åï¼Œå°±éœ€è¦å°†è¿™ä¸ªä»¤ç‰Œå­˜å‚¨èµ·æ¥ã€‚è¿™ä¸ªå­˜å‚¨å¯ä»¥å­˜å‚¨åœ¨ cookie å½“ä¸­ï¼Œä¹Ÿå¯ä»¥å­˜å‚¨åœ¨å…¶ä»–çš„å­˜å‚¨ç©ºé—´(æ¯”å¦‚ï¼šlocalStorage)å½“ä¸­ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œåœ¨åç»­çš„æ¯ä¸€æ¬¡è¯·æ±‚å½“ä¸­ï¼Œéƒ½éœ€è¦å°†ä»¤ç‰Œæºå¸¦åˆ°æœåŠ¡ç«¯ã€‚æºå¸¦åˆ°æœåŠ¡ç«¯ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±éœ€è¦æ¥æ ¡éªŒä»¤ç‰Œçš„æœ‰æ•ˆæ€§ã€‚å¦‚æœä»¤ç‰Œæ˜¯æœ‰æ•ˆçš„ï¼Œå°±è¯´æ˜ç”¨æˆ·å·²ç»æ‰§è¡Œäº†ç™»å½•æ“ä½œï¼Œå¦‚æœä»¤ç‰Œæ˜¯æ— æ•ˆçš„ï¼Œå°±è¯´æ˜ç”¨æˆ·ä¹‹å‰å¹¶æœªæ‰§è¡Œç™»å½•æ“ä½œã€‚</p>
<p>æ­¤æ—¶ï¼Œå¦‚æœæ˜¯åœ¨åŒä¸€æ¬¡ä¼šè¯çš„å¤šæ¬¡è¯·æ±‚ä¹‹é—´ï¼Œæˆ‘ä»¬æƒ³å…±äº«æ•°æ®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†å…±äº«çš„æ•°æ®å­˜å‚¨åœ¨ä»¤ç‰Œå½“ä¸­å°±å¯ä»¥äº†ã€‚</p>
<p><strong>ä¼˜ç¼ºç‚¹</strong></p>
<ul>
<li>ä¼˜ç‚¹ï¼š
<ul>
<li>æ”¯æŒPCç«¯ã€ç§»åŠ¨ç«¯</li>
<li>è§£å†³é›†ç¾¤ç¯å¢ƒä¸‹çš„è®¤è¯é—®é¢˜</li>
<li>å‡è½»æœåŠ¡å™¨çš„å­˜å‚¨å‹åŠ›ï¼ˆæ— éœ€åœ¨æœåŠ¡å™¨ç«¯å­˜å‚¨ï¼‰</li>
</ul>
</li>
<li>ç¼ºç‚¹ï¼šéœ€è¦è‡ªå·±å®ç°ï¼ˆåŒ…æ‹¬ä»¤ç‰Œçš„ç”Ÿæˆã€ä»¤ç‰Œçš„ä¼ é€’ã€ä»¤ç‰Œçš„æ ¡éªŒï¼‰</li>
</ul>
<h3 id="2-2JWTä»¤ç‰Œ">2.2JWTä»¤ç‰Œ</h3>
<h4 id="2-2-1ä»‹ç»">2.2.1ä»‹ç»</h4>
<ul>
<li>JWTå…¨ç§° JSON Web Token ï¼ˆå®˜ç½‘ï¼š<a target="_blank" rel="noopener" href="https://jwt.io/%EF%BC%89%EF%BC%8C%E5%AE%9A%E4%B9%89%E4%BA%86%E4%B8%80%E7%A7%8D%E7%AE%80%E6%B4%81%E7%9A%84%E3%80%81%E8%87%AA%E5%8C%85%E5%90%AB%E7%9A%84%E6%A0%BC%E5%BC%8F%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%9C%A8%E9%80%9A%E4%BF%A1%E5%8F%8C%E6%96%B9%E4%BB%A5json%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E5%AE%89%E5%85%A8%E7%9A%84%E4%BC%A0%E8%BE%93%E4%BF%A1%E6%81%AF%E3%80%82%E7%94%B1%E4%BA%8E%E6%95%B0%E5%AD%97%E7%AD%BE%E5%90%8D%E7%9A%84%E5%AD%98%E5%9C%A8%EF%BC%8C%E8%BF%99%E4%BA%9B%E4%BF%A1%E6%81%AF%E6%98%AF%E5%8F%AF%E9%9D%A0%E7%9A%84%E3%80%82">https://jwt.io/ï¼‰ï¼Œå®šä¹‰äº†ä¸€ç§ç®€æ´çš„ã€è‡ªåŒ…å«çš„æ ¼å¼ï¼Œç”¨äºåœ¨é€šä¿¡åŒæ–¹ä»¥jsonæ•°æ®æ ¼å¼å®‰å…¨çš„ä¼ è¾“ä¿¡æ¯ã€‚ç”±äºæ•°å­—ç­¾åçš„å­˜åœ¨ï¼Œè¿™äº›ä¿¡æ¯æ˜¯å¯é çš„ã€‚</a>
<ul>
<li>ç®€æ´ï¼šæ˜¯æŒ‡jwtå°±æ˜¯ä¸€ä¸ªç®€å•çš„å­—ç¬¦ä¸²ã€‚å¯ä»¥åœ¨è¯·æ±‚å‚æ•°æˆ–è€…æ˜¯è¯·æ±‚å¤´å½“ä¸­ç›´æ¥ä¼ é€’ã€‚</li>
<li>è‡ªåŒ…å«ï¼šæŒ‡çš„æ˜¯jwtä»¤ç‰Œï¼Œçœ‹ä¼¼æ˜¯ä¸€ä¸ªéšæœºçš„å­—ç¬¦ä¸²ï¼Œä½†æ˜¯æˆ‘ä»¬æ˜¯å¯ä»¥æ ¹æ®è‡ªèº«çš„éœ€æ±‚åœ¨jwtä»¤ç‰Œä¸­å­˜å‚¨è‡ªå®šä¹‰çš„æ•°æ®å†…å®¹ã€‚å¦‚ï¼šå¯ä»¥ç›´æ¥åœ¨jwtä»¤ç‰Œä¸­å­˜å‚¨ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ã€‚</li>
<li><strong>ç®€å•æ¥è®²ï¼Œjwtå°±æ˜¯å°†åŸå§‹çš„jsonæ•°æ®æ ¼å¼è¿›è¡Œäº†å®‰å…¨çš„å°è£…ï¼Œè¿™æ ·å°±å¯ä»¥ç›´æ¥åŸºäºjwtåœ¨é€šä¿¡åŒæ–¹å®‰å…¨çš„è¿›è¡Œä¿¡æ¯ä¼ è¾“äº†ã€‚</strong></li>
</ul>
</li>
</ul>
<p>JWTçš„ç»„æˆï¼š ï¼ˆJWTä»¤ç‰Œç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆï¼Œä¸‰ä¸ªéƒ¨åˆ†ä¹‹é—´ä½¿ç”¨è‹±æ–‡çš„ç‚¹æ¥åˆ†å‰²ï¼‰</p>
<ul>
<li>ç¬¬ä¸€éƒ¨åˆ†ï¼šHeader(å¤´ï¼‰ï¼Œ è®°å½•ä»¤ç‰Œç±»å‹ã€ç­¾åç®—æ³•ç­‰ã€‚ ä¾‹å¦‚ï¼š{â€œalgâ€:â€œHS256â€,â€œtypeâ€:â€œJWTâ€}</li>
<li>ç¬¬äºŒéƒ¨åˆ†ï¼šPayload(æœ‰æ•ˆè½½è·ï¼‰ï¼Œæºå¸¦ä¸€äº›è‡ªå®šä¹‰ä¿¡æ¯ã€é»˜è®¤ä¿¡æ¯ç­‰ã€‚ ä¾‹å¦‚ï¼š{â€œidâ€:â€œ1â€,â€œusernameâ€:â€œTomâ€}</li>
<li>ç¬¬ä¸‰éƒ¨åˆ†ï¼šSignature(ç­¾åï¼‰ï¼Œé˜²æ­¢Tokenè¢«ç¯¡æ”¹ã€ç¡®ä¿å®‰å…¨æ€§ã€‚å°†headerã€payloadï¼Œå¹¶åŠ å…¥æŒ‡å®šç§˜é’¥ï¼Œé€šè¿‡æŒ‡å®šç­¾åç®—æ³•è®¡ç®—è€Œæ¥ã€‚</li>
</ul>
<blockquote>
<p>ç­¾åçš„ç›®çš„å°±æ˜¯ä¸ºäº†é˜²jwtä»¤ç‰Œè¢«ç¯¡æ”¹ï¼Œè€Œæ­£æ˜¯å› ä¸ºjwtä»¤ç‰Œæœ€åä¸€ä¸ªéƒ¨åˆ†æ•°å­—ç­¾åçš„å­˜åœ¨ï¼Œæ‰€ä»¥æ•´ä¸ªjwt ä»¤ç‰Œæ˜¯éå¸¸å®‰å…¨å¯é çš„ã€‚ä¸€æ—¦jwtä»¤ç‰Œå½“ä¸­ä»»ä½•ä¸€ä¸ªéƒ¨åˆ†ã€ä»»ä½•ä¸€ä¸ªå­—ç¬¦è¢«ç¯¡æ”¹äº†ï¼Œæ•´ä¸ªä»¤ç‰Œåœ¨æ ¡éªŒçš„æ—¶å€™éƒ½ä¼šå¤±è´¥ï¼Œæ‰€ä»¥å®ƒæ˜¯éå¸¸å®‰å…¨å¯é çš„ã€‚</p>
</blockquote>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-486-1024x86.png" alt="img"></p>
<p>JWTæ˜¯å¦‚ä½•å°†åŸå§‹çš„JSONæ ¼å¼æ•°æ®ï¼Œè½¬å˜ä¸ºå­—ç¬¦ä¸²çš„å‘¢ï¼Ÿ</p>
<ul>
<li>å…¶å®åœ¨ç”ŸæˆJWTä»¤ç‰Œæ—¶ï¼Œä¼šå¯¹JSONæ ¼å¼çš„æ•°æ®è¿›è¡Œä¸€æ¬¡ç¼–ç ï¼šè¿›è¡Œbase64ç¼–ç </li>
<li>Base64ï¼šæ˜¯ä¸€ç§åŸºäº64ä¸ªå¯æ‰“å°çš„å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„ç¼–ç æ–¹å¼ã€‚æ—¢ç„¶èƒ½ç¼–ç ï¼Œé‚£ä¹Ÿå°±æ„å‘³ç€ä¹Ÿèƒ½è§£ç ã€‚æ‰€ä½¿ç”¨çš„64ä¸ªå­—ç¬¦åˆ†åˆ«æ˜¯Aåˆ°Zã€aåˆ°zã€ 0- 9ï¼Œä¸€ä¸ªåŠ å·ï¼Œä¸€ä¸ªæ–œæ ï¼ŒåŠ èµ·æ¥å°±æ˜¯64ä¸ªå­—ç¬¦ã€‚ä»»ä½•æ•°æ®ç»è¿‡base64ç¼–ç ä¹‹åï¼Œæœ€ç»ˆå°±ä¼šé€šè¿‡è¿™64ä¸ªå­—ç¬¦æ¥è¡¨ç¤ºã€‚å½“ç„¶è¿˜æœ‰ä¸€ä¸ªç¬¦å·ï¼Œé‚£å°±æ˜¯ç­‰å·ã€‚ç­‰å·å®ƒæ˜¯ä¸€ä¸ªè¡¥ä½çš„ç¬¦å·</li>
<li>éœ€è¦æ³¨æ„çš„æ˜¯Base64æ˜¯ç¼–ç æ–¹å¼ï¼Œè€Œä¸æ˜¯åŠ å¯†æ–¹å¼ã€‚</li>
</ul>
<h4 id="2-2-2ç”Ÿæˆå’Œæ ¡éªŒ">2.2.2ç”Ÿæˆå’Œæ ¡éªŒ</h4>
<p>1). é¦–å…ˆæˆ‘ä»¬å…ˆæ¥å®ç°JWTä»¤ç‰Œçš„ç”Ÿæˆã€‚è¦æƒ³ä½¿ç”¨JWTä»¤ç‰Œï¼Œéœ€è¦å…ˆå¼•å…¥JWTçš„ä¾èµ–ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JWTä¾èµ–--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>io.jsonwebtoken<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jjwt<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.9.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>åœ¨å¼•å…¥å®ŒJWTæ¥èµ–åï¼Œå°±å¯ä»¥è°ƒç”¨å·¥å…·åŒ…ä¸­æä¾›çš„APIæ¥å®ŒæˆJWTä»¤ç‰Œçš„ç”Ÿæˆå’Œæ ¡éªŒã€‚å·¥å…·ç±»ï¼šJwts</p>
<p>2). ç”ŸæˆJWTä»£ç å®ç°ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">testGenJwt</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Map</span>&lt;<span class="title class_">String</span>, <span class="title class_">Object</span>&gt; claims = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">    claims.<span class="title function_">put</span>(<span class="string">&quot;id&quot;</span>, <span class="number">10</span>);</span><br><span class="line">    claims.<span class="title function_">put</span>(<span class="string">&quot;username&quot;</span>, <span class="string">&quot;itheima&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title class_">String</span> jwt = <span class="title class_">Jwts</span>.<span class="title function_">builder</span>().<span class="title function_">signWith</span>(<span class="title class_">SignatureAlgorithm</span>.<span class="property">HS256</span>, <span class="string">&quot;aXRjYXN0&quot;</span>)</span><br><span class="line">        .<span class="title function_">addClaims</span>(claims)</span><br><span class="line">        .<span class="title function_">setExpiration</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">System</span>.<span class="title function_">currentTimeMillis</span>() + <span class="number">12</span> * <span class="number">3600</span> * <span class="number">1000</span>))</span><br><span class="line">        .<span class="title function_">compact</span>();</span><br><span class="line"></span><br><span class="line">    <span class="title class_">System</span>.<span class="property">out</span>.<span class="title function_">println</span>(jwt);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼š</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eyJhbGciOiJIUzI1NiJ9<span class="selector-class">.eyJpZCI6MSwiZXhwIjoxNjcyNzI5NzMwfQ</span>.fHi0Ub8npbyt71UqLXDdLyipptLgxBUg_mSuGJtXtBk</span><br></pre></td></tr></table></figure>
<p>è¾“å‡ºçš„ç»“æœå°±æ˜¯ç”Ÿæˆçš„JWTä»¤ç‰Œ,ï¼Œé€šè¿‡è‹±æ–‡çš„ç‚¹åˆ†å‰²å¯¹ä¸‰ä¸ªéƒ¨åˆ†è¿›è¡Œåˆ†å‰²ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç”Ÿæˆçš„ä»¤ç‰Œå¤åˆ¶ä¸€ä¸‹ï¼Œç„¶åæ‰“å¼€JWTçš„å®˜ç½‘ï¼Œå°†ç”Ÿæˆçš„ä»¤ç‰Œç›´æ¥æ”¾åœ¨Encodedä½ç½®ï¼Œæ­¤æ—¶å°±ä¼šè‡ªåŠ¨çš„å°†ä»¤ç‰Œè§£æå‡ºæ¥ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-487-1024x595.png" alt="img"></p>
<p>ç¬¬ä¸€éƒ¨åˆ†è§£æå‡ºæ¥ï¼Œçœ‹åˆ°JSONæ ¼å¼çš„åŸå§‹æ•°æ®ï¼Œæ‰€ä½¿ç”¨çš„ç­¾åç®—æ³•ä¸ºHS256ã€‚</p>
<p>ç¬¬äºŒä¸ªéƒ¨åˆ†æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®ï¼Œä¹‹å‰æˆ‘ä»¬è‡ªå®šä¹‰çš„æ•°æ®å°±æ˜¯idï¼Œè¿˜æœ‰ä¸€ä¸ªexpä»£è¡¨çš„æ˜¯æˆ‘ä»¬æ‰€è®¾ç½®çš„è¿‡æœŸæ—¶é—´ã€‚</p>
<p>ç”±äºå‰ä¸¤ä¸ªéƒ¨åˆ†æ˜¯base64ç¼–ç ï¼Œæ‰€ä»¥æ˜¯å¯ä»¥ç›´æ¥è§£ç å‡ºæ¥ã€‚ä½†æœ€åä¸€ä¸ªéƒ¨åˆ†å¹¶ä¸æ˜¯base64ç¼–ç ï¼Œæ˜¯ç»è¿‡ç­¾åç®—æ³•è®¡ç®—å‡ºæ¥çš„ï¼Œæ‰€ä»¥æœ€åä¸€ä¸ªéƒ¨åˆ†æ˜¯ä¸ä¼šè§£æçš„ã€‚</p>
<p>3). å®ç°äº†JWTä»¤ç‰Œçš„ç”Ÿæˆï¼Œä¸‹é¢æˆ‘ä»¬æ¥ç€ä½¿ç”¨Javaä»£ç æ¥æ ¡éªŒJWTä»¤ç‰Œ(è§£æç”Ÿæˆçš„ä»¤ç‰Œ)ï¼š</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testParseJwt</span>()</span> &#123;</span><br><span class="line">    Claims claims = Jwts.parser().setSigningKey(<span class="string">&quot;aXRjYXN0&quot;</span>)</span><br><span class="line">        .parseClaimsJws(<span class="string">&quot;eyJhbGciOiJIUzI1NiJ9.eyJpZCI6MTAsInVzZXJuYW1lIjoiaXRoZWltYSIsImV4cCI6MTcwMTkwOTAxNX0.N-MD6DmoeIIY5lB5z73UFLN9u7veppx1K5_N_jS9Yko&quot;</span>)</span><br><span class="line">        .getBody();</span><br><span class="line">    System.<span class="keyword">out</span>.println(claims);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿è¡Œæµ‹è¯•æ–¹æ³•ï¼š</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attribute">id</span>=10, <span class="attribute">username</span>=itheima, <span class="attribute">exp</span>=1701909015&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¤ç‰Œè§£æåï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°idå’Œè¿‡æœŸæ—¶é—´ï¼Œå¦‚æœåœ¨è§£æçš„è¿‡ç¨‹å½“ä¸­æ²¡æœ‰æŠ¥é”™ï¼Œå°±è¯´æ˜è§£ææˆåŠŸäº†ã€‚</p>
<p>é€šè¿‡ä»¥ä¸Šæµ‹è¯•ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨JWTä»¤ç‰Œæ—¶éœ€è¦æ³¨æ„ï¼š</p>
<ul>
<li>JWTæ ¡éªŒæ—¶ä½¿ç”¨çš„ç­¾åç§˜é’¥ï¼Œå¿…é¡»å’Œç”ŸæˆJWTä»¤ç‰Œæ—¶ä½¿ç”¨çš„ç§˜é’¥æ˜¯é…å¥—çš„ã€‚</li>
<li>å¦‚æœJWTä»¤ç‰Œè§£ææ ¡éªŒæ—¶æŠ¥é”™ï¼Œåˆ™è¯´æ˜ JWTä»¤ç‰Œè¢«ç¯¡æ”¹ æˆ– å¤±æ•ˆäº†ï¼Œä»¤ç‰Œéæ³•ã€‚</li>
</ul>
<h4 id="2-2-3ç™»å½•æ—¶ä¸‹å‘ä»¤ç‰Œ">2.2.3ç™»å½•æ—¶ä¸‹å‘ä»¤ç‰Œ</h4>
<ol>
<li>ç”Ÿæˆä»¤ç‰Œ
<ul>
<li>åœ¨ç™»å½•æˆåŠŸä¹‹åæ¥ç”Ÿæˆä¸€ä¸ªJWTä»¤ç‰Œï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªä»¤ç‰Œç›´æ¥è¿”å›ç»™å‰ç«¯</li>
</ul>
</li>
<li>æ ¡éªŒä»¤ç‰Œ
<ul>
<li>æ‹¦æˆªå‰ç«¯è¯·æ±‚ï¼Œä»è¯·æ±‚ä¸­è·å–åˆ°ä»¤ç‰Œï¼Œå¯¹ä»¤ç‰Œè¿›è¡Œè§£ææ ¡éªŒ</li>
</ul>
</li>
</ol>
<p><strong>å®ç°æ­¥éª¤ï¼š</strong></p>
<ol>
<li>å¼•å…¥JWTå·¥å…·ç±»ï¼šåœ¨é¡¹ç›®å·¥ç¨‹ä¸‹åˆ›å»º <code>com.itheima.util</code> åŒ…ï¼Œå¹¶æŠŠæä¾›JWTå·¥å…·ç±»å¤åˆ¶åˆ°è¯¥åŒ…ä¸‹</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">package com.<span class="property">itheima</span>.<span class="property">util</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> io.<span class="property">jsonwebtoken</span>.<span class="property">Claims</span>;</span><br><span class="line"><span class="keyword">import</span> io.<span class="property">jsonwebtoken</span>.<span class="property">Jwts</span>;</span><br><span class="line"><span class="keyword">import</span> io.<span class="property">jsonwebtoken</span>.<span class="property">SignatureAlgorithm</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">Date</span>;</span><br><span class="line"><span class="keyword">import</span> java.<span class="property">util</span>.<span class="property">Map</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JwtUtils</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="title class_">String</span> signKey = <span class="string">&quot;SVRIRUlNQQ==&quot;</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="title class_">Long</span> expire = 43200000L;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * ç”ŸæˆJWTä»¤ç‰Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title class_">String</span> <span class="title function_">generateJwt</span>(<span class="params"><span class="title class_">Map</span>&lt;<span class="title class_">String</span>,<span class="title class_">Object</span>&gt; claims</span>)&#123;</span><br><span class="line">        <span class="title class_">String</span> jwt = <span class="title class_">Jwts</span>.<span class="title function_">builder</span>()</span><br><span class="line">                .<span class="title function_">addClaims</span>(claims)</span><br><span class="line">                .<span class="title function_">signWith</span>(<span class="title class_">SignatureAlgorithm</span>.<span class="property">HS256</span>, signKey)</span><br><span class="line">                .<span class="title function_">setExpiration</span>(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="title class_">System</span>.<span class="title function_">currentTimeMillis</span>() + expire))</span><br><span class="line">                .<span class="title function_">compact</span>();</span><br><span class="line">        <span class="keyword">return</span> jwt;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * è§£æJWTä»¤ç‰Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> jwt JWTä»¤ç‰Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> JWTç¬¬äºŒéƒ¨åˆ†è´Ÿè½½ payload ä¸­å­˜å‚¨çš„å†…å®¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="title class_">Claims</span> <span class="title function_">parseJWT</span>(<span class="params"><span class="title class_">String</span> jwt</span>)&#123;</span><br><span class="line">        <span class="title class_">Claims</span> claims = <span class="title class_">Jwts</span>.<span class="title function_">parser</span>()</span><br><span class="line">                .<span class="title function_">setSigningKey</span>(signKey)</span><br><span class="line">                .<span class="title function_">parseClaimsJws</span>(jwt)</span><br><span class="line">                .<span class="title function_">getBody</span>();</span><br><span class="line">        <span class="keyword">return</span> claims;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>å®Œå–„ <code>EmpServiceImpl</code>ä¸­çš„ <code>login</code> æ–¹æ³•é€»è¾‘ï¼Œ ç™»å½•æˆåŠŸï¼Œç”ŸæˆJWTä»¤ç‰Œå¹¶è¿”å›</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_">LoginInfo</span> <span class="title function_">login</span>(<span class="params"><span class="title class_">Emp</span> emp</span>) &#123;</span><br><span class="line">    <span class="title class_">Emp</span> empLogin = empMapper.<span class="title function_">getUsernameAndPassword</span>(emp);</span><br><span class="line">    <span class="keyword">if</span>(empLogin != <span class="literal">null</span>)&#123;</span><br><span class="line">        <span class="comment">//1. ç”ŸæˆJWTä»¤ç‰Œ</span></span><br><span class="line">        <span class="title class_">Map</span>&lt;<span class="title class_">String</span>,<span class="title class_">Object</span>&gt; dataMap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        dataMap.<span class="title function_">put</span>(<span class="string">&quot;id&quot;</span>, empLogin.<span class="title function_">getId</span>());</span><br><span class="line">        dataMap.<span class="title function_">put</span>(<span class="string">&quot;username&quot;</span>, empLogin.<span class="title function_">getUsername</span>());</span><br><span class="line">        </span><br><span class="line">        <span class="title class_">String</span> jwt = <span class="title class_">JwtUtils</span>.<span class="title function_">generateJwt</span>(dataMap);</span><br><span class="line">        <span class="title class_">LoginInfo</span> loginInfo = <span class="keyword">new</span> <span class="title class_">LoginInfo</span>(empLogin.<span class="title function_">getId</span>(), empLogin.<span class="title function_">getUsername</span>(), empLogin.<span class="title function_">getName</span>(), jwt);</span><br><span class="line">        <span class="keyword">return</span> loginInfo;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-3è¿‡æ»¤å™¨Filter">2.3è¿‡æ»¤å™¨Filter</h3>
<p>åˆšæ‰é€šè¿‡æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨åç»­çš„è¯·æ±‚å½“ä¸­ï¼Œéƒ½ä¼šåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦JWTä»¤ç‰Œåˆ°æœåŠ¡ç«¯ï¼Œè€ŒæœåŠ¡ç«¯éœ€è¦ç»Ÿä¸€æ‹¦æˆªæ‰€æœ‰çš„è¯·æ±‚ï¼Œä»è€Œåˆ¤æ–­æ˜¯å¦æºå¸¦çš„æœ‰åˆæ³•çš„JWTä»¤ç‰Œã€‚</p>
<p>é‚£æ€ä¹ˆæ ·æ¥ç»Ÿä¸€æ‹¦æˆªåˆ°æ‰€æœ‰çš„è¯·æ±‚æ ¡éªŒä»¤ç‰Œçš„æœ‰æ•ˆæ€§å‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬ä¼šå­¦ä¹ ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>Interceptoræ‹¦æˆªå™¨</li>
<li>Filterè¿‡æ»¤å™¨</li>
</ul>
<h4 id="2-3-1Filterå¿«é€Ÿå…¥é—¨">2.3.1Filterå¿«é€Ÿå…¥é—¨</h4>
<p><strong>ä»€ä¹ˆæ˜¯Filterï¼Ÿ</strong></p>
<ul>
<li>Filterè¡¨ç¤ºè¿‡æ»¤å™¨ï¼Œæ˜¯ JavaWebä¸‰å¤§ç»„ä»¶(Servletã€Filterã€Listener)ä¹‹ä¸€ã€‚</li>
<li>è¿‡æ»¤å™¨å¯ä»¥æŠŠå¯¹èµ„æºçš„è¯·æ±‚æ‹¦æˆªä¸‹æ¥ï¼Œä»è€Œå®ç°ä¸€äº›ç‰¹æ®Šçš„åŠŸèƒ½
<ul>
<li>ä½¿ç”¨äº†è¿‡æ»¤å™¨ä¹‹åï¼Œè¦æƒ³è®¿é—®webæœåŠ¡å™¨ä¸Šçš„èµ„æºï¼Œå¿…é¡»å…ˆç»è¿‡æ»¤å™¨ï¼Œè¿‡æ»¤å™¨å¤„ç†å®Œæ¯•ä¹‹åï¼Œæ‰å¯ä»¥è®¿é—®å¯¹åº”çš„èµ„æºã€‚</li>
</ul>
</li>
<li>è¿‡æ»¤å™¨ä¸€èˆ¬å®Œæˆä¸€äº›é€šç”¨çš„æ“ä½œï¼Œæ¯”å¦‚ï¼šç™»å½•æ ¡éªŒã€ç»Ÿä¸€ç¼–ç å¤„ç†ã€æ•æ„Ÿå­—ç¬¦å¤„ç†ç­‰ã€‚</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-488.png" alt="img"></p>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡Filterå¿«é€Ÿå…¥é—¨ç¨‹åºæŒæ¡è¿‡æ»¤å™¨çš„åŸºæœ¬ä½¿ç”¨æ“ä½œï¼š</p>
<ul>
<li>ç¬¬1æ­¥ï¼Œå®šä¹‰è¿‡æ»¤å™¨ ï¼š1.å®šä¹‰ä¸€ä¸ªç±»ï¼Œå®ç° Filter æ¥å£ï¼Œå¹¶é‡å†™å…¶æ‰€æœ‰æ–¹æ³•ã€‚</li>
<li>ç¬¬2æ­¥ï¼Œé…ç½®è¿‡æ»¤å™¨ï¼šFilterç±»ä¸ŠåŠ  @WebFilter æ³¨è§£ï¼Œé…ç½®æ‹¦æˆªèµ„æºçš„è·¯å¾„ã€‚å¼•å¯¼ç±»ä¸ŠåŠ  @ServletComponentScan å¼€å¯Servletç»„ä»¶æ”¯æŒã€‚</li>
</ul>
<p><strong>1). å®šä¹‰è¿‡æ»¤å™¨</strong></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DemoFilter</span> <span class="title">implements</span> <span class="title">Filter</span> &#123;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–æ–¹æ³•, webæœåŠ¡å™¨å¯åŠ¨, åˆ›å»ºFilterå®ä¾‹æ—¶è°ƒç”¨, åªè°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span>(<span class="params">FilterConfig filterConfig</span>) throws ServletException</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;init ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‹¦æˆªåˆ°è¯·æ±‚æ—¶,è°ƒç”¨è¯¥æ–¹æ³•,å¯ä»¥è°ƒç”¨å¤šæ¬¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span>(<span class="params">ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain</span>) throws IOException, ServletException</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;æ‹¦æˆªåˆ°äº†è¯·æ±‚...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é”€æ¯æ–¹æ³•, webæœåŠ¡å™¨å…³é—­æ—¶è°ƒç”¨, åªè°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span>()</span> &#123;</span><br><span class="line">        System.<span class="keyword">out</span>.println(<span class="string">&quot;destroy ... &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>initæ–¹æ³•ï¼šè¿‡æ»¤å™¨çš„åˆå§‹åŒ–æ–¹æ³•ã€‚åœ¨webæœåŠ¡å™¨å¯åŠ¨çš„æ—¶å€™ä¼šè‡ªåŠ¨çš„åˆ›å»ºFilterè¿‡æ»¤å™¨å¯¹è±¡ï¼Œåœ¨åˆ›å»ºè¿‡æ»¤å™¨å¯¹è±¡çš„æ—¶å€™ä¼šè‡ªåŠ¨è°ƒç”¨initåˆå§‹åŒ–æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</li>
<li>doFilteræ–¹æ³•ï¼šè¿™ä¸ªæ–¹æ³•æ˜¯åœ¨æ¯ä¸€æ¬¡æ‹¦æˆªåˆ°è¯·æ±‚ä¹‹åéƒ½ä¼šè¢«è°ƒç”¨ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•æ˜¯ä¼šè¢«è°ƒç”¨å¤šæ¬¡çš„ï¼Œæ¯æ‹¦æˆªåˆ°ä¸€æ¬¡è¯·æ±‚å°±ä¼šè°ƒç”¨ä¸€æ¬¡doFilter()æ–¹æ³•ã€‚</li>
<li>destroyæ–¹æ³•ï¼š æ˜¯é”€æ¯çš„æ–¹æ³•ã€‚å½“æˆ‘ä»¬å…³é—­æœåŠ¡å™¨çš„æ—¶å€™ï¼Œå®ƒä¼šè‡ªåŠ¨çš„è°ƒç”¨é”€æ¯æ–¹æ³•destroyï¼Œè€Œè¿™ä¸ªé”€æ¯æ–¹æ³•ä¹Ÿåªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ã€‚</li>
</ul>
<p><strong>2). é…ç½®è¿‡æ»¤å™¨</strong></p>
<p>åœ¨å®šä¹‰å®ŒFilterä¹‹åï¼ŒFilterå…¶å®å¹¶ä¸ä¼šç”Ÿæ•ˆï¼Œè¿˜éœ€è¦å®ŒæˆFilterçš„é…ç½®ï¼ŒFilterçš„é…ç½®éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨Filterç±»ä¸Šæ·»åŠ ä¸€ä¸ªæ³¨è§£ï¼š<code>@WebFilter</code>ï¼Œå¹¶æŒ‡å®šå±æ€§<code>urlPatterns</code>ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§æŒ‡å®šè¿‡æ»¤å™¨è¦æ‹¦æˆªå“ªäº›è¯·æ±‚</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter</span>(urlPatterns = <span class="string">&quot;/*&quot;</span>) <span class="comment">//é…ç½®è¿‡æ»¤å™¨è¦æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„ï¼ˆ /* è¡¨ç¤ºæ‹¦æˆªæµè§ˆå™¨çš„æ‰€æœ‰è¯·æ±‚ ï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–æ–¹æ³•, webæœåŠ¡å™¨å¯åŠ¨, åˆ›å»ºFilterå®ä¾‹æ—¶è°ƒç”¨, åªè°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‹¦æˆªåˆ°è¯·æ±‚æ—¶,è°ƒç”¨è¯¥æ–¹æ³•,å¯ä»¥è°ƒç”¨å¤šæ¬¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æ‹¦æˆªåˆ°äº†è¯·æ±‚...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//é”€æ¯æ–¹æ³•, webæœåŠ¡å™¨å…³é—­æ—¶è°ƒç”¨, åªè°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destroy ... &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬åœ¨Filterç±»ä¸Šé¢åŠ äº†@WebFilteræ³¨è§£ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦åœ¨å¯åŠ¨ç±»ä¸Šé¢åŠ ä¸Šä¸€ä¸ªæ³¨è§£<code>@ServletComponentScan</code>ï¼Œé€šè¿‡è¿™ä¸ª<code>@ServletComponentScan</code>æ³¨è§£æ¥å¼€å¯SpringBooté¡¹ç›®å¯¹äºServletç»„ä»¶çš„æ”¯æŒã€‚</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@ServletComponentScan</span> <span class="comment">//å¼€å¯å¯¹Servletç»„ä»¶çš„æ”¯æŒ</span></span><br><span class="line"><span class="variable">@SpringBootApplication</span></span><br><span class="line">public class TliasManagementApplication &#123;</span><br><span class="line">    <span class="selector-tag">public</span> <span class="selector-tag">static</span> <span class="selector-tag">void</span> <span class="selector-tag">main</span>(String[] args) &#123;</span><br><span class="line">        <span class="selector-tag">SpringApplication</span><span class="selector-class">.run</span>(TliasManagementApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œæ‰§è¡Œéƒ¨é—¨ç®¡ç†çš„è¯·æ±‚ï¼Œå¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºäº†è¿‡æ»¤å™¨ä¸­çš„å†…å®¹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-489-1024x128.png" alt="img"></p>
<p>**æ³¨æ„äº‹é¡¹ï¼š**åœ¨è¿‡æ»¤å™¨Filterä¸­ï¼Œå¦‚æœä¸æ‰§è¡Œæ”¾è¡Œæ“ä½œï¼Œå°†æ— æ³•è®¿é—®åé¢çš„èµ„æºã€‚ æ”¾è¡Œæ“ä½œï¼š<code>chain.doFilter(request, response);</code></p>
<h4 id="2-3-2ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨">2.3.2ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨</h4>
<p>æˆ‘ä»¬å…ˆæ¥å›é¡¾ä¸‹å‰é¢åˆ†æè¿‡çš„ç™»å½•æ ¡éªŒçš„åŸºæœ¬æµç¨‹ï¼š</p>
<ul>
<li>è¦è¿›å…¥åˆ°åå°ç®¡ç†ç³»ç»Ÿï¼Œæˆ‘ä»¬å¿…é¡»å…ˆå®Œæˆç™»å½•æ“ä½œï¼Œæ­¤æ—¶å°±éœ€è¦è®¿é—®ç™»å½•æ¥å£loginã€‚</li>
<li>ç™»å½•æˆåŠŸä¹‹åï¼Œæˆ‘ä»¬ä¼šåœ¨æœåŠ¡ç«¯ç”Ÿæˆä¸€ä¸ªJWTä»¤ç‰Œï¼Œå¹¶ä¸”æŠŠJWTä»¤ç‰Œè¿”å›ç»™å‰ç«¯ï¼Œå‰ç«¯ä¼šå°†JWTä»¤ç‰Œå­˜å‚¨ä¸‹æ¥ã€‚</li>
<li>åœ¨åç»­çš„æ¯ä¸€æ¬¡è¯·æ±‚å½“ä¸­ï¼Œéƒ½ä¼šå°†JWTä»¤ç‰Œæºå¸¦åˆ°æœåŠ¡ç«¯ï¼Œè¯·æ±‚åˆ°è¾¾æœåŠ¡ç«¯ä¹‹åï¼Œè¦æƒ³å»è®¿é—®å¯¹åº”çš„ä¸šåŠ¡åŠŸèƒ½ï¼Œæ­¤æ—¶æˆ‘ä»¬å¿…é¡»å…ˆè¦æ ¡éªŒä»¤ç‰Œçš„æœ‰æ•ˆæ€§ã€‚</li>
<li>å¯¹äºæ ¡éªŒä»¤ç‰Œçš„è¿™ä¸€å—æ“ä½œï¼Œæˆ‘ä»¬ä½¿ç”¨ç™»å½•æ ¡éªŒçš„è¿‡æ»¤å™¨ï¼Œåœ¨è¿‡æ»¤å™¨å½“ä¸­æ¥æ ¡éªŒä»¤ç‰Œçš„æœ‰æ•ˆæ€§ã€‚å¦‚æœä»¤ç‰Œæ˜¯æ— æ•ˆçš„ï¼Œå°±å“åº”ä¸€ä¸ªé”™è¯¯çš„ä¿¡æ¯ï¼Œä¹Ÿä¸ä¼šå†å»æ”¾è¡Œè®¿é—®å¯¹åº”çš„èµ„æºäº†ã€‚å¦‚æœä»¤ç‰Œå­˜åœ¨ï¼Œå¹¶ä¸”å®ƒæ˜¯æœ‰æ•ˆçš„ï¼Œæ­¤æ—¶å°±ä¼šæ”¾è¡Œå»è®¿é—®å¯¹åº”çš„webèµ„æºï¼Œæ‰§è¡Œç›¸åº”çš„ä¸šåŠ¡æ“ä½œã€‚</li>
</ul>
<ol>
<li>æ‰€æœ‰çš„è¯·æ±‚ï¼Œæ‹¦æˆªåˆ°äº†ä¹‹åï¼Œéƒ½éœ€è¦æ ¡éªŒä»¤ç‰Œå— ï¼Ÿ
<ul>
<li>ç­”æ¡ˆï¼š<strong>ç™»å½•è¯·æ±‚ä¾‹å¤–</strong></li>
</ul>
</li>
<li>æ‹¦æˆªåˆ°è¯·æ±‚åï¼Œä»€ä¹ˆæƒ…å†µä¸‹æ‰å¯ä»¥æ”¾è¡Œï¼Œæ‰§è¡Œä¸šåŠ¡æ“ä½œ ï¼Ÿ
<ul>
<li>ç­”æ¡ˆï¼š<strong>æœ‰ä»¤ç‰Œï¼Œä¸”ä»¤ç‰Œæ ¡éªŒé€šè¿‡(åˆæ³•)ï¼›å¦åˆ™éƒ½è¿”å›æœªç™»å½•é”™è¯¯ç»“æœ</strong></li>
</ul>
</li>
</ol>
<p>å…·ä½“æµç¨‹</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-471.png" alt="img"></p>
<p>åŸºäºä¸Šé¢çš„ä¸šåŠ¡æµç¨‹ï¼Œæˆ‘ä»¬åˆ†æå‡ºå…·ä½“çš„æ“ä½œæ­¥éª¤ï¼š</p>
<ol>
<li>è·å–è¯·æ±‚url</li>
<li>åˆ¤æ–­è¯·æ±‚urlä¸­æ˜¯å¦åŒ…å«loginï¼Œå¦‚æœåŒ…å«ï¼Œè¯´æ˜æ˜¯ç™»å½•æ“ä½œï¼Œæ”¾è¡Œ</li>
<li>è·å–è¯·æ±‚å¤´ä¸­çš„ä»¤ç‰Œï¼ˆtokenï¼‰</li>
<li>åˆ¤æ–­ä»¤ç‰Œæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå“åº” 401</li>
<li>è§£ætokenï¼Œå¦‚æœè§£æå¤±è´¥ï¼Œå“åº” 401</li>
<li>æ”¾è¡Œ</li>
</ol>
<h4 id="2-3-3ä»£ç å®ç°">2.3.3ä»£ç å®ç°</h4>
<p>åœ¨ <code>com.itheima.filter</code> åŒ…ä¸‹åˆ›å»º<code>TokenFilter</code>ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.utils.JwtUtils;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> org.apache.http.HttpStatus;</span><br><span class="line"><span class="keyword">import</span> org.springframework.util.StringUtils;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** * ä»¤ç‰Œæ ¡éªŒè¿‡æ»¤å™¨ */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) req;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) resp;</span><br><span class="line">        <span class="comment">//1. è·å–è¯·æ±‚urlã€‚</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> request.getRequestURL().toString();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. åˆ¤æ–­è¯·æ±‚urlä¸­æ˜¯å¦åŒ…å«loginï¼Œå¦‚æœåŒ…å«ï¼Œè¯´æ˜æ˜¯ç™»å½•æ“ä½œï¼Œæ”¾è¡Œã€‚</span></span><br><span class="line">        <span class="keyword">if</span>(url.contains(<span class="string">&quot;login&quot;</span>))&#123; <span class="comment">//ç™»å½•è¯·æ±‚</span></span><br><span class="line">            log.info(<span class="string">&quot;ç™»å½•è¯·æ±‚ , ç›´æ¥æ”¾è¡Œ&quot;</span>);</span><br><span class="line">            chain.doFilter(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. è·å–è¯·æ±‚å¤´ä¸­çš„ä»¤ç‰Œï¼ˆtokenï¼‰ã€‚</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. åˆ¤æ–­ä»¤ç‰Œæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ç»“æœï¼ˆæœªç™»å½•ï¼‰ã€‚</span></span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.hasLength(jwt))&#123; <span class="comment">//jwtä¸ºç©º</span></span><br><span class="line">            log.info(<span class="string">&quot;è·å–åˆ°jwtä»¤ç‰Œä¸ºç©º, è¿”å›é”™è¯¯ç»“æœ&quot;</span>);</span><br><span class="line">            response.setStatus(HttpStatus.SC_UNAUTHORIZED);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. è§£ætokenï¼Œå¦‚æœè§£æå¤±è´¥ï¼Œè¿”å›é”™è¯¯ç»“æœï¼ˆæœªç™»å½•ï¼‰ã€‚</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            JwtUtils.parseJWT(jwt);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.info(<span class="string">&quot;è§£æä»¤ç‰Œå¤±è´¥, è¿”å›é”™è¯¯ç»“æœ&quot;</span>);</span><br><span class="line">            response.setStatus(HttpStatus.SC_UNAUTHORIZED);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6. æ”¾è¡Œã€‚</span></span><br><span class="line">        log.info(<span class="string">&quot;ä»¤ç‰Œåˆæ³•, æ”¾è¡Œ&quot;</span>);</span><br><span class="line">        chain.doFilter(request , response);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2-3-4Filterè¯¦è§£">2.3.4Filterè¯¦è§£</h4>
<p>Filterè¿‡æ»¤å™¨çš„å¿«é€Ÿå…¥é—¨ç¨‹åºæˆ‘ä»¬å·²ç»å®Œæˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦è¯¦ç»†çš„ä»‹ç»ä¸€ä¸‹è¿‡æ»¤å™¨Filteråœ¨ä½¿ç”¨ä¸­çš„ä¸€äº›ç»†èŠ‚ã€‚ä¸»è¦ä»‹ç»ä»¥ä¸‹3ä¸ªæ–¹é¢çš„ç»†èŠ‚ï¼š</p>
<ol>
<li>è¿‡æ»¤å™¨çš„æ‰§è¡Œæµç¨‹</li>
<li>è¿‡æ»¤å™¨çš„æ‹¦æˆªè·¯å¾„é…ç½®</li>
<li>è¿‡æ»¤å™¨é“¾</li>
</ol>
<ul>
<li>æ‰§è¡Œæµç¨‹</li>
</ul>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹è¿‡æ»¤å™¨çš„æ‰§è¡Œæµç¨‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-490.png" alt="img"></p>
<p>è¿‡æ»¤å™¨å½“ä¸­æˆ‘ä»¬æ‹¦æˆªåˆ°äº†è¯·æ±‚ä¹‹åï¼Œå¦‚æœå¸Œæœ›ç»§ç»­è®¿é—®åé¢çš„webèµ„æºï¼Œå°±è¦æ‰§è¡Œæ”¾è¡Œæ“ä½œï¼Œæ”¾è¡Œå°±æ˜¯è°ƒç”¨ FilterChainå¯¹è±¡å½“ä¸­çš„doFilter()æ–¹æ³•ï¼Œåœ¨è°ƒç”¨doFilter()è¿™ä¸ªæ–¹æ³•ä¹‹å‰æ‰€ç¼–å†™çš„ä»£ç å±äºæ”¾è¡Œä¹‹å‰çš„é€»è¾‘ã€‚</p>
<p>åœ¨æ”¾è¡Œåè®¿é—®å®Œ web èµ„æºä¹‹åè¿˜ä¼šå›åˆ°è¿‡æ»¤å™¨å½“ä¸­ï¼Œå›åˆ°è¿‡æ»¤å™¨ä¹‹åå¦‚æœ‰éœ€æ±‚è¿˜å¯ä»¥æ‰§è¡Œæ”¾è¡Œä¹‹åçš„é€»è¾‘ï¼Œæ”¾è¡Œä¹‹åçš„é€»è¾‘æˆ‘ä»¬å†™åœ¨doFilter()è¿™è¡Œä»£ç ä¹‹åã€‚</p>
<p>æµ‹è¯•ä»£ç ï¼š</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter</span>(urlPatterns = <span class="string">&quot;/*&quot;</span>) </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">//åˆå§‹åŒ–æ–¹æ³•, åªè°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;init åˆå§‹åŒ–æ–¹æ³•æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">&quot;DemoFilter   æ”¾è¡Œå‰é€»è¾‘.....&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ”¾è¡Œè¯·æ±‚</span></span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;DemoFilter   æ”¾è¡Œåé€»è¾‘.....&quot;</span>);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span> <span class="comment">//é”€æ¯æ–¹æ³•, åªè°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destroy é”€æ¯æ–¹æ³•æ‰§è¡Œäº†&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯åŠ¨ä¹‹åè¿è¡Œæµ‹è¯•ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-491.png" alt="img"></p>
<ul>
<li>æ‹¦æˆªè·¯å¾„</li>
</ul>
<p>æ‰§è¡Œæµç¨‹æˆ‘ä»¬ææ¸…æ¥šä¹‹åï¼Œæ¥ä¸‹æ¥å†æ¥ä»‹ç»ä¸€ä¸‹è¿‡æ»¤å™¨çš„æ‹¦æˆªè·¯å¾„ï¼ŒFilterå¯ä»¥æ ¹æ®éœ€æ±‚ï¼Œé…ç½®ä¸åŒçš„æ‹¦æˆªèµ„æºè·¯å¾„ï¼š</p>
<table>
<thead>
<tr>
<th>æ‹¦æˆªè·¯å¾„</th>
<th>urlPatternså€¼</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>æ‹¦æˆªå…·ä½“è·¯å¾„</td>
<td>/login</td>
<td>åªæœ‰è®¿é—® /login è·¯å¾„æ—¶ï¼Œæ‰ä¼šè¢«æ‹¦æˆª</td>
</tr>
<tr>
<td>ç›®å½•æ‹¦æˆª</td>
<td>/emps/*</td>
<td>è®¿é—®/empsä¸‹çš„æ‰€æœ‰èµ„æºï¼Œéƒ½ä¼šè¢«æ‹¦æˆª</td>
</tr>
<tr>
<td>æ‹¦æˆªæ‰€æœ‰</td>
<td>/*</td>
<td>è®¿é—®æ‰€æœ‰èµ„æºï¼Œéƒ½ä¼šè¢«æ‹¦æˆª</td>
</tr>
</tbody>
</table>
<p>ä¸‹é¢æˆ‘ä»¬æ¥æµ‹è¯•&quot;æ‹¦æˆªå…·ä½“è·¯å¾„&quot;ï¼š</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@WebFilter</span>(urlPatterns = <span class="string">&quot;/login&quot;</span>)  <span class="comment">//æ‹¦æˆª/loginå…·ä½“è·¯å¾„</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;DemoFilter   æ”¾è¡Œå‰é€»è¾‘.....&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ”¾è¡Œè¯·æ±‚</span></span><br><span class="line">        filterChain.doFilter(servletRequest,servletResponse);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">&quot;DemoFilter   æ”¾è¡Œåé€»è¾‘.....&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        Filter.<span class="keyword">super</span>.init(filterConfig);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        Filter.<span class="keyword">super</span>.destroy();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>è¿‡æ»¤å™¨é“¾</li>
</ul>
<p>æœ€åæˆ‘ä»¬åœ¨æ¥ä»‹ç»ä¸‹è¿‡æ»¤å™¨é“¾ï¼Œä»€ä¹ˆæ˜¯è¿‡æ»¤å™¨é“¾å‘¢ï¼Ÿæ‰€è°“è¿‡æ»¤å™¨é“¾æŒ‡çš„æ˜¯åœ¨ä¸€ä¸ªwebåº”ç”¨ç¨‹åºå½“ä¸­ï¼Œå¯ä»¥é…ç½®å¤šä¸ªè¿‡æ»¤å™¨ï¼Œå¤šä¸ªè¿‡æ»¤å™¨å°±å½¢æˆäº†ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-492.png" alt="img"></p>
<p>æ¯”å¦‚ï¼šåœ¨æˆ‘ä»¬webæœåŠ¡å™¨å½“ä¸­ï¼Œå®šä¹‰äº†ä¸¤ä¸ªè¿‡æ»¤å™¨ï¼Œè¿™ä¸¤ä¸ªè¿‡æ»¤å™¨å°±å½¢æˆäº†ä¸€ä¸ªè¿‡æ»¤å™¨é“¾ã€‚</p>
<p>è€Œè¿™ä¸ªé“¾ä¸Šçš„è¿‡æ»¤å™¨åœ¨æ‰§è¡Œçš„æ—¶å€™ä¼šä¸€ä¸ªä¸€ä¸ªçš„æ‰§è¡Œï¼Œä¼šå…ˆæ‰§è¡Œç¬¬ä¸€ä¸ªFilterï¼Œæ”¾è¡Œä¹‹åå†æ¥æ‰§è¡Œç¬¬äºŒä¸ªFilterï¼Œå¦‚æœæ‰§è¡Œåˆ°äº†æœ€åä¸€ä¸ªè¿‡æ»¤å™¨æ”¾è¡Œä¹‹åï¼Œæ‰ä¼šè®¿é—®å¯¹åº”çš„webèµ„æºã€‚</p>
<p>è®¿é—®å®Œwebèµ„æºä¹‹åï¼ŒæŒ‰ç…§æˆ‘ä»¬åˆšæ‰æ‰€ä»‹ç»çš„è¿‡æ»¤å™¨çš„æ‰§è¡Œæµç¨‹ï¼Œè¿˜ä¼šå›åˆ°è¿‡æ»¤å™¨å½“ä¸­æ¥æ‰§è¡Œè¿‡æ»¤å™¨æ”¾è¡Œåçš„é€»è¾‘ï¼Œè€Œåœ¨æ‰§è¡Œæ”¾è¡Œåçš„é€»è¾‘çš„æ—¶å€™ï¼Œé¡ºåºæ˜¯åç€çš„ã€‚</p>
<p>å…ˆè¦æ‰§è¡Œè¿‡æ»¤å™¨2æ”¾è¡Œä¹‹åçš„é€»è¾‘ï¼Œå†æ¥æ‰§è¡Œè¿‡æ»¤å™¨1æ”¾è¡Œä¹‹åçš„é€»è¾‘ï¼Œæœ€ååœ¨ç»™æµè§ˆå™¨å“åº”æ•°æ®ã€‚</p>
<p>è¿‡æ»¤å™¨é“¾ä¸Šè¿‡æ»¤å™¨çš„æ‰§è¡Œé¡ºåºï¼šæ³¨è§£é…ç½®çš„Filterï¼Œä¼˜å…ˆçº§æ˜¯æŒ‰ç…§è¿‡æ»¤å™¨ç±»åï¼ˆå­—ç¬¦ä¸²ï¼‰çš„è‡ªç„¶æ’åºã€‚ æ¯”å¦‚ï¼š</p>
<ul>
<li>AbcFilter</li>
<li>DemoFilter</li>
</ul>
<p>è¿™ä¸¤ä¸ªè¿‡æ»¤å™¨æ¥è¯´ï¼ŒAbcFilter ä¼šå…ˆæ‰§è¡Œï¼ŒDemoFilterä¼šåæ‰§è¡Œã€‚</p>
<h3 id="2-4æ‹¦æˆªå™¨Interceptor">2.4æ‹¦æˆªå™¨Interceptor</h3>
<h4 id="2-4-1å¿«é€Ÿå…¥é—¨">2.4.1å¿«é€Ÿå…¥é—¨</h4>
<p><strong>ä»€ä¹ˆæ˜¯æ‹¦æˆªå™¨ï¼Ÿ</strong></p>
<ul>
<li>æ˜¯ä¸€ç§åŠ¨æ€æ‹¦æˆªæ–¹æ³•è°ƒç”¨çš„æœºåˆ¶ï¼Œç±»ä¼¼äºè¿‡æ»¤å™¨ã€‚</li>
<li>æ‹¦æˆªå™¨æ˜¯Springæ¡†æ¶ä¸­æä¾›çš„ï¼Œç”¨æ¥åŠ¨æ€æ‹¦æˆªæ§åˆ¶å™¨æ–¹æ³•çš„æ‰§è¡Œã€‚</li>
<li>æ‹¦æˆªå™¨çš„ä½œç”¨ï¼šæ‹¦æˆªè¯·æ±‚ï¼Œåœ¨æŒ‡å®šæ–¹æ³•è°ƒç”¨å‰åï¼Œæ ¹æ®ä¸šåŠ¡éœ€è¦æ‰§è¡Œé¢„å…ˆè®¾å®šçš„ä»£ç ã€‚</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-493.png" alt="img"></p>
<p>åœ¨æ‹¦æˆªå™¨å½“ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¹Ÿæ˜¯åšä¸€äº›é€šç”¨æ€§çš„æ“ä½œï¼Œæ¯”å¦‚ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡æ‹¦æˆªå™¨æ¥æ‹¦æˆªå‰ç«¯å‘èµ·çš„è¯·æ±‚ï¼Œå°†ç™»å½•æ ¡éªŒçš„é€»è¾‘å…¨éƒ¨ç¼–å†™åœ¨æ‹¦æˆªå™¨å½“ä¸­ã€‚åœ¨æ ¡éªŒçš„è¿‡ç¨‹å½“ä¸­ï¼Œå¦‚å‘ç°ç”¨æˆ·ç™»å½•äº†(æºå¸¦JWTä»¤ç‰Œä¸”æ˜¯åˆæ³•ä»¤ç‰Œ)ï¼Œå°±å¯ä»¥ç›´æ¥æ”¾è¡Œï¼Œå»è®¿é—®springå½“ä¸­çš„èµ„æºã€‚å¦‚æœæ ¡éªŒæ—¶å‘ç°å¹¶æ²¡æœ‰ç™»å½•æˆ–æ˜¯éæ³•ä»¤ç‰Œï¼Œå°±å¯ä»¥ç›´æ¥ç»™å‰ç«¯å“åº”æœªç™»å½•çš„é”™è¯¯ä¿¡æ¯ã€‚</p>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡å¿«é€Ÿå…¥é—¨ç¨‹åºï¼Œæ¥å­¦ä¹ ä¸‹æ‹¦æˆªå™¨çš„åŸºæœ¬ä½¿ç”¨ã€‚æ‹¦æˆªå™¨çš„ä½¿ç”¨æ­¥éª¤å’Œè¿‡æ»¤å™¨ç±»ä¼¼ï¼Œä¹Ÿåˆ†ä¸ºä¸¤æ­¥ï¼š</p>
<ol>
<li>å®šä¹‰æ‹¦æˆªå™¨</li>
<li>æ³¨å†Œé…ç½®æ‹¦æˆªå™¨</li>
</ol>
<p><strong>1). è‡ªå®šä¹‰æ‹¦æˆªå™¨</strong></p>
<p>å®ç°HandlerInterceptoræ¥å£ï¼Œå¹¶é‡å†™å…¶æ‰€æœ‰æ–¹æ³•</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è‡ªå®šä¹‰æ‹¦æˆªå™¨</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line">    <span class="comment">//ç›®æ ‡èµ„æºæ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œã€‚ è¿”å›trueï¼šæ”¾è¡Œ    è¿”å›falseï¼šä¸æ”¾è¡Œ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object <span class="keyword">handler</span>)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;preHandle .... &quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>; <span class="comment">//trueè¡¨ç¤ºæ”¾è¡Œ</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç›®æ ‡èµ„æºæ–¹æ³•æ‰§è¡Œåæ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object <span class="keyword">handler</span>, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;postHandle ... &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è§†å›¾æ¸²æŸ“å®Œæ¯•åæ‰§è¡Œï¼Œæœ€åæ‰§è¡Œ</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object <span class="keyword">handler</span>, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;afterCompletion .... &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>preHandleæ–¹æ³•ï¼šç›®æ ‡èµ„æºæ–¹æ³•æ‰§è¡Œå‰æ‰§è¡Œã€‚ è¿”å›trueï¼šæ”¾è¡Œ è¿”å›falseï¼šä¸æ”¾è¡Œ</li>
<li>postHandleæ–¹æ³•ï¼šç›®æ ‡èµ„æºæ–¹æ³•æ‰§è¡Œåæ‰§è¡Œ</li>
<li>afterCompletionæ–¹æ³•ï¼šè§†å›¾æ¸²æŸ“å®Œæ¯•åæ‰§è¡Œï¼Œæœ€åæ‰§è¡Œ</li>
</ul>
<p><strong>2). æ³¨å†Œé…ç½®æ‹¦æˆªå™¨</strong></p>
<p>åœ¨ <code>com.itheima</code>ä¸‹åˆ›å»ºä¸€ä¸ªåŒ…ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªé…ç½®ç±» <code>WebConfig</code>ï¼Œ å®ç° <code>WebMvcConfigurer</code> æ¥å£ï¼Œå¹¶é‡å†™ <code>addInterceptors</code> æ–¹æ³•</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">DemoInterceptor</span> demoInterceptor;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">addInterceptors</span>(<span class="params"><span class="title class_">InterceptorRegistry</span> registry</span>) &#123;</span><br><span class="line">       <span class="comment">//æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨å¯¹è±¡</span></span><br><span class="line">        registry.<span class="title function_">addInterceptor</span>(demoInterceptor).<span class="title function_">addPathPatterns</span>(<span class="string">&quot;/**&quot;</span>);<span class="comment">//è®¾ç½®æ‹¦æˆªå™¨æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„ï¼ˆ /** è¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼‰</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæ‰“å¼€Apifoxæµ‹è¯•ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-494.png" alt="img"></p>
<p>å¯ä»¥çœ‹åˆ°æ§åˆ¶å°è¾“å‡ºçš„æ—¥å¿—ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-495.png" alt="img"></p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥åšä¸€ä¸ªæµ‹è¯•ï¼šå°†æ‹¦æˆªå™¨ä¸­è¿”å›å€¼æ”¹ä¸ºfalse</p>
<p>ä½¿ç”¨Apifoxï¼Œå†æ¬¡ç‚¹å‡»sendå‘é€è¯·æ±‚åï¼Œæ²¡æœ‰å“åº”æ•°æ®ï¼Œè¯´æ˜è¯·æ±‚è¢«æ‹¦æˆªäº†æ²¡æœ‰æ”¾è¡Œ</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-496.png" alt="img"></p>
<h4 id="2-4-2ç‰Œæ ¡éªŒInterceptor">2.4.2ç‰Œæ ¡éªŒInterceptor</h4>
<p>é€šè¿‡æ‹¦æˆªå™¨æ¥å®Œæˆæ¡ˆä¾‹å½“ä¸­çš„ç™»å½•æ ¡éªŒåŠŸèƒ½ã€‚</p>
<p>ç™»å½•æ ¡éªŒçš„ä¸šåŠ¡é€»è¾‘ä»¥åŠæ“ä½œæ­¥éª¤æˆ‘ä»¬å‰é¢å·²ç»åˆ†æè¿‡äº†ï¼Œå’Œç™»å½•æ ¡éªŒFilterè¿‡æ»¤å™¨å½“ä¸­çš„é€»è¾‘æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚ç°åœ¨æˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸ªæŠ€æœ¯æ–¹æ¡ˆç”±åŸæ¥çš„è¿‡æ»¤å™¨æ¢æˆæ‹¦æˆªå™¨interceptorå°±å¯ä»¥äº†ã€‚</p>
<p><strong>1). TokenInterceptor</strong></p>
<p>åœ¨ <code>com.itheima.interceptor</code> åŒ…ä¸‹åˆ›å»º <code>TokenInterceptor</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenInterceptor</span> <span class="keyword">implements</span> <span class="title class_">HandlerInterceptor</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">//1. è·å–è¯·æ±‚urlã€‚</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> request.getRequestURL().toString();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. åˆ¤æ–­è¯·æ±‚urlä¸­æ˜¯å¦åŒ…å«loginï¼Œå¦‚æœåŒ…å«ï¼Œè¯´æ˜æ˜¯ç™»å½•æ“ä½œï¼Œæ”¾è¡Œã€‚</span></span><br><span class="line">        <span class="keyword">if</span>(url.contains(<span class="string">&quot;login&quot;</span>))&#123; <span class="comment">//ç™»å½•è¯·æ±‚</span></span><br><span class="line">            log.info(<span class="string">&quot;ç™»å½•è¯·æ±‚ , ç›´æ¥æ”¾è¡Œ&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. è·å–è¯·æ±‚å¤´ä¸­çš„ä»¤ç‰Œï¼ˆtokenï¼‰ã€‚</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">jwt</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. åˆ¤æ–­ä»¤ç‰Œæ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œè¿”å›é”™è¯¯ç»“æœï¼ˆæœªç™»å½•ï¼‰ã€‚</span></span><br><span class="line">        <span class="keyword">if</span>(!StringUtils.hasLength(jwt))&#123; <span class="comment">//jwtä¸ºç©º</span></span><br><span class="line">            log.info(<span class="string">&quot;è·å–åˆ°jwtä»¤ç‰Œä¸ºç©º, è¿”å›é”™è¯¯ç»“æœ&quot;</span>);</span><br><span class="line">            response.setStatus(HttpStatus.SC_UNAUTHORIZED);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. è§£ætokenï¼Œå¦‚æœè§£æå¤±è´¥ï¼Œè¿”å›é”™è¯¯ç»“æœï¼ˆæœªç™»å½•ï¼‰ã€‚</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            JwtUtils.parseJWT(jwt);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.info(<span class="string">&quot;è§£æä»¤ç‰Œå¤±è´¥, è¿”å›é”™è¯¯ç»“æœ&quot;</span>);</span><br><span class="line">            response.setStatus(HttpStatus.SC_UNAUTHORIZED);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6. æ”¾è¡Œã€‚</span></span><br><span class="line">        log.info(<span class="string">&quot;ä»¤ç‰Œåˆæ³•, æ”¾è¡Œ&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). é…ç½®æ‹¦æˆªå™¨</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="comment">//æ‹¦æˆªå™¨å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">TokenInterceptor</span> tokenInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">addInterceptors</span>(<span class="params"><span class="title class_">InterceptorRegistry</span> registry</span>) &#123;</span><br><span class="line">       <span class="comment">//æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨å¯¹è±¡</span></span><br><span class="line">        registry.<span class="title function_">addInterceptor</span>(tokenInterceptor).<span class="title function_">addPathPatterns</span>(<span class="string">&quot;/**&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç™»å½•æ ¡éªŒçš„æ‹¦æˆªå™¨ç¼–å†™å®Œæˆåï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥é‡æ–°å¯åŠ¨æœåŠ¡æ¥åšä¸€ä¸ªæµ‹è¯•ï¼š ï¼ˆ<strong>å…³é—­ç™»å½•æ ¡éªŒFilterè¿‡æ»¤å™¨</strong>ï¼‰</p>
<h4 id="2-4-3nterceptorè¯¦è§£">2.4.3nterceptorè¯¦è§£</h4>
<p>æ‹¦æˆªå™¨çš„ä½¿ç”¨ç»†èŠ‚æˆ‘ä»¬ä¸»è¦ä»‹ç»ä¸¤ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li>æ‹¦æˆªå™¨çš„æ‹¦æˆªè·¯å¾„é…ç½®</li>
<li>æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹</li>
</ol>
<ul>
<li>æ‹¦æˆªè·¯å¾„</li>
</ul>
<p>é¦–å…ˆæˆ‘ä»¬å…ˆæ¥çœ‹æ‹¦æˆªå™¨çš„æ‹¦æˆªè·¯å¾„çš„é…ç½®ï¼Œåœ¨æ³¨å†Œé…ç½®æ‹¦æˆªå™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦æŒ‡å®šæ‹¦æˆªå™¨çš„æ‹¦æˆªè·¯å¾„ï¼Œé€šè¿‡<code>addPathPatterns(&quot;è¦æ‹¦æˆªè·¯å¾„&quot;)</code>æ–¹æ³•ï¼Œå°±å¯ä»¥æŒ‡å®šè¦æ‹¦æˆªå“ªäº›èµ„æºã€‚</p>
<p>åœ¨å…¥é—¨ç¨‹åºä¸­æˆ‘ä»¬é…ç½®çš„æ˜¯<code>/**</code>ï¼Œè¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰èµ„æºï¼Œè€Œåœ¨é…ç½®æ‹¦æˆªå™¨æ—¶ï¼Œä¸ä»…å¯ä»¥æŒ‡å®šè¦æ‹¦æˆªå“ªäº›èµ„æºï¼Œè¿˜å¯ä»¥æŒ‡å®šä¸æ‹¦æˆªå“ªäº›èµ„æºï¼Œåªéœ€è¦è°ƒç”¨<code>excludePathPatterns(&quot;ä¸æ‹¦æˆªè·¯å¾„&quot;)</code>æ–¹æ³•ï¼ŒæŒ‡å®šå“ªäº›èµ„æºä¸éœ€è¦æ‹¦æˆªã€‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span>  </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//æ‹¦æˆªå™¨å¯¹è±¡</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">DemoInterceptor</span> demoInterceptor;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">addInterceptors</span>(<span class="params"><span class="title class_">InterceptorRegistry</span> registry</span>) &#123;</span><br><span class="line">        <span class="comment">//æ³¨å†Œè‡ªå®šä¹‰æ‹¦æˆªå™¨å¯¹è±¡</span></span><br><span class="line">        registry.<span class="title function_">addInterceptor</span>(demoInterceptor)</span><br><span class="line">                .<span class="title function_">addPathPatterns</span>(<span class="string">&quot;/**&quot;</span>)<span class="comment">//è®¾ç½®æ‹¦æˆªå™¨æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„ï¼ˆ /** è¡¨ç¤ºæ‹¦æˆªæ‰€æœ‰è¯·æ±‚ï¼‰</span></span><br><span class="line">                .<span class="title function_">excludePathPatterns</span>(<span class="string">&quot;/login&quot;</span>);<span class="comment">//è®¾ç½®ä¸æ‹¦æˆªçš„è¯·æ±‚è·¯å¾„</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨æ‹¦æˆªå™¨ä¸­é™¤äº†å¯ä»¥è®¾ç½®<code>/**</code>æ‹¦æˆªæ‰€æœ‰èµ„æºå¤–ï¼Œè¿˜æœ‰ä¸€äº›å¸¸è§æ‹¦æˆªè·¯å¾„è®¾ç½®ï¼š</p>
<table>
<thead>
<tr>
<th>æ‹¦æˆªè·¯å¾„</th>
<th>å«ä¹‰</th>
<th>ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>/*</td>
<td>ä¸€çº§è·¯å¾„</td>
<td>èƒ½åŒ¹é…/deptsï¼Œ/empsï¼Œ/loginï¼Œä¸èƒ½åŒ¹é… /depts/1</td>
</tr>
<tr>
<td>/**</td>
<td>ä»»æ„çº§è·¯å¾„</td>
<td>èƒ½åŒ¹é…/deptsï¼Œ/depts/1ï¼Œ/depts/1/2</td>
</tr>
<tr>
<td>/depts/*</td>
<td>/deptsä¸‹çš„ä¸€çº§è·¯å¾„</td>
<td>èƒ½åŒ¹é…/depts/1ï¼Œä¸èƒ½åŒ¹é…/depts/1/2ï¼Œ/depts</td>
</tr>
<tr>
<td>/depts/**</td>
<td>/deptsä¸‹çš„ä»»æ„çº§è·¯å¾„</td>
<td>èƒ½åŒ¹é…/deptsï¼Œ/depts/1ï¼Œ/depts/1/2ï¼Œä¸èƒ½åŒ¹é…/emps/1</td>
</tr>
</tbody>
</table>
<ul>
<li>æ‰§è¡Œæµç¨‹</li>
</ul>
<p>ä»‹ç»å®Œæ‹¦æˆªè·¯å¾„çš„é…ç½®ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥ä»‹ç»æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹ã€‚é€šè¿‡æ‰§è¡Œæµç¨‹ï¼Œå°±èƒ½å¤Ÿæ¸…æ™°çš„çŸ¥é“è¿‡æ»¤å™¨ä¸æ‹¦æˆªå™¨çš„æ‰§è¡Œæ—¶æœºã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-504-1024x348.png" alt="img"></p>
<ul>
<li>å½“æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨æ¥è®¿é—®éƒ¨ç½²åœ¨webæœåŠ¡å™¨å½“ä¸­çš„webåº”ç”¨æ—¶ï¼Œæ­¤æ—¶æˆ‘ä»¬æ‰€å®šä¹‰çš„è¿‡æ»¤å™¨ä¼šæ‹¦æˆªåˆ°è¿™æ¬¡è¯·æ±‚ã€‚æ‹¦æˆªåˆ°è¿™æ¬¡è¯·æ±‚ä¹‹åï¼Œå®ƒä¼šå…ˆæ‰§è¡Œæ”¾è¡Œå‰çš„é€»è¾‘ï¼Œç„¶åå†æ‰§è¡Œæ”¾è¡Œæ“ä½œã€‚è€Œç”±äºæˆ‘ä»¬å½“å‰æ˜¯åŸºäºspringbootå¼€å‘çš„ï¼Œæ‰€ä»¥æ”¾è¡Œä¹‹åæ˜¯è¿›å…¥åˆ°äº†springçš„ç¯å¢ƒå½“ä¸­ï¼Œä¹Ÿå°±æ˜¯è¦æ¥è®¿é—®æˆ‘ä»¬æ‰€å®šä¹‰çš„controllerå½“ä¸­çš„æ¥å£æ–¹æ³•ã€‚</li>
<li>Tomcatå¹¶ä¸è¯†åˆ«æ‰€ç¼–å†™çš„Controllerç¨‹åºï¼Œä½†æ˜¯å®ƒè¯†åˆ«Servletç¨‹åºï¼Œæ‰€ä»¥åœ¨Springçš„Webç¯å¢ƒä¸­æä¾›äº†ä¸€ä¸ªéå¸¸æ ¸å¿ƒçš„Servletï¼šDispatcherServletï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ä¼šå…ˆè¿›è¡Œåˆ°DispatcherServletï¼Œå†å°†è¯·æ±‚è½¬ç»™Controllerã€‚</li>
<li>å½“æˆ‘ä»¬å®šä¹‰äº†æ‹¦æˆªå™¨åï¼Œä¼šåœ¨æ‰§è¡ŒControllerçš„æ–¹æ³•ä¹‹å‰ï¼Œè¯·æ±‚è¢«æ‹¦æˆªå™¨æ‹¦æˆªä½ã€‚æ‰§è¡Œ<code>preHandle()</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ‰§è¡Œå®Œæˆåéœ€è¦è¿”å›ä¸€ä¸ªå¸ƒå°”ç±»å‹çš„å€¼ï¼Œå¦‚æœè¿”å›trueï¼Œå°±è¡¨ç¤ºæ”¾è¡Œæœ¬æ¬¡æ“ä½œï¼Œæ‰ä¼šç»§ç»­è®¿é—®controllerä¸­çš„æ–¹æ³•ï¼›å¦‚æœè¿”å›falseï¼Œåˆ™ä¸ä¼šæ”¾è¡Œï¼ˆcontrollerä¸­çš„æ–¹æ³•ä¹Ÿä¸ä¼šæ‰§è¡Œï¼‰ã€‚</li>
<li>åœ¨controllerå½“ä¸­çš„æ–¹æ³•æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œå†å›è¿‡æ¥æ‰§è¡Œ<code>postHandle()</code>è¿™ä¸ªæ–¹æ³•ä»¥åŠ<code>afterCompletion()</code> æ–¹æ³•ï¼Œç„¶åå†è¿”å›ç»™DispatcherServletï¼Œæœ€ç»ˆå†æ¥æ‰§è¡Œè¿‡æ»¤å™¨å½“ä¸­æ”¾è¡Œåçš„è¿™ä¸€éƒ¨åˆ†é€»è¾‘çš„é€»è¾‘ã€‚æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œæœ€ç»ˆç»™æµè§ˆå™¨å“åº”æ•°æ®ã€‚</li>
</ul>
<p>ä»¥ä¸Šå°±æ˜¯æ‹¦æˆªå™¨çš„æ‰§è¡Œæµç¨‹ã€‚é€šè¿‡æ‰§è¡Œæµç¨‹åˆ†æï¼Œå¤§å®¶åº”è¯¥å·²ç»æ¸…æ¥šäº†è¿‡æ»¤å™¨å’Œæ‹¦æˆªå™¨ä¹‹é—´çš„åŒºåˆ«ï¼Œå…¶å®å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä¸»è¦æ˜¯ä¸¤ç‚¹ï¼š</p>
<ul>
<li><strong>æ¥å£è§„èŒƒä¸åŒï¼šè¿‡æ»¤å™¨éœ€è¦å®ç°Filteræ¥å£ï¼Œè€Œæ‹¦æˆªå™¨éœ€è¦å®ç°HandlerInterceptoræ¥å£ã€‚</strong></li>
<li><strong>æ‹¦æˆªèŒƒå›´ä¸åŒï¼šè¿‡æ»¤å™¨Filterä¼šæ‹¦æˆªæ‰€æœ‰çš„èµ„æºï¼Œè€ŒInterceptoråªä¼šæ‹¦æˆªSpringç¯å¢ƒä¸­çš„èµ„æºã€‚</strong></li>
</ul>
<h1 id="5-AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰">5.AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</h1>
<h2 id="1-AOPåŸºç¡€">1.AOPåŸºç¡€</h2>
<h3 id="1-1AOPå…¥é—¨">1.1AOPå…¥é—¨</h3>
<p><strong>ä»€ä¹ˆæ˜¯AOPï¼Ÿ</strong></p>
<p>AOPï¼šAspect Oriented Programmingï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ã€é¢å‘æ–¹é¢ç¼–ç¨‹ï¼‰ï¼Œå…¶å®è¯´ç™½äº†ï¼Œé¢å‘åˆ‡é¢ç¼–ç¨‹å°±æ˜¯é¢å‘ç‰¹å®šæ–¹æ³•ç¼–ç¨‹ã€‚</p>
<p>é‚£ä»€ä¹ˆåˆæ˜¯é¢å‘æ–¹æ³•ç¼–ç¨‹å‘¢ï¼Œä¸ºä»€ä¹ˆåˆéœ€è¦é¢å‘æ–¹æ³•ç¼–ç¨‹å‘¢ï¼Ÿ</p>
<p>æ¥ï¼Œæˆ‘ä»¬ä¸¾ä¸ªä¾‹å­åšä¸€ä¸ªè¯´æ˜ï¼š</p>
<p>æ¯”å¦‚ï¼Œæˆ‘ä»¬è¿™é‡Œæœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®ä¸­å¼€å‘äº†å¾ˆå¤šçš„ä¸šåŠ¡åŠŸèƒ½ã€‚ç„¶è€Œæœ‰ä¸€äº›ä¸šåŠ¡åŠŸèƒ½æ‰§è¡Œæ•ˆç‡æ¯”è¾ƒä½ï¼Œæ‰§è¡Œè€—æ—¶è¾ƒé•¿ï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹äºè¿™äº›ä¸šåŠ¡æ–¹æ³•è¿›è¡Œä¼˜åŒ–ã€‚ é‚£é¦–å…ˆç¬¬ä¸€æ­¥å°±éœ€è¦å®šä½å‡ºæ‰§è¡Œè€—æ—¶æ¯”è¾ƒé•¿çš„ä¸šåŠ¡æ–¹æ³•ï¼Œå†é’ˆå¯¹äºä¸šåŠ¡æ–¹æ³•å†æ¥è¿›è¡Œä¼˜åŒ–ã€‚</p>
<p>æ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦ç»Ÿè®¡å½“å‰è¿™ä¸ªé¡¹ç›®å½“ä¸­æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•çš„æ‰§è¡Œè€—æ—¶ã€‚é‚£ä¹ˆç»Ÿè®¡æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•çš„æ‰§è¡Œè€—æ—¶è¯¥æ€ä¹ˆå®ç°ï¼Ÿ</p>
<p>å¯èƒ½å¤šæ•°äººé¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯åœ¨æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•è¿è¡Œä¹‹å‰ï¼Œè®°å½•è¿™ä¸ªæ–¹æ³•è¿è¡Œçš„å¼€å§‹æ—¶é—´ã€‚åœ¨è¿™ä¸ªæ–¹æ³•è¿è¡Œå®Œæ¯•ä¹‹åï¼Œå†æ¥è®°å½•è¿™ä¸ªæ–¹æ³•è¿è¡Œçš„ç»“æŸæ—¶é—´ã€‚æ‹¿ç»“æŸæ—¶é—´å‡å»å¼€å§‹æ—¶é—´ï¼Œä¸å°±æ˜¯è¿™ä¸ªæ–¹æ³•çš„æ‰§è¡Œè€—æ—¶å—ã€‚</p>
<p>è€Œè¿™ä¸ªåŠŸèƒ½å¦‚æœé€šè¿‡AOPæ¥å®ç°ï¼Œæˆ‘ä»¬åªéœ€è¦å•ç‹¬å®šä¹‰ä¸‹é¢è¿™ä¸€å°æ®µä»£ç å³å¯ï¼Œä¸éœ€è¦ä¿®æ”¹åŸå§‹çš„ä»»ä½•ä¸šåŠ¡æ–¹æ³•å³å¯è®°å½•æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•çš„æ‰§è¡Œè€—æ—¶ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//å½“å‰ç±»ä¸ºåˆ‡é¢ç±»</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RecordTimeAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.itheima.service.impl.DeptServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">recordTime</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//è®°å½•æ–¹æ³•æ‰§è¡Œå¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//æ‰§è¡ŒåŸå§‹æ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®°å½•æ–¹æ³•æ‰§è¡Œç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è®¡ç®—æ–¹æ³•æ‰§è¡Œè€—æ—¶</span></span><br><span class="line">        log.info(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œè€—æ—¶: &#123;&#125;æ¯«ç§’&quot;</span>,end-begin);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¸¸è§çš„åº”ç”¨åœºæ™¯å¦‚ä¸‹ï¼š</p>
<ul>
<li>è®°å½•ç³»ç»Ÿçš„æ“ä½œæ—¥å¿—</li>
<li>æƒé™æ§åˆ¶</li>
<li>äº‹åŠ¡ç®¡ç†ï¼šæˆ‘ä»¬å‰é¢æ‰€è®²è§£çš„Springäº‹åŠ¡ç®¡ç†ï¼Œåº•å±‚å…¶å®ä¹Ÿæ˜¯é€šè¿‡AOPæ¥å®ç°çš„ï¼Œåªè¦æ·»åŠ @Transactionalæ³¨è§£ä¹‹åï¼ŒAOPç¨‹åºè‡ªåŠ¨ä¼šåœ¨åŸå§‹æ–¹æ³•è¿è¡Œå‰å…ˆæ¥å¼€å¯äº‹åŠ¡ï¼Œåœ¨åŸå§‹æ–¹æ³•è¿è¡Œå®Œæ¯•ä¹‹åæäº¤æˆ–å›æ»šäº‹åŠ¡</li>
</ul>
<p>è¿™äº›éƒ½æ˜¯AOPåº”ç”¨çš„å…¸å‹åœºæ™¯ã€‚</p>
<p>æ‰€ä»¥ï¼ŒAOPçš„ä¼˜åŠ¿ä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å››ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>å‡å°‘é‡å¤ä»£ç ï¼šä¸éœ€è¦åœ¨ä¸šåŠ¡æ–¹æ³•ä¸­å®šä¹‰å¤§é‡çš„é‡å¤æ€§çš„ä»£ç ï¼Œåªéœ€è¦å°†é‡å¤æ€§çš„ä»£ç æŠ½å–åˆ°AOPç¨‹åºä¸­å³å¯ã€‚</li>
<li>ä»£ç æ— ä¾µå…¥ï¼šåœ¨åŸºäºAOPå®ç°è¿™äº›ä¸šåŠ¡åŠŸèƒ½æ—¶ï¼Œå¯¹åŸæœ‰çš„ä¸šåŠ¡ä»£ç æ˜¯æ²¡æœ‰ä»»ä½•ä¾µå…¥çš„ï¼Œä¸éœ€è¦ä¿®æ”¹ä»»ä½•çš„ä¸šåŠ¡ä»£ç ã€‚</li>
<li>æé«˜å¼€å‘æ•ˆç‡</li>
<li>ç»´æŠ¤æ–¹ä¾¿</li>
</ul>
<h3 id="1-2AOPæ ¸å¿ƒæ¦‚å¿µ">1.2AOPæ ¸å¿ƒæ¦‚å¿µ</h3>
<ul>
<li>
<p>è¿æ¥ç‚¹ï¼šJoinPoint</p>
<p>ï¼Œå¯ä»¥è¢«AOPæ§åˆ¶çš„æ–¹æ³•ï¼ˆæš—å«æ–¹æ³•æ‰§è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ï¼‰</p>
<ul>
<li>è¿æ¥ç‚¹æŒ‡çš„æ˜¯å¯ä»¥è¢«aopæ§åˆ¶çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼šå…¥é—¨ç¨‹åºå½“ä¸­æ‰€æœ‰çš„ä¸šåŠ¡æ–¹æ³•éƒ½æ˜¯å¯ä»¥è¢«aopæ§åˆ¶çš„æ–¹æ³•ã€‚</li>
<li>åœ¨SpringAOPæä¾›çš„JoinPointå½“ä¸­ï¼Œå°è£…äº†è¿æ¥ç‚¹æ–¹æ³•åœ¨æ‰§è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ã€‚ï¼ˆåé¢ä¼šæœ‰å…·ä½“çš„è®²è§£ï¼‰</li>
</ul>
</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-472.png" alt="img"></p>
<ul>
<li>
<p>é€šçŸ¥ï¼šAdvice</p>
<p>ï¼ŒæŒ‡å“ªäº›é‡å¤çš„é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯å…±æ€§åŠŸèƒ½ï¼ˆæœ€ç»ˆä½“ç°ä¸ºä¸€ä¸ªæ–¹æ³•ï¼‰</p>
<ul>
<li>åœ¨å…¥é—¨ç¨‹åºä¸­æ˜¯éœ€è¦ç»Ÿè®¡å„ä¸ªä¸šåŠ¡æ–¹æ³•çš„æ‰§è¡Œè€—æ—¶çš„ï¼Œæ­¤æ—¶æˆ‘ä»¬å°±éœ€è¦åœ¨è¿™äº›ä¸šåŠ¡æ–¹æ³•è¿è¡Œå¼€å§‹ä¹‹å‰ï¼Œå…ˆè®°å½•è¿™ä¸ªæ–¹æ³•è¿è¡Œçš„å¼€å§‹æ—¶é—´ï¼Œåœ¨æ¯ä¸€ä¸ªä¸šåŠ¡æ–¹æ³•è¿è¡Œç»“æŸçš„æ—¶å€™ï¼Œå†æ¥è®°å½•è¿™ä¸ªæ–¹æ³•è¿è¡Œçš„ç»“æŸæ—¶é—´ã€‚</li>
<li>æ˜¯åœ¨AOPé¢å‘åˆ‡é¢ç¼–ç¨‹å½“ä¸­ï¼Œæˆ‘ä»¬åªéœ€è¦å°†è¿™éƒ¨åˆ†é‡å¤çš„ä»£ç é€»è¾‘æŠ½å–å‡ºæ¥å•ç‹¬å®šä¹‰ã€‚æŠ½å–å‡ºæ¥çš„è¿™ä¸€éƒ¨åˆ†é‡å¤çš„é€»è¾‘ï¼Œä¹Ÿå°±æ˜¯å…±æ€§çš„åŠŸèƒ½ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-473.png" alt="img"></p>
<ul>
<li>
<p>åˆ‡å…¥ç‚¹ï¼šPointCut</p>
<p>ï¼ŒåŒ¹é…è¿æ¥ç‚¹çš„æ¡ä»¶ï¼Œé€šçŸ¥ä»…ä¼šåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•æ‰§è¡Œæ—¶è¢«åº”ç”¨ã€‚</p>
<ul>
<li>åœ¨é€šçŸ¥å½“ä¸­ï¼Œæˆ‘ä»¬æ‰€å®šä¹‰çš„å…±æ€§åŠŸèƒ½åˆ°åº•è¦åº”ç”¨åœ¨å“ªäº›æ–¹æ³•ä¸Šï¼Ÿæ­¤æ—¶å°±æ¶‰åŠåˆ°äº†åˆ‡å…¥ç‚¹pointcutæ¦‚å¿µã€‚åˆ‡å…¥ç‚¹æŒ‡çš„æ˜¯åŒ¹é…è¿æ¥ç‚¹çš„æ¡ä»¶ã€‚é€šçŸ¥ä»…ä¼šåœ¨åˆ‡å…¥ç‚¹æ–¹æ³•è¿è¡Œæ—¶æ‰ä¼šè¢«åº”ç”¨ã€‚</li>
<li>åœ¨aopçš„å¼€å‘å½“ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šé€šè¿‡ä¸€ä¸ªåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ¥æè¿°åˆ‡å…¥ç‚¹(åé¢ä¼šæœ‰è¯¦è§£)ã€‚</li>
<li>å‡å¦‚ï¼šåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ”¹ä¸ºDeptServiceImpl.list()ï¼Œæ­¤æ—¶å°±ä»£è¡¨ä»…ä»…åªæœ‰listè¿™ä¸€ä¸ªæ–¹æ³•æ˜¯åˆ‡å…¥ç‚¹ã€‚åªæœ‰list()æ–¹æ³•åœ¨è¿è¡Œçš„æ—¶å€™æ‰ä¼šåº”ç”¨é€šçŸ¥ã€‚</li>
</ul>
</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-474.png" alt="img"></p>
<ul>
<li><strong>åˆ‡é¢ï¼šAspect</strong>ï¼Œæè¿°é€šçŸ¥ä¸åˆ‡å…¥ç‚¹çš„å¯¹åº”å…³ç³»ï¼ˆé€šçŸ¥+åˆ‡å…¥ç‚¹ï¼‰</li>
</ul>
<p>å½“é€šçŸ¥å’Œåˆ‡å…¥ç‚¹ç»“åˆåœ¨ä¸€èµ·ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªåˆ‡é¢ã€‚é€šè¿‡åˆ‡é¢å°±èƒ½å¤Ÿæè¿°å½“å‰aopç¨‹åºéœ€è¦é’ˆå¯¹äºå“ªä¸ªåŸå§‹æ–¹æ³•ï¼Œåœ¨ä»€ä¹ˆæ—¶å€™æ‰§è¡Œä»€ä¹ˆæ ·çš„æ“ä½œã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-505.png" alt="img"></p>
<p>è€Œåˆ‡é¢æ‰€åœ¨çš„ç±»ï¼Œç§°ä¹‹ä¸ºåˆ‡é¢ç±»ï¼ˆè¢«<code>@Aspect</code>æ³¨è§£æ ‡è¯†çš„ç±»ï¼‰ã€‚</p>
<ul>
<li><strong>ç›®æ ‡å¯¹è±¡ï¼šTarget</strong>ï¼Œé€šçŸ¥æ‰€åº”ç”¨çš„å¯¹è±¡</li>
</ul>
<p>ç›®æ ‡å¯¹è±¡æŒ‡çš„å°±æ˜¯é€šçŸ¥æ‰€åº”ç”¨çš„å¯¹è±¡ï¼Œæˆ‘ä»¬å°±ç§°ä¹‹ä¸ºç›®æ ‡å¯¹è±¡ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-506.png" alt="img"></p>
<p>AOPçš„æ ¸å¿ƒæ¦‚å¿µæˆ‘ä»¬ä»‹ç»å®Œæ¯•ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥åˆ†æä¸€ä¸‹æˆ‘ä»¬æ‰€å®šä¹‰çš„é€šçŸ¥æ˜¯å¦‚ä½•ä¸ç›®æ ‡å¯¹è±¡ç»“åˆåœ¨ä¸€èµ·ï¼Œå¯¹ç›®æ ‡å¯¹è±¡å½“ä¸­çš„æ–¹æ³•è¿›è¡ŒåŠŸèƒ½å¢å¼ºçš„ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-507-1024x468.png" alt="img"></p>
<p>Springçš„AOPåº•å±‚æ˜¯åŸºäºåŠ¨æ€ä»£ç†æŠ€æœ¯æ¥å®ç°çš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨çš„åŸºäºåŠ¨æ€ä»£ç†æŠ€æœ¯ä¸ºç›®æ ‡å¯¹è±¡ç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ä»£ç†å¯¹è±¡ã€‚åœ¨ä»£ç†å¯¹è±¡å½“ä¸­å°±ä¼šå¯¹ç›®æ ‡å¯¹è±¡å½“ä¸­çš„åŸå§‹æ–¹æ³•è¿›è¡ŒåŠŸèƒ½çš„å¢å¼ºã€‚</p>
<p>SpringAOP æ—¨åœ¨ç®¡ç†beanå¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œä¸»è¦é€šè¿‡åº•å±‚çš„åŠ¨æ€ä»£ç†æœºåˆ¶ï¼Œå¯¹ç‰¹å®šçš„æ–¹æ³•è¿›è¡Œç¼–ç¨‹ ã€‚</p>
<h2 id="2-AOPè¿›é˜¶">2.AOPè¿›é˜¶</h2>
<h3 id="2-1é€šçŸ¥ç±»å‹">2.1é€šçŸ¥ç±»å‹</h3>
<p>åœ¨å…¥é—¨ç¨‹åºå½“ä¸­ï¼Œæˆ‘ä»¬å·²ç»ä½¿ç”¨äº†ä¸€ç§åŠŸèƒ½æœ€ä¸ºå¼ºå¤§çš„é€šçŸ¥ç±»å‹ï¼šAroundç¯ç»•é€šçŸ¥ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span> <span class="comment">//å½“å‰ç±»ä¸ºåˆ‡é¢ç±»</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TimeAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.itheima.service.impl.DeptServiceImpl.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">recordTime</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">//è®°å½•æ–¹æ³•æ‰§è¡Œå¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//æ‰§è¡ŒåŸå§‹æ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        <span class="comment">//è®°å½•æ–¹æ³•æ‰§è¡Œç»“æŸæ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">//è®¡ç®—æ–¹æ³•æ‰§è¡Œè€—æ—¶</span></span><br><span class="line">        log.info(<span class="string">&quot;æ–¹æ³•æ‰§è¡Œè€—æ—¶: &#123;&#125;æ¯«ç§’&quot;</span>,end-begin);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åªè¦æˆ‘ä»¬åœ¨é€šçŸ¥æ–¹æ³•ä¸ŠåŠ ä¸Šäº†<code>@Around</code>æ³¨è§£ï¼Œå°±ä»£è¡¨å½“å‰é€šçŸ¥æ˜¯ä¸€ä¸ªç¯ç»•é€šçŸ¥ã€‚</p>
<table>
<thead>
<tr>
<th><strong>Spring AOP é€šçŸ¥ç±»å‹</strong></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>@Around</td>
<td>ç¯ç»•é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•å‰ã€åéƒ½è¢«æ‰§è¡Œ</td>
</tr>
<tr>
<td>@Before</td>
<td>å‰ç½®é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•å‰è¢«æ‰§è¡Œ</td>
</tr>
<tr>
<td>@After</td>
<td>åç½®é€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•åè¢«æ‰§è¡Œï¼Œæ— è®ºæ˜¯å¦æœ‰å¼‚å¸¸éƒ½ä¼šæ‰§è¡Œ</td>
</tr>
<tr>
<td>@AfterReturning</td>
<td>è¿”å›åé€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•åœ¨ç›®æ ‡æ–¹æ³•åè¢«æ‰§è¡Œï¼Œæœ‰å¼‚å¸¸ä¸ä¼šæ‰§è¡Œ</td>
</tr>
<tr>
<td>@AfterThrowing</td>
<td>å¼‚å¸¸åé€šçŸ¥ï¼Œæ­¤æ³¨è§£æ ‡æ³¨çš„é€šçŸ¥æ–¹æ³•å‘ç”Ÿå¼‚å¸¸åæ‰§è¡Œ</td>
</tr>
</tbody>
</table>
<p>ä¸‹é¢æˆ‘ä»¬é€šè¿‡ä»£ç æ¼”ç¤ºï¼Œæ¥åŠ æ·±å¯¹äºä¸åŒé€šçŸ¥ç±»å‹çš„ç†è§£ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect1</span> &#123;</span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;before ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¯ç»•é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Around(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        log.info(<span class="string">&quot;around before ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„åŸå§‹æ–¹æ³•æ‰§è¡Œ</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> proceedingJoinPoint.proceed();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//åŸå§‹æ–¹æ³•å¦‚æœæ‰§è¡Œæ—¶æœ‰å¼‚å¸¸ï¼Œç¯ç»•é€šçŸ¥ä¸­çš„åç½®ä»£ç ä¸ä¼šåœ¨æ‰§è¡Œäº†</span></span><br><span class="line">        </span><br><span class="line">        log.info(<span class="string">&quot;around after ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›åé€šçŸ¥ï¼ˆç¨‹åºåœ¨æ­£å¸¸æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œä¼šæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span></span><br><span class="line">    <span class="meta">@AfterReturning(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;afterReturning ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¼‚å¸¸é€šçŸ¥ï¼ˆç¨‹åºåœ¨å‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span></span><br><span class="line">    <span class="meta">@AfterThrowing(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;afterThrowing ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œè¿›è¡Œæµ‹è¯•ï¼š</p>
<p><strong>1). æ²¡æœ‰å¼‚å¸¸æƒ…å†µä¸‹ï¼š</strong></p>
<p>ä½¿ç”¨ Apifox æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-508-1024x541.png" alt="img"></p>
<p>æŸ¥çœ‹ideaä¸­æ§åˆ¶å°æ—¥å¿—è¾“å‡ºï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-509-1024x194.png" alt="img"></p>
<blockquote>
<p>ç¨‹åºæ²¡æœ‰å‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œ@AfterThrowingæ ‡è¯†çš„é€šçŸ¥æ–¹æ³•ä¸ä¼šæ‰§è¡Œã€‚</p>
</blockquote>
<p><strong>2). å‡ºç°å¼‚å¸¸æƒ…å†µä¸‹ï¼š</strong></p>
<p>ä¿®æ”¹DeptServiceImplä¸šåŠ¡å®ç°ç±»ä¸­çš„ä»£ç ï¼š æ·»åŠ å¼‚å¸¸</p>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">class</span> <span class="title">DeptServiceImpl</span> <span class="keyword"><span class="keyword">implements</span> <span class="type">DeptService</span></span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DeptMapper deptMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Dept&gt; list() &#123;</span><br><span class="line"></span><br><span class="line">        List&lt;Dept&gt; deptList = deptMapper.list();</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿå¼‚å¸¸</span></span><br><span class="line">        int num = <span class="number">10</span>/<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> deptList;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//çœç•¥å…¶ä»–ä»£ç ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæµ‹è¯•å‘ç”Ÿå¼‚å¸¸æƒ…å†µä¸‹é€šçŸ¥çš„æ‰§è¡Œï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-510-1024x541.png" alt="img"></p>
<p>æŸ¥çœ‹ideaä¸­æ§åˆ¶å°æ—¥å¿—è¾“å‡º</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-511-1024x272.png" alt="img"></p>
<blockquote>
<p>ç¨‹åºå‘ç”Ÿå¼‚å¸¸çš„æƒ…å†µä¸‹ï¼š</p>
<ul>
<li>@AfterReturningæ ‡è¯†çš„é€šçŸ¥æ–¹æ³•ä¸ä¼šæ‰§è¡Œï¼Œ@AfterThrowingæ ‡è¯†çš„é€šçŸ¥æ–¹æ³•æ‰§è¡Œäº†</li>
<li>@Aroundç¯ç»•é€šçŸ¥ä¸­åŸå§‹æ–¹æ³•è°ƒç”¨æ—¶æœ‰å¼‚å¸¸ï¼Œé€šçŸ¥ä¸­çš„ç¯ç»•åçš„ä»£ç é€»è¾‘ä¹Ÿä¸ä¼šåœ¨æ‰§è¡Œäº† ï¼ˆå› ä¸ºåŸå§‹æ–¹æ³•è°ƒç”¨å·²ç»å‡ºå¼‚å¸¸äº†ï¼‰</li>
</ul>
</blockquote>
<p>åœ¨ä½¿ç”¨é€šçŸ¥æ—¶çš„æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li><strong>@Aroundç¯ç»•é€šçŸ¥éœ€è¦è‡ªå·±è°ƒç”¨ ProceedingJoinPoint.proceed() æ¥è®©åŸå§‹æ–¹æ³•æ‰§è¡Œ</strong>ï¼Œå…¶ä»–é€šçŸ¥ä¸éœ€è¦è€ƒè™‘ç›®æ ‡æ–¹æ³•æ‰§è¡Œ</li>
<li><strong>@Aroundç¯ç»•é€šçŸ¥æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¿…é¡»æŒ‡å®šä¸ºObject</strong>ï¼Œæ¥æ¥æ”¶åŸå§‹æ–¹æ³•çš„è¿”å›å€¼ï¼Œå¦åˆ™åŸå§‹æ–¹æ³•æ‰§è¡Œå®Œæ¯•ï¼Œæ˜¯è·å–ä¸åˆ°è¿”å›å€¼çš„ã€‚</li>
</ul>
<p>äº”ç§å¸¸è§çš„é€šçŸ¥ç±»å‹ï¼Œæˆ‘ä»¬å·²ç»æµ‹è¯•å®Œæ¯•äº†ï¼Œæ­¤æ—¶æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹åˆšæ‰æ‰€ç¼–å†™çš„ä»£ç ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line"><span class="variable">@Before</span>(<span class="string">&quot;execution(* com.itheima.service.*.*(..))&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¯ç»•é€šçŸ¥</span></span><br><span class="line"><span class="variable">@Around</span>(<span class="string">&quot;execution(* com.itheima.service.*.*(..))&quot;</span>)</span><br><span class="line">  </span><br><span class="line"><span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line"><span class="variable">@After</span>(<span class="string">&quot;execution(* com.itheima.service.*.*(..))&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿”å›åé€šçŸ¥ï¼ˆç¨‹åºåœ¨æ­£å¸¸æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œä¼šæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span></span><br><span class="line"><span class="variable">@AfterReturning</span>(<span class="string">&quot;execution(* com.itheima.service.*.*(..))&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¼‚å¸¸é€šçŸ¥ï¼ˆç¨‹åºåœ¨å‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span></span><br><span class="line"><span class="variable">@AfterThrowing</span>(<span class="string">&quot;execution(* com.itheima.service.*.*(..))&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å‘ç°å•Šï¼Œæ¯ä¸€ä¸ªæ³¨è§£é‡Œé¢éƒ½æŒ‡å®šäº†åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œè€Œä¸”è¿™äº›åˆ‡å…¥ç‚¹è¡¨è¾¾å¼éƒ½ä¸€æ¨¡ä¸€æ ·ã€‚æ­¤æ—¶æˆ‘ä»¬çš„ä»£ç å½“ä¸­å°±å­˜åœ¨äº†å¤§é‡çš„é‡å¤æ€§çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œå‡å¦‚æ­¤æ—¶åˆ‡å…¥ç‚¹è¡¨è¾¾å¼éœ€è¦å˜åŠ¨ï¼Œå°±éœ€è¦å°†æ‰€æœ‰çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¸€ä¸ªä¸€ä¸ªçš„æ¥æ”¹åŠ¨ï¼Œå°±å˜å¾—éå¸¸ç¹çäº†ã€‚</p>
<p>æ€ä¹ˆæ¥è§£å†³è¿™ä¸ªåˆ‡å…¥ç‚¹è¡¨è¾¾å¼é‡å¤çš„é—®é¢˜ï¼Ÿ ç­”æ¡ˆå°±æ˜¯ï¼š<strong>æŠ½å–</strong></p>
<p><strong>Springæä¾›äº†<code>@PointCut</code>æ³¨è§£ï¼Œè¯¥æ³¨è§£çš„ä½œç”¨æ˜¯å°†å…¬å…±çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æŠ½å–å‡ºæ¥ï¼Œéœ€è¦ç”¨åˆ°æ—¶å¼•ç”¨è¯¥åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å³å¯ã€‚</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect1</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åˆ‡å…¥ç‚¹æ–¹æ³•ï¼ˆå…¬å…±çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼‰</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥ï¼ˆå¼•ç”¨åˆ‡å…¥ç‚¹ï¼‰</span></span><br><span class="line">    <span class="meta">@Before(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;before ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//ç¯ç»•é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint proceedingJoinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        log.info(<span class="string">&quot;around before ...&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//è°ƒç”¨ç›®æ ‡å¯¹è±¡çš„åŸå§‹æ–¹æ³•æ‰§è¡Œ</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> proceedingJoinPoint.proceed();</span><br><span class="line">        <span class="comment">//åŸå§‹æ–¹æ³•åœ¨æ‰§è¡Œæ—¶ï¼šå‘ç”Ÿå¼‚å¸¸</span></span><br><span class="line">        <span class="comment">//åç»­ä»£ç ä¸åœ¨æ‰§è¡Œ</span></span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;around after ...&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@After(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//è¿”å›åé€šçŸ¥ï¼ˆç¨‹åºåœ¨æ­£å¸¸æ‰§è¡Œçš„æƒ…å†µä¸‹ï¼Œä¼šæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span></span><br><span class="line">    <span class="meta">@AfterReturning(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterReturning</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;afterReturning ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å¼‚å¸¸é€šçŸ¥ï¼ˆç¨‹åºåœ¨å‡ºç°å¼‚å¸¸çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œçš„åç½®é€šçŸ¥ï¼‰</span></span><br><span class="line">    <span class="meta">@AfterThrowing(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterThrowing</span><span class="params">(JoinPoint joinPoint)</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;afterThrowing ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼š<strong>å½“åˆ‡å…¥ç‚¹æ–¹æ³•ä½¿ç”¨<code>private</code>ä¿®é¥°æ—¶ï¼Œä»…èƒ½åœ¨å½“å‰åˆ‡é¢ç±»ä¸­å¼•ç”¨è¯¥è¡¨è¾¾å¼ï¼Œ å½“å¤–éƒ¨å…¶ä»–åˆ‡é¢ç±»ä¸­ä¹Ÿè¦å¼•ç”¨å½“å‰ç±»ä¸­çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼Œå°±éœ€è¦æŠŠ<code>private</code>æ”¹ä¸º<code>public</code></strong>ï¼Œè€Œåœ¨å¼•ç”¨çš„æ—¶å€™ï¼Œå…·ä½“çš„è¯­æ³•ä¸ºï¼š</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Slf4j</span></span><br><span class="line"><span class="variable">@Component</span></span><br><span class="line"><span class="variable">@Aspect</span></span><br><span class="line">public class MyAspect2 &#123;</span><br><span class="line">    <span class="comment">//å¼•ç”¨MyAspect1åˆ‡é¢ç±»ä¸­çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</span></span><br><span class="line">    <span class="variable">@Before</span>(<span class="string">&quot;com.itheima.aspect.MyAspect1.pt()&quot;</span>)</span><br><span class="line">    public void <span class="built_in">before</span>()&#123;</span><br><span class="line">        <span class="selector-tag">log</span><span class="selector-class">.info</span>(<span class="string">&quot;MyAspect2 -&gt; before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="2-2é€šçŸ¥é¡ºåº">2.2é€šçŸ¥é¡ºåº</h3>
<p>å½“åœ¨é¡¹ç›®ä¸­ï¼Œå®šä¹‰äº†å¤šä¸ªåˆ‡é¢ç±»ï¼Œè€Œå¤šä¸ªåˆ‡é¢ç±»ä¸­å¤šä¸ªåˆ‡å…¥ç‚¹éƒ½åŒ¹é…åˆ°äº†åŒä¸€ä¸ªç›®æ ‡æ–¹æ³•ã€‚æ­¤æ—¶å½“ç›®æ ‡æ–¹æ³•åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œè¿™å¤šä¸ªåˆ‡é¢ç±»å½“ä¸­çš„è¿™äº›é€šçŸ¥æ–¹æ³•éƒ½ä¼šè¿è¡Œã€‚</p>
<p>è¿™å¤šä¸ªé€šçŸ¥æ–¹æ³•åˆ°åº•å“ªä¸ªå…ˆè¿è¡Œï¼Œå“ªä¸ªåè¿è¡Œï¼Ÿ ä¸‹é¢æˆ‘ä»¬é€šè¿‡ç¨‹åºæ¥éªŒè¯ï¼ˆè¿™é‡Œå‘¢ï¼Œæˆ‘ä»¬å°±å®šä¹‰ä¸¤ç§ç±»å‹çš„é€šçŸ¥è¿›è¡Œæµ‹è¯•ï¼Œä¸€ç§æ˜¯å‰ç½®é€šçŸ¥<code>@Before</code>ï¼Œä¸€ç§æ˜¯åç½®é€šçŸ¥<code>@After</code>ï¼‰</p>
<p>å®šä¹‰å¤šä¸ªåˆ‡é¢ç±»ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect2</span> &#123;</span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect2 -&gt; before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect2 -&gt; after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect3</span> &#123;</span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect3 -&gt; before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect3 -&gt;  after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect4</span> &#123;</span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect4 -&gt; before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect4 -&gt; after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæµ‹è¯•é€šçŸ¥çš„æ‰§è¡Œé¡ºåºï¼š</p>
<blockquote>
<p>å¤‡æ³¨ï¼š</p>
<ol>
<li>æŠŠDeptServiceImplå®ç°ç±»ä¸­æ¨¡æ‹Ÿå¼‚å¸¸çš„ä»£ç åˆ é™¤æˆ–æ³¨é‡Šæ‰ã€‚</li>
<li>æ³¨é‡Šæ‰å…¶ä»–åˆ‡é¢ç±»(æŠŠ<code>@Aspect</code>æ³¨é‡Šå³å¯)ï¼Œä»…ä¿ç•™MyAspect2ã€MyAspect3ã€MyAspect4 ï¼Œè¿™æ ·å°±å¯ä»¥æ¸…æ™°çœ‹åˆ°æ‰§è¡Œçš„ç»“æœï¼Œè€Œä¸è¢«å…¶ä»–åˆ‡é¢ç±»å¹²æ‰°ã€‚</li>
</ol>
</blockquote>
<p>ä½¿ç”¨ Apifox æµ‹è¯•æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-512-1024x542.png" alt="img"></p>
<p>æŸ¥çœ‹ideaä¸­æ§åˆ¶å°æ—¥å¿—è¾“å‡º</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-513-1024x240.png" alt="img"></p>
<ul>
<li>é€šè¿‡ä»¥ä¸Šç¨‹åºè¿è¡Œå¯ä»¥çœ‹å‡ºåœ¨ä¸åŒåˆ‡é¢ç±»ä¸­ï¼Œé»˜è®¤æŒ‰ç…§åˆ‡é¢ç±»çš„ç±»åå­—æ¯æ’åºï¼š
<ul>
<li>ç›®æ ‡æ–¹æ³•å‰çš„é€šçŸ¥æ–¹æ³•ï¼šå­—æ¯æ’åé å‰çš„å…ˆæ‰§è¡Œ</li>
<li>ç›®æ ‡æ–¹æ³•åçš„é€šçŸ¥æ–¹æ³•ï¼šå­—æ¯æ’åé å‰çš„åæ‰§è¡Œ</li>
</ul>
</li>
</ul>
<p>å¦‚æœæˆ‘ä»¬æƒ³æ§åˆ¶é€šçŸ¥çš„æ‰§è¡Œé¡ºåºæœ‰ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li>ä¿®æ”¹åˆ‡é¢ç±»çš„ç±»åï¼ˆè¿™ç§æ–¹å¼éå¸¸ç¹çã€è€Œä¸”ä¸ä¾¿ç®¡ç†ï¼‰</li>
<li>ä½¿ç”¨Springæä¾›çš„<code>@Order</code>æ³¨è§£</li>
</ol>
<p>ä½¿ç”¨@Orderæ³¨è§£ï¼Œæ§åˆ¶é€šçŸ¥çš„æ‰§è¡Œé¡ºåºï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(2)</span>  <span class="comment">//åˆ‡é¢ç±»çš„æ‰§è¡Œé¡ºåºï¼ˆå‰ç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°å…ˆæ‰§è¡Œ; åç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°è¶Šåæ‰§è¡Œï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect2</span> &#123;</span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect2 -&gt; before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥ </span></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect2 -&gt; after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(3)</span>  <span class="comment">//åˆ‡é¢ç±»çš„æ‰§è¡Œé¡ºåºï¼ˆå‰ç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°å…ˆæ‰§è¡Œ; åç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°è¶Šåæ‰§è¡Œï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect3</span> &#123;</span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect3 -&gt; before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect3 -&gt;  after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Order(1)</span> <span class="comment">//åˆ‡é¢ç±»çš„æ‰§è¡Œé¡ºåºï¼ˆå‰ç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°å…ˆæ‰§è¡Œ; åç½®é€šçŸ¥ï¼šæ•°å­—è¶Šå°è¶Šåæ‰§è¡Œï¼‰</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyAspect4</span> &#123;</span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Before(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">before</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect4 -&gt; before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@After(&quot;execution(* com.itheima.service.*.*(..))&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">after</span><span class="params">()</span>&#123;</span><br><span class="line">        log.info(<span class="string">&quot;MyAspect4 -&gt; after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡æ–°å¯åŠ¨SpringBootæœåŠ¡ï¼Œæµ‹è¯•é€šçŸ¥æ‰§è¡Œé¡ºåºï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-514-1024x235.png" alt="img"></p>
<p><strong>é€šçŸ¥çš„æ‰§è¡Œé¡ºåºå¤§å®¶ä¸»è¦çŸ¥é“ä¸¤ç‚¹å³å¯ï¼š</strong></p>
<ol>
<li><strong>ä¸åŒçš„åˆ‡é¢ç±»å½“ä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹é€šçŸ¥çš„æ‰§è¡Œé¡ºåºæ˜¯ä¸åˆ‡é¢ç±»çš„ç±»åå­—æ¯æ’åºæ˜¯æœ‰å…³ç³»çš„</strong></li>
<li><strong>å¯ä»¥åœ¨åˆ‡é¢ç±»ä¸Šé¢åŠ ä¸Š@Orderæ³¨è§£ï¼Œæ¥æ§åˆ¶ä¸åŒçš„åˆ‡é¢ç±»é€šçŸ¥çš„æ‰§è¡Œé¡ºåº</strong></li>
</ol>
<h3 id="2-3åˆ‡ç‚¹è¡¨è¾¾å¼">2.3åˆ‡ç‚¹è¡¨è¾¾å¼</h3>
<p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼šæè¿°åˆ‡å…¥ç‚¹æ–¹æ³•çš„ä¸€ç§è¡¨è¾¾å¼</p>
<ul>
<li>ä½œç”¨ï¼šä¸»è¦ç”¨æ¥å†³å®šé¡¹ç›®ä¸­çš„å“ªäº›æ–¹æ³•éœ€è¦åŠ å…¥é€šçŸ¥</li>
<li>å¸¸è§å½¢å¼ï¼š
<ul>
<li>execution(â€¦â€¦)ï¼šæ ¹æ®æ–¹æ³•çš„ç­¾åæ¥åŒ¹é…</li>
<li>@annotation(â€¦â€¦) ï¼šæ ¹æ®æ³¨è§£åŒ¹é…</li>
</ul>
</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-497-1024x78.png" alt="img"></p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-498-1024x74.png" alt="img"></p>
<h4 id="2-3-1execution">2.3.1execution</h4>
<p>executionä¸»è¦æ ¹æ®æ–¹æ³•çš„è¿”å›å€¼ã€åŒ…åã€ç±»åã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç­‰ä¿¡æ¯æ¥åŒ¹é…ï¼Œè¯­æ³•ä¸ºï¼š</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">execution</span>(è®¿é—®ä¿®é¥°ç¬¦?  è¿”å›å€¼åŒ…å.ç±»å.?æ–¹æ³•å(æ–¹æ³•å‚æ•°) <span class="keyword">throws</span> å¼‚å¸¸?)</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­å¸¦<code>?</code>çš„è¡¨ç¤ºå¯ä»¥çœç•¥çš„éƒ¨åˆ†</p>
<ul>
<li>è®¿é—®ä¿®é¥°ç¬¦ï¼šå¯çœç•¥ï¼ˆæ¯”å¦‚: publicã€protectedï¼‰</li>
<li>åŒ…å.ç±»åï¼š å¯çœç•¥</li>
<li>throws å¼‚å¸¸ï¼šå¯çœç•¥ï¼ˆæ³¨æ„æ˜¯æ–¹æ³•ä¸Šå£°æ˜æŠ›å‡ºçš„å¼‚å¸¸ï¼Œä¸æ˜¯å®é™…æŠ›å‡ºçš„å¼‚å¸¸ï¼‰</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;execution(void com.itheima.service.impl.DeptServiceImpl.delete(java.lang.Integer))&quot;)</span></span><br></pre></td></tr></table></figure>
<p>å¯ä»¥ä½¿ç”¨é€šé…ç¬¦æè¿°åˆ‡å…¥ç‚¹</p>
<ul>
<li><code>*</code> ï¼šå•ä¸ªç‹¬ç«‹çš„ä»»æ„ç¬¦å·ï¼Œå¯ä»¥é€šé…ä»»æ„è¿”å›å€¼ã€åŒ…åã€ç±»åã€æ–¹æ³•åã€ä»»æ„ç±»å‹çš„ä¸€ä¸ªå‚æ•°ï¼Œä¹Ÿå¯ä»¥é€šé…åŒ…ã€ç±»ã€æ–¹æ³•åçš„ä¸€éƒ¨åˆ†</li>
<li><code>..</code> ï¼šå¤šä¸ªè¿ç»­çš„ä»»æ„ç¬¦å·ï¼Œå¯ä»¥é€šé…ä»»æ„å±‚çº§çš„åŒ…ï¼Œæˆ–ä»»æ„ç±»å‹ã€ä»»æ„ä¸ªæ•°çš„å‚æ•°</li>
</ul>
<p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„è¯­æ³•è§„åˆ™ï¼š</p>
<ul>
<li>æ–¹æ³•çš„è®¿é—®ä¿®é¥°ç¬¦å¯ä»¥çœç•¥</li>
<li>è¿”å›å€¼å¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼ˆä»»æ„è¿”å›å€¼ç±»å‹ï¼‰</li>
<li>åŒ…åå¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼Œä»£è¡¨ä»»æ„åŒ…ï¼ˆä¸€å±‚åŒ…ä½¿ç”¨ä¸€ä¸ª<code>*</code>ï¼‰</li>
<li>ä½¿ç”¨<code>..</code>é…ç½®åŒ…åï¼Œæ ‡è¯†æ­¤åŒ…ä»¥åŠæ­¤åŒ…ä¸‹çš„æ‰€æœ‰å­åŒ…</li>
<li>ç±»åå¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼Œæ ‡è¯†ä»»æ„ç±»</li>
<li>æ–¹æ³•åå¯ä»¥ä½¿ç”¨<code>*</code>å·ä»£æ›¿ï¼Œè¡¨ç¤ºä»»æ„æ–¹æ³•</li>
<li>å¯ä»¥ä½¿ç”¨ <code>*</code> é…ç½®å‚æ•°ï¼Œä¸€ä¸ªä»»æ„ç±»å‹çš„å‚æ•°</li>
<li>å¯ä»¥ä½¿ç”¨<code>..</code> é…ç½®å‚æ•°ï¼Œä»»æ„ä¸ªä»»æ„ç±»å‹çš„å‚æ•°</li>
</ul>
<p><strong>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ç¤ºä¾‹</strong></p>
<ul>
<li>çœç•¥æ–¹æ³•çš„ä¿®é¥°ç¬¦å·</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(<span class="type">void</span> com.itheima.service.impl.DeptServiceImpl.<span class="keyword">delete</span>(java.lang.Integer))</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨<code>*</code>ä»£æ›¿è¿”å›å€¼ç±»å‹</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">execution</span><span class="params">(* com.itheima.service.impl.DeptServiceImpl.delete(java.lang.Integer)</span></span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨<code>*</code>ä»£æ›¿åŒ…åï¼ˆä¸€å±‚åŒ…ä½¿ç”¨ä¸€ä¸ª<code>*</code>ï¼‰</li>
</ul>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(<span class="name">*</span> com.itheima.*.*.DeptServiceImpl.delete(<span class="name">java</span>.lang.Integer))</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨<code>..</code>çœç•¥åŒ…å</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">execution</span><span class="params">(* com..DeptServiceImpl.delete(java.lang.Integer)</span></span>)  </span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨<code>*</code>ä»£æ›¿ç±»å</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">execution</span><span class="params">(* com..*.delete(java.lang.Integer)</span></span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨<code>*</code>ä»£æ›¿æ–¹æ³•å</li>
</ul>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(<span class="name">*</span> com..*.*(<span class="name">java</span>.lang.Integer))</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨ <code>*</code> ä»£æ›¿å‚æ•°</li>
</ul>
<figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution<span class="comment">(* com.itheima.service.impl.DeptServiceImpl.delete(*)</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>ä½¿ç”¨<code>..</code>çœç•¥å‚æ•°</li>
</ul>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(<span class="name">*</span> com..*.*(..))</span><br></pre></td></tr></table></figure>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<ul>
<li>æ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ ä¸”ï¼ˆ&amp;&amp;ï¼‰ã€æˆ–ï¼ˆ||ï¼‰ã€éï¼ˆ!ï¼‰ æ¥ç»„åˆæ¯”è¾ƒå¤æ‚çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ã€‚</li>
</ul>
<figure class="highlight avrasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(* <span class="keyword">com</span>.itheima.service.DeptService<span class="meta">.list</span>(..)) || execution(* <span class="keyword">com</span>.itheima.service.DeptService.delete(..))</span><br></pre></td></tr></table></figure>
<p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ä¹¦å†™å»ºè®®ï¼š</p>
<ul>
<li>æ‰€æœ‰ä¸šåŠ¡æ–¹æ³•ååœ¨å‘½åæ—¶å°½é‡è§„èŒƒï¼Œæ–¹ä¾¿åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å¿«é€ŸåŒ¹é…ã€‚å¦‚ï¼šæŸ¥è¯¢ç±»æ–¹æ³•éƒ½æ˜¯ find å¼€å¤´ï¼Œæ›´æ–°ç±»æ–¹æ³•éƒ½æ˜¯updateå¼€å¤´</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä¸šåŠ¡ç±»</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DeptService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">List</span>&lt;<span class="title class_">Dept</span>&gt; <span class="title function_">findAllDept</span>(<span class="params"></span>) &#123;</span><br><span class="line">       <span class="comment">//çœç•¥ä»£ç ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Dept</span> <span class="title function_">findDeptById</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">       <span class="comment">//çœç•¥ä»£ç ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">updateDeptById</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">       <span class="comment">//çœç•¥ä»£ç ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">updateDeptByMoreCondition</span>(<span class="params"><span class="title class_">Dept</span> dept</span>) &#123;</span><br><span class="line">       <span class="comment">//çœç•¥ä»£ç ...</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å…¶ä»–ä»£ç ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>//åŒ¹é…DeptServiceImplç±»ä¸­ä»¥findå¼€å¤´çš„æ–¹æ³•</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">execution</span><span class="params">(* com.itheima.service.impl.DeptServiceImpl.find*(..)</span></span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>æè¿°åˆ‡å…¥ç‚¹æ–¹æ³•é€šå¸¸åŸºäºæ¥å£æè¿°ï¼Œè€Œä¸æ˜¯ç›´æ¥æè¿°å®ç°ç±»ï¼Œå¢å¼ºæ‹“å±•æ€§</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">execution</span><span class="params">(* com.itheima.service.DeptService.*(..)</span></span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨æ»¡è¶³ä¸šåŠ¡éœ€è¦çš„å‰æä¸‹ï¼Œå°½é‡ç¼©å°åˆ‡å…¥ç‚¹çš„åŒ¹é…èŒƒå›´ã€‚å¦‚ï¼šåŒ…ååŒ¹é…å°½é‡ä¸ä½¿ç”¨ â€¦ï¼Œä½¿ç”¨ * åŒ¹é…å•ä¸ªåŒ…</li>
</ul>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">execution(<span class="name">*</span> com.itheima.*.*.DeptServiceImpl.find*(..))</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ä¹¦å†™å»ºè®®ï¼š</strong></p>
<ul>
<li>æ‰€æœ‰ä¸šåŠ¡æ–¹æ³•ååœ¨å‘½åæ—¶å°½é‡è§„èŒƒï¼Œæ–¹ä¾¿åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å¿«é€ŸåŒ¹é…ã€‚å¦‚ï¼šfindXxxï¼ŒupdateXxxã€‚</li>
<li>æè¿°åˆ‡å…¥ç‚¹æ–¹æ³•é€šå¸¸åŸºäºæ¥å£æè¿°ï¼Œè€Œä¸æ˜¯ç›´æ¥æè¿°å®ç°ç±»ï¼Œå¢å¼ºæ‹“å±•æ€§ã€‚</li>
<li>åœ¨æ»¡è¶³ä¸šåŠ¡éœ€è¦çš„å‰æä¸‹ï¼Œå°½é‡ç¼©å°åˆ‡å…¥ç‚¹çš„åŒ¹é…èŒƒå›´ã€‚å¦‚ï¼šåŒ…åå°½é‡ä¸ä½¿ç”¨â€¦ï¼Œä½¿ç”¨ <code>*</code> åŒ¹é…å•ä¸ªåŒ…ã€‚</li>
</ul>
</blockquote>
<h4 id="2-3-2-annotation">2.3.2@annotation</h4>
<ol>
<li></li>
</ol>
<p>å·²ç»å­¦ä¹ äº†executionåˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„è¯­æ³•ã€‚é‚£ä¹ˆå¦‚æœæˆ‘ä»¬è¦åŒ¹é…å¤šä¸ªæ— è§„åˆ™çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼šlist()å’Œ delete()è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬åŸºäºexecutionè¿™ç§åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ¥æè¿°å°±ä¸æ˜¯å¾ˆæ–¹ä¾¿äº†ã€‚è€Œåœ¨ä¹‹å‰æˆ‘ä»¬æ˜¯å°†ä¸¤ä¸ªåˆ‡å…¥ç‚¹è¡¨è¾¾å¼ç»„åˆåœ¨äº†ä¸€èµ·å®Œæˆçš„éœ€æ±‚ï¼Œè¿™ä¸ªæ˜¯æ¯”è¾ƒç¹ççš„ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©äºå¦ä¸€ç§åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ <code>@annotation</code> æ¥æè¿°è¿™ä¸€ç±»çš„åˆ‡å…¥ç‚¹ï¼Œä»è€Œæ¥ç®€åŒ–åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ä¹¦å†™ã€‚</p>
<p>å®ç°æ­¥éª¤ï¼š</p>
<ol>
<li>ç¼–å†™è‡ªå®šä¹‰æ³¨è§£</li>
<li>åœ¨ä¸šåŠ¡ç±»è¦åšä¸ºè¿æ¥ç‚¹çš„æ–¹æ³•ä¸Šæ·»åŠ è‡ªå®šä¹‰æ³¨è§£</li>
</ol>
<p><strong>è‡ªå®šä¹‰æ³¨è§£</strong>ï¼š<code>LogOperation</code></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line">public <span class="variable">@interface</span> LogOperation&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä¸šåŠ¡ç±»</strong>ï¼š<code>DeptServiceImpl</code></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">DeptService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> <span class="title class_">DeptMapper</span> deptMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@LogOperation</span> <span class="comment">//è‡ªå®šä¹‰æ³¨è§£ï¼ˆè¡¨ç¤ºï¼šå½“å‰æ–¹æ³•å±äºç›®æ ‡æ–¹æ³•ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">List</span>&lt;<span class="title class_">Dept</span>&gt; <span class="title function_">list</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title class_">List</span>&lt;<span class="title class_">Dept</span>&gt; deptList = deptMapper.<span class="title function_">list</span>();</span><br><span class="line">        <span class="comment">//æ¨¡æ‹Ÿå¼‚å¸¸</span></span><br><span class="line">        <span class="comment">//int num = 10/0;</span></span><br><span class="line">        <span class="keyword">return</span> deptList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="meta">@LogOperation</span> <span class="comment">//è‡ªå®šä¹‰æ³¨è§£ï¼ˆè¡¨ç¤ºï¼šå½“å‰æ–¹æ³•å±äºç›®æ ‡æ–¹æ³•ï¼‰</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">delete</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">        <span class="comment">//1. åˆ é™¤éƒ¨é—¨</span></span><br><span class="line">        deptMapper.<span class="title function_">delete</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">save</span>(<span class="params"><span class="title class_">Dept</span> dept</span>) &#123;</span><br><span class="line">        dept.<span class="title function_">setCreateTime</span>(<span class="title class_">LocalDateTime</span>.<span class="title function_">now</span>());</span><br><span class="line">        dept.<span class="title function_">setUpdateTime</span>(<span class="title class_">LocalDateTime</span>.<span class="title function_">now</span>());</span><br><span class="line">        deptMapper.<span class="title function_">save</span>(dept);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title class_">Dept</span> <span class="title function_">getById</span>(<span class="params"><span class="title class_">Integer</span> id</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> deptMapper.<span class="title function_">getById</span>(id);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="built_in">void</span> <span class="title function_">update</span>(<span class="params"><span class="title class_">Dept</span> dept</span>) &#123;</span><br><span class="line">        dept.<span class="title function_">setUpdateTime</span>(<span class="title class_">LocalDateTime</span>.<span class="title function_">now</span>());</span><br><span class="line">        deptMapper.<span class="title function_">update</span>(dept);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ‡é¢ç±»</strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@Slf4j</span></span><br><span class="line"><span class="variable">@Component</span></span><br><span class="line"><span class="variable">@Aspect</span></span><br><span class="line">public class MyAspect6 &#123;</span><br><span class="line">    <span class="comment">//é’ˆå¯¹listæ–¹æ³•ã€deleteæ–¹æ³•è¿›è¡Œå‰ç½®é€šçŸ¥å’Œåç½®é€šçŸ¥</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//å‰ç½®é€šçŸ¥</span></span><br><span class="line">    <span class="variable">@Before</span>(<span class="string">&quot;@annotation(com.itheima.anno.LogOperation)&quot;</span>)</span><br><span class="line">    public void <span class="built_in">before</span>()&#123;</span><br><span class="line">        <span class="selector-tag">log</span><span class="selector-class">.info</span>(<span class="string">&quot;MyAspect6 -&gt; before ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//åç½®é€šçŸ¥</span></span><br><span class="line">    @<span class="selector-tag">After</span>(<span class="string">&quot;@annotation(com.itheima.anno.LogOperation)&quot;</span>)</span><br><span class="line">    <span class="selector-tag">public</span> <span class="selector-tag">void</span> <span class="selector-tag">after</span>()&#123;</span><br><span class="line">        <span class="selector-tag">log</span><span class="selector-class">.info</span>(<span class="string">&quot;MyAspect6 -&gt; after ...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‡å¯SpringBootæœåŠ¡ï¼Œæµ‹è¯•æŸ¥è¯¢æ‰€æœ‰éƒ¨é—¨æ•°æ®ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-503.png" alt="img"></p>
<p>åˆ°æ­¤ä¸¤ç§å¸¸è§çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å·²ç»ä»‹ç»å®Œäº†ã€‚</p>
<ul>
<li>executionåˆ‡å…¥ç‚¹è¡¨è¾¾å¼
<ul>
<li>æ ¹æ®æˆ‘ä»¬æ‰€æŒ‡å®šçš„æ–¹æ³•çš„æè¿°ä¿¡æ¯æ¥åŒ¹é…åˆ‡å…¥ç‚¹æ–¹æ³•ï¼Œè¿™ç§æ–¹å¼ä¹Ÿæ˜¯æœ€ä¸ºå¸¸ç”¨çš„ä¸€ç§æ–¹å¼</li>
<li>å¦‚æœæˆ‘ä»¬è¦åŒ¹é…çš„åˆ‡å…¥ç‚¹æ–¹æ³•çš„æ–¹æ³•åä¸è§„åˆ™ï¼Œæˆ–è€…æœ‰ä¸€äº›æ¯”è¾ƒç‰¹æ®Šçš„éœ€æ±‚ï¼Œé€šè¿‡executionåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æè¿°æ¯”è¾ƒç¹ç</li>
</ul>
</li>
<li>annotation åˆ‡å…¥ç‚¹è¡¨è¾¾å¼
<ul>
<li>åŸºäºæ³¨è§£çš„æ–¹å¼æ¥åŒ¹é…åˆ‡å…¥ç‚¹æ–¹æ³•ã€‚è¿™ç§æ–¹å¼è™½ç„¶å¤šä¸€æ­¥æ“ä½œï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªæ³¨è§£ï¼Œä½†æ˜¯ç›¸å¯¹æ¥æ¯”è¾ƒçµæ´»ã€‚æˆ‘ä»¬éœ€è¦åŒ¹é…å“ªä¸ªæ–¹æ³•ï¼Œå°±åœ¨æ–¹æ³•ä¸ŠåŠ ä¸Šå¯¹åº”çš„æ³¨è§£å°±å¯ä»¥äº†</li>
</ul>
</li>
</ul>
<p>æ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨ &amp;&amp; ï¼Œ||ï¼Œï¼ æ¥ç»„åˆæ¯”è¾ƒå¤æ‚çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ã€‚</p>
<h2 id="3-AOPæ¡ˆä¾‹">3.AOPæ¡ˆä¾‹</h2>
<h3 id="3-1éœ€æ±‚-3">3.1éœ€æ±‚</h3>
<p>éœ€æ±‚ï¼šå°†æ¡ˆä¾‹ï¼ˆTliasæ™ºèƒ½å­¦ä¹ è¾…åŠ©ç³»ç»Ÿï¼‰ä¸­å¢ã€åˆ ã€æ”¹ç›¸å…³æ¥å£çš„æ“ä½œæ—¥å¿—è®°å½•åˆ°æ•°æ®åº“è¡¨ä¸­</p>
<ul>
<li>å°±æ˜¯å½“è®¿é—®éƒ¨é—¨ç®¡ç†å’Œå‘˜å·¥ç®¡ç†å½“ä¸­çš„å¢ã€åˆ ã€æ”¹ç›¸å…³åŠŸèƒ½æ¥å£æ—¶ï¼Œéœ€è¦è¯¦ç»†çš„æ“ä½œæ—¥å¿—ï¼Œå¹¶ä¿å­˜åœ¨æ•°æ®è¡¨ä¸­ï¼Œä¾¿äºåæœŸæ•°æ®è¿½è¸ªã€‚</li>
</ul>
<p>æ“ä½œæ—¥å¿—ä¿¡æ¯åŒ…å«ï¼š</p>
<ul>
<li>æ“ä½œäººã€æ“ä½œæ—¶é—´ã€æ‰§è¡Œæ–¹æ³•çš„å…¨ç±»åã€æ‰§è¡Œæ–¹æ³•åã€æ–¹æ³•è¿è¡Œæ—¶å‚æ•°ã€è¿”å›å€¼ã€æ–¹æ³•æ‰§è¡Œæ—¶é•¿</li>
</ul>
<blockquote>
<p>æ‰€è®°å½•çš„æ—¥å¿—ä¿¡æ¯åŒ…æ‹¬å½“å‰æ¥å£çš„æ“ä½œäººæ˜¯è°æ“ä½œçš„ï¼Œä»€ä¹ˆæ—¶é—´ç‚¹æ“ä½œçš„ï¼Œä»¥åŠè®¿é—®çš„æ˜¯å“ªä¸ªç±»å½“ä¸­çš„å“ªä¸ªæ–¹æ³•ï¼Œåœ¨è®¿é—®è¿™ä¸ªæ–¹æ³•çš„æ—¶å€™ä¼ å…¥è¿›æ¥çš„å‚æ•°æ˜¯ä»€ä¹ˆï¼Œè®¿é—®è¿™ä¸ªæ–¹æ³•æœ€ç»ˆæ‹¿åˆ°çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Œä»¥åŠæ•´ä¸ªæ¥å£æ–¹æ³•çš„è¿è¡Œæ—¶é•¿æ˜¯å¤šé•¿æ—¶é—´ã€‚</p>
</blockquote>
<h3 id="3-2åˆ†æ">3.2åˆ†æ</h3>
<ul>
<li>é—®é¢˜1ï¼šé¡¹ç›®å½“ä¸­å¢åˆ æ”¹ç›¸å…³çš„æ–¹æ³•æ˜¯ä¸æ˜¯æœ‰å¾ˆå¤šï¼Ÿ
<ul>
<li>å¾ˆå¤š</li>
</ul>
</li>
<li>é—®é¢˜2ï¼šæˆ‘ä»¬éœ€è¦é’ˆå¯¹æ¯ä¸€ä¸ªåŠŸèƒ½æ¥å£æ–¹æ³•è¿›è¡Œä¿®æ”¹ï¼Œåœ¨æ¯ä¸€ä¸ªåŠŸèƒ½æ¥å£å½“ä¸­éƒ½æ¥è®°å½•è¿™äº›æ“ä½œæ—¥å¿—å—ï¼Ÿ
<ul>
<li>è¿™ç§åšæ³•æ¯”è¾ƒç¹ç</li>
</ul>
</li>
</ul>
<p>ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼šå¯ä»¥ä½¿ç”¨AOPè§£å†³(æ¯ä¸€ä¸ªå¢åˆ æ”¹åŠŸèƒ½æ¥å£ä¸­è¦å®ç°çš„è®°å½•æ“ä½œæ—¥å¿—çš„é€»è¾‘ä»£ç æ˜¯ç›¸åŒ)ã€‚</p>
<p>å¯ä»¥æŠŠè¿™éƒ¨åˆ†è®°å½•æ“ä½œæ—¥å¿—çš„é€šç”¨çš„ã€é‡å¤æ€§çš„é€»è¾‘ä»£ç æŠ½å–å‡ºæ¥å®šä¹‰åœ¨ä¸€ä¸ªé€šçŸ¥æ–¹æ³•å½“ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡AOPé¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ–¹å¼ï¼Œåœ¨ä¸æ”¹åŠ¨åŸå§‹åŠŸèƒ½çš„åŸºç¡€ä¸Šæ¥å¯¹åŸå§‹çš„åŠŸèƒ½è¿›è¡Œå¢å¼ºã€‚ç›®å‰æˆ‘ä»¬æ‰€å¢å¼ºçš„åŠŸèƒ½å°±æ˜¯æ¥è®°å½•æ“ä½œæ—¥å¿—ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ä½¿ç”¨AOPçš„æŠ€æœ¯æ¥å®ç°ã€‚ä½¿ç”¨AOPçš„æŠ€æœ¯æ¥å®ç°ä¹Ÿæ˜¯æœ€ä¸ºç®€å•ï¼Œæœ€ä¸ºæ–¹ä¾¿çš„ã€‚</p>
<ul>
<li>é—®é¢˜3ï¼šæ—¢ç„¶è¦åŸºäºAOPé¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ–¹å¼æ¥å®Œæˆçš„åŠŸèƒ½ï¼Œé‚£ä¹ˆæˆ‘ä»¬è¦ä½¿ç”¨ AOPäº”ç§é€šçŸ¥ç±»å‹å½“ä¸­çš„å“ªç§é€šçŸ¥ç±»å‹ï¼Ÿ
<ul>
<li>ç­”æ¡ˆï¼š@Aroundã€å› ä¸ºåœ¨è·å–æ–¹æ³•æ‰§è¡Œæ—¶é•¿æ—¶ï¼Œéœ€è¦åœ¨ç›®æ ‡æ–¹æ³•çš„å‰åéƒ½è¿è¡Œã€‘</li>
</ul>
</li>
<li>é—®é¢˜4ï¼šæœ€åä¸€ä¸ªé—®é¢˜ï¼Œåˆ‡å…¥ç‚¹è¡¨è¾¾å¼æˆ‘ä»¬è¯¥æ€ä¹ˆå†™ï¼Ÿ
<ul>
<li>ç­”æ¡ˆï¼š@annotationã€å› ä¸ºControllerå±‚å¢ã€åˆ ã€æ”¹æ‰§è¡Œæ–¹æ³•çš„åç§°æ²¡æœ‰å›ºå®šå‰ç¼€/åç¼€ï¼Œç›´æ¥ç”¨æ–¹æ³•åçš„è¯æ¯”è¾ƒéº»çƒ¦ã€‘</li>
</ul>
</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-515.png" alt="img"></p>
<h3 id="3-3æ­¥éª¤">3.3æ­¥éª¤</h3>
<p>ç®€å•åˆ†æäº†ä¸€ä¸‹å¤§æ¦‚çš„å®ç°æ€è·¯åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦æ¥å®Œæˆæ¡ˆä¾‹äº†ã€‚æ¡ˆä¾‹çš„å®ç°æ­¥éª¤å…¶å®å°±ä¸¤æ­¥ï¼š</p>
<p>å®šä¹‰åˆ‡é¢ç±»ï¼Œå®Œæˆè®°å½•æ“ä½œæ—¥å¿—çš„é€»è¾‘</p>
<ul>
<li>å‡†å¤‡å·¥ä½œ
<ul>
<li>å¼•å…¥AOPçš„èµ·æ­¥ä¾èµ–</li>
<li>å¯¼å…¥èµ„æ–™ä¸­å‡†å¤‡å¥½çš„æ•°æ®åº“è¡¨ç»“æ„ï¼Œå¹¶å¼•å…¥å¯¹åº”çš„å®ä½“ç±»</li>
</ul>
</li>
<li>ç¼–ç å®ç°(åŸºäºAIå®ç°)
<ul>
<li>è‡ªå®šä¹‰æ³¨è§£<code>@LogOperation</code></li>
<li>å®šä¹‰åˆ‡é¢ç±»ï¼Œå®Œæˆè®°å½•æ“ä½œæ—¥å¿—çš„é€»è¾‘</li>
</ul>
</li>
</ul>
<h3 id="3-4ä»£ç å®ç°">3.4ä»£ç å®ç°</h3>
<p><strong>1). å‡†å¤‡å·¥ä½œ</strong></p>
<ul>
<li>åœ¨ pom.xml ä¸­å¼•å…¥AOPçš„ä¾èµ–</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„</li>
</ul>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- æ“ä½œæ—¥å¿—è¡¨</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> operate_log(</span><br><span class="line">    id <span class="type">int</span> unsigned <span class="keyword">primary key</span> auto_increment <span class="keyword">comment</span> <span class="string">&#x27;ID&#x27;</span>,</span><br><span class="line">    operate_emp_id <span class="type">int</span> unsigned <span class="keyword">comment</span> <span class="string">&#x27;æ“ä½œäººID&#x27;</span>,</span><br><span class="line">    operate_time datetime <span class="keyword">comment</span> <span class="string">&#x27;æ“ä½œæ—¶é—´&#x27;</span>,</span><br><span class="line">    class_name <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">comment</span> <span class="string">&#x27;æ“ä½œçš„ç±»å&#x27;</span>,</span><br><span class="line">    method_name <span class="type">varchar</span>(<span class="number">100</span>) <span class="keyword">comment</span> <span class="string">&#x27;æ“ä½œçš„æ–¹æ³•å&#x27;</span>,</span><br><span class="line">    method_params <span class="type">varchar</span>(<span class="number">1000</span>) <span class="keyword">comment</span> <span class="string">&#x27;æ–¹æ³•å‚æ•°&#x27;</span>,</span><br><span class="line">    return_value <span class="type">varchar</span>(<span class="number">2000</span>) <span class="keyword">comment</span> <span class="string">&#x27;è¿”å›å€¼, å­˜å‚¨jsonæ ¼å¼&#x27;</span>,</span><br><span class="line">    cost_time <span class="type">int</span> <span class="keyword">comment</span> <span class="string">&#x27;æ–¹æ³•æ‰§è¡Œè€—æ—¶, å•ä½:ms&#x27;</span></span><br><span class="line">) <span class="keyword">comment</span> <span class="string">&#x27;æ“ä½œæ—¥å¿—è¡¨&#x27;</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¼•å…¥èµ„æ–™ä¸­å‡†å¤‡çš„å®ä½“ç±»</li>
</ul>
<figure class="highlight haxe"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="title class_"><span class="keyword">class</span> <span class="title">OperateLog</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id; <span class="comment">//ID</span></span><br><span class="line">    <span class="keyword">private</span> Integer operateEmpId; <span class="comment">//æ“ä½œäººID</span></span><br><span class="line">    <span class="keyword">private</span> LocalDateTime operateTime; <span class="comment">//æ“ä½œæ—¶é—´</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> className; <span class="comment">//æ“ä½œç±»å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> methodName; <span class="comment">//æ“ä½œæ–¹æ³•å</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> methodParams; <span class="comment">//æ“ä½œæ–¹æ³•å‚æ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">String</span> returnValue; <span class="comment">//æ“ä½œæ–¹æ³•è¿”å›å€¼</span></span><br><span class="line">    <span class="keyword">private</span> Long costTime; <span class="comment">//æ“ä½œè€—æ—¶</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>å¼•å…¥èµ„æ–™ä¸­å‡†å¤‡çš„æ—¥å¿—æ“ä½œMapperæ¥å£ <code>OperateLogMapper</code></li>
</ul>
<figure class="highlight coffeescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">package com.itheima.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.pojo.OperateLog;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Insert;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"></span><br><span class="line">@Mapper</span><br><span class="line">public interface OperateLogMapper &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="regexp">//</span>æ’å…¥æ—¥å¿—æ•°æ®</span><br><span class="line">    @Insert(<span class="string">&quot;insert into operate_log (operate_emp_id, operate_time, class_name, method_name, method_params, return_value, cost_time) &quot;</span> +</span><br><span class="line">            <span class="string">&quot;values (<span class="subst">#&#123;operateEmpId&#125;</span>, <span class="subst">#&#123;operateTime&#125;</span>, <span class="subst">#&#123;className&#125;</span>, <span class="subst">#&#123;methodName&#125;</span>, <span class="subst">#&#123;methodParams&#125;</span>, <span class="subst">#&#123;returnValue&#125;</span>, <span class="subst">#&#123;costTime&#125;</span>);&quot;</span>)</span><br><span class="line">    public <span class="keyword">void</span> insert(OperateLog log);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>1). è‡ªå®šä¹‰æ³¨è§£</strong> <strong><code>@LogOperation</code></strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  è‡ªå®šä¹‰æ³¨è§£ï¼Œç”¨äºæ ‡è¯†å“ªäº›æ–¹æ³•éœ€è¦è®°å½•æ—¥å¿—</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line">public <span class="variable">@interface</span> LogOperation &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>2). å®šä¹‰AOPè®°å½•æ—¥å¿—çš„åˆ‡é¢ç±»</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.itheima.anno.LogOperation;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mapper.OperateLogMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.pojo.OperateLog;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OperationLogAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OperateLogMapper operateLogMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¯ç»•é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Around(&quot;@annotation(log)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint joinPoint, LogOperation log)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">// è®°å½•å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> joinPoint.proceed();</span><br><span class="line">        <span class="comment">// å½“å‰æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">// è€—æ—¶</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">costTime</span> <span class="operator">=</span> endTime - startTime;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„å»ºæ—¥å¿—å¯¹è±¡</span></span><br><span class="line">        <span class="type">OperateLog</span> <span class="variable">operateLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OperateLog</span>();</span><br><span class="line">        operateLog.setOperateEmpId(getCurrentUserId()); <span class="comment">// éœ€è¦å®ç° getCurrentUserId æ–¹æ³•</span></span><br><span class="line">        operateLog.setOperateTime(LocalDateTime.now());</span><br><span class="line">        operateLog.setClassName(joinPoint.getTarget().getClass().getName());</span><br><span class="line">        operateLog.setMethodName(joinPoint.getSignature().getName());</span><br><span class="line">        operateLog.setMethodParams(Arrays.toString(joinPoint.getArgs()));</span><br><span class="line">        operateLog.setReturnValue(result.toString());</span><br><span class="line">        operateLog.setCostTime(costTime);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ’å…¥æ—¥å¿—</span></span><br><span class="line">        operateLogMapper.insert(operateLog);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ç¤ºä¾‹æ–¹æ³•ï¼Œè·å–å½“å‰ç”¨æˆ·ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getCurrentUserId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// è¿™é‡Œåº”è¯¥æ ¹æ®å®é™…æƒ…å†µä»è®¤è¯ä¿¡æ¯ä¸­è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ID</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>; <span class="comment">// ç¤ºä¾‹è¿”å›å€¼</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>3). åœ¨éœ€è¦è®°å½•çš„æ—¥å¿—çš„<strong><strong>Controllerå±‚</strong></strong>çš„æ–¹æ³•ä¸Šï¼ŒåŠ ä¸Šæ³¨è§£</strong> <strong><code>@LogOperation</code></strong></p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">@RestController</span></span><br><span class="line"><span class="variable">@RequestMapping</span>(<span class="string">&quot;/clazzs&quot;</span>)</span><br><span class="line">public class ClazzController &#123;</span><br><span class="line"></span><br><span class="line">    <span class="variable">@Autowired</span></span><br><span class="line">    private ClazzService clazzService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**     * æ–°å¢ç­çº§     */</span><span class="variable">@LogOperation</span></span><br><span class="line">    <span class="variable">@PostMapping</span></span><br><span class="line">    public Result <span class="built_in">save</span>(<span class="variable">@RequestBody</span> Clazz clazz)&#123;</span><br><span class="line">        <span class="selector-tag">clazzService</span><span class="selector-class">.save</span>(clazz);</span><br><span class="line">        <span class="selector-tag">return</span> <span class="selector-tag">Result</span><span class="selector-class">.success</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>
<p>é‡å¯SpringBootæœåŠ¡ï¼Œæµ‹è¯•æ“ä½œæ—¥å¿—è®°å½•åŠŸèƒ½ï¼š</p>
<p>æ‰“å¼€æµè§ˆå™¨ï¼Œé’ˆå¯¹äºå‘˜å·¥çš„æ•°æ®ã€éƒ¨é—¨çš„æ•°æ®è¿›è¡Œå¢åˆ æ”¹ä¹‹åã€‚æˆ‘ä»¬æ‰“å¼€æ•°æ®åº“è¡¨ç»“æ„å¯ä»¥æ¥çœ‹ä¸€ä¸‹ï¼š</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-499-1024x333.png" alt="img"></p>
<p>æˆ‘ä»¬ä¼šçœ‹åˆ°ï¼Œåœ¨æ•°æ®åº“è¡¨ä¸­ï¼Œå°±æ¸…æ™°çš„è®°å½•äº†è°ã€ä»€ä¹ˆæ—¶é—´ç‚¹ã€è°ƒç”¨äº†å“ªä¸ªç±»çš„å“ªä¸ªæ–¹æ³•ã€ä¼ å…¥äº†ä»€ä¹ˆå‚æ•°ã€è¿”å›äº†ä»€ä¹ˆæ•°æ®ï¼Œéƒ½æ¸…æ™°çš„è®°å½•åœ¨æ•°æ®åº“ä¸­äº†ã€‚</p>
<h3 id="3-5è¿æ¥ç‚¹">3.5è¿æ¥ç‚¹</h3>
<p>è¿æ¥ç‚¹å¯ä»¥ç®€å•ç†è§£ä¸ºå¯ä»¥è¢«AOPæ§åˆ¶çš„æ–¹æ³•ã€‚</p>
<p>æˆ‘ä»¬ç›®æ ‡å¯¹è±¡å½“ä¸­æ‰€æœ‰çš„æ–¹æ³•æ˜¯ä¸æ˜¯éƒ½æ˜¯å¯ä»¥è¢«AOPæ§åˆ¶çš„æ–¹æ³•ã€‚è€Œåœ¨SpringAOPå½“ä¸­ï¼Œè¿æ¥ç‚¹åˆç‰¹æŒ‡æ–¹æ³•çš„æ‰§è¡Œã€‚</p>
<p>åœ¨Springä¸­ç”¨JoinPointæŠ½è±¡äº†è¿æ¥ç‚¹ï¼Œç”¨å®ƒå¯ä»¥è·å¾—æ–¹æ³•æ‰§è¡Œæ—¶çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç›®æ ‡ç±»åã€æ–¹æ³•åã€æ–¹æ³•å‚æ•°ç­‰ã€‚</p>
<ul>
<li>å¯¹äº<code>@Around</code>é€šçŸ¥ï¼Œè·å–è¿æ¥ç‚¹ä¿¡æ¯åªèƒ½ä½¿ç”¨<code>ProceedingJoinPoint</code>ç±»å‹</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-500-1024x467.png" alt="img"></p>
<ul>
<li>å¯¹äºå…¶ä»–å››ç§é€šçŸ¥ï¼Œè·å–è¿æ¥ç‚¹ä¿¡æ¯åªèƒ½ä½¿ç”¨<code>JoinPoint</code>ï¼Œå®ƒæ˜¯<code>ProceedingJoinPoint</code>çš„çˆ¶ç±»å‹</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-501-1024x395.png" alt="img"></p>
<h3 id="3-6è·å–å½“å‰ç™»å½•å‘˜å·¥">3.6è·å–å½“å‰ç™»å½•å‘˜å·¥</h3>
<ol>
<li></li>
</ol>
<ul>
<li>å‘˜å·¥ç™»å½•æˆåŠŸåï¼Œå“ªé‡Œå­˜å‚¨çš„æœ‰å½“å‰ç™»å½•å‘˜å·¥çš„ä¿¡æ¯ï¼Ÿ ç»™å®¢æˆ·ç«¯æµè§ˆå™¨ä¸‹å‘çš„jwtä»¤ç‰Œä¸­</li>
<li>å¦‚ä½•ä»JWTä»¤ç‰Œä¸­è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„ä¿¡æ¯å‘¢ï¼Ÿ è·å–è¯·æ±‚å¤´ä¸­ä¼ é€’çš„jwtä»¤ç‰Œï¼Œå¹¶è§£æ</li>
<li>TokenFilter ä¸­å·²ç»è§£æäº†ä»¤ç‰Œçš„ä¿¡æ¯ï¼Œå¦‚ä½•ä¼ é€’ç»™AOPç¨‹åºã€Controllerã€Serviceå‘¢ï¼ŸThreadLocal</li>
</ul>
<h4 id="3-6-1ThreadLocal">3.6.1ThreadLocal</h4>
<ul>
<li>ThreadLocalå¹¶ä¸æ˜¯ä¸€ä¸ªThreadï¼Œè€Œæ˜¯Threadçš„å±€éƒ¨å˜é‡ã€‚</li>
<li>ThreadLocalä¸ºæ¯ä¸ªçº¿ç¨‹æä¾›ä¸€ä»½å•ç‹¬çš„å­˜å‚¨ç©ºé—´ï¼Œå…·æœ‰çº¿ç¨‹éš”ç¦»çš„æ•ˆæœï¼Œä¸åŒçš„çº¿ç¨‹ä¹‹é—´ä¸ä¼šç›¸äº’å¹²æ‰°ã€‚</li>
</ul>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-516-1024x199.png" alt="img"></p>
<ul>
<li>å¸¸è§æ–¹æ³•ï¼š
<ul>
<li><code>public void set(T value)</code> è®¾ç½®å½“å‰çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼</li>
<li><code>public T get()</code> è¿”å›å½“å‰çº¿ç¨‹æ‰€å¯¹åº”çš„çº¿ç¨‹å±€éƒ¨å˜é‡çš„å€¼</li>
<li><code>public void remove()</code> ç§»é™¤å½“å‰çº¿ç¨‹çš„çº¿ç¨‹å±€éƒ¨å˜é‡</li>
</ul>
</li>
</ul>
<h4 id="3-6-2è®°å½•å½“å‰ç™»å½•å‘˜å·¥">3.6.2è®°å½•å½“å‰ç™»å½•å‘˜å·¥</h4>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-517-1024x327.png" alt="img"></p>
<p>å…·ä½“æ“ä½œæ­¥éª¤ï¼š</p>
<ol>
<li>å®šä¹‰ThreadLocalæ“ä½œçš„å·¥å…·ç±»ï¼Œç”¨äºæ“ä½œå½“å‰ç™»å½•å‘˜å·¥IDã€‚</li>
</ol>
<p>åœ¨ <code>com.itheima.utils</code> å¼•å…¥å·¥å…·ç±» <code>CurrentHolder</code></p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">package com.itheima.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CurrentHolder</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> final ThreadLocal&lt;Integer&gt; CURRENT_LOCAL = <span class="keyword">new</span> ThreadLocal&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setCurrentId</span>(<span class="params">Integer employeeId</span>)</span> &#123;</span><br><span class="line">        CURRENT_LOCAL.<span class="keyword">set</span>(employeeId);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">getCurrentId</span>()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> CURRENT_LOCAL.<span class="keyword">get</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">remove</span>()</span> &#123;</span><br><span class="line">        CURRENT_LOCAL.<span class="keyword">remove</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>åœ¨<code>TokenFilter</code>ä¸­ï¼Œè§£æå®Œå½“å‰ç™»å½•å‘˜å·¥IDï¼Œå°†å…¶å­˜å…¥ThreadLocalï¼ˆç”¨å®Œä¹‹åéœ€å°†å…¶åˆ é™¤ï¼‰ã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.utils.CurrentHolder;</span><br><span class="line"><span class="keyword">import</span> com.itheima.utils.JwtUtils;</span><br><span class="line"><span class="keyword">import</span> io.jsonwebtoken.Claims;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebFilter;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> lombok.extern.slf4j.Slf4j;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@WebFilter(urlPatterns = &quot;/*&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TokenFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) servletRequest;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) servletResponse;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//1. è·å–è¯·æ±‚çš„urlåœ°å€</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">uri</span> <span class="operator">=</span> request.getRequestURI(); <span class="comment">// /employee/login</span></span><br><span class="line">        <span class="comment">//String url = request.getRequestURL().toString(); // http://localhost:8080/employee/login</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//2. åˆ¤æ–­æ˜¯å¦æ˜¯ç™»å½•è¯·æ±‚, å¦‚æœurlåœ°å€ä¸­åŒ…å« login, åˆ™è¯´æ˜æ˜¯ç™»å½•è¯·æ±‚, æ”¾è¡Œ</span></span><br><span class="line">        <span class="keyword">if</span> (uri.contains(<span class="string">&quot;login&quot;</span>)) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;ç™»å½•è¯·æ±‚, æ”¾è¡Œ&quot;</span>);</span><br><span class="line">            filterChain.doFilter(request, response);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//3. è·å–è¯·æ±‚ä¸­çš„token</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">token</span> <span class="operator">=</span> request.getHeader(<span class="string">&quot;token&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//4. åˆ¤æ–­tokenæ˜¯å¦ä¸ºç©º, å¦‚æœä¸ºç©º, å“åº”401çŠ¶æ€ç </span></span><br><span class="line">        <span class="keyword">if</span> (token == <span class="literal">null</span> || token.isEmpty()) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;tokenä¸ºç©º, å“åº”401çŠ¶æ€ç &quot;</span>);</span><br><span class="line">            response.setStatus(<span class="number">401</span>); <span class="comment">// å“åº”401çŠ¶æ€ç </span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//5. å¦‚æœtokenä¸ä¸ºç©º, è°ƒç”¨JWtUtilså·¥å…·ç±»çš„æ–¹æ³•è§£ætoken, å¦‚æœè§£æå¤±è´¥, å“åº”401çŠ¶æ€ç </span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtils.parseJWT(token);</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">empId</span> <span class="operator">=</span> Integer.valueOf(claims.get(<span class="string">&quot;id&quot;</span>).toString());</span><br><span class="line">            CurrentHolder.setCurrentId(empId);log.info(<span class="string">&quot;tokenè§£ææˆåŠŸ, æ”¾è¡Œ&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;tokenè§£æå¤±è´¥, å“åº”401çŠ¶æ€ç &quot;</span>);</span><br><span class="line">            response.setStatus(<span class="number">401</span>);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//6. æ”¾è¡Œ</span></span><br><span class="line">        filterChain.doFilter(request, response);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//7. æ¸…ç©ºå½“å‰çº¿ç¨‹ç»‘å®šçš„id</span></span><br><span class="line">        CurrentHolder.remove();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li>åœ¨AOPç¨‹åºä¸­ï¼Œä»ThreadLocalä¸­è·å–å½“å‰ç™»å½•å‘˜å·¥çš„IDã€‚</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.aop;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.anno.LogOperation;</span><br><span class="line"><span class="keyword">import</span> com.itheima.mapper.OperateLogMapper;</span><br><span class="line"><span class="keyword">import</span> com.itheima.pojo.OperateLog;</span><br><span class="line"><span class="keyword">import</span> com.itheima.utils.CurrentHolder;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.time.LocalDateTime;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OperationLogAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OperateLogMapper operateLogMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¯ç»•é€šçŸ¥</span></span><br><span class="line">    <span class="meta">@Around(&quot;@annotation(log)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint joinPoint, LogOperation log)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">// è®°å½•å¼€å§‹æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">startTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">// æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">result</span> <span class="operator">=</span> joinPoint.proceed();</span><br><span class="line">        <span class="comment">// å½“å‰æ—¶é—´</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">endTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        <span class="comment">// è€—æ—¶</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">costTime</span> <span class="operator">=</span> endTime - startTime;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ„å»ºæ—¥å¿—å¯¹è±¡</span></span><br><span class="line">        <span class="type">OperateLog</span> <span class="variable">operateLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OperateLog</span>();</span><br><span class="line">        operateLog.setOperateEmpId(getCurrentUserId()); <span class="comment">// éœ€è¦å®ç° getCurrentUserId æ–¹æ³•</span></span><br><span class="line">        operateLog.setOperateTime(LocalDateTime.now());</span><br><span class="line">        operateLog.setClassName(joinPoint.getTarget().getClass().getName());</span><br><span class="line">        operateLog.setMethodName(joinPoint.getSignature().getName());</span><br><span class="line">        operateLog.setMethodParams(Arrays.toString(joinPoint.getArgs()));</span><br><span class="line">        operateLog.setReturnValue(result.toString());</span><br><span class="line">        operateLog.setCostTime(costTime);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ’å…¥æ—¥å¿—</span></span><br><span class="line">        operateLogMapper.insert(operateLog);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç¤ºä¾‹æ–¹æ³•ï¼Œè·å–å½“å‰ç”¨æˆ·ID</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getCurrentUserId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> CurrentHolder.getCurrentId();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»£ç ä¼˜åŒ–å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬é‡æ–°å¯åŠ¨æœåŠ¡æµ‹è¯•ã€‚å°±å¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥è·å–åˆ°ä¸åŒçš„ç™»å½•ç”¨æˆ·ä¿¡æ¯äº†ã€‚</p>
<p><img src="https://www.legendkiller.xyz/wp-content/uploads/2025/06/image-502-1024x448.png" alt="img"></p>
<p>åœ¨åŒä¸€ä¸ªçº¿ç¨‹/åŒä¸€ä¸ªè¯·æ±‚ä¸­ï¼Œè¿›è¡Œæ•°æ®å…±äº«å°±å¯ä»¥ä½¿ç”¨ ThreadLocalã€‚</p>
<h1 id="å®Œç»“">å®Œç»“</h1>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>JavaWeb+AIï¼ˆå®æˆ˜ç¯‡  tliasæ•™åŠ¡ç³»ç»Ÿï¼‰</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="https://itgeqian.github.io/posts/11.html">https://itgeqian.github.io/posts/11.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a"><h>ä½œè€…</h><div class="post-copyright-cc-info"><h>geqian's BlogğŸ­</h></div></div><div class="post-copyright-c"><h>å‘å¸ƒäº</h><div class="post-copyright-cc-info"><h>2025-06-23</h></div></div><div class="post-copyright-u"><h>æ›´æ–°äº</h><div class="post-copyright-cc-info"><h>2025-06-26</h></div></div><div class="post-copyright-c"><h>è®¸å¯åè®®</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/JavaWeb/"><div class="tags-punctuation"><svg class="faa-tada icon" style="height:1.1em;width:1.1em;fill:currentColor;position:relative;top:2px;margin-right:3px" aria-hidden="true"><use xlink:href="#icon-sekuaibiaoqian"></use></svg></div>JavaWeb</a></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">æŠ•å–‚ä½œè€…</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://java-geqian.oss-cn-beijing.aliyuncs.com/%E5%BE%AE%E4%BF%A1PAY.jpg" target="_blank"><img class="post-qr-code-img" src="https://java-geqian.oss-cn-beijing.aliyuncs.com/%E5%BE%AE%E4%BF%A1PAY.jpg" alt="å¾®ä¿¡"/></a><div class="post-qr-code-desc">å¾®ä¿¡</div></li><li class="reward-item"><a href="https://java-geqian.oss-cn-beijing.aliyuncs.com/%E6%94%AF%E4%BB%98%E5%AE%9DPAY.jpg" target="_blank"><img class="post-qr-code-img" src="https://java-geqian.oss-cn-beijing.aliyuncs.com/%E6%94%AF%E4%BB%98%E5%AE%9DPAY.jpg" alt="æ”¯ä»˜å®"/></a><div class="post-qr-code-desc">æ”¯ä»˜å®</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.36/audio/aowu.m4a"></audio><script defer="defer" src="/js/coin.js"></script><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/2.html"><img class="prev-cover" src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">GQ Videoé¡¹ç›®éƒ¨ç½²</div></div></a></div><div class="next-post pull-right"><a href="/posts/10.html"><img class="next-cover" src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp" onerror="onerror=null;src='/assets/r2.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">JavaWeb+AIï¼ˆåŸºç¡€ç¯‡ï¼‰</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><div><a href="/posts/10.html" title="JavaWeb+AIï¼ˆåŸºç¡€ç¯‡ï¼‰"><img class="cover" src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp" alt="cover"><div class="content is-center"><div class="date"><i class="fas fa-history fa-fw"></i> 2025-06-22</div><div class="title">JavaWeb+AIï¼ˆåŸºç¡€ç¯‡ï¼‰</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><svg class="meta_icon" style="width:22px;height:22px;position:relative;top:5px"><use xlink:href="#icon-mulu1"></use></svg><span style="font-weight:bold">ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98-tlias%E6%95%99%E5%8A%A1%E7%B3%BB%E7%BB%9F"><span class="toc-text">4.é¡¹ç›®å®æˆ˜ tliasæ•™åŠ¡ç³»ç»Ÿ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%93%E9%83%A8%E9%97%A8%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-text">â€“éƒ¨é—¨ç®¡ç†æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%83%A8%E9%97%A8%E7%AE%A1%E7%90%86"><span class="toc-text">1.éƒ¨é—¨ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-text">1.1åŸºç¡€çŸ¥è¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-1%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E5%BC%80%E5%8F%91"><span class="toc-text">1.1.1å‰åç«¯åˆ†ç¦»å¼€å‘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-2Restful%E9%A3%8E%E6%A0%BC"><span class="toc-text">1.1.2Restfulé£æ ¼</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-3Apifox%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">1.1.3Apifoxçš„ä½¿ç”¨</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E5%B7%A5%E7%A8%8B%E6%90%AD%E5%BB%BA"><span class="toc-text">1.2å·¥ç¨‹æ­å»º</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E9%83%A8%E9%97%A8"><span class="toc-text">2.æŸ¥è¯¢éƒ¨é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E5%9F%BA%E6%9C%AC%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.1åŸºæœ¬å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1%E9%9C%80%E6%B1%82"><span class="toc-text">2.1.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">2.1.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.1.3ä»£ç å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-4%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95"><span class="toc-text">2.1.4æ¥å£æµ‹è¯•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-5%E6%95%B0%E6%8D%AE%E5%B0%81%E8%A3%85"><span class="toc-text">2.1.5æ•°æ®å°è£…</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E4%BA%86%E8%A7%A3%E5%89%8D%E5%90%8E%E7%AB%AF%E8%81%94%E8%B0%83%E6%97%B6%E7%9A%84%E8%AF%B7%E6%B1%82%E8%AE%BF%E9%97%AE%E8%BF%87%E7%A8%8B%EF%BC%88%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%EF%BC%89"><span class="toc-text">2.2äº†è§£å‰åç«¯è”è°ƒæ—¶çš„è¯·æ±‚è®¿é—®è¿‡ç¨‹ï¼ˆåå‘ä»£ç†ï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%88%A0%E9%99%A4%E9%83%A8%E9%97%A8"><span class="toc-text">3.åˆ é™¤éƒ¨é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E5%9F%BA%E6%9C%AC%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.1åŸºæœ¬å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-1%E9%9C%80%E6%B1%82"><span class="toc-text">3.1.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">3.1.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-3%E7%AE%80%E5%8D%95%E5%8F%82%E6%95%B0%E6%8E%A5%E6%94%B6"><span class="toc-text">3.1.3ç®€å•å‚æ•°æ¥æ”¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-4%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.1.4ä»£ç å®ç°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%96%B0%E5%A2%9E%E9%83%A8%E9%97%A8"><span class="toc-text">4.æ–°å¢éƒ¨é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E5%9F%BA%E6%9C%AC%E5%AE%9E%E7%8E%B0"><span class="toc-text">4.1åŸºæœ¬å®ç°</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-1%E9%9C%80%E6%B1%82"><span class="toc-text">4.1.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">4.1.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-3json%E5%8F%82%E6%95%B0%E6%8E%A5%E6%94%B6"><span class="toc-text">4.1.3jsonå‚æ•°æ¥æ”¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-1-4%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">4.1.4ä»£ç å®ç°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BF%AE%E6%94%B9%E9%83%A8%E9%97%A8"><span class="toc-text">5.ä¿®æ”¹éƒ¨é—¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1%E6%9F%A5%E8%AF%A2%E5%9B%9E%E6%98%BE"><span class="toc-text">5.1æŸ¥è¯¢å›æ˜¾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-1%E9%9C%80%E6%B1%82"><span class="toc-text">5.1.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">5.1.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-3%E8%B7%AF%E5%BE%84%E5%8F%82%E6%95%B0%E6%8E%A5%E6%94%B6"><span class="toc-text">5.1.3è·¯å¾„å‚æ•°æ¥æ”¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-1-4%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">5.1.4ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-text">5.2ä¿®æ”¹æ•°æ®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-1%E9%9C%80%E6%B1%82"><span class="toc-text">5.2.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">5.2.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-2-3%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">5.2.3ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-RequestMapping"><span class="toc-text">5.3@RequestMapping</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E6%97%A5%E5%BF%97%E6%8A%80%E6%9C%AF%EF%BC%88Logback%EF%BC%89"><span class="toc-text">6.æ—¥å¿—æŠ€æœ¯ï¼ˆLogbackï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="toc-text">6.1æ—¥å¿—æ¡†æ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2Logback%E5%85%A5%E9%97%A8"><span class="toc-text">6.2Logbackå…¥é—¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3Logback%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-text">6.3Logbacké…ç½®æ–‡ä»¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="toc-text">6.4æ—¥å¿—çº§åˆ«</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5%E6%A1%88%E4%BE%8B%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95"><span class="toc-text">6.5æ¡ˆä¾‹æ—¥å¿—è®°å½•</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%93%E5%91%98%E5%B7%A5%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-text">â€“å‘˜å·¥ç®¡ç†æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%91%98%E5%B7%A5%E5%88%97%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-text">1.å‘˜å·¥åˆ—è¡¨æŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">1.1å‡†å¤‡å·¥ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-1%E5%9F%BA%E7%A1%80%E4%BB%A3%E7%A0%81%E5%87%86%E5%A4%87"><span class="toc-text">1.1.1åŸºç¡€ä»£ç å‡†å¤‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-2SQL-Mapper%E6%8E%A5%E5%8F%A3"><span class="toc-text">1.1.2SQL&amp;Mapperæ¥å£</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">1.2åˆ†é¡µæŸ¥è¯¢</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3PageHelper%E5%88%86%E9%A1%B5%E6%8F%92%E4%BB%B6"><span class="toc-text">1.3PageHelperåˆ†é¡µæ’ä»¶</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1%E4%BB%8B%E7%BB%8D"><span class="toc-text">1.3.1ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.3.2ä»£ç å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-3pageHelper%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%9C%BA%E5%88%B6"><span class="toc-text">1.3.3pageHelperçš„å®ç°æœºåˆ¶</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4%E6%9D%A1%E4%BB%B6%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">1.4æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-1%E9%9C%80%E6%B1%82"><span class="toc-text">1.4.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">1.4.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-3%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.4.3ä»£ç å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-4%E7%A8%8B%E5%BA%8F%E4%BC%98%E5%8C%961%EF%BC%88%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%B0%81%E8%A3%85%E5%AE%9E%E4%BD%93%E7%B1%BB%E7%AE%80%E5%8C%96%E4%BB%A3%E7%A0%81%EF%BC%89"><span class="toc-text">1.4.4ç¨‹åºä¼˜åŒ–1ï¼ˆè¯·æ±‚å‚æ•°å°è£…å®ä½“ç±»ç®€åŒ–ä»£ç ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-4-5%E7%A8%8B%E5%BA%8F%E4%BC%98%E5%8C%962%EF%BC%88%E5%8A%A8%E6%80%81SQL%E6%94%B9%E9%80%A0%EF%BC%89"><span class="toc-text">1.4.5ç¨‹åºä¼˜åŒ–2ï¼ˆåŠ¨æ€SQLæ”¹é€ ï¼‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%96%B0%E5%A2%9E%E5%91%98%E5%B7%A5"><span class="toc-text">2.æ–°å¢å‘˜å·¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E9%9C%80%E6%B1%82"><span class="toc-text">2.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">2.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91"><span class="toc-text">2.3åŠŸèƒ½å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">2.3.1å‡†å¤‡å·¥ä½œ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2%E4%BF%9D%E5%AD%98%E5%91%98%E5%B7%A5%E5%9F%BA%E6%9C%AC%E4%BF%A1%E6%81%AF"><span class="toc-text">2.3.2ä¿å­˜å‘˜å·¥åŸºæœ¬ä¿¡æ¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3%E6%89%B9%E9%87%8F%E4%BF%9D%E5%AD%98%E5%B7%A5%E4%BD%9C%E7%BB%8F%E5%8E%86"><span class="toc-text">2.3.3æ‰¹é‡ä¿å­˜å·¥ä½œç»å†</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E5%88%86%E6%9E%90"><span class="toc-text">1.åˆ†æ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.ä»£ç å®ç°</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86"><span class="toc-text">3.äº‹åŠ¡ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-text">3.1é—®é¢˜åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E4%BB%8B%E7%BB%8D"><span class="toc-text">3.2ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E6%93%8D%E4%BD%9C"><span class="toc-text">3.3æ“ä½œ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4Spring%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%EF%BC%88-Transactional%EF%BC%89"><span class="toc-text">3.4Springäº‹åŠ¡ç®¡ç†ï¼ˆ@Transactionalï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-1%E5%88%86%E6%9E%90"><span class="toc-text">3.4.1åˆ†æ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-2Transactional%E6%B3%A8%E8%A7%A3"><span class="toc-text">3.4.2Transactionalæ³¨è§£</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-3Transactional%E7%9A%84%E4%B8%A4%E4%B8%AA%E9%87%8D%E8%A6%81%E5%B1%9E%E6%80%A7%E5%8F%8A%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9"><span class="toc-text">3.4.3Transactionalçš„ä¸¤ä¸ªé‡è¦å±æ€§åŠç›¸å…³çŸ¥è¯†ç‚¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-4-4%E4%BA%8B%E5%8A%A1%E5%9B%9B%E5%A4%A7%E7%89%B9%E6%80%A7"><span class="toc-text">3.4.4äº‹åŠ¡å››å¤§ç‰¹æ€§</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">4.æ–‡ä»¶ä¸Šä¼ </span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E7%AE%80%E4%BB%8B"><span class="toc-text">4.1ç®€ä»‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E6%9C%AC%E5%9C%B0%E5%AD%98%E5%82%A8"><span class="toc-text">4.2æœ¬åœ°å­˜å‚¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E9%98%BF%E9%87%8C%E4%BA%91OSS%EF%BC%88%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%EF%BC%89"><span class="toc-text">3.3é˜¿é‡Œäº‘OSSï¼ˆå¯¹è±¡å­˜å‚¨ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-1%E4%BB%8B%E7%BB%8D"><span class="toc-text">3.3.1ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-2%E9%9B%86%E6%88%90OSS"><span class="toc-text">3.3.2é›†æˆOSS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-3%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.3.3å…·ä½“å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-4%E5%8A%9F%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-text">3.3.4åŠŸèƒ½ä¼˜åŒ–</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-3-5-ConfigurationProperties%E8%AF%A6%E8%A7%A3"><span class="toc-text">3.3.5@ConfigurationPropertiesè¯¦è§£</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E5%88%A0%E9%99%A4%E5%91%98%E5%B7%A5"><span class="toc-text">5.åˆ é™¤å‘˜å·¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1%E9%9C%80%E6%B1%82"><span class="toc-text">5.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">5.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3%E5%8A%9F%E8%83%BD%E5%BC%80%E5%8F%91"><span class="toc-text">5.3åŠŸèƒ½å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-1Controller%E6%8E%A5%E6%94%B6%E5%8F%82%E6%95%B0"><span class="toc-text">5.3.1Controlleræ¥æ”¶å‚æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-2Service"><span class="toc-text">5.3.2Service</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-3-3Mapper"><span class="toc-text">5.3.3Mapper</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E4%BF%AE%E6%94%B9%E5%91%98%E5%B7%A5"><span class="toc-text">6.ä¿®æ”¹å‘˜å·¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E6%9F%A5%E8%AF%A2%E5%9B%9E%E6%98%BE"><span class="toc-text">6.1æŸ¥è¯¢å›æ˜¾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-1%E9%9C%80%E6%B1%82"><span class="toc-text">6.1.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">6.1.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-1-3%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">6.1.3ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E4%BF%AE%E6%94%B9%E5%91%98%E5%B7%A5"><span class="toc-text">6.2ä¿®æ”¹å‘˜å·¥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-1%E9%9C%80%E6%B1%82"><span class="toc-text">6.2.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">6.2.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-2-3%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">6.2.3ä»£ç å®ç°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">7.å¼‚å¸¸å¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1%E4%BB%8B%E7%BB%8D"><span class="toc-text">7.1ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-text">7.2è§£å†³æ–¹æ¡ˆ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%91%98%E5%B7%A5%E4%BF%A1%E6%81%AF%E7%BB%9F%E8%AE%A1"><span class="toc-text">8.å‘˜å·¥ä¿¡æ¯ç»Ÿè®¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1%E4%BB%8B%E7%BB%8D"><span class="toc-text">8.1ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2%E8%81%8C%E4%BD%8D%E7%BB%9F%E8%AE%A1"><span class="toc-text">8.2èŒä½ç»Ÿè®¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-1%E9%9C%80%E6%B1%82"><span class="toc-text">8.2.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">8.2.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3%E6%80%A7%E5%88%AB%E7%BB%9F%E8%AE%A1"><span class="toc-text">8.3æ€§åˆ«ç»Ÿè®¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-1%E9%9C%80%E6%B1%82"><span class="toc-text">8.3.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-3-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">8.3.2ä»£ç å®ç°</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%93%E7%8F%AD%E7%BA%A7%E7%AE%A1%E7%90%86"><span class="toc-text">â€“ç­çº§ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%9D%A1%E4%BB%B6%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">1.æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E9%9C%80%E6%B1%82"><span class="toc-text">1.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%91%98%E5%B7%A5"><span class="toc-text">2.æŸ¥è¯¢æ‰€æœ‰å‘˜å·¥</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E9%9C%80%E6%B1%82-2"><span class="toc-text">2.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%96%B0%E5%A2%9E%E7%8F%AD%E7%BA%A7%E4%BF%A1%E6%81%AF"><span class="toc-text">3.æ–°å¢ç­çº§ä¿¡æ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E9%9C%80%E6%B1%82"><span class="toc-text">3.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%A0%B9%E6%8D%AEID%E6%9F%A5%E8%AF%A2%E7%8F%AD%E7%BA%A7"><span class="toc-text">4.æ ¹æ®IDæŸ¥è¯¢ç­çº§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E9%9C%80%E6%B1%82"><span class="toc-text">4.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">4.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BF%AE%E6%94%B9%E7%8F%AD%E7%BA%A7%E4%BF%A1%E6%81%AF"><span class="toc-text">5.ä¿®æ”¹ç­çº§ä¿¡æ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1%E9%9C%80%E6%B1%82-2"><span class="toc-text">5.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">5.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%88%A0%E9%99%A4%E7%8F%AD%E7%BA%A7%E4%BF%A1%E6%81%AF"><span class="toc-text">6.åˆ é™¤ç­çº§ä¿¡æ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E9%9C%80%E6%B1%82"><span class="toc-text">6.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">6.2ä»£ç å®ç°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%93%E5%AD%A6%E5%91%98%E7%AE%A1%E7%90%86"><span class="toc-text">â€“å­¦å‘˜ç®¡ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E7%8F%AD%E7%BA%A7"><span class="toc-text">1.æŸ¥è¯¢æ‰€æœ‰ç­çº§</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E9%9C%80%E6%B1%82-2"><span class="toc-text">1.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">1.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E6%9D%A1%E4%BB%B6%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-text">2.æ¡ä»¶åˆ†é¡µæŸ¥è¯¢</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E9%9C%80%E6%B1%82-3"><span class="toc-text">2.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">2.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E6%96%B0%E5%A2%9E%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF"><span class="toc-text">3.æ–°å¢å­¦ç”Ÿä¿¡æ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E9%9C%80%E6%B1%82-2"><span class="toc-text">3.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">3.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%A0%B9%E6%8D%AEID%E6%9F%A5%E8%AF%A2%E5%AD%A6%E7%94%9F"><span class="toc-text">4.æ ¹æ®IDæŸ¥è¯¢å­¦ç”Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E9%9C%80%E6%B1%82-2"><span class="toc-text">4.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">4.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E4%BF%AE%E6%94%B9%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF"><span class="toc-text">5.ä¿®æ”¹å­¦ç”Ÿä¿¡æ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1%E9%9C%80%E6%B1%82-3"><span class="toc-text">5.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">5.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E5%88%A0%E9%99%A4%E5%AD%A6%E7%94%9F%E4%BF%A1%E6%81%AF"><span class="toc-text">6.åˆ é™¤å­¦ç”Ÿä¿¡æ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E9%9C%80%E6%B1%82-2"><span class="toc-text">6.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">6.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E8%BF%9D%E7%BA%AA%E5%A4%84%E7%90%86"><span class="toc-text">7.è¿çºªå¤„ç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1%E9%9C%80%E6%B1%82"><span class="toc-text">7.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">7.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-%E5%AD%A6%E5%91%98%E4%BF%A1%E6%81%AF%E7%BB%9F%E8%AE%A1"><span class="toc-text">8.å­¦å‘˜ä¿¡æ¯ç»Ÿè®¡</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1%E7%8F%AD%E7%BA%A7%E4%BA%BA%E6%95%B0%E7%BB%9F%E8%AE%A1%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">8.1ç­çº§äººæ•°ç»Ÿè®¡æ¥å£å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-1%E9%9C%80%E6%B1%82"><span class="toc-text">8.1.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-1-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">8.1.2ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2%E5%AD%A6%E5%91%98%E5%AD%A6%E5%8E%86%E4%BF%A1%E6%81%AF%E7%BB%9F%E8%AE%A1%E6%8E%A5%E5%8F%A3%E5%BC%80%E5%8F%91"><span class="toc-text">8.2å­¦å‘˜å­¦å†ä¿¡æ¯ç»Ÿè®¡æ¥å£å¼€å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-1%E9%9C%80%E6%B1%82-2"><span class="toc-text">8.2.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-2-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-text">8.2.2ä»£ç å®ç°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-%E5%88%A0%E9%99%A4%E9%83%A8%E9%97%A8%E5%AE%8C%E5%96%84"><span class="toc-text">9.åˆ é™¤éƒ¨é—¨å®Œå–„</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#9-1%E9%9C%80%E6%B1%82"><span class="toc-text">9.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-2%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">9.2ä»£ç å®ç°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E2%80%93%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81"><span class="toc-text">â€“ç™»å½•è®¤è¯</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E7%99%BB%E5%BD%95%E5%8A%9F%E8%83%BD"><span class="toc-text">1.ç™»å½•åŠŸèƒ½</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1%E9%9C%80%E6%B1%82-3"><span class="toc-text">1.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"><span class="toc-text">1.2å®ç°æ€è·¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">1.3ä»£ç å®ç°</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%99%BB%E5%BD%95%E6%95%88%E9%AA%8C"><span class="toc-text">2.ç™»å½•æ•ˆéªŒ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF"><span class="toc-text">2.1ä¼šè¯æŠ€æœ¯</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86"><span class="toc-text">2.1.1åŸºç¡€çŸ¥è¯†</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2%E4%B8%89%E7%A7%8D%E4%BC%9A%E8%AF%9D%E8%BF%BD%E8%B8%AA%E6%96%B9%E6%A1%88"><span class="toc-text">2.1.2ä¸‰ç§ä¼šè¯è¿½è¸ªæ–¹æ¡ˆ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-3%E6%96%B9%E6%A1%88%E4%B8%80%EF%BC%9ACookie"><span class="toc-text">2.1.3æ–¹æ¡ˆä¸€ï¼šCookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-4%E5%85%B3%E4%BA%8E%E8%B7%A8%E5%9F%9F"><span class="toc-text">2.1.4å…³äºè·¨åŸŸ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-5%E6%96%B9%E6%A1%88%E4%BA%8CSession"><span class="toc-text">2.1.5æ–¹æ¡ˆäºŒSession</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-6%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%9B%86%E7%BE%A4%E7%8E%AF%E5%A2%83%E4%B8%BA%E4%BD%95%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8Session%EF%BC%9F"><span class="toc-text">2.1.6æœåŠ¡å™¨é›†ç¾¤ç¯å¢ƒä¸ºä½•æ— æ³•ä½¿ç”¨Sessionï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-7%E6%96%B9%E6%A1%88%E4%B8%89%EF%BC%9A%E4%BB%A4%E7%89%8C%E6%8A%80%E6%9C%AF"><span class="toc-text">2.1.7æ–¹æ¡ˆä¸‰ï¼šä»¤ç‰ŒæŠ€æœ¯</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2JWT%E4%BB%A4%E7%89%8C"><span class="toc-text">2.2JWTä»¤ç‰Œ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1%E4%BB%8B%E7%BB%8D"><span class="toc-text">2.2.1ä»‹ç»</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-2%E7%94%9F%E6%88%90%E5%92%8C%E6%A0%A1%E9%AA%8C"><span class="toc-text">2.2.2ç”Ÿæˆå’Œæ ¡éªŒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-3%E7%99%BB%E5%BD%95%E6%97%B6%E4%B8%8B%E5%8F%91%E4%BB%A4%E7%89%8C"><span class="toc-text">2.2.3ç™»å½•æ—¶ä¸‹å‘ä»¤ç‰Œ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E8%BF%87%E6%BB%A4%E5%99%A8Filter"><span class="toc-text">2.3è¿‡æ»¤å™¨Filter</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1Filter%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">2.3.1Filterå¿«é€Ÿå…¥é—¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2%E7%99%BB%E5%BD%95%E6%A0%A1%E9%AA%8C%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-text">2.3.2ç™»å½•æ ¡éªŒè¿‡æ»¤å™¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-3%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">2.3.3ä»£ç å®ç°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-4Filter%E8%AF%A6%E8%A7%A3"><span class="toc-text">2.3.4Filterè¯¦è§£</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4%E6%8B%A6%E6%88%AA%E5%99%A8Interceptor"><span class="toc-text">2.4æ‹¦æˆªå™¨Interceptor</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"><span class="toc-text">2.4.1å¿«é€Ÿå…¥é—¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2%E7%89%8C%E6%A0%A1%E9%AA%8CInterceptor"><span class="toc-text">2.4.2ç‰Œæ ¡éªŒInterceptor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-3nterceptor%E8%AF%A6%E8%A7%A3"><span class="toc-text">2.4.3nterceptorè¯¦è§£</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-AOP%EF%BC%88%E9%9D%A2%E5%90%91%E5%88%87%E9%9D%A2%E7%BC%96%E7%A8%8B%EF%BC%89"><span class="toc-text">5.AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-AOP%E5%9F%BA%E7%A1%80"><span class="toc-text">1.AOPåŸºç¡€</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1AOP%E5%85%A5%E9%97%A8"><span class="toc-text">1.1AOPå…¥é—¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2AOP%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5"><span class="toc-text">1.2AOPæ ¸å¿ƒæ¦‚å¿µ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-AOP%E8%BF%9B%E9%98%B6"><span class="toc-text">2.AOPè¿›é˜¶</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B"><span class="toc-text">2.1é€šçŸ¥ç±»å‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E9%80%9A%E7%9F%A5%E9%A1%BA%E5%BA%8F"><span class="toc-text">2.2é€šçŸ¥é¡ºåº</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3%E5%88%87%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">2.3åˆ‡ç‚¹è¡¨è¾¾å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1execution"><span class="toc-text">2.3.1execution</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-2-annotation"><span class="toc-text">2.3.2@annotation</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-AOP%E6%A1%88%E4%BE%8B"><span class="toc-text">3.AOPæ¡ˆä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E9%9C%80%E6%B1%82-3"><span class="toc-text">3.1éœ€æ±‚</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E5%88%86%E6%9E%90"><span class="toc-text">3.2åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E6%AD%A5%E9%AA%A4"><span class="toc-text">3.3æ­¥éª¤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-text">3.4ä»£ç å®ç°</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5%E8%BF%9E%E6%8E%A5%E7%82%B9"><span class="toc-text">3.5è¿æ¥ç‚¹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E7%99%BB%E5%BD%95%E5%91%98%E5%B7%A5"><span class="toc-text">3.6è·å–å½“å‰ç™»å½•å‘˜å·¥</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-1ThreadLocal"><span class="toc-text">3.6.1ThreadLocal</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-6-2%E8%AE%B0%E5%BD%95%E5%BD%93%E5%89%8D%E7%99%BB%E5%BD%95%E5%91%98%E5%B7%A5"><span class="toc-text">3.6.2è®°å½•å½“å‰ç™»å½•å‘˜å·¥</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%8C%E7%BB%93"><span class="toc-text">å®Œç»“</span></a></li></ol></div></div></div></div></main><footer id="footer" style="background-color: transparent;"><div id="footer-wrap"><div id="ft"><div class="ft-item-1"><div class="t-top"><div class="t-t-l"><p class="ft-t t-l-t">æ ¼è¨€ğŸ§¬</p><div class="bg-ad"><div>å†çœ‹çœ‹é‚£ä¸ªå…‰ç‚¹ï¼Œå®ƒå°±åœ¨è¿™é‡Œï¼Œè¿™æ˜¯å®¶å›­ï¼Œè¿™æ˜¯æˆ‘ä»¬ â€”â€” ä½ æ‰€çˆ±çš„æ¯ä¸€ä¸ªäººï¼Œä½ è®¤è¯†çš„ä¸€ä¸ªäººï¼Œä½ å¬è¯´è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œæ›¾ç»æœ‰è¿‡çš„æ¯ä¸€ä¸ªäººï¼Œéƒ½åœ¨å®ƒä¸Šé¢åº¦è¿‡ä»–ä»¬çš„ä¸€ç”Ÿâœ¨</div><div class="btn-xz-box"><a class="btn-xz" target="_blank" rel="noopener" href="https://stellarium.org/">ç‚¹å‡»å¼€å¯æ˜Ÿè¾°ä¹‹æ—…</a></div></div></div><div class="t-t-r"><p class="ft-t t-l-t">çŒœä½ æƒ³çœ‹ğŸ’¡</p><ul class="ft-links"><li><a href="/comments/">ç•™ç‚¹ä»€ä¹ˆ</a><a href="/archives/">æ–‡ç« å½’æ¡£</a></li><li><a href="/categories/">æ–‡ç« åˆ†ç±»</a><a href="/tags/">æ–‡ç« æ ‡ç­¾</a></li><li><a href="/box/Gallery/">æˆ‘çš„ç”»å»Š</a><a href="/personal/bb/">æˆ‘çš„å” å¨</a></li><li><a href="/site/time/">å»ºè®¾è¿›ç¨‹</a><a href="/site/census/">ç½‘ç«™ç»Ÿè®¡</a></li></ul></div></div></div><div class="ft-item-2"><p class="ft-t">æ¨èå‹é“¾âŒ›</p><div class="ft-img-group"><div class="img-group-item"></div></div></div></div><div class="copyright"><span><b>&copy;2022-2025</b></span><span><b>&nbsp;&nbsp;By geqian's BlogğŸ­</b></span></div><div id="workboard"></div><p id="ghbdages"><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20230913" style="margin-inline:5px" title="æœ¬ç«™å·²åŠ å…¥èŒICPè±ªåå¥—é¤ï¼ŒèŒICPå¤‡20230913å·"><img src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/20230913.svg" alt=""/></a></p></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><a class="icon-V hidden" onclick="switchNightMode()" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><svg width="25" height="25" viewBox="0 0 1024 1024"><use id="modeicon" xlink:href="#icon-moon"></use></svg></a><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button><button class="share" type="button" title="å³é”®æ¨¡å¼" onclick="changeMouseMode()"><i class="fas fa-mouse"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog right_side"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button class="share" type="button" title="åˆ†äº«é“¾æ¥" onclick="share()"><i class="fas fa-share-nodes"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i><span id="percent">0<span>%</span></span></button><button id="go-down" type="button" title="ç›´è¾¾åº•éƒ¨" onclick="btf.scrollToDest(document.body.scrollHeight, 500)"><i class="fas fa-arrow-down"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">æœç´¢</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  æ•°æ®åº“åŠ è½½ä¸­</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div class="js-pjax" id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>å¤åˆ¶</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="fa fa-search"></i><span>ç™¾åº¦æœç´¢</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>ç²˜è´´</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>ç©ºé™è¯„è®º</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>å¤åˆ¶æœ¬æ–‡åœ°å€</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>è½¬åˆ°é“¾æ¥</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="javascript:rmf.saveAs()"><i class="fa fa-download"></i><span>ä¿å­˜å›¾ç‰‡</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>åœ¨æ–°çª—å£æ‰“å¼€</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>å¤åˆ¶å›¾ç‰‡é“¾æ¥</span></a></div><div class="rightMenu-group rightMenu-line"><a class="rightMenu-item" href="javascript:randomPost()"><i class="fa fa-paper-plane"></i><span>éšä¾¿é€›é€›</span></a><a class="rightMenu-item" href="javascript:switchNightMode();"><i class="fa fa-moon"></i><span>æ˜¼å¤œåˆ‡æ¢</span></a><a class="rightMenu-item" href="/personal/about/"><i class="fa fa-info-circle"></i><span>å…³äºåšå®¢</span></a><a class="rightMenu-item" href="javascript:toggleWinbox();"><i class="fas fa-cog"></i><span>ç¾åŒ–è®¾ç½®</span></a><a class="rightMenu-item" href="javascript:rmf.fullScreen();"><i class="fas fa-expand"></i><span>åˆ‡æ¢å…¨å±</span></a><a class="rightMenu-item" href="javascript:window.print();"><i class="fa-solid fa-print"></i><span>æ‰“å°é¡µé¢</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.staticfile.org/fancyapps-ui/4.0.31/fancybox.umd.min.js"></script><script src="/js/search/local-search.js"></script><script async="async">var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())
setTimeout(function(){preloader.endLoading();}, 5000);
document.getElementById('loading-box').addEventListener('click',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.min.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.staticfile.org/twikoo/1.6.8/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="https://cdn.staticfile.org/jquery/3.6.3/jquery.min.js"></script><script async src="https://cdn1.tianli0.top/npm/vue@2.6.14/dist/vue.min.js"></script><script async src="https://cdn1.tianli0.top/npm/element-ui@2.15.6/lib/index.js"></script><script async src="https://cdn.bootcdn.net/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script><script defer type="text/javascript" src="https://cdn1.tianli0.top/npm/sweetalert2@8.19.0/dist/sweetalert2.all.js"></script><script async src="//npm.elemecdn.com/pace-js@1.2.4/pace.min.js"></script><script defer src="https://cdn1.tianli0.top/gh/nextapps-de/winbox/dist/winbox.bundle.min.js"></script><script async src="//at.alicdn.com/t/c/font_3586335_hsivh70x0fm.js"></script><script async src="//at.alicdn.com/t/c/font_3636804_gr02jmjr3y9.js"></script><script async src="//at.alicdn.com/t/c/font_3612150_kfv55xn3u2g.js"></script><script async src="https://cdn.wpon.cn/2022-sucai/Gold-ingot.js"></script><canvas id="universe"></canvas><canvas id="snow"></canvas><script defer src="/js/fomal.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdnjs.cloudflare.com/ajax/libs/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn1.tianli0.top/npm/js-heo@1.0.12/metingjs/Meting.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show","#web_bg",".js-pjax","#bibi","body > title","#app","#tag-echarts","#posts-echart","#categories-echarts"]

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener scroll 
  window.tocScrollFn && window.removeEventListener('scroll', window.tocScrollFn)
  window.scrollCollect && window.removeEventListener('scroll', scrollCollect)

  typeof preloader === 'object' && preloader.initLoading()
  document.getElementById('rightside').style.cssText = "opacity: ''; transform: ''"
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

  typeof disqusjs === 'object' && disqusjs.destroy()
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --> <script data-pjax>if(document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    var parent = document.getElementById('recent-posts');
    var child = '<div class="recent-post-item" style="width:100%;height: auto"><div id="catalog_magnet"><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/å­¦ä¹ ç¬”è®°/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¡ geqianã®å­¦ä¹ ç¬”è®° (4)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/æ‚é¡¹/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ¼ geqianã®æ‚é¡¹ (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/JVM/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸœ geqianã®JUC (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/å­¦ä¹ ç¬”è®°/å‰ç«¯/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ›ï¸ geqianã®å‰ç«¯å·¥ç¨‹ (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/SSM/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ“– geqianã®SSM+SpringBootç³»åˆ— (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/å­¦ä¹ ç¬”è®°/SSM/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ“– geqianã®SSM+SpringBootç³»åˆ— (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/mysql/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">â“ geqianã®mysql (1)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item"><a class="magnet_link" href="https://itgeqian.github.io/categories/Redis/"><div class="magnet_link_context" style=""><span style="font-weight:500;flex:1">ğŸ’– geqianã®Redis (2)</span><span style="padding:0px 4px;border-radius: 8px;"><i class="fas fa-arrow-circle-right"></i></span></div></a></div><div class="magnet_item" style="visibility: hidden"></div><a class="magnet_link_more"  href="https://itgeqian.github.io/categories/" style="flex:1;text-align: center;margin-bottom: 10px;">æŸ¥çœ‹æ›´å¤š...</a></div></div>';
    console.log('å·²æŒ‚è½½magnet')
    parent.insertAdjacentHTML("afterbegin",child)}
     </script><style>#catalog_magnet{flex-wrap: wrap;display: flex;width:100%;justify-content:space-between;padding: 10px 10px 0 10px;align-content: flex-start;}.magnet_item{flex-basis: calc(33.333333333333336% - 5px);background: #e9e9e9;margin-bottom: 10px;border-radius: 8px;transition: all 0.2s ease-in-out;}.magnet_item:hover{background: var(--text-bg-hover)}.magnet_link_more{color:#555}.magnet_link{color:black}.magnet_link:hover{color:white}@media screen and (max-width: 600px) {.magnet_item {flex-basis: 100%;}}.magnet_link_context{display:flex;padding: 10px;font-size:16px;transition: all 0.2s ease-in-out;}.magnet_link_context:hover{padding: 10px 20px;}</style>
    <style></style><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/1.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-05-20</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/1.html&quot;);" href="javascript:void(0);" alt="">å®éªŒä¸‰ æ±½è½¦ç§Ÿèµç³»ç»Ÿçš„UMLè®¾è®¡å»ºæ¨¡ ï¼ˆå®Œç»“ï¼‰</a><div class="blog-slider__text">å…³äºæ±½è½¦ç§Ÿèµç³»ç»Ÿçš„UMLè®¾è®¡å»ºæ¨¡</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/1.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;posts/2.html&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://u7imgblog.oss-cn-hangzhou.aliyuncs.com/blogbackground/wallhaven-o59q2m.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2025-10-06</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;posts/2.html&quot;);" href="javascript:void(0);" alt="">GQ Videoé¡¹ç›®éƒ¨ç½²</a><div class="blog-slider__text">å¾®æœåŠ¡é¡¹ç›®GQ Videoé¡¹ç›®éƒ¨ç½²</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;posts/2.html&quot;);" href="javascript:void(0);" alt="">è¯¦æƒ…       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('å·²æŒ‚è½½butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper@1.0.12/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper@1.0.12/lib/swiper_init.js"></script><script data-pjax src="https://npm.elemecdn.com/hexo-filter-gitcalendar/lib/gitcalendar.js"></script><script data-pjax>
  function gitcalendar_injector_config(){
      var parent_div_git = document.getElementById('gitZone');
      var item_html = '<div class="recent-post-item" id="gitcalendarBar" style="width:100%;height:auto;padding:10px;"><style>#git_container{min-height: 320px}@media screen and (max-width:650px) {#git_container{min-height: 0px}}</style><div id="git_loading" style="width:10%;height:100%;margin:0 auto;display: block;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50" xml:space="preserve"><path fill="#d0d0d0" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z" transform="rotate(275.098 25 25)"><animatetransform attributeType="xml" attributeName="transform" type="rotate" from="0 25 25" to="360 25 25" dur="0.6s" repeatCount="indefinite"></animatetransform></path></svg><style>#git_container{display: none;}</style></div><div id="git_container"></div></div>';
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      console.log('å·²æŒ‚è½½gitcalendar')
      }

    if( document.getElementById('gitZone') && (location.pathname ==='/site/census/'|| '/site/census/' ==='all')){
        gitcalendar_injector_config()
        GitCalendarInit("/api?null",['#d9e0df', '#c6e0dc', '#a8dcd4', '#9adcd2', '#89ded1', '#77e0d0', '#5fdecb', '#47dcc6', '#39dcc3', '#1fdabe', '#00dab9'],'null')
    }
  </script><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '200ms');
    arr[i].setAttribute('data-wow-offset', '30');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script></div><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"log":false});</script></body></html>